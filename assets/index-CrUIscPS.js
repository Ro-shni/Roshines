(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();function NT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xh={exports:{}},yl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_;function qC(){if(V_)return yl;V_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var d in r)d!=="key"&&(l[d]=r[d])}else l=r;return r=l.ref,{$$typeof:n,type:s,key:c,ref:r!==void 0?r:null,props:l}}return yl.Fragment=e,yl.jsx=t,yl.jsxs=t,yl}var U_;function OC(){return U_||(U_=1,xh.exports=qC()),xh.exports}var C=OC(),Ih={exports:{}},we={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_;function zC(){if(L_)return we;L_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function R(q){return q===null||typeof q!="object"?null:(q=S&&q[S]||q["@@iterator"],typeof q=="function"?q:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,J={};function X(q,se,ce){this.props=q,this.context=se,this.refs=J,this.updater=ce||O}X.prototype.isReactComponent={},X.prototype.setState=function(q,se){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,se,"setState")},X.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function te(){}te.prototype=X.prototype;function j(q,se,ce){this.props=q,this.context=se,this.refs=J,this.updater=ce||O}var le=j.prototype=new te;le.constructor=j,B(le,X.prototype),le.isPureReactComponent=!0;var fe=Array.isArray;function Z(){}var M={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function b(q,se,ce){var ye=ce.ref;return{$$typeof:n,type:q,key:se,ref:ye!==void 0?ye:null,props:ce}}function P(q,se){return b(q.type,se,q.props)}function V(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function L(q){var se={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ce){return se[ce]})}var D=/\/+/g;function ae(q,se){return typeof q=="object"&&q!==null&&q.key!=null?L(""+q.key):se.toString(36)}function Ee(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(Z,Z):(q.status="pending",q.then(function(se){q.status==="pending"&&(q.status="fulfilled",q.value=se)},function(se){q.status==="pending"&&(q.status="rejected",q.reason=se)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function Y(q,se,ce,ye,Ie){var Pe=typeof q;(Pe==="undefined"||Pe==="boolean")&&(q=null);var He=!1;if(q===null)He=!0;else switch(Pe){case"bigint":case"string":case"number":He=!0;break;case"object":switch(q.$$typeof){case n:case e:He=!0;break;case v:return He=q._init,Y(He(q._payload),se,ce,ye,Ie)}}if(He)return Ie=Ie(q),He=ye===""?"."+ae(q,0):ye,fe(Ie)?(ce="",He!=null&&(ce=He.replace(D,"$&/")+"/"),Y(Ie,se,ce,"",function(ao){return ao})):Ie!=null&&(V(Ie)&&(Ie=P(Ie,ce+(Ie.key==null||q&&q.key===Ie.key?"":(""+Ie.key).replace(D,"$&/")+"/")+He)),se.push(Ie)),1;He=0;var kt=ye===""?".":ye+":";if(fe(q))for(var ht=0;ht<q.length;ht++)ye=q[ht],Pe=kt+ae(ye,ht),He+=Y(ye,se,ce,Pe,Ie);else if(ht=R(q),typeof ht=="function")for(q=ht.call(q),ht=0;!(ye=q.next()).done;)ye=ye.value,Pe=kt+ae(ye,ht++),He+=Y(ye,se,ce,Pe,Ie);else if(Pe==="object"){if(typeof q.then=="function")return Y(Ee(q),se,ce,ye,Ie);throw se=String(q),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return He}function re(q,se,ce){if(q==null)return q;var ye=[],Ie=0;return Y(q,ye,"","",function(Pe){return se.call(ce,Pe,Ie++)}),ye}function de(q){if(q._status===-1){var se=q._result;se=se(),se.then(function(ce){(q._status===0||q._status===-1)&&(q._status=1,q._result=ce)},function(ce){(q._status===0||q._status===-1)&&(q._status=2,q._result=ce)}),q._status===-1&&(q._status=0,q._result=se)}if(q._status===1)return q._result.default;throw q._result}var Ne=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Xe={map:re,forEach:function(q,se,ce){re(q,function(){se.apply(this,arguments)},ce)},count:function(q){var se=0;return re(q,function(){se++}),se},toArray:function(q){return re(q,function(se){return se})||[]},only:function(q){if(!V(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return we.Activity=T,we.Children=Xe,we.Component=X,we.Fragment=t,we.Profiler=r,we.PureComponent=j,we.StrictMode=s,we.Suspense=y,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,we.__COMPILER_RUNTIME={__proto__:null,c:function(q){return M.H.useMemoCache(q)}},we.cache=function(q){return function(){return q.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(q,se,ce){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var ye=B({},q.props),Ie=q.key;if(se!=null)for(Pe in se.key!==void 0&&(Ie=""+se.key),se)!N.call(se,Pe)||Pe==="key"||Pe==="__self"||Pe==="__source"||Pe==="ref"&&se.ref===void 0||(ye[Pe]=se[Pe]);var Pe=arguments.length-2;if(Pe===1)ye.children=ce;else if(1<Pe){for(var He=Array(Pe),kt=0;kt<Pe;kt++)He[kt]=arguments[kt+2];ye.children=He}return b(q.type,Ie,ye)},we.createContext=function(q){return q={$$typeof:c,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:l,_context:q},q},we.createElement=function(q,se,ce){var ye,Ie={},Pe=null;if(se!=null)for(ye in se.key!==void 0&&(Pe=""+se.key),se)N.call(se,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(Ie[ye]=se[ye]);var He=arguments.length-2;if(He===1)Ie.children=ce;else if(1<He){for(var kt=Array(He),ht=0;ht<He;ht++)kt[ht]=arguments[ht+2];Ie.children=kt}if(q&&q.defaultProps)for(ye in He=q.defaultProps,He)Ie[ye]===void 0&&(Ie[ye]=He[ye]);return b(q,Pe,Ie)},we.createRef=function(){return{current:null}},we.forwardRef=function(q){return{$$typeof:d,render:q}},we.isValidElement=V,we.lazy=function(q){return{$$typeof:v,_payload:{_status:-1,_result:q},_init:de}},we.memo=function(q,se){return{$$typeof:p,type:q,compare:se===void 0?null:se}},we.startTransition=function(q){var se=M.T,ce={};M.T=ce;try{var ye=q(),Ie=M.S;Ie!==null&&Ie(ce,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(Z,Ne)}catch(Pe){Ne(Pe)}finally{se!==null&&ce.types!==null&&(se.types=ce.types),M.T=se}},we.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},we.use=function(q){return M.H.use(q)},we.useActionState=function(q,se,ce){return M.H.useActionState(q,se,ce)},we.useCallback=function(q,se){return M.H.useCallback(q,se)},we.useContext=function(q){return M.H.useContext(q)},we.useDebugValue=function(){},we.useDeferredValue=function(q,se){return M.H.useDeferredValue(q,se)},we.useEffect=function(q,se){return M.H.useEffect(q,se)},we.useEffectEvent=function(q){return M.H.useEffectEvent(q)},we.useId=function(){return M.H.useId()},we.useImperativeHandle=function(q,se,ce){return M.H.useImperativeHandle(q,se,ce)},we.useInsertionEffect=function(q,se){return M.H.useInsertionEffect(q,se)},we.useLayoutEffect=function(q,se){return M.H.useLayoutEffect(q,se)},we.useMemo=function(q,se){return M.H.useMemo(q,se)},we.useOptimistic=function(q,se){return M.H.useOptimistic(q,se)},we.useReducer=function(q,se,ce){return M.H.useReducer(q,se,ce)},we.useRef=function(q){return M.H.useRef(q)},we.useState=function(q){return M.H.useState(q)},we.useSyncExternalStore=function(q,se,ce){return M.H.useSyncExternalStore(q,se,ce)},we.useTransition=function(){return M.H.useTransition()},we.version="19.2.1",we}var k_;function _m(){return k_||(k_=1,Ih.exports=zC()),Ih.exports}var _e=_m();const MT=NT(_e);var Rh={exports:{}},_l={},wh={exports:{}},bh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q_;function BC(){return q_||(q_=1,(function(n){function e(Y,re){var de=Y.length;Y.push(re);e:for(;0<de;){var Ne=de-1>>>1,Xe=Y[Ne];if(0<r(Xe,re))Y[Ne]=re,Y[de]=Xe,de=Ne;else break e}}function t(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var re=Y[0],de=Y.pop();if(de!==re){Y[0]=de;e:for(var Ne=0,Xe=Y.length,q=Xe>>>1;Ne<q;){var se=2*(Ne+1)-1,ce=Y[se],ye=se+1,Ie=Y[ye];if(0>r(ce,de))ye<Xe&&0>r(Ie,ce)?(Y[Ne]=Ie,Y[ye]=de,Ne=ye):(Y[Ne]=ce,Y[se]=de,Ne=se);else if(ye<Xe&&0>r(Ie,de))Y[Ne]=Ie,Y[ye]=de,Ne=ye;else break e}}return re}function r(Y,re){var de=Y.sortIndex-re.sortIndex;return de!==0?de:Y.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var y=[],p=[],v=1,T=null,S=3,R=!1,O=!1,B=!1,J=!1,X=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function le(Y){for(var re=t(p);re!==null;){if(re.callback===null)s(p);else if(re.startTime<=Y)s(p),re.sortIndex=re.expirationTime,e(y,re);else break;re=t(p)}}function fe(Y){if(B=!1,le(Y),!O)if(t(y)!==null)O=!0,Z||(Z=!0,L());else{var re=t(p);re!==null&&Ee(fe,re.startTime-Y)}}var Z=!1,M=-1,N=5,b=-1;function P(){return J?!0:!(n.unstable_now()-b<N)}function V(){if(J=!1,Z){var Y=n.unstable_now();b=Y;var re=!0;try{e:{O=!1,B&&(B=!1,te(M),M=-1),R=!0;var de=S;try{t:{for(le(Y),T=t(y);T!==null&&!(T.expirationTime>Y&&P());){var Ne=T.callback;if(typeof Ne=="function"){T.callback=null,S=T.priorityLevel;var Xe=Ne(T.expirationTime<=Y);if(Y=n.unstable_now(),typeof Xe=="function"){T.callback=Xe,le(Y),re=!0;break t}T===t(y)&&s(y),le(Y)}else s(y);T=t(y)}if(T!==null)re=!0;else{var q=t(p);q!==null&&Ee(fe,q.startTime-Y),re=!1}}break e}finally{T=null,S=de,R=!1}re=void 0}}finally{re?L():Z=!1}}}var L;if(typeof j=="function")L=function(){j(V)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,ae=D.port2;D.port1.onmessage=V,L=function(){ae.postMessage(null)}}else L=function(){X(V,0)};function Ee(Y,re){M=X(function(){Y(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(Y){switch(S){case 1:case 2:case 3:var re=3;break;default:re=S}var de=S;S=re;try{return Y()}finally{S=de}},n.unstable_requestPaint=function(){J=!0},n.unstable_runWithPriority=function(Y,re){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var de=S;S=Y;try{return re()}finally{S=de}},n.unstable_scheduleCallback=function(Y,re,de){var Ne=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Ne+de:Ne):de=Ne,Y){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=de+Xe,Y={id:v++,callback:re,priorityLevel:Y,startTime:de,expirationTime:Xe,sortIndex:-1},de>Ne?(Y.sortIndex=de,e(p,Y),t(y)===null&&Y===t(p)&&(B?(te(M),M=-1):B=!0,Ee(fe,de-Ne))):(Y.sortIndex=Xe,e(y,Y),O||R||(O=!0,Z||(Z=!0,L()))),Y},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(Y){var re=S;return function(){var de=S;S=re;try{return Y.apply(this,arguments)}finally{S=de}}}})(bh)),bh}var O_;function FC(){return O_||(O_=1,wh.exports=BC()),wh.exports}var Nh={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z_;function HC(){if(z_)return en;z_=1;var n=_m();function e(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(y,p,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:y,containerInfo:p,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,en.createPortal=function(y,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(y,p,null,v)},en.flushSync=function(y){var p=c.T,v=s.p;try{if(c.T=null,s.p=2,y)return y()}finally{c.T=p,s.p=v,s.d.f()}},en.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(y,p))},en.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},en.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var v=p.as,T=d(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,R=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?s.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:R}):v==="script"&&s.d.X(y,{crossOrigin:T,integrity:S,fetchPriority:R,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},en.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=d(p.as,p.crossOrigin);s.d.M(y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(y)},en.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,T=d(v,p.crossOrigin);s.d.L(y,v,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},en.preloadModule=function(y,p){if(typeof y=="string")if(p){var v=d(p.as,p.crossOrigin);s.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(y)},en.requestFormReset=function(y){s.d.r(y)},en.unstable_batchedUpdates=function(y,p){return y(p)},en.useFormState=function(y,p,v){return c.H.useFormState(y,p,v)},en.useFormStatus=function(){return c.H.useHostTransitionStatus()},en.version="19.2.1",en}var B_;function GC(){if(B_)return Nh.exports;B_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Nh.exports=HC(),Nh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function YC(){if(F_)return _l;F_=1;var n=FC(),e=_m(),t=GC();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var o=i,a=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(a=o.return),i=o.return;while(i)}return o.tag===3?a:null}function c(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function d(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function y(i){if(l(i)!==i)throw Error(s(188))}function p(i){var o=i.alternate;if(!o){if(o=l(i),o===null)throw Error(s(188));return o!==i?null:i}for(var a=i,u=o;;){var g=a.return;if(g===null)break;var _=g.alternate;if(_===null){if(u=g.return,u!==null){a=u;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===a)return y(g),i;if(_===u)return y(g),o;_=_.sibling}throw Error(s(188))}if(a.return!==u.return)a=g,u=_;else{for(var A=!1,I=g.child;I;){if(I===a){A=!0,a=g,u=_;break}if(I===u){A=!0,u=g,a=_;break}I=I.sibling}if(!A){for(I=_.child;I;){if(I===a){A=!0,a=_,u=g;break}if(I===u){A=!0,u=_,a=g;break}I=I.sibling}if(!A)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:o}function v(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=v(i),o!==null)return o;i=i.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),j=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function L(i){return i===null||typeof i!="object"?null:(i=V&&i[V]||i["@@iterator"],typeof i=="function"?i:null)}var D=Symbol.for("react.client.reference");function ae(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===D?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case B:return"Fragment";case X:return"Profiler";case J:return"StrictMode";case fe:return"Suspense";case Z:return"SuspenseList";case b:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case O:return"Portal";case j:return i.displayName||"Context";case te:return(i._context.displayName||"Context")+".Consumer";case le:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return o=i.displayName||null,o!==null?o:ae(i.type)||"Memo";case N:o=i._payload,i=i._init;try{return ae(i(o))}catch{}}return null}var Ee=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Ne=[],Xe=-1;function q(i){return{current:i}}function se(i){0>Xe||(i.current=Ne[Xe],Ne[Xe]=null,Xe--)}function ce(i,o){Xe++,Ne[Xe]=i.current,i.current=o}var ye=q(null),Ie=q(null),Pe=q(null),He=q(null);function kt(i,o){switch(ce(Pe,o),ce(Ie,i),ce(ye,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?i_(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=i_(o),i=s_(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}se(ye),ce(ye,i)}function ht(){se(ye),se(Ie),se(Pe)}function ao(i){i.memoizedState!==null&&ce(He,i);var o=ye.current,a=s_(o,i.type);o!==a&&(ce(Ie,i),ce(ye,a))}function $o(i){Ie.current===i&&(se(ye),se(Ie)),He.current===i&&(se(He),hl._currentValue=de)}var Xo,Wo;function ui(i){if(Xo===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);Xo=o&&o[1]||"",Wo=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xo+i+Wo}var ha=!1;function lo(i,o){if(!i||ha)return"";ha=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch($){var K=$}Reflect.construct(i,[],ne)}else{try{ne.call()}catch($){K=$}i.call(ne.prototype)}}else{try{throw Error()}catch($){K=$}(ne=i())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch($){if($&&K&&typeof $.stack=="string")return[$.stack,K.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),A=_[0],I=_[1];if(A&&I){var U=A.split(`
`),G=I.split(`
`);for(g=u=0;u<U.length&&!U[u].includes("DetermineComponentFrameRoot");)u++;for(;g<G.length&&!G[g].includes("DetermineComponentFrameRoot");)g++;if(u===U.length||g===G.length)for(u=U.length-1,g=G.length-1;1<=u&&0<=g&&U[u]!==G[g];)g--;for(;1<=u&&0<=g;u--,g--)if(U[u]!==G[g]){if(u!==1||g!==1)do if(u--,g--,0>g||U[u]!==G[g]){var W=`
`+U[u].replace(" at new "," at ");return i.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",i.displayName)),W}while(1<=u&&0<=g);break}}}finally{ha=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?ui(a):""}function ma(i,o){switch(i.tag){case 26:case 27:case 5:return ui(i.type);case 16:return ui("Lazy");case 13:return i.child!==o&&o!==null?ui("Suspense Fallback"):ui("Suspense");case 19:return ui("SuspenseList");case 0:case 15:return lo(i.type,!1);case 11:return lo(i.type.render,!1);case 1:return lo(i.type,!0);case 31:return ui("Activity");default:return""}}function pa(i){try{var o="",a=null;do o+=ma(i,a),a=i,i=i.return;while(i);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var xt=Object.prototype.hasOwnProperty,qt=n.unstable_scheduleCallback,cs=n.unstable_cancelCallback,Rf=n.unstable_shouldYield,Wl=n.unstable_requestPaint,rn=n.unstable_now,uo=n.unstable_getCurrentPriorityLevel,ga=n.unstable_ImmediatePriority,ya=n.unstable_UserBlockingPriority,fs=n.unstable_NormalPriority,wf=n.unstable_LowPriority,Zl=n.unstable_IdlePriority,jl=n.log,eu=n.unstable_setDisableYieldValue,Kn=null,Yt=null;function Nn(i){if(typeof jl=="function"&&eu(i),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(Kn,i)}catch{}}var vt=Math.clz32?Math.clz32:nu,tu=Math.log,Zo=Math.LN2;function nu(i){return i>>>=0,i===0?32:31-(tu(i)/Zo|0)|0}var ci=256,co=262144,It=4194304;function fi(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function di(i,o,a){var u=i.pendingLanes;if(u===0)return 0;var g=0,_=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var I=u&134217727;return I!==0?(u=I&~_,u!==0?g=fi(u):(A&=I,A!==0?g=fi(A):a||(a=I&~i,a!==0&&(g=fi(a))))):(I=u&~_,I!==0?g=fi(I):A!==0?g=fi(A):a||(a=u&~i,a!==0&&(g=fi(a)))),g===0?0:o!==0&&o!==g&&(o&_)===0&&(_=g&-g,a=o&-o,_>=a||_===32&&(a&4194048)!==0)?o:g}function Qn(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function bf(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iu(){var i=It;return It<<=1,(It&62914560)===0&&(It=4194304),i}function hi(i){for(var o=[],a=0;31>a;a++)o.push(i);return o}function fo(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Nf(i,o,a,u,g,_){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var I=i.entanglements,U=i.expirationTimes,G=i.hiddenUpdates;for(a=A&~a;0<a;){var W=31-vt(a),ne=1<<W;I[W]=0,U[W]=-1;var K=G[W];if(K!==null)for(G[W]=null,W=0;W<K.length;W++){var $=K[W];$!==null&&($.lane&=-536870913)}a&=~ne}u!==0&&ho(i,u,0),_!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=_&~(A&~o))}function ho(i,o,a){i.pendingLanes|=o,i.suspendedLanes&=~o;var u=31-vt(o);i.entangledLanes|=o,i.entanglements[u]=i.entanglements[u]|1073741824|a&261930}function _a(i,o){var a=i.entangledLanes|=o;for(i=i.entanglements;a;){var u=31-vt(a),g=1<<u;g&o|i[u]&o&&(i[u]|=o),a&=~g}}function va(i,o){var a=o&-o;return a=(a&42)!==0?1:mo(a),(a&(i.suspendedLanes|o))!==0?0:a}function mo(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function ki(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function su(){var i=re.p;return i!==0?i:(i=window.event,i===void 0?32:R_(i.type))}function $n(i,o){var a=re.p;try{return re.p=i,o()}finally{re.p=a}}var Xn=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Xn,Bt="__reactProps$"+Xn,mi="__reactContainer$"+Xn,jo="__reactEvents$"+Xn,Mf="__reactListeners$"+Xn,ou="__reactHandles$"+Xn,ru="__reactResources$"+Xn,pi="__reactMarker$"+Xn;function er(i){delete i[Rt],delete i[Bt],delete i[jo],delete i[Mf],delete i[ou]}function gi(i){var o=i[Rt];if(o)return o;for(var a=i.parentNode;a;){if(o=a[mi]||a[Rt]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(i=f_(i);i!==null;){if(a=i[Rt])return a;i=f_(i)}return o}i=a,a=i.parentNode}return null}function Mn(i){if(i=i[Rt]||i[mi]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function Tn(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function yi(i){var o=i[ru];return o||(o=i[ru]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function wt(i){i[pi]=!0}var Ta=new Set,Ea={};function _i(i,o){vi(i,o),vi(i+"Capture",o)}function vi(i,o){for(Ea[i]=o,i=0;i<o.length;i++)Ta.add(o[i])}var Sa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Aa={},Ca={};function au(i){return xt.call(Ca,i)?!0:xt.call(Aa,i)?!1:Sa.test(i)?Ca[i]=!0:(Aa[i]=!0,!1)}function tr(i,o,a){if(au(o))if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+a)}}function En(i,o,a){if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+a)}}function bt(i,o,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(o,a,""+u)}}function Ft(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ds(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function xa(i,o,a){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,_=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(A){a=""+A,_.call(this,A)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function et(i){if(!i._valueTracker){var o=ds(i)?"checked":"value";i._valueTracker=xa(i,o,""+i[o])}}function po(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var a=o.getValue(),u="";return i&&(u=ds(i)?i.checked?"true":"false":i.value),i=u,i!==a?(o.setValue(i),!0):!1}function Ti(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var go=/[\n"\\]/g;function un(i){return i.replace(go,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function nr(i,o,a,u,g,_,A,I){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),o!=null?A==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Ft(o)):i.value!==""+Ft(o)&&(i.value=""+Ft(o)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),o!=null?Ia(i,A,Ft(o)):a!=null?Ia(i,A,Ft(a)):u!=null&&i.removeAttribute("value"),g==null&&_!=null&&(i.defaultChecked=!!_),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.name=""+Ft(I):i.removeAttribute("name")}function lu(i,o,a,u,g,_,A,I){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),o!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){et(i);return}a=a!=null?""+Ft(a):"",o=o!=null?""+Ft(o):a,I||o===i.value||(i.value=o),i.defaultValue=o}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=I?i.checked:!!u,i.defaultChecked=!!u,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),et(i)}function Ia(i,o,a){o==="number"&&Ti(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function hs(i,o,a,u){if(i=i.options,o){o={};for(var g=0;g<a.length;g++)o["$"+a[g]]=!0;for(a=0;a<i.length;a++)g=o.hasOwnProperty("$"+i[a].value),i[a].selected!==g&&(i[a].selected=g),g&&u&&(i[a].defaultSelected=!0)}else{for(a=""+Ft(a),o=null,g=0;g<i.length;g++){if(i[g].value===a){i[g].selected=!0,u&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function uu(i,o,a){if(o!=null&&(o=""+Ft(o),o!==i.value&&(i.value=o),a==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=a!=null?""+Ft(a):""}function ms(i,o,a,u){if(o==null){if(u!=null){if(a!=null)throw Error(s(92));if(Ee(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),o=a}a=Ft(o),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u),et(i)}function cn(i,o){if(o){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=o;return}}i.textContent=o}var cu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ra(i,o,a){var u=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":u?i.setProperty(o,a):typeof a!="number"||a===0||cu.has(o)?o==="float"?i.cssFloat=a:i[o]=(""+a).trim():i[o]=a+"px"}function wa(i,o,a){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var g in o)u=o[g],o.hasOwnProperty(g)&&a[g]!==u&&Ra(i,g,u)}else for(var _ in o)o.hasOwnProperty(_)&&Ra(i,_,o[_])}function ir(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ps=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sr(i){return ps.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Wn(){}var ba=null;function Dn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var gs=null,Ei=null;function yo(i){var o=Mn(i);if(o&&(i=o.stateNode)){var a=i[Bt]||null;e:switch(i=o.stateNode,o.type){case"input":if(nr(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+un(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var u=a[o];if(u!==i&&u.form===i.form){var g=u[Bt]||null;if(!g)throw Error(s(90));nr(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<a.length;o++)u=a[o],u.form===i.form&&po(u)}break e;case"textarea":uu(i,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&hs(i,!!a.multiple,o,!1)}}}var or=!1;function ys(i,o,a){if(or)return i(o,a);or=!0;try{var u=i(o);return u}finally{if(or=!1,(gs!==null||Ei!==null)&&(sc(),gs&&(o=gs,i=Ei,Ei=gs=null,yo(o),i)))for(o=0;o<i.length;o++)yo(i[o])}}function Zn(i,o){var a=i.stateNode;if(a===null)return null;var u=a[Bt]||null;if(u===null)return null;a=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,o,typeof a));return a}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_o=!1;if(Pn)try{var it={};Object.defineProperty(it,"passive",{get:function(){_o=!0}}),window.addEventListener("test",it,it),window.removeEventListener("test",it,it)}catch{_o=!1}var Si=null,Na=null,vo=null;function Ma(){if(vo)return vo;var i,o=Na,a=o.length,u,g="value"in Si?Si.value:Si.textContent,_=g.length;for(i=0;i<a&&o[i]===g[i];i++);var A=a-i;for(u=1;u<=A&&o[a-u]===g[_-u];u++);return vo=g.slice(i,1<u?1-u:void 0)}function To(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function qi(){return!0}function jn(){return!1}function Jt(i){function o(a,u,g,_,A){this._reactName=a,this._targetInst=g,this.type=u,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(a=i[I],this[I]=a?a(_):_[I]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?qi:jn,this.isPropagationStopped=jn,this}return T(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=qi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=qi)},persist:function(){},isPersistent:qi}),o}var Oi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ai=Jt(Oi),_s=T({},Oi,{view:0,detail:0}),Da=Jt(_s),vs,rr,Ci,ar=T({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ts,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ci&&(Ci&&i.type==="mousemove"?(vs=i.screenX-Ci.screenX,rr=i.screenY-Ci.screenY):rr=vs=0,Ci=i),vs)},movementY:function(i){return"movementY"in i?i.movementY:rr}}),Pa=Jt(ar),Eo=T({},ar,{dataTransfer:0}),du=Jt(Eo),hu=T({},_s,{relatedTarget:0}),So=Jt(hu),Va=T({},Oi,{animationName:0,elapsedTime:0,pseudoElement:0}),mu=Jt(Va),lr=T({},Oi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),pu=Jt(lr),gu=T({},Oi,{data:0}),xi=Jt(gu),yu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_u={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tu(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=vu[i])?!!o[i]:!1}function Ts(){return Tu}var an=T({},_s,{key:function(i){if(i.key){var o=yu[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=To(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?_u[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ts,charCode:function(i){return i.type==="keypress"?To(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?To(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Eu=Jt(an),Su=T({},ar,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zi=Jt(Su),m=T({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ts}),E=Jt(m),x=T({},Oi,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Jt(x),F=T({},ar,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Jt(F),ue=T({},Oi,{newState:0,oldState:0}),Me=Jt(ue),Tt=[9,13,27,32],We=Pn&&"CompositionEvent"in window,mt=null;Pn&&"documentMode"in document&&(mt=document.documentMode);var Vn=Pn&&"TextEvent"in window&&!mt,Ii=Pn&&(!We||mt&&8<mt&&11>=mt),ei=" ",ti=!1;function Ao(i,o){switch(i){case"keyup":return Tt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ur(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var cr=!1;function lA(i,o){switch(i){case"compositionend":return ur(o);case"keypress":return o.which!==32?null:(ti=!0,ei);case"textInput":return i=o.data,i===ei&&ti?null:i;default:return null}}function uA(i,o){if(cr)return i==="compositionend"||!We&&Ao(i,o)?(i=Ma(),vo=Na=Si=null,cr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ii&&o.locale!=="ko"?null:o.data;default:return null}}var cA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mp(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!cA[i.type]:o==="textarea"}function pp(i,o,a,u){gs?Ei?Ei.push(u):Ei=[u]:gs=u,o=fc(o,"onChange"),0<o.length&&(a=new Ai("onChange","change",null,a,u),i.push({event:a,listeners:o}))}var Ua=null,La=null;function fA(i){Wy(i,0)}function Au(i){var o=Tn(i);if(po(o))return i}function gp(i,o){if(i==="change")return o}var yp=!1;if(Pn){var Df;if(Pn){var Pf="oninput"in document;if(!Pf){var _p=document.createElement("div");_p.setAttribute("oninput","return;"),Pf=typeof _p.oninput=="function"}Df=Pf}else Df=!1;yp=Df&&(!document.documentMode||9<document.documentMode)}function vp(){Ua&&(Ua.detachEvent("onpropertychange",Tp),La=Ua=null)}function Tp(i){if(i.propertyName==="value"&&Au(La)){var o=[];pp(o,La,i,Dn(i)),ys(fA,o)}}function dA(i,o,a){i==="focusin"?(vp(),Ua=o,La=a,Ua.attachEvent("onpropertychange",Tp)):i==="focusout"&&vp()}function hA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Au(La)}function mA(i,o){if(i==="click")return Au(o)}function pA(i,o){if(i==="input"||i==="change")return Au(o)}function gA(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Sn=typeof Object.is=="function"?Object.is:gA;function ka(i,o){if(Sn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var a=Object.keys(i),u=Object.keys(o);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var g=a[u];if(!xt.call(o,g)||!Sn(i[g],o[g]))return!1}return!0}function Ep(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Sp(i,o){var a=Ep(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=o&&u>=o)return{node:a,offset:o-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ep(a)}}function Ap(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Ap(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Cp(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Ti(i.document);o instanceof i.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)i=o.contentWindow;else break;o=Ti(i.document)}return o}function Vf(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var yA=Pn&&"documentMode"in document&&11>=document.documentMode,fr=null,Uf=null,qa=null,Lf=!1;function xp(i,o,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Lf||fr==null||fr!==Ti(u)||(u=fr,"selectionStart"in u&&Vf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),qa&&ka(qa,u)||(qa=u,u=fc(Uf,"onSelect"),0<u.length&&(o=new Ai("onSelect","select",null,o,a),i.push({event:o,listeners:u}),o.target=fr)))}function Co(i,o){var a={};return a[i.toLowerCase()]=o.toLowerCase(),a["Webkit"+i]="webkit"+o,a["Moz"+i]="moz"+o,a}var dr={animationend:Co("Animation","AnimationEnd"),animationiteration:Co("Animation","AnimationIteration"),animationstart:Co("Animation","AnimationStart"),transitionrun:Co("Transition","TransitionRun"),transitionstart:Co("Transition","TransitionStart"),transitioncancel:Co("Transition","TransitionCancel"),transitionend:Co("Transition","TransitionEnd")},kf={},Ip={};Pn&&(Ip=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);function xo(i){if(kf[i])return kf[i];if(!dr[i])return i;var o=dr[i],a;for(a in o)if(o.hasOwnProperty(a)&&a in Ip)return kf[i]=o[a];return i}var Rp=xo("animationend"),wp=xo("animationiteration"),bp=xo("animationstart"),_A=xo("transitionrun"),vA=xo("transitionstart"),TA=xo("transitioncancel"),Np=xo("transitionend"),Mp=new Map,qf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qf.push("scrollEnd");function ni(i,o){Mp.set(i,o),_i(o,[i])}var Cu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Un=[],hr=0,Of=0;function xu(){for(var i=hr,o=Of=hr=0;o<i;){var a=Un[o];Un[o++]=null;var u=Un[o];Un[o++]=null;var g=Un[o];Un[o++]=null;var _=Un[o];if(Un[o++]=null,u!==null&&g!==null){var A=u.pending;A===null?g.next=g:(g.next=A.next,A.next=g),u.pending=g}_!==0&&Dp(a,g,_)}}function Iu(i,o,a,u){Un[hr++]=i,Un[hr++]=o,Un[hr++]=a,Un[hr++]=u,Of|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function zf(i,o,a,u){return Iu(i,o,a,u),Ru(i)}function Io(i,o){return Iu(i,null,null,o),Ru(i)}function Dp(i,o,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var g=!1,_=i.return;_!==null;)_.childLanes|=a,u=_.alternate,u!==null&&(u.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(g=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,g&&o!==null&&(g=31-vt(a),i=_.hiddenUpdates,u=i[g],u===null?i[g]=[o]:u.push(o),o.lane=a|536870912),_):null}function Ru(i){if(50<rl)throw rl=0,$d=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var mr={};function EA(i,o,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(i,o,a,u){return new EA(i,o,a,u)}function Bf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Bi(i,o){var a=i.alternate;return a===null?(a=An(i.tag,o,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=o,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,o=i.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Pp(i,o){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,o=a.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function wu(i,o,a,u,g,_){var A=0;if(u=i,typeof i=="function")Bf(i)&&(A=1);else if(typeof i=="string")A=IC(i,a,ye.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case b:return i=An(31,a,o,g),i.elementType=b,i.lanes=_,i;case B:return Ro(a.children,g,_,o);case J:A=8,g|=24;break;case X:return i=An(12,a,o,g|2),i.elementType=X,i.lanes=_,i;case fe:return i=An(13,a,o,g),i.elementType=fe,i.lanes=_,i;case Z:return i=An(19,a,o,g),i.elementType=Z,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case j:A=10;break e;case te:A=9;break e;case le:A=11;break e;case M:A=14;break e;case N:A=16,u=null;break e}A=29,a=Error(s(130,i===null?"null":typeof i,"")),u=null}return o=An(A,a,o,g),o.elementType=i,o.type=u,o.lanes=_,o}function Ro(i,o,a,u){return i=An(7,i,u,o),i.lanes=a,i}function Ff(i,o,a){return i=An(6,i,null,o),i.lanes=a,i}function Vp(i){var o=An(18,null,null,0);return o.stateNode=i,o}function Hf(i,o,a){return o=An(4,i.children!==null?i.children:[],i.key,o),o.lanes=a,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Up=new WeakMap;function Ln(i,o){if(typeof i=="object"&&i!==null){var a=Up.get(i);return a!==void 0?a:(o={value:i,source:o,stack:pa(o)},Up.set(i,o),o)}return{value:i,source:o,stack:pa(o)}}var pr=[],gr=0,bu=null,Oa=0,kn=[],qn=0,Es=null,Ri=1,wi="";function Fi(i,o){pr[gr++]=Oa,pr[gr++]=bu,bu=i,Oa=o}function Lp(i,o,a){kn[qn++]=Ri,kn[qn++]=wi,kn[qn++]=Es,Es=i;var u=Ri;i=wi;var g=32-vt(u)-1;u&=~(1<<g),a+=1;var _=32-vt(o)+g;if(30<_){var A=g-g%5;_=(u&(1<<A)-1).toString(32),u>>=A,g-=A,Ri=1<<32-vt(o)+g|a<<g|u,wi=_+i}else Ri=1<<_|a<<g|u,wi=i}function Gf(i){i.return!==null&&(Fi(i,1),Lp(i,1,0))}function Yf(i){for(;i===bu;)bu=pr[--gr],pr[gr]=null,Oa=pr[--gr],pr[gr]=null;for(;i===Es;)Es=kn[--qn],kn[qn]=null,wi=kn[--qn],kn[qn]=null,Ri=kn[--qn],kn[qn]=null}function kp(i,o){kn[qn++]=Ri,kn[qn++]=wi,kn[qn++]=Es,Ri=o.id,wi=o.overflow,Es=i}var Kt=null,ct=null,Fe=!1,Ss=null,On=!1,Jf=Error(s(519));function As(i){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw za(Ln(o,i)),Jf}function qp(i){var o=i.stateNode,a=i.type,u=i.memoizedProps;switch(o[Rt]=i,o[Bt]=u,a){case"dialog":ke("cancel",o),ke("close",o);break;case"iframe":case"object":case"embed":ke("load",o);break;case"video":case"audio":for(a=0;a<ll.length;a++)ke(ll[a],o);break;case"source":ke("error",o);break;case"img":case"image":case"link":ke("error",o),ke("load",o);break;case"details":ke("toggle",o);break;case"input":ke("invalid",o),lu(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ke("invalid",o);break;case"textarea":ke("invalid",o),ms(o,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||u.suppressHydrationWarning===!0||t_(o.textContent,a)?(u.popover!=null&&(ke("beforetoggle",o),ke("toggle",o)),u.onScroll!=null&&ke("scroll",o),u.onScrollEnd!=null&&ke("scrollend",o),u.onClick!=null&&(o.onclick=Wn),o=!0):o=!1,o||As(i,!0)}function Op(i){for(Kt=i.return;Kt;)switch(Kt.tag){case 5:case 31:case 13:On=!1;return;case 27:case 3:On=!0;return;default:Kt=Kt.return}}function yr(i){if(i!==Kt)return!1;if(!Fe)return Op(i),Fe=!0,!1;var o=i.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||ch(i.type,i.memoizedProps)),a=!a),a&&ct&&As(i),Op(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ct=c_(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ct=c_(i)}else o===27?(o=ct,ks(i.type)?(i=ph,ph=null,ct=i):ct=o):ct=Kt?Bn(i.stateNode.nextSibling):null;return!0}function wo(){ct=Kt=null,Fe=!1}function Kf(){var i=Ss;return i!==null&&(mn===null?mn=i:mn.push.apply(mn,i),Ss=null),i}function za(i){Ss===null?Ss=[i]:Ss.push(i)}var Qf=q(null),bo=null,Hi=null;function Cs(i,o,a){ce(Qf,o._currentValue),o._currentValue=a}function Gi(i){i._currentValue=Qf.current,se(Qf)}function $f(i,o,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),i===a)break;i=i.return}}function Xf(i,o,a,u){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var _=g.dependencies;if(_!==null){var A=g.child;_=_.firstContext;e:for(;_!==null;){var I=_;_=g;for(var U=0;U<o.length;U++)if(I.context===o[U]){_.lanes|=a,I=_.alternate,I!==null&&(I.lanes|=a),$f(_.return,a,i),u||(A=null);break e}_=I.next}}else if(g.tag===18){if(A=g.return,A===null)throw Error(s(341));A.lanes|=a,_=A.alternate,_!==null&&(_.lanes|=a),$f(A,a,i),A=null}else A=g.child;if(A!==null)A.return=g;else for(A=g;A!==null;){if(A===i){A=null;break}if(g=A.sibling,g!==null){g.return=A.return,A=g;break}A=A.return}g=A}}function _r(i,o,a,u){i=null;for(var g=o,_=!1;g!==null;){if(!_){if((g.flags&524288)!==0)_=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var A=g.alternate;if(A===null)throw Error(s(387));if(A=A.memoizedProps,A!==null){var I=g.type;Sn(g.pendingProps.value,A.value)||(i!==null?i.push(I):i=[I])}}else if(g===He.current){if(A=g.alternate,A===null)throw Error(s(387));A.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(hl):i=[hl])}g=g.return}i!==null&&Xf(o,i,a,u),o.flags|=262144}function Nu(i){for(i=i.firstContext;i!==null;){if(!Sn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function No(i){bo=i,Hi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Qt(i){return zp(bo,i)}function Mu(i,o){return bo===null&&No(i),zp(i,o)}function zp(i,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},Hi===null){if(i===null)throw Error(s(308));Hi=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Hi=Hi.next=o;return a}var SA=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){o.aborted=!0,i.forEach(function(a){return a()})}},AA=n.unstable_scheduleCallback,CA=n.unstable_NormalPriority,Nt={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wf(){return{controller:new SA,data:new Map,refCount:0}}function Ba(i){i.refCount--,i.refCount===0&&AA(CA,function(){i.controller.abort()})}var Fa=null,Zf=0,vr=0,Tr=null;function xA(i,o){if(Fa===null){var a=Fa=[];Zf=0,vr=th(),Tr={status:"pending",value:void 0,then:function(u){a.push(u)}}}return Zf++,o.then(Bp,Bp),o}function Bp(){if(--Zf===0&&Fa!==null){Tr!==null&&(Tr.status="fulfilled");var i=Fa;Fa=null,vr=0,Tr=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function IA(i,o){var a=[],u={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return i.then(function(){u.status="fulfilled",u.value=o;for(var g=0;g<a.length;g++)(0,a[g])(o)},function(g){for(u.status="rejected",u.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),u}var Fp=Y.S;Y.S=function(i,o){xy=rn(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&xA(i,o),Fp!==null&&Fp(i,o)};var Mo=q(null);function jf(){var i=Mo.current;return i!==null?i:at.pooledCache}function Du(i,o){o===null?ce(Mo,Mo.current):ce(Mo,o.pool)}function Hp(){var i=jf();return i===null?null:{parent:Nt._currentValue,pool:i}}var Er=Error(s(460)),ed=Error(s(474)),Pu=Error(s(542)),Vu={then:function(){}};function Gp(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Yp(i,o,a){switch(a=i[a],a===void 0?i.push(o):a!==o&&(o.then(Wn,Wn),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Kp(i),i;default:if(typeof o.status=="string")o.then(Wn,Wn);else{if(i=at,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(u){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=u}},function(u){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Kp(i),i}throw Po=o,Er}}function Do(i){try{var o=i._init;return o(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Po=a,Er):a}}var Po=null;function Jp(){if(Po===null)throw Error(s(459));var i=Po;return Po=null,i}function Kp(i){if(i===Er||i===Pu)throw Error(s(483))}var Sr=null,Ha=0;function Uu(i){var o=Ha;return Ha+=1,Sr===null&&(Sr=[]),Yp(Sr,i,o)}function Ga(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Lu(i,o){throw o.$$typeof===S?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Qp(i){function o(z,k){if(i){var H=z.deletions;H===null?(z.deletions=[k],z.flags|=16):H.push(k)}}function a(z,k){if(!i)return null;for(;k!==null;)o(z,k),k=k.sibling;return null}function u(z){for(var k=new Map;z!==null;)z.key!==null?k.set(z.key,z):k.set(z.index,z),z=z.sibling;return k}function g(z,k){return z=Bi(z,k),z.index=0,z.sibling=null,z}function _(z,k,H){return z.index=H,i?(H=z.alternate,H!==null?(H=H.index,H<k?(z.flags|=67108866,k):H):(z.flags|=67108866,k)):(z.flags|=1048576,k)}function A(z){return i&&z.alternate===null&&(z.flags|=67108866),z}function I(z,k,H,ee){return k===null||k.tag!==6?(k=Ff(H,z.mode,ee),k.return=z,k):(k=g(k,H),k.return=z,k)}function U(z,k,H,ee){var Se=H.type;return Se===B?W(z,k,H.props.children,ee,H.key):k!==null&&(k.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===N&&Do(Se)===k.type)?(k=g(k,H.props),Ga(k,H),k.return=z,k):(k=wu(H.type,H.key,H.props,null,z.mode,ee),Ga(k,H),k.return=z,k)}function G(z,k,H,ee){return k===null||k.tag!==4||k.stateNode.containerInfo!==H.containerInfo||k.stateNode.implementation!==H.implementation?(k=Hf(H,z.mode,ee),k.return=z,k):(k=g(k,H.children||[]),k.return=z,k)}function W(z,k,H,ee,Se){return k===null||k.tag!==7?(k=Ro(H,z.mode,ee,Se),k.return=z,k):(k=g(k,H),k.return=z,k)}function ne(z,k,H){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Ff(""+k,z.mode,H),k.return=z,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case R:return H=wu(k.type,k.key,k.props,null,z.mode,H),Ga(H,k),H.return=z,H;case O:return k=Hf(k,z.mode,H),k.return=z,k;case N:return k=Do(k),ne(z,k,H)}if(Ee(k)||L(k))return k=Ro(k,z.mode,H,null),k.return=z,k;if(typeof k.then=="function")return ne(z,Uu(k),H);if(k.$$typeof===j)return ne(z,Mu(z,k),H);Lu(z,k)}return null}function K(z,k,H,ee){var Se=k!==null?k.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Se!==null?null:I(z,k,""+H,ee);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case R:return H.key===Se?U(z,k,H,ee):null;case O:return H.key===Se?G(z,k,H,ee):null;case N:return H=Do(H),K(z,k,H,ee)}if(Ee(H)||L(H))return Se!==null?null:W(z,k,H,ee,null);if(typeof H.then=="function")return K(z,k,Uu(H),ee);if(H.$$typeof===j)return K(z,k,Mu(z,H),ee);Lu(z,H)}return null}function $(z,k,H,ee,Se){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return z=z.get(H)||null,I(k,z,""+ee,Se);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case R:return z=z.get(ee.key===null?H:ee.key)||null,U(k,z,ee,Se);case O:return z=z.get(ee.key===null?H:ee.key)||null,G(k,z,ee,Se);case N:return ee=Do(ee),$(z,k,H,ee,Se)}if(Ee(ee)||L(ee))return z=z.get(H)||null,W(k,z,ee,Se,null);if(typeof ee.then=="function")return $(z,k,H,Uu(ee),Se);if(ee.$$typeof===j)return $(z,k,H,Mu(k,ee),Se);Lu(k,ee)}return null}function ve(z,k,H,ee){for(var Se=null,Ke=null,Te=k,Ve=k=0,Oe=null;Te!==null&&Ve<H.length;Ve++){Te.index>Ve?(Oe=Te,Te=null):Oe=Te.sibling;var Qe=K(z,Te,H[Ve],ee);if(Qe===null){Te===null&&(Te=Oe);break}i&&Te&&Qe.alternate===null&&o(z,Te),k=_(Qe,k,Ve),Ke===null?Se=Qe:Ke.sibling=Qe,Ke=Qe,Te=Oe}if(Ve===H.length)return a(z,Te),Fe&&Fi(z,Ve),Se;if(Te===null){for(;Ve<H.length;Ve++)Te=ne(z,H[Ve],ee),Te!==null&&(k=_(Te,k,Ve),Ke===null?Se=Te:Ke.sibling=Te,Ke=Te);return Fe&&Fi(z,Ve),Se}for(Te=u(Te);Ve<H.length;Ve++)Oe=$(Te,z,Ve,H[Ve],ee),Oe!==null&&(i&&Oe.alternate!==null&&Te.delete(Oe.key===null?Ve:Oe.key),k=_(Oe,k,Ve),Ke===null?Se=Oe:Ke.sibling=Oe,Ke=Oe);return i&&Te.forEach(function(Fs){return o(z,Fs)}),Fe&&Fi(z,Ve),Se}function Ce(z,k,H,ee){if(H==null)throw Error(s(151));for(var Se=null,Ke=null,Te=k,Ve=k=0,Oe=null,Qe=H.next();Te!==null&&!Qe.done;Ve++,Qe=H.next()){Te.index>Ve?(Oe=Te,Te=null):Oe=Te.sibling;var Fs=K(z,Te,Qe.value,ee);if(Fs===null){Te===null&&(Te=Oe);break}i&&Te&&Fs.alternate===null&&o(z,Te),k=_(Fs,k,Ve),Ke===null?Se=Fs:Ke.sibling=Fs,Ke=Fs,Te=Oe}if(Qe.done)return a(z,Te),Fe&&Fi(z,Ve),Se;if(Te===null){for(;!Qe.done;Ve++,Qe=H.next())Qe=ne(z,Qe.value,ee),Qe!==null&&(k=_(Qe,k,Ve),Ke===null?Se=Qe:Ke.sibling=Qe,Ke=Qe);return Fe&&Fi(z,Ve),Se}for(Te=u(Te);!Qe.done;Ve++,Qe=H.next())Qe=$(Te,z,Ve,Qe.value,ee),Qe!==null&&(i&&Qe.alternate!==null&&Te.delete(Qe.key===null?Ve:Qe.key),k=_(Qe,k,Ve),Ke===null?Se=Qe:Ke.sibling=Qe,Ke=Qe);return i&&Te.forEach(function(kC){return o(z,kC)}),Fe&&Fi(z,Ve),Se}function rt(z,k,H,ee){if(typeof H=="object"&&H!==null&&H.type===B&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case R:e:{for(var Se=H.key;k!==null;){if(k.key===Se){if(Se=H.type,Se===B){if(k.tag===7){a(z,k.sibling),ee=g(k,H.props.children),ee.return=z,z=ee;break e}}else if(k.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===N&&Do(Se)===k.type){a(z,k.sibling),ee=g(k,H.props),Ga(ee,H),ee.return=z,z=ee;break e}a(z,k);break}else o(z,k);k=k.sibling}H.type===B?(ee=Ro(H.props.children,z.mode,ee,H.key),ee.return=z,z=ee):(ee=wu(H.type,H.key,H.props,null,z.mode,ee),Ga(ee,H),ee.return=z,z=ee)}return A(z);case O:e:{for(Se=H.key;k!==null;){if(k.key===Se)if(k.tag===4&&k.stateNode.containerInfo===H.containerInfo&&k.stateNode.implementation===H.implementation){a(z,k.sibling),ee=g(k,H.children||[]),ee.return=z,z=ee;break e}else{a(z,k);break}else o(z,k);k=k.sibling}ee=Hf(H,z.mode,ee),ee.return=z,z=ee}return A(z);case N:return H=Do(H),rt(z,k,H,ee)}if(Ee(H))return ve(z,k,H,ee);if(L(H)){if(Se=L(H),typeof Se!="function")throw Error(s(150));return H=Se.call(H),Ce(z,k,H,ee)}if(typeof H.then=="function")return rt(z,k,Uu(H),ee);if(H.$$typeof===j)return rt(z,k,Mu(z,H),ee);Lu(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,k!==null&&k.tag===6?(a(z,k.sibling),ee=g(k,H),ee.return=z,z=ee):(a(z,k),ee=Ff(H,z.mode,ee),ee.return=z,z=ee),A(z)):a(z,k)}return function(z,k,H,ee){try{Ha=0;var Se=rt(z,k,H,ee);return Sr=null,Se}catch(Te){if(Te===Er||Te===Pu)throw Te;var Ke=An(29,Te,null,z.mode);return Ke.lanes=ee,Ke.return=z,Ke}finally{}}}var Vo=Qp(!0),$p=Qp(!1),xs=!1;function td(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nd(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Is(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Rs(i,o,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Ze&2)!==0){var g=u.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),u.pending=o,o=Ru(i),Dp(i,null,a),o}return Iu(i,u,o,a),Ru(i)}function Ya(i,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var u=o.lanes;u&=i.pendingLanes,a|=u,o.lanes=a,_a(i,a)}}function id(i,o){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var g=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?g=_=A:_=_.next=A,a=a.next}while(a!==null);_===null?g=_=o:_=_.next=o}else g=_=o;a={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=o:i.next=o,a.lastBaseUpdate=o}var sd=!1;function Ja(){if(sd){var i=Tr;if(i!==null)throw i}}function Ka(i,o,a,u){sd=!1;var g=i.updateQueue;xs=!1;var _=g.firstBaseUpdate,A=g.lastBaseUpdate,I=g.shared.pending;if(I!==null){g.shared.pending=null;var U=I,G=U.next;U.next=null,A===null?_=G:A.next=G,A=U;var W=i.alternate;W!==null&&(W=W.updateQueue,I=W.lastBaseUpdate,I!==A&&(I===null?W.firstBaseUpdate=G:I.next=G,W.lastBaseUpdate=U))}if(_!==null){var ne=g.baseState;A=0,W=G=U=null,I=_;do{var K=I.lane&-536870913,$=K!==I.lane;if($?(qe&K)===K:(u&K)===K){K!==0&&K===vr&&(sd=!0),W!==null&&(W=W.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var ve=i,Ce=I;K=o;var rt=a;switch(Ce.tag){case 1:if(ve=Ce.payload,typeof ve=="function"){ne=ve.call(rt,ne,K);break e}ne=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ce.payload,K=typeof ve=="function"?ve.call(rt,ne,K):ve,K==null)break e;ne=T({},ne,K);break e;case 2:xs=!0}}K=I.callback,K!==null&&(i.flags|=64,$&&(i.flags|=8192),$=g.callbacks,$===null?g.callbacks=[K]:$.push(K))}else $={lane:K,tag:I.tag,payload:I.payload,callback:I.callback,next:null},W===null?(G=W=$,U=ne):W=W.next=$,A|=K;if(I=I.next,I===null){if(I=g.shared.pending,I===null)break;$=I,I=$.next,$.next=null,g.lastBaseUpdate=$,g.shared.pending=null}}while(!0);W===null&&(U=ne),g.baseState=U,g.firstBaseUpdate=G,g.lastBaseUpdate=W,_===null&&(g.shared.lanes=0),Ds|=A,i.lanes=A,i.memoizedState=ne}}function Xp(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function Wp(i,o){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Xp(a[i],o)}var Ar=q(null),ku=q(0);function Zp(i,o){i=ji,ce(ku,i),ce(Ar,o),ji=i|o.baseLanes}function od(){ce(ku,ji),ce(Ar,Ar.current)}function rd(){ji=ku.current,se(Ar),se(ku)}var Cn=q(null),zn=null;function ws(i){var o=i.alternate;ce(Et,Et.current&1),ce(Cn,i),zn===null&&(o===null||Ar.current!==null||o.memoizedState!==null)&&(zn=i)}function ad(i){ce(Et,Et.current),ce(Cn,i),zn===null&&(zn=i)}function jp(i){i.tag===22?(ce(Et,Et.current),ce(Cn,i),zn===null&&(zn=i)):bs()}function bs(){ce(Et,Et.current),ce(Cn,Cn.current)}function xn(i){se(Cn),zn===i&&(zn=null),se(Et)}var Et=q(0);function qu(i){for(var o=i;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||hh(a)||mh(a)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Yi=0,De=null,st=null,Mt=null,Ou=!1,Cr=!1,Uo=!1,zu=0,Qa=0,xr=null,RA=0;function yt(){throw Error(s(321))}function ld(i,o){if(o===null)return!1;for(var a=0;a<o.length&&a<i.length;a++)if(!Sn(i[a],o[a]))return!1;return!0}function ud(i,o,a,u,g,_){return Yi=_,De=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Y.H=i===null||i.memoizedState===null?Lg:Cd,Uo=!1,_=a(u,g),Uo=!1,Cr&&(_=tg(o,a,u,g)),eg(i),_}function eg(i){Y.H=Wa;var o=st!==null&&st.next!==null;if(Yi=0,Mt=st=De=null,Ou=!1,Qa=0,xr=null,o)throw Error(s(300));i===null||Dt||(i=i.dependencies,i!==null&&Nu(i)&&(Dt=!0))}function tg(i,o,a,u){De=i;var g=0;do{if(Cr&&(xr=null),Qa=0,Cr=!1,25<=g)throw Error(s(301));if(g+=1,Mt=st=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}Y.H=kg,_=o(a,u)}while(Cr);return _}function wA(){var i=Y.H,o=i.useState()[0];return o=typeof o.then=="function"?$a(o):o,i=i.useState()[0],(st!==null?st.memoizedState:null)!==i&&(De.flags|=1024),o}function cd(){var i=zu!==0;return zu=0,i}function fd(i,o,a){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~a}function dd(i){if(Ou){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Ou=!1}Yi=0,Mt=st=De=null,Cr=!1,Qa=zu=0,xr=null}function ln(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?De.memoizedState=Mt=i:Mt=Mt.next=i,Mt}function St(){if(st===null){var i=De.alternate;i=i!==null?i.memoizedState:null}else i=st.next;var o=Mt===null?De.memoizedState:Mt.next;if(o!==null)Mt=o,st=i;else{if(i===null)throw De.alternate===null?Error(s(467)):Error(s(310));st=i,i={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Mt===null?De.memoizedState=Mt=i:Mt=Mt.next=i}return Mt}function Bu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $a(i){var o=Qa;return Qa+=1,xr===null&&(xr=[]),i=Yp(xr,i,o),o=De,(Mt===null?o.memoizedState:Mt.next)===null&&(o=o.alternate,Y.H=o===null||o.memoizedState===null?Lg:Cd),i}function Fu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return $a(i);if(i.$$typeof===j)return Qt(i)}throw Error(s(438,String(i)))}function hd(i){var o=null,a=De.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var u=De.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=Bu(),De.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(i),u=0;u<i;u++)a[u]=P;return o.index++,a}function Ji(i,o){return typeof o=="function"?o(i):o}function Hu(i){var o=St();return md(o,st,i)}function md(i,o,a){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var g=i.baseQueue,_=u.pending;if(_!==null){if(g!==null){var A=g.next;g.next=_.next,_.next=A}o.baseQueue=g=_,u.pending=null}if(_=i.baseState,g===null)i.memoizedState=_;else{o=g.next;var I=A=null,U=null,G=o,W=!1;do{var ne=G.lane&-536870913;if(ne!==G.lane?(qe&ne)===ne:(Yi&ne)===ne){var K=G.revertLane;if(K===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ne===vr&&(W=!0);else if((Yi&K)===K){G=G.next,K===vr&&(W=!0);continue}else ne={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},U===null?(I=U=ne,A=_):U=U.next=ne,De.lanes|=K,Ds|=K;ne=G.action,Uo&&a(_,ne),_=G.hasEagerState?G.eagerState:a(_,ne)}else K={lane:ne,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},U===null?(I=U=K,A=_):U=U.next=K,De.lanes|=ne,Ds|=ne;G=G.next}while(G!==null&&G!==o);if(U===null?A=_:U.next=I,!Sn(_,i.memoizedState)&&(Dt=!0,W&&(a=Tr,a!==null)))throw a;i.memoizedState=_,i.baseState=A,i.baseQueue=U,u.lastRenderedState=_}return g===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function pd(i){var o=St(),a=o.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var u=a.dispatch,g=a.pending,_=o.memoizedState;if(g!==null){a.pending=null;var A=g=g.next;do _=i(_,A.action),A=A.next;while(A!==g);Sn(_,o.memoizedState)||(Dt=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),a.lastRenderedState=_}return[_,u]}function ng(i,o,a){var u=De,g=St(),_=Fe;if(_){if(a===void 0)throw Error(s(407));a=a()}else a=o();var A=!Sn((st||g).memoizedState,a);if(A&&(g.memoizedState=a,Dt=!0),g=g.queue,_d(og.bind(null,u,g,i),[i]),g.getSnapshot!==o||A||Mt!==null&&Mt.memoizedState.tag&1){if(u.flags|=2048,Ir(9,{destroy:void 0},sg.bind(null,u,g,a,o),null),at===null)throw Error(s(349));_||(Yi&127)!==0||ig(u,o,a)}return a}function ig(i,o,a){i.flags|=16384,i={getSnapshot:o,value:a},o=De.updateQueue,o===null?(o=Bu(),De.updateQueue=o,o.stores=[i]):(a=o.stores,a===null?o.stores=[i]:a.push(i))}function sg(i,o,a,u){o.value=a,o.getSnapshot=u,rg(o)&&ag(i)}function og(i,o,a){return a(function(){rg(o)&&ag(i)})}function rg(i){var o=i.getSnapshot;i=i.value;try{var a=o();return!Sn(i,a)}catch{return!0}}function ag(i){var o=Io(i,2);o!==null&&pn(o,i,2)}function gd(i){var o=ln();if(typeof i=="function"){var a=i;if(i=a(),Uo){Nn(!0);try{a()}finally{Nn(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:i},o}function lg(i,o,a,u){return i.baseState=a,md(i,st,typeof u=="function"?u:Ji)}function bA(i,o,a,u,g){if(Ju(i))throw Error(s(485));if(i=o.action,i!==null){var _={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};Y.T!==null?a(!0):_.isTransition=!1,u(_),a=o.pending,a===null?(_.next=o.pending=_,ug(o,_)):(_.next=a.next,o.pending=a.next=_)}}function ug(i,o){var a=o.action,u=o.payload,g=i.state;if(o.isTransition){var _=Y.T,A={};Y.T=A;try{var I=a(g,u),U=Y.S;U!==null&&U(A,I),cg(i,o,I)}catch(G){yd(i,o,G)}finally{_!==null&&A.types!==null&&(_.types=A.types),Y.T=_}}else try{_=a(g,u),cg(i,o,_)}catch(G){yd(i,o,G)}}function cg(i,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){fg(i,o,u)},function(u){return yd(i,o,u)}):fg(i,o,a)}function fg(i,o,a){o.status="fulfilled",o.value=a,dg(o),i.state=a,o=i.pending,o!==null&&(a=o.next,a===o?i.pending=null:(a=a.next,o.next=a,ug(i,a)))}function yd(i,o,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=a,dg(o),o=o.next;while(o!==u)}i.action=null}function dg(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function hg(i,o){return o}function mg(i,o){if(Fe){var a=at.formState;if(a!==null){e:{var u=De;if(Fe){if(ct){t:{for(var g=ct,_=On;g.nodeType!==8;){if(!_){g=null;break t}if(g=Bn(g.nextSibling),g===null){g=null;break t}}_=g.data,g=_==="F!"||_==="F"?g:null}if(g){ct=Bn(g.nextSibling),u=g.data==="F!";break e}}As(u)}u=!1}u&&(o=a[0])}}return a=ln(),a.memoizedState=a.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hg,lastRenderedState:o},a.queue=u,a=Pg.bind(null,De,u),u.dispatch=a,u=gd(!1),_=Ad.bind(null,De,!1,u.queue),u=ln(),g={state:o,dispatch:null,action:i,pending:null},u.queue=g,a=bA.bind(null,De,g,_,a),g.dispatch=a,u.memoizedState=i,[o,a,!1]}function pg(i){var o=St();return gg(o,st,i)}function gg(i,o,a){if(o=md(i,o,hg)[0],i=Hu(Ji)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=$a(o)}catch(A){throw A===Er?Pu:A}else u=o;o=St();var g=o.queue,_=g.dispatch;return a!==o.memoizedState&&(De.flags|=2048,Ir(9,{destroy:void 0},NA.bind(null,g,a),null)),[u,_,i]}function NA(i,o){i.action=o}function yg(i){var o=St(),a=st;if(a!==null)return gg(o,a,i);St(),o=o.memoizedState,a=St();var u=a.queue.dispatch;return a.memoizedState=i,[o,u,!1]}function Ir(i,o,a,u){return i={tag:i,create:a,deps:u,inst:o,next:null},o=De.updateQueue,o===null&&(o=Bu(),De.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,o.lastEffect=i),i}function _g(){return St().memoizedState}function Gu(i,o,a,u){var g=ln();De.flags|=i,g.memoizedState=Ir(1|o,{destroy:void 0},a,u===void 0?null:u)}function Yu(i,o,a,u){var g=St();u=u===void 0?null:u;var _=g.memoizedState.inst;st!==null&&u!==null&&ld(u,st.memoizedState.deps)?g.memoizedState=Ir(o,_,a,u):(De.flags|=i,g.memoizedState=Ir(1|o,_,a,u))}function vg(i,o){Gu(8390656,8,i,o)}function _d(i,o){Yu(2048,8,i,o)}function MA(i){De.flags|=4;var o=De.updateQueue;if(o===null)o=Bu(),De.updateQueue=o,o.events=[i];else{var a=o.events;a===null?o.events=[i]:a.push(i)}}function Tg(i){var o=St().memoizedState;return MA({ref:o,nextImpl:i}),function(){if((Ze&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function Eg(i,o){return Yu(4,2,i,o)}function Sg(i,o){return Yu(4,4,i,o)}function Ag(i,o){if(typeof o=="function"){i=i();var a=o(i);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Cg(i,o,a){a=a!=null?a.concat([i]):null,Yu(4,4,Ag.bind(null,o,i),a)}function vd(){}function xg(i,o){var a=St();o=o===void 0?null:o;var u=a.memoizedState;return o!==null&&ld(o,u[1])?u[0]:(a.memoizedState=[i,o],i)}function Ig(i,o){var a=St();o=o===void 0?null:o;var u=a.memoizedState;if(o!==null&&ld(o,u[1]))return u[0];if(u=i(),Uo){Nn(!0);try{i()}finally{Nn(!1)}}return a.memoizedState=[u,o],u}function Td(i,o,a){return a===void 0||(Yi&1073741824)!==0&&(qe&261930)===0?i.memoizedState=o:(i.memoizedState=a,i=Ry(),De.lanes|=i,Ds|=i,a)}function Rg(i,o,a,u){return Sn(a,o)?a:Ar.current!==null?(i=Td(i,a,u),Sn(i,o)||(Dt=!0),i):(Yi&42)===0||(Yi&1073741824)!==0&&(qe&261930)===0?(Dt=!0,i.memoizedState=a):(i=Ry(),De.lanes|=i,Ds|=i,o)}function wg(i,o,a,u,g){var _=re.p;re.p=_!==0&&8>_?_:8;var A=Y.T,I={};Y.T=I,Ad(i,!1,o,a);try{var U=g(),G=Y.S;if(G!==null&&G(I,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var W=IA(U,u);Xa(i,o,W,wn(i))}else Xa(i,o,u,wn(i))}catch(ne){Xa(i,o,{then:function(){},status:"rejected",reason:ne},wn())}finally{re.p=_,A!==null&&I.types!==null&&(A.types=I.types),Y.T=A}}function DA(){}function Ed(i,o,a,u){if(i.tag!==5)throw Error(s(476));var g=bg(i).queue;wg(i,g,o,de,a===null?DA:function(){return Ng(i),a(u)})}function bg(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:de},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:a},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function Ng(i){var o=bg(i);o.next===null&&(o=i.alternate.memoizedState),Xa(i,o.next.queue,{},wn())}function Sd(){return Qt(hl)}function Mg(){return St().memoizedState}function Dg(){return St().memoizedState}function PA(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var a=wn();i=Is(a);var u=Rs(o,i,a);u!==null&&(pn(u,o,a),Ya(u,o,a)),o={cache:Wf()},i.payload=o;return}o=o.return}}function VA(i,o,a){var u=wn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ju(i)?Vg(o,a):(a=zf(i,o,a,u),a!==null&&(pn(a,i,u),Ug(a,o,u)))}function Pg(i,o,a){var u=wn();Xa(i,o,a,u)}function Xa(i,o,a,u){var g={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ju(i))Vg(o,g);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var A=o.lastRenderedState,I=_(A,a);if(g.hasEagerState=!0,g.eagerState=I,Sn(I,A))return Iu(i,o,g,0),at===null&&xu(),!1}catch{}finally{}if(a=zf(i,o,g,u),a!==null)return pn(a,i,u),Ug(a,o,u),!0}return!1}function Ad(i,o,a,u){if(u={lane:2,revertLane:th(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ju(i)){if(o)throw Error(s(479))}else o=zf(i,a,u,2),o!==null&&pn(o,i,2)}function Ju(i){var o=i.alternate;return i===De||o!==null&&o===De}function Vg(i,o){Cr=Ou=!0;var a=i.pending;a===null?o.next=o:(o.next=a.next,a.next=o),i.pending=o}function Ug(i,o,a){if((a&4194048)!==0){var u=o.lanes;u&=i.pendingLanes,a|=u,o.lanes=a,_a(i,a)}}var Wa={readContext:Qt,use:Fu,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};Wa.useEffectEvent=yt;var Lg={readContext:Qt,use:Fu,useCallback:function(i,o){return ln().memoizedState=[i,o===void 0?null:o],i},useContext:Qt,useEffect:vg,useImperativeHandle:function(i,o,a){a=a!=null?a.concat([i]):null,Gu(4194308,4,Ag.bind(null,o,i),a)},useLayoutEffect:function(i,o){return Gu(4194308,4,i,o)},useInsertionEffect:function(i,o){Gu(4,2,i,o)},useMemo:function(i,o){var a=ln();o=o===void 0?null:o;var u=i();if(Uo){Nn(!0);try{i()}finally{Nn(!1)}}return a.memoizedState=[u,o],u},useReducer:function(i,o,a){var u=ln();if(a!==void 0){var g=a(o);if(Uo){Nn(!0);try{a(o)}finally{Nn(!1)}}}else g=o;return u.memoizedState=u.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},u.queue=i,i=i.dispatch=VA.bind(null,De,i),[u.memoizedState,i]},useRef:function(i){var o=ln();return i={current:i},o.memoizedState=i},useState:function(i){i=gd(i);var o=i.queue,a=Pg.bind(null,De,o);return o.dispatch=a,[i.memoizedState,a]},useDebugValue:vd,useDeferredValue:function(i,o){var a=ln();return Td(a,i,o)},useTransition:function(){var i=gd(!1);return i=wg.bind(null,De,i.queue,!0,!1),ln().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,a){var u=De,g=ln();if(Fe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=o(),at===null)throw Error(s(349));(qe&127)!==0||ig(u,o,a)}g.memoizedState=a;var _={value:a,getSnapshot:o};return g.queue=_,vg(og.bind(null,u,_,i),[i]),u.flags|=2048,Ir(9,{destroy:void 0},sg.bind(null,u,_,a,o),null),a},useId:function(){var i=ln(),o=at.identifierPrefix;if(Fe){var a=wi,u=Ri;a=(u&~(1<<32-vt(u)-1)).toString(32)+a,o="_"+o+"R_"+a,a=zu++,0<a&&(o+="H"+a.toString(32)),o+="_"}else a=RA++,o="_"+o+"r_"+a.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:Sd,useFormState:mg,useActionState:mg,useOptimistic:function(i){var o=ln();o.memoizedState=o.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=Ad.bind(null,De,!0,a),a.dispatch=o,[i,o]},useMemoCache:hd,useCacheRefresh:function(){return ln().memoizedState=PA.bind(null,De)},useEffectEvent:function(i){var o=ln(),a={impl:i};return o.memoizedState=a,function(){if((Ze&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Cd={readContext:Qt,use:Fu,useCallback:xg,useContext:Qt,useEffect:_d,useImperativeHandle:Cg,useInsertionEffect:Eg,useLayoutEffect:Sg,useMemo:Ig,useReducer:Hu,useRef:_g,useState:function(){return Hu(Ji)},useDebugValue:vd,useDeferredValue:function(i,o){var a=St();return Rg(a,st.memoizedState,i,o)},useTransition:function(){var i=Hu(Ji)[0],o=St().memoizedState;return[typeof i=="boolean"?i:$a(i),o]},useSyncExternalStore:ng,useId:Mg,useHostTransitionStatus:Sd,useFormState:pg,useActionState:pg,useOptimistic:function(i,o){var a=St();return lg(a,st,i,o)},useMemoCache:hd,useCacheRefresh:Dg};Cd.useEffectEvent=Tg;var kg={readContext:Qt,use:Fu,useCallback:xg,useContext:Qt,useEffect:_d,useImperativeHandle:Cg,useInsertionEffect:Eg,useLayoutEffect:Sg,useMemo:Ig,useReducer:pd,useRef:_g,useState:function(){return pd(Ji)},useDebugValue:vd,useDeferredValue:function(i,o){var a=St();return st===null?Td(a,i,o):Rg(a,st.memoizedState,i,o)},useTransition:function(){var i=pd(Ji)[0],o=St().memoizedState;return[typeof i=="boolean"?i:$a(i),o]},useSyncExternalStore:ng,useId:Mg,useHostTransitionStatus:Sd,useFormState:yg,useActionState:yg,useOptimistic:function(i,o){var a=St();return st!==null?lg(a,st,i,o):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:hd,useCacheRefresh:Dg};kg.useEffectEvent=Tg;function xd(i,o,a,u){o=i.memoizedState,a=a(u,o),a=a==null?o:T({},o,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Id={enqueueSetState:function(i,o,a){i=i._reactInternals;var u=wn(),g=Is(u);g.payload=o,a!=null&&(g.callback=a),o=Rs(i,g,u),o!==null&&(pn(o,i,u),Ya(o,i,u))},enqueueReplaceState:function(i,o,a){i=i._reactInternals;var u=wn(),g=Is(u);g.tag=1,g.payload=o,a!=null&&(g.callback=a),o=Rs(i,g,u),o!==null&&(pn(o,i,u),Ya(o,i,u))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var a=wn(),u=Is(a);u.tag=2,o!=null&&(u.callback=o),o=Rs(i,u,a),o!==null&&(pn(o,i,a),Ya(o,i,a))}};function qg(i,o,a,u,g,_,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,_,A):o.prototype&&o.prototype.isPureReactComponent?!ka(a,u)||!ka(g,_):!0}function Og(i,o,a,u){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,u),o.state!==i&&Id.enqueueReplaceState(o,o.state,null)}function Lo(i,o){var a=o;if("ref"in o){a={};for(var u in o)u!=="ref"&&(a[u]=o[u])}if(i=i.defaultProps){a===o&&(a=T({},a));for(var g in i)a[g]===void 0&&(a[g]=i[g])}return a}function zg(i){Cu(i)}function Bg(i){console.error(i)}function Fg(i){Cu(i)}function Ku(i,o){try{var a=i.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function Hg(i,o,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Rd(i,o,a){return a=Is(a),a.tag=3,a.payload={element:null},a.callback=function(){Ku(i,o)},a}function Gg(i){return i=Is(i),i.tag=3,i}function Yg(i,o,a,u){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var _=u.value;i.payload=function(){return g(_)},i.callback=function(){Hg(o,a,u)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){Hg(o,a,u),typeof g!="function"&&(Ps===null?Ps=new Set([this]):Ps.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function UA(i,o,a,u,g){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=a.alternate,o!==null&&_r(o,a,g,!0),a=Cn.current,a!==null){switch(a.tag){case 31:case 13:return zn===null?oc():a.alternate===null&&_t===0&&(_t=3),a.flags&=-257,a.flags|=65536,a.lanes=g,u===Vu?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([u]):o.add(u),Zd(i,u,g)),!1;case 22:return a.flags|=65536,u===Vu?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([u]):a.add(u)),Zd(i,u,g)),!1}throw Error(s(435,a.tag))}return Zd(i,u,g),oc(),!1}if(Fe)return o=Cn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,u!==Jf&&(i=Error(s(422),{cause:u}),za(Ln(i,a)))):(u!==Jf&&(o=Error(s(423),{cause:u}),za(Ln(o,a))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,u=Ln(u,a),g=Rd(i.stateNode,u,g),id(i,g),_t!==4&&(_t=2)),!1;var _=Error(s(520),{cause:u});if(_=Ln(_,a),ol===null?ol=[_]:ol.push(_),_t!==4&&(_t=2),o===null)return!0;u=Ln(u,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,i=g&-g,a.lanes|=i,i=Rd(a.stateNode,u,i),id(a,i),!1;case 1:if(o=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ps===null||!Ps.has(_))))return a.flags|=65536,g&=-g,a.lanes|=g,g=Gg(g),Yg(g,i,a,u),id(a,g),!1}a=a.return}while(a!==null);return!1}var wd=Error(s(461)),Dt=!1;function $t(i,o,a,u){o.child=i===null?$p(o,null,a,u):Vo(o,i.child,a,u)}function Jg(i,o,a,u,g){a=a.render;var _=o.ref;if("ref"in u){var A={};for(var I in u)I!=="ref"&&(A[I]=u[I])}else A=u;return No(o),u=ud(i,o,a,A,_,g),I=cd(),i!==null&&!Dt?(fd(i,o,g),Ki(i,o,g)):(Fe&&I&&Gf(o),o.flags|=1,$t(i,o,u,g),o.child)}function Kg(i,o,a,u,g){if(i===null){var _=a.type;return typeof _=="function"&&!Bf(_)&&_.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=_,Qg(i,o,_,u,g)):(i=wu(a.type,null,u,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(_=i.child,!Ld(i,g)){var A=_.memoizedProps;if(a=a.compare,a=a!==null?a:ka,a(A,u)&&i.ref===o.ref)return Ki(i,o,g)}return o.flags|=1,i=Bi(_,u),i.ref=o.ref,i.return=o,o.child=i}function Qg(i,o,a,u,g){if(i!==null){var _=i.memoizedProps;if(ka(_,u)&&i.ref===o.ref)if(Dt=!1,o.pendingProps=u=_,Ld(i,g))(i.flags&131072)!==0&&(Dt=!0);else return o.lanes=i.lanes,Ki(i,o,g)}return bd(i,o,a,u,g)}function $g(i,o,a,u){var g=u.children,_=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(u=o.child=i.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~_}else u=0,o.child=null;return Xg(i,o,_,a,u)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Du(o,_!==null?_.cachePool:null),_!==null?Zp(o,_):od(),jp(o);else return u=o.lanes=536870912,Xg(i,o,_!==null?_.baseLanes|a:a,a,u)}else _!==null?(Du(o,_.cachePool),Zp(o,_),bs(),o.memoizedState=null):(i!==null&&Du(o,null),od(),bs());return $t(i,o,g,a),o.child}function Za(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Xg(i,o,a,u,g){var _=jf();return _=_===null?null:{parent:Nt._currentValue,pool:_},o.memoizedState={baseLanes:a,cachePool:_},i!==null&&Du(o,null),od(),jp(o),i!==null&&_r(i,o,u,!0),o.childLanes=g,null}function Qu(i,o){return o=Xu({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function Wg(i,o,a){return Vo(o,i.child,null,a),i=Qu(o,o.pendingProps),i.flags|=2,xn(o),o.memoizedState=null,i}function LA(i,o,a){var u=o.pendingProps,g=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(Fe){if(u.mode==="hidden")return i=Qu(o,u),o.lanes=536870912,Za(null,i);if(ad(o),(i=ct)?(i=u_(i,On),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Es!==null?{id:Ri,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},a=Vp(i),a.return=o,o.child=a,Kt=o,ct=null)):i=null,i===null)throw As(o);return o.lanes=536870912,null}return Qu(o,u)}var _=i.memoizedState;if(_!==null){var A=_.dehydrated;if(ad(o),g)if(o.flags&256)o.flags&=-257,o=Wg(i,o,a);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(s(558));else if(Dt||_r(i,o,a,!1),g=(a&i.childLanes)!==0,Dt||g){if(u=at,u!==null&&(A=va(u,a),A!==0&&A!==_.retryLane))throw _.retryLane=A,Io(i,A),pn(u,i,A),wd;oc(),o=Wg(i,o,a)}else i=_.treeContext,ct=Bn(A.nextSibling),Kt=o,Fe=!0,Ss=null,On=!1,i!==null&&kp(o,i),o=Qu(o,u),o.flags|=4096;return o}return i=Bi(i.child,{mode:u.mode,children:u.children}),i.ref=o.ref,o.child=i,i.return=o,i}function $u(i,o){var a=o.ref;if(a===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(o.flags|=4194816)}}function bd(i,o,a,u,g){return No(o),a=ud(i,o,a,u,void 0,g),u=cd(),i!==null&&!Dt?(fd(i,o,g),Ki(i,o,g)):(Fe&&u&&Gf(o),o.flags|=1,$t(i,o,a,g),o.child)}function Zg(i,o,a,u,g,_){return No(o),o.updateQueue=null,a=tg(o,u,a,g),eg(i),u=cd(),i!==null&&!Dt?(fd(i,o,_),Ki(i,o,_)):(Fe&&u&&Gf(o),o.flags|=1,$t(i,o,a,_),o.child)}function jg(i,o,a,u,g){if(No(o),o.stateNode===null){var _=mr,A=a.contextType;typeof A=="object"&&A!==null&&(_=Qt(A)),_=new a(u,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Id,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=u,_.state=o.memoizedState,_.refs={},td(o),A=a.contextType,_.context=typeof A=="object"&&A!==null?Qt(A):mr,_.state=o.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(xd(o,a,A,u),_.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&Id.enqueueReplaceState(_,_.state,null),Ka(o,u,_,g),Ja(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(i===null){_=o.stateNode;var I=o.memoizedProps,U=Lo(a,I);_.props=U;var G=_.context,W=a.contextType;A=mr,typeof W=="object"&&W!==null&&(A=Qt(W));var ne=a.getDerivedStateFromProps;W=typeof ne=="function"||typeof _.getSnapshotBeforeUpdate=="function",I=o.pendingProps!==I,W||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I||G!==A)&&Og(o,_,u,A),xs=!1;var K=o.memoizedState;_.state=K,Ka(o,u,_,g),Ja(),G=o.memoizedState,I||K!==G||xs?(typeof ne=="function"&&(xd(o,a,ne,u),G=o.memoizedState),(U=xs||qg(o,a,U,u,K,G,A))?(W||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=G),_.props=u,_.state=G,_.context=A,u=U):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{_=o.stateNode,nd(i,o),A=o.memoizedProps,W=Lo(a,A),_.props=W,ne=o.pendingProps,K=_.context,G=a.contextType,U=mr,typeof G=="object"&&G!==null&&(U=Qt(G)),I=a.getDerivedStateFromProps,(G=typeof I=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ne||K!==U)&&Og(o,_,u,U),xs=!1,K=o.memoizedState,_.state=K,Ka(o,u,_,g),Ja();var $=o.memoizedState;A!==ne||K!==$||xs||i!==null&&i.dependencies!==null&&Nu(i.dependencies)?(typeof I=="function"&&(xd(o,a,I,u),$=o.memoizedState),(W=xs||qg(o,a,W,u,K,$,U)||i!==null&&i.dependencies!==null&&Nu(i.dependencies))?(G||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,$,U),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,$,U)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&K===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&K===i.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=$),_.props=u,_.state=$,_.context=U,u=W):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&K===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&K===i.memoizedState||(o.flags|=1024),u=!1)}return _=u,$u(i,o),u=(o.flags&128)!==0,_||u?(_=o.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,i!==null&&u?(o.child=Vo(o,i.child,null,g),o.child=Vo(o,null,a,g)):$t(i,o,a,g),o.memoizedState=_.state,i=o.child):i=Ki(i,o,g),i}function ey(i,o,a,u){return wo(),o.flags|=256,$t(i,o,a,u),o.child}var Nd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Md(i){return{baseLanes:i,cachePool:Hp()}}function Dd(i,o,a){return i=i!==null?i.childLanes&~a:0,o&&(i|=Rn),i}function ty(i,o,a){var u=o.pendingProps,g=!1,_=(o.flags&128)!==0,A;if((A=_)||(A=i!==null&&i.memoizedState===null?!1:(Et.current&2)!==0),A&&(g=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,i===null){if(Fe){if(g?ws(o):bs(),(i=ct)?(i=u_(i,On),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Es!==null?{id:Ri,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},a=Vp(i),a.return=o,o.child=a,Kt=o,ct=null)):i=null,i===null)throw As(o);return mh(i)?o.lanes=32:o.lanes=536870912,null}var I=u.children;return u=u.fallback,g?(bs(),g=o.mode,I=Xu({mode:"hidden",children:I},g),u=Ro(u,g,a,null),I.return=o,u.return=o,I.sibling=u,o.child=I,u=o.child,u.memoizedState=Md(a),u.childLanes=Dd(i,A,a),o.memoizedState=Nd,Za(null,u)):(ws(o),Pd(o,I))}var U=i.memoizedState;if(U!==null&&(I=U.dehydrated,I!==null)){if(_)o.flags&256?(ws(o),o.flags&=-257,o=Vd(i,o,a)):o.memoizedState!==null?(bs(),o.child=i.child,o.flags|=128,o=null):(bs(),I=u.fallback,g=o.mode,u=Xu({mode:"visible",children:u.children},g),I=Ro(I,g,a,null),I.flags|=2,u.return=o,I.return=o,u.sibling=I,o.child=u,Vo(o,i.child,null,a),u=o.child,u.memoizedState=Md(a),u.childLanes=Dd(i,A,a),o.memoizedState=Nd,o=Za(null,u));else if(ws(o),mh(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var G=A.dgst;A=G,u=Error(s(419)),u.stack="",u.digest=A,za({value:u,source:null,stack:null}),o=Vd(i,o,a)}else if(Dt||_r(i,o,a,!1),A=(a&i.childLanes)!==0,Dt||A){if(A=at,A!==null&&(u=va(A,a),u!==0&&u!==U.retryLane))throw U.retryLane=u,Io(i,u),pn(A,i,u),wd;hh(I)||oc(),o=Vd(i,o,a)}else hh(I)?(o.flags|=192,o.child=i.child,o=null):(i=U.treeContext,ct=Bn(I.nextSibling),Kt=o,Fe=!0,Ss=null,On=!1,i!==null&&kp(o,i),o=Pd(o,u.children),o.flags|=4096);return o}return g?(bs(),I=u.fallback,g=o.mode,U=i.child,G=U.sibling,u=Bi(U,{mode:"hidden",children:u.children}),u.subtreeFlags=U.subtreeFlags&65011712,G!==null?I=Bi(G,I):(I=Ro(I,g,a,null),I.flags|=2),I.return=o,u.return=o,u.sibling=I,o.child=u,Za(null,u),u=o.child,I=i.child.memoizedState,I===null?I=Md(a):(g=I.cachePool,g!==null?(U=Nt._currentValue,g=g.parent!==U?{parent:U,pool:U}:g):g=Hp(),I={baseLanes:I.baseLanes|a,cachePool:g}),u.memoizedState=I,u.childLanes=Dd(i,A,a),o.memoizedState=Nd,Za(i.child,u)):(ws(o),a=i.child,i=a.sibling,a=Bi(a,{mode:"visible",children:u.children}),a.return=o,a.sibling=null,i!==null&&(A=o.deletions,A===null?(o.deletions=[i],o.flags|=16):A.push(i)),o.child=a,o.memoizedState=null,a)}function Pd(i,o){return o=Xu({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Xu(i,o){return i=An(22,i,null,o),i.lanes=0,i}function Vd(i,o,a){return Vo(o,i.child,null,a),i=Pd(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function ny(i,o,a){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o),$f(i.return,o,a)}function Ud(i,o,a,u,g,_){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:g,treeForkCount:_}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=u,A.tail=a,A.tailMode=g,A.treeForkCount=_)}function iy(i,o,a){var u=o.pendingProps,g=u.revealOrder,_=u.tail;u=u.children;var A=Et.current,I=(A&2)!==0;if(I?(A=A&1|2,o.flags|=128):A&=1,ce(Et,A),$t(i,o,u,a),u=Fe?Oa:0,!I&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ny(i,a,o);else if(i.tag===19)ny(i,a,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(a=o.child,g=null;a!==null;)i=a.alternate,i!==null&&qu(i)===null&&(g=a),a=a.sibling;a=g,a===null?(g=o.child,o.child=null):(g=a.sibling,a.sibling=null),Ud(o,!1,g,a,_,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&qu(i)===null){o.child=g;break}i=g.sibling,g.sibling=a,a=g,g=i}Ud(o,!0,a,null,_,u);break;case"together":Ud(o,!1,null,null,void 0,u);break;default:o.memoizedState=null}return o.child}function Ki(i,o,a){if(i!==null&&(o.dependencies=i.dependencies),Ds|=o.lanes,(a&o.childLanes)===0)if(i!==null){if(_r(i,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,a=Bi(i,i.pendingProps),o.child=a,a.return=o;i.sibling!==null;)i=i.sibling,a=a.sibling=Bi(i,i.pendingProps),a.return=o;a.sibling=null}return o.child}function Ld(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Nu(i)))}function kA(i,o,a){switch(o.tag){case 3:kt(o,o.stateNode.containerInfo),Cs(o,Nt,i.memoizedState.cache),wo();break;case 27:case 5:ao(o);break;case 4:kt(o,o.stateNode.containerInfo);break;case 10:Cs(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,ad(o),null;break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(ws(o),o.flags|=128,null):(a&o.child.childLanes)!==0?ty(i,o,a):(ws(o),i=Ki(i,o,a),i!==null?i.sibling:null);ws(o);break;case 19:var g=(i.flags&128)!==0;if(u=(a&o.childLanes)!==0,u||(_r(i,o,a,!1),u=(a&o.childLanes)!==0),g){if(u)return iy(i,o,a);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ce(Et,Et.current),u)break;return null;case 22:return o.lanes=0,$g(i,o,a,o.pendingProps);case 24:Cs(o,Nt,i.memoizedState.cache)}return Ki(i,o,a)}function sy(i,o,a){if(i!==null)if(i.memoizedProps!==o.pendingProps)Dt=!0;else{if(!Ld(i,a)&&(o.flags&128)===0)return Dt=!1,kA(i,o,a);Dt=(i.flags&131072)!==0}else Dt=!1,Fe&&(o.flags&1048576)!==0&&Lp(o,Oa,o.index);switch(o.lanes=0,o.tag){case 16:e:{var u=o.pendingProps;if(i=Do(o.elementType),o.type=i,typeof i=="function")Bf(i)?(u=Lo(i,u),o.tag=1,o=jg(null,o,i,u,a)):(o.tag=0,o=bd(null,o,i,u,a));else{if(i!=null){var g=i.$$typeof;if(g===le){o.tag=11,o=Jg(null,o,i,u,a);break e}else if(g===M){o.tag=14,o=Kg(null,o,i,u,a);break e}}throw o=ae(i)||i,Error(s(306,o,""))}}return o;case 0:return bd(i,o,o.type,o.pendingProps,a);case 1:return u=o.type,g=Lo(u,o.pendingProps),jg(i,o,u,g,a);case 3:e:{if(kt(o,o.stateNode.containerInfo),i===null)throw Error(s(387));u=o.pendingProps;var _=o.memoizedState;g=_.element,nd(i,o),Ka(o,u,null,a);var A=o.memoizedState;if(u=A.cache,Cs(o,Nt,u),u!==_.cache&&Xf(o,[Nt],a,!0),Ja(),u=A.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=ey(i,o,u,a);break e}else if(u!==g){g=Ln(Error(s(424)),o),za(g),o=ey(i,o,u,a);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ct=Bn(i.firstChild),Kt=o,Fe=!0,Ss=null,On=!0,a=$p(o,null,u,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(wo(),u===g){o=Ki(i,o,a);break e}$t(i,o,u,a)}o=o.child}return o;case 26:return $u(i,o),i===null?(a=p_(o.type,null,o.pendingProps,null))?o.memoizedState=a:Fe||(a=o.type,i=o.pendingProps,u=dc(Pe.current).createElement(a),u[Rt]=o,u[Bt]=i,Xt(u,a,i),wt(u),o.stateNode=u):o.memoizedState=p_(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return ao(o),i===null&&Fe&&(u=o.stateNode=d_(o.type,o.pendingProps,Pe.current),Kt=o,On=!0,g=ct,ks(o.type)?(ph=g,ct=Bn(u.firstChild)):ct=g),$t(i,o,o.pendingProps.children,a),$u(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&Fe&&((g=u=ct)&&(u=hC(u,o.type,o.pendingProps,On),u!==null?(o.stateNode=u,Kt=o,ct=Bn(u.firstChild),On=!1,g=!0):g=!1),g||As(o)),ao(o),g=o.type,_=o.pendingProps,A=i!==null?i.memoizedProps:null,u=_.children,ch(g,_)?u=null:A!==null&&ch(g,A)&&(o.flags|=32),o.memoizedState!==null&&(g=ud(i,o,wA,null,null,a),hl._currentValue=g),$u(i,o),$t(i,o,u,a),o.child;case 6:return i===null&&Fe&&((i=a=ct)&&(a=mC(a,o.pendingProps,On),a!==null?(o.stateNode=a,Kt=o,ct=null,i=!0):i=!1),i||As(o)),null;case 13:return ty(i,o,a);case 4:return kt(o,o.stateNode.containerInfo),u=o.pendingProps,i===null?o.child=Vo(o,null,u,a):$t(i,o,u,a),o.child;case 11:return Jg(i,o,o.type,o.pendingProps,a);case 7:return $t(i,o,o.pendingProps,a),o.child;case 8:return $t(i,o,o.pendingProps.children,a),o.child;case 12:return $t(i,o,o.pendingProps.children,a),o.child;case 10:return u=o.pendingProps,Cs(o,o.type,u.value),$t(i,o,u.children,a),o.child;case 9:return g=o.type._context,u=o.pendingProps.children,No(o),g=Qt(g),u=u(g),o.flags|=1,$t(i,o,u,a),o.child;case 14:return Kg(i,o,o.type,o.pendingProps,a);case 15:return Qg(i,o,o.type,o.pendingProps,a);case 19:return iy(i,o,a);case 31:return LA(i,o,a);case 22:return $g(i,o,a,o.pendingProps);case 24:return No(o),u=Qt(Nt),i===null?(g=jf(),g===null&&(g=at,_=Wf(),g.pooledCache=_,_.refCount++,_!==null&&(g.pooledCacheLanes|=a),g=_),o.memoizedState={parent:u,cache:g},td(o),Cs(o,Nt,g)):((i.lanes&a)!==0&&(nd(i,o),Ka(o,null,null,a),Ja()),g=i.memoizedState,_=o.memoizedState,g.parent!==u?(g={parent:u,cache:u},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),Cs(o,Nt,u)):(u=_.cache,Cs(o,Nt,u),u!==g.cache&&Xf(o,[Nt],a,!0))),$t(i,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function Qi(i){i.flags|=4}function kd(i,o,a,u,g){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(My())i.flags|=8192;else throw Po=Vu,ed}else i.flags&=-16777217}function oy(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!T_(o))if(My())i.flags|=8192;else throw Po=Vu,ed}function Wu(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?iu():536870912,i.lanes|=o,Nr|=o)}function ja(i,o){if(!Fe)switch(i.tailMode){case"hidden":o=i.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function ft(i){var o=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(o)for(var g=i.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=u,i.childLanes=a,o}function qA(i,o,a){var u=o.pendingProps;switch(Yf(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(o),null;case 1:return ft(o),null;case 3:return a=o.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Gi(Nt),ht(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(yr(o)?Qi(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Kf())),ft(o),null;case 26:var g=o.type,_=o.memoizedState;return i===null?(Qi(o),_!==null?(ft(o),oy(o,_)):(ft(o),kd(o,g,null,u,a))):_?_!==i.memoizedState?(Qi(o),ft(o),oy(o,_)):(ft(o),o.flags&=-16777217):(i=i.memoizedProps,i!==u&&Qi(o),ft(o),kd(o,g,i,u,a)),null;case 27:if($o(o),a=Pe.current,g=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==u&&Qi(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return ft(o),null}i=ye.current,yr(o)?qp(o):(i=d_(g,u,a),o.stateNode=i,Qi(o))}return ft(o),null;case 5:if($o(o),g=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==u&&Qi(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return ft(o),null}if(_=ye.current,yr(o))qp(o);else{var A=dc(Pe.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?A.createElement("select",{is:u.is}):A.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?A.createElement(g,{is:u.is}):A.createElement(g)}}_[Rt]=o,_[Bt]=u;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=_;e:switch(Xt(_,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Qi(o)}}return ft(o),kd(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,a),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==u&&Qi(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(s(166));if(i=Pe.current,yr(o)){if(i=o.stateNode,a=o.memoizedProps,u=null,g=Kt,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}i[Rt]=o,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||t_(i.nodeValue,a)),i||As(o,!0)}else i=dc(i).createTextNode(u),i[Rt]=o,o.stateNode=i}return ft(o),null;case 31:if(a=o.memoizedState,i===null||i.memoizedState!==null){if(u=yr(o),a!==null){if(i===null){if(!u)throw Error(s(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Rt]=o}else wo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ft(o),i=!1}else a=Kf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return o.flags&256?(xn(o),o):(xn(o),null);if((o.flags&128)!==0)throw Error(s(558))}return ft(o),null;case 13:if(u=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=yr(o),u!==null&&u.dehydrated!==null){if(i===null){if(!g)throw Error(s(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[Rt]=o}else wo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ft(o),g=!1}else g=Kf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(xn(o),o):(xn(o),null)}return xn(o),(o.flags&128)!==0?(o.lanes=a,o):(a=u!==null,i=i!==null&&i.memoizedState!==null,a&&(u=o.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==g&&(u.flags|=2048)),a!==i&&a&&(o.child.flags|=8192),Wu(o,o.updateQueue),ft(o),null);case 4:return ht(),i===null&&oh(o.stateNode.containerInfo),ft(o),null;case 10:return Gi(o.type),ft(o),null;case 19:if(se(Et),u=o.memoizedState,u===null)return ft(o),null;if(g=(o.flags&128)!==0,_=u.rendering,_===null)if(g)ja(u,!1);else{if(_t!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(_=qu(i),_!==null){for(o.flags|=128,ja(u,!1),i=_.updateQueue,o.updateQueue=i,Wu(o,i),o.subtreeFlags=0,i=a,a=o.child;a!==null;)Pp(a,i),a=a.sibling;return ce(Et,Et.current&1|2),Fe&&Fi(o,u.treeForkCount),o.child}i=i.sibling}u.tail!==null&&rn()>nc&&(o.flags|=128,g=!0,ja(u,!1),o.lanes=4194304)}else{if(!g)if(i=qu(_),i!==null){if(o.flags|=128,g=!0,i=i.updateQueue,o.updateQueue=i,Wu(o,i),ja(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!Fe)return ft(o),null}else 2*rn()-u.renderingStartTime>nc&&a!==536870912&&(o.flags|=128,g=!0,ja(u,!1),o.lanes=4194304);u.isBackwards?(_.sibling=o.child,o.child=_):(i=u.last,i!==null?i.sibling=_:o.child=_,u.last=_)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=rn(),i.sibling=null,a=Et.current,ce(Et,g?a&1|2:a&1),Fe&&Fi(o,u.treeForkCount),i):(ft(o),null);case 22:case 23:return xn(o),rd(),u=o.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(a&536870912)!==0&&(o.flags&128)===0&&(ft(o),o.subtreeFlags&6&&(o.flags|=8192)):ft(o),a=o.updateQueue,a!==null&&Wu(o,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==a&&(o.flags|=2048),i!==null&&se(Mo),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),Gi(Nt),ft(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function OA(i,o){switch(Yf(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Gi(Nt),ht(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return $o(o),null;case 31:if(o.memoizedState!==null){if(xn(o),o.alternate===null)throw Error(s(340));wo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(xn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));wo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return se(Et),null;case 4:return ht(),null;case 10:return Gi(o.type),null;case 22:case 23:return xn(o),rd(),i!==null&&se(Mo),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Gi(Nt),null;case 25:return null;default:return null}}function ry(i,o){switch(Yf(o),o.tag){case 3:Gi(Nt),ht();break;case 26:case 27:case 5:$o(o);break;case 4:ht();break;case 31:o.memoizedState!==null&&xn(o);break;case 13:xn(o);break;case 19:se(Et);break;case 10:Gi(o.type);break;case 22:case 23:xn(o),rd(),i!==null&&se(Mo);break;case 24:Gi(Nt)}}function el(i,o){try{var a=o.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var g=u.next;a=g;do{if((a.tag&i)===i){u=void 0;var _=a.create,A=a.inst;u=_(),A.destroy=u}a=a.next}while(a!==g)}}catch(I){nt(o,o.return,I)}}function Ns(i,o,a){try{var u=o.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var _=g.next;u=_;do{if((u.tag&i)===i){var A=u.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,g=o;var U=a,G=I;try{G()}catch(W){nt(g,U,W)}}}u=u.next}while(u!==_)}}catch(W){nt(o,o.return,W)}}function ay(i){var o=i.updateQueue;if(o!==null){var a=i.stateNode;try{Wp(o,a)}catch(u){nt(i,i.return,u)}}}function ly(i,o,a){a.props=Lo(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){nt(i,o,u)}}function tl(i,o){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(g){nt(i,o,g)}}function bi(i,o){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(g){nt(i,o,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){nt(i,o,g)}else a.current=null}function uy(i){var o=i.type,a=i.memoizedProps,u=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(g){nt(i,i.return,g)}}function qd(i,o,a){try{var u=i.stateNode;aC(u,i.type,a,o),u[Bt]=o}catch(g){nt(i,i.return,g)}}function cy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ks(i.type)||i.tag===4}function Od(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||cy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ks(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function zd(i,o,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(i),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=Wn));else if(u!==4&&(u===27&&ks(i.type)&&(a=i.stateNode,o=null),i=i.child,i!==null))for(zd(i,o,a),i=i.sibling;i!==null;)zd(i,o,a),i=i.sibling}function Zu(i,o,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,o?a.insertBefore(i,o):a.appendChild(i);else if(u!==4&&(u===27&&ks(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Zu(i,o,a),i=i.sibling;i!==null;)Zu(i,o,a),i=i.sibling}function fy(i){var o=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);Xt(o,u,a),o[Rt]=i,o[Bt]=a}catch(_){nt(i,i.return,_)}}var $i=!1,Pt=!1,Bd=!1,dy=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function zA(i,o){if(i=i.containerInfo,lh=vc,i=Cp(i),Vf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var g=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var A=0,I=-1,U=-1,G=0,W=0,ne=i,K=null;t:for(;;){for(var $;ne!==a||g!==0&&ne.nodeType!==3||(I=A+g),ne!==_||u!==0&&ne.nodeType!==3||(U=A+u),ne.nodeType===3&&(A+=ne.nodeValue.length),($=ne.firstChild)!==null;)K=ne,ne=$;for(;;){if(ne===i)break t;if(K===a&&++G===g&&(I=A),K===_&&++W===u&&(U=A),($=ne.nextSibling)!==null)break;ne=K,K=ne.parentNode}ne=$}a=I===-1||U===-1?null:{start:I,end:U}}else a=null}a=a||{start:0,end:0}}else a=null;for(uh={focusedElem:i,selectionRange:a},vc=!1,Ht=o;Ht!==null;)if(o=Ht,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Ht=i;else for(;Ht!==null;){switch(o=Ht,_=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)g=i[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=o,g=_.memoizedProps,_=_.memoizedState,u=a.stateNode;try{var ve=Lo(a.type,g);i=u.getSnapshotBeforeUpdate(ve,_),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ce){nt(a,a.return,Ce)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,a=i.nodeType,a===9)dh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":dh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,Ht=i;break}Ht=o.return}}function hy(i,o,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Wi(i,a),u&4&&el(5,a);break;case 1:if(Wi(i,a),u&4)if(i=a.stateNode,o===null)try{i.componentDidMount()}catch(A){nt(a,a.return,A)}else{var g=Lo(a.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(g,o,i.__reactInternalSnapshotBeforeUpdate)}catch(A){nt(a,a.return,A)}}u&64&&ay(a),u&512&&tl(a,a.return);break;case 3:if(Wi(i,a),u&64&&(i=a.updateQueue,i!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{Wp(i,o)}catch(A){nt(a,a.return,A)}}break;case 27:o===null&&u&4&&fy(a);case 26:case 5:Wi(i,a),o===null&&u&4&&uy(a),u&512&&tl(a,a.return);break;case 12:Wi(i,a);break;case 31:Wi(i,a),u&4&&gy(i,a);break;case 13:Wi(i,a),u&4&&yy(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=$A.bind(null,a),pC(i,a))));break;case 22:if(u=a.memoizedState!==null||$i,!u){o=o!==null&&o.memoizedState!==null||Pt,g=$i;var _=Pt;$i=u,(Pt=o)&&!_?Zi(i,a,(a.subtreeFlags&8772)!==0):Wi(i,a),$i=g,Pt=_}break;case 30:break;default:Wi(i,a)}}function my(i){var o=i.alternate;o!==null&&(i.alternate=null,my(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&er(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var pt=null,fn=!1;function Xi(i,o,a){for(a=a.child;a!==null;)py(i,o,a),a=a.sibling}function py(i,o,a){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(Kn,a)}catch{}switch(a.tag){case 26:Pt||bi(a,o),Xi(i,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Pt||bi(a,o);var u=pt,g=fn;ks(a.type)&&(pt=a.stateNode,fn=!1),Xi(i,o,a),cl(a.stateNode),pt=u,fn=g;break;case 5:Pt||bi(a,o);case 6:if(u=pt,g=fn,pt=null,Xi(i,o,a),pt=u,fn=g,pt!==null)if(fn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(a.stateNode)}catch(_){nt(a,o,_)}else try{pt.removeChild(a.stateNode)}catch(_){nt(a,o,_)}break;case 18:pt!==null&&(fn?(i=pt,a_(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),qr(i)):a_(pt,a.stateNode));break;case 4:u=pt,g=fn,pt=a.stateNode.containerInfo,fn=!0,Xi(i,o,a),pt=u,fn=g;break;case 0:case 11:case 14:case 15:Ns(2,a,o),Pt||Ns(4,a,o),Xi(i,o,a);break;case 1:Pt||(bi(a,o),u=a.stateNode,typeof u.componentWillUnmount=="function"&&ly(a,o,u)),Xi(i,o,a);break;case 21:Xi(i,o,a);break;case 22:Pt=(u=Pt)||a.memoizedState!==null,Xi(i,o,a),Pt=u;break;default:Xi(i,o,a)}}function gy(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{qr(i)}catch(a){nt(o,o.return,a)}}}function yy(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{qr(i)}catch(a){nt(o,o.return,a)}}function BA(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new dy),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new dy),o;default:throw Error(s(435,i.tag))}}function ju(i,o){var a=BA(i);o.forEach(function(u){if(!a.has(u)){a.add(u);var g=XA.bind(null,i,u);u.then(g,g)}})}function dn(i,o){var a=o.deletions;if(a!==null)for(var u=0;u<a.length;u++){var g=a[u],_=i,A=o,I=A;e:for(;I!==null;){switch(I.tag){case 27:if(ks(I.type)){pt=I.stateNode,fn=!1;break e}break;case 5:pt=I.stateNode,fn=!1;break e;case 3:case 4:pt=I.stateNode.containerInfo,fn=!0;break e}I=I.return}if(pt===null)throw Error(s(160));py(_,A,g),pt=null,fn=!1,_=g.alternate,_!==null&&(_.return=null),g.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)_y(o,i),o=o.sibling}var ii=null;function _y(i,o){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:dn(o,i),hn(i),u&4&&(Ns(3,i,i.return),el(3,i),Ns(5,i,i.return));break;case 1:dn(o,i),hn(i),u&512&&(Pt||a===null||bi(a,a.return)),u&64&&$i&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var g=ii;if(dn(o,i),hn(i),u&512&&(Pt||a===null||bi(a,a.return)),u&4){var _=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){e:{u=i.type,a=i.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":_=g.getElementsByTagName("title")[0],(!_||_[pi]||_[Rt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=g.createElement(u),g.head.insertBefore(_,g.querySelector("head > title"))),Xt(_,u,a),_[Rt]=i,wt(_),u=_;break e;case"link":var A=__("link","href",g).get(u+(a.href||""));if(A){for(var I=0;I<A.length;I++)if(_=A[I],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(I,1);break t}}_=g.createElement(u),Xt(_,u,a),g.head.appendChild(_);break;case"meta":if(A=__("meta","content",g).get(u+(a.content||""))){for(I=0;I<A.length;I++)if(_=A[I],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(I,1);break t}}_=g.createElement(u),Xt(_,u,a),g.head.appendChild(_);break;default:throw Error(s(468,u))}_[Rt]=i,wt(_),u=_}i.stateNode=u}else v_(g,i.type,i.stateNode);else i.stateNode=y_(g,u,i.memoizedProps);else _!==u?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,u===null?v_(g,i.type,i.stateNode):y_(g,u,i.memoizedProps)):u===null&&i.stateNode!==null&&qd(i,i.memoizedProps,a.memoizedProps)}break;case 27:dn(o,i),hn(i),u&512&&(Pt||a===null||bi(a,a.return)),a!==null&&u&4&&qd(i,i.memoizedProps,a.memoizedProps);break;case 5:if(dn(o,i),hn(i),u&512&&(Pt||a===null||bi(a,a.return)),i.flags&32){g=i.stateNode;try{cn(g,"")}catch(ve){nt(i,i.return,ve)}}u&4&&i.stateNode!=null&&(g=i.memoizedProps,qd(i,g,a!==null?a.memoizedProps:g)),u&1024&&(Bd=!0);break;case 6:if(dn(o,i),hn(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(ve){nt(i,i.return,ve)}}break;case 3:if(pc=null,g=ii,ii=hc(o.containerInfo),dn(o,i),ii=g,hn(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{qr(o.containerInfo)}catch(ve){nt(i,i.return,ve)}Bd&&(Bd=!1,vy(i));break;case 4:u=ii,ii=hc(i.stateNode.containerInfo),dn(o,i),hn(i),ii=u;break;case 12:dn(o,i),hn(i);break;case 31:dn(o,i),hn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,ju(i,u)));break;case 13:dn(o,i),hn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(tc=rn()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,ju(i,u)));break;case 22:g=i.memoizedState!==null;var U=a!==null&&a.memoizedState!==null,G=$i,W=Pt;if($i=G||g,Pt=W||U,dn(o,i),Pt=W,$i=G,hn(i),u&8192)e:for(o=i.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(a===null||U||$i||Pt||ko(i)),a=null,o=i;;){if(o.tag===5||o.tag===26){if(a===null){U=a=o;try{if(_=U.stateNode,g)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=U.stateNode;var ne=U.memoizedProps.style,K=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;I.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(ve){nt(U,U.return,ve)}}}else if(o.tag===6){if(a===null){U=o;try{U.stateNode.nodeValue=g?"":U.memoizedProps}catch(ve){nt(U,U.return,ve)}}}else if(o.tag===18){if(a===null){U=o;try{var $=U.stateNode;g?l_($,!0):l_(U.stateNode,!1)}catch(ve){nt(U,U.return,ve)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,ju(i,a))));break;case 19:dn(o,i),hn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,ju(i,u)));break;case 30:break;case 21:break;default:dn(o,i),hn(i)}}function hn(i){var o=i.flags;if(o&2){try{for(var a,u=i.return;u!==null;){if(cy(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var g=a.stateNode,_=Od(i);Zu(i,_,g);break;case 5:var A=a.stateNode;a.flags&32&&(cn(A,""),a.flags&=-33);var I=Od(i);Zu(i,I,A);break;case 3:case 4:var U=a.stateNode.containerInfo,G=Od(i);zd(i,G,U);break;default:throw Error(s(161))}}catch(W){nt(i,i.return,W)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function vy(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;vy(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function Wi(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)hy(i,o.alternate,o),o=o.sibling}function ko(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Ns(4,o,o.return),ko(o);break;case 1:bi(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&ly(o,o.return,a),ko(o);break;case 27:cl(o.stateNode);case 26:case 5:bi(o,o.return),ko(o);break;case 22:o.memoizedState===null&&ko(o);break;case 30:ko(o);break;default:ko(o)}i=i.sibling}}function Zi(i,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,g=i,_=o,A=_.flags;switch(_.tag){case 0:case 11:case 15:Zi(g,_,a),el(4,_);break;case 1:if(Zi(g,_,a),u=_,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(G){nt(u,u.return,G)}if(u=_,g=u.updateQueue,g!==null){var I=u.stateNode;try{var U=g.shared.hiddenCallbacks;if(U!==null)for(g.shared.hiddenCallbacks=null,g=0;g<U.length;g++)Xp(U[g],I)}catch(G){nt(u,u.return,G)}}a&&A&64&&ay(_),tl(_,_.return);break;case 27:fy(_);case 26:case 5:Zi(g,_,a),a&&u===null&&A&4&&uy(_),tl(_,_.return);break;case 12:Zi(g,_,a);break;case 31:Zi(g,_,a),a&&A&4&&gy(g,_);break;case 13:Zi(g,_,a),a&&A&4&&yy(g,_);break;case 22:_.memoizedState===null&&Zi(g,_,a),tl(_,_.return);break;case 30:break;default:Zi(g,_,a)}o=o.sibling}}function Fd(i,o){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&Ba(a))}function Hd(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Ba(i))}function si(i,o,a,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Ty(i,o,a,u),o=o.sibling}function Ty(i,o,a,u){var g=o.flags;switch(o.tag){case 0:case 11:case 15:si(i,o,a,u),g&2048&&el(9,o);break;case 1:si(i,o,a,u);break;case 3:si(i,o,a,u),g&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Ba(i)));break;case 12:if(g&2048){si(i,o,a,u),i=o.stateNode;try{var _=o.memoizedProps,A=_.id,I=_.onPostCommit;typeof I=="function"&&I(A,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(U){nt(o,o.return,U)}}else si(i,o,a,u);break;case 31:si(i,o,a,u);break;case 13:si(i,o,a,u);break;case 23:break;case 22:_=o.stateNode,A=o.alternate,o.memoizedState!==null?_._visibility&2?si(i,o,a,u):nl(i,o):_._visibility&2?si(i,o,a,u):(_._visibility|=2,Rr(i,o,a,u,(o.subtreeFlags&10256)!==0||!1)),g&2048&&Fd(A,o);break;case 24:si(i,o,a,u),g&2048&&Hd(o.alternate,o);break;default:si(i,o,a,u)}}function Rr(i,o,a,u,g){for(g=g&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=i,A=o,I=a,U=u,G=A.flags;switch(A.tag){case 0:case 11:case 15:Rr(_,A,I,U,g),el(8,A);break;case 23:break;case 22:var W=A.stateNode;A.memoizedState!==null?W._visibility&2?Rr(_,A,I,U,g):nl(_,A):(W._visibility|=2,Rr(_,A,I,U,g)),g&&G&2048&&Fd(A.alternate,A);break;case 24:Rr(_,A,I,U,g),g&&G&2048&&Hd(A.alternate,A);break;default:Rr(_,A,I,U,g)}o=o.sibling}}function nl(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=i,u=o,g=u.flags;switch(u.tag){case 22:nl(a,u),g&2048&&Fd(u.alternate,u);break;case 24:nl(a,u),g&2048&&Hd(u.alternate,u);break;default:nl(a,u)}o=o.sibling}}var il=8192;function wr(i,o,a){if(i.subtreeFlags&il)for(i=i.child;i!==null;)Ey(i,o,a),i=i.sibling}function Ey(i,o,a){switch(i.tag){case 26:wr(i,o,a),i.flags&il&&i.memoizedState!==null&&RC(a,ii,i.memoizedState,i.memoizedProps);break;case 5:wr(i,o,a);break;case 3:case 4:var u=ii;ii=hc(i.stateNode.containerInfo),wr(i,o,a),ii=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=il,il=16777216,wr(i,o,a),il=u):wr(i,o,a));break;default:wr(i,o,a)}}function Sy(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function sl(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];Ht=u,Cy(u,i)}Sy(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ay(i),i=i.sibling}function Ay(i){switch(i.tag){case 0:case 11:case 15:sl(i),i.flags&2048&&Ns(9,i,i.return);break;case 3:sl(i);break;case 12:sl(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,ec(i)):sl(i);break;default:sl(i)}}function ec(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];Ht=u,Cy(u,i)}Sy(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Ns(8,o,o.return),ec(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,ec(o));break;default:ec(o)}i=i.sibling}}function Cy(i,o){for(;Ht!==null;){var a=Ht;switch(a.tag){case 0:case 11:case 15:Ns(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ba(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Ht=u;else e:for(a=i;Ht!==null;){u=Ht;var g=u.sibling,_=u.return;if(my(u),u===a){Ht=null;break e}if(g!==null){g.return=_,Ht=g;break e}Ht=_}}}var FA={getCacheForType:function(i){var o=Qt(Nt),a=o.data.get(i);return a===void 0&&(a=i(),o.data.set(i,a)),a},cacheSignal:function(){return Qt(Nt).controller.signal}},HA=typeof WeakMap=="function"?WeakMap:Map,Ze=0,at=null,Le=null,qe=0,tt=0,In=null,Ms=!1,br=!1,Gd=!1,ji=0,_t=0,Ds=0,qo=0,Yd=0,Rn=0,Nr=0,ol=null,mn=null,Jd=!1,tc=0,xy=0,nc=1/0,ic=null,Ps=null,Ot=0,Vs=null,Mr=null,es=0,Kd=0,Qd=null,Iy=null,rl=0,$d=null;function wn(){return(Ze&2)!==0&&qe!==0?qe&-qe:Y.T!==null?th():su()}function Ry(){if(Rn===0)if((qe&536870912)===0||Fe){var i=co;co<<=1,(co&3932160)===0&&(co=262144),Rn=i}else Rn=536870912;return i=Cn.current,i!==null&&(i.flags|=32),Rn}function pn(i,o,a){(i===at&&(tt===2||tt===9)||i.cancelPendingCommit!==null)&&(Dr(i,0),Us(i,qe,Rn,!1)),fo(i,a),((Ze&2)===0||i!==at)&&(i===at&&((Ze&2)===0&&(qo|=a),_t===4&&Us(i,qe,Rn,!1)),Ni(i))}function wy(i,o,a){if((Ze&6)!==0)throw Error(s(327));var u=!a&&(o&127)===0&&(o&i.expiredLanes)===0||Qn(i,o),g=u?JA(i,o):Wd(i,o,!0),_=u;do{if(g===0){br&&!u&&Us(i,o,0,!1);break}else{if(a=i.current.alternate,_&&!GA(a)){g=Wd(i,o,!1),_=!1;continue}if(g===2){if(_=o,i.errorRecoveryDisabledLanes&_)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var I=i;g=ol;var U=I.current.memoizedState.isDehydrated;if(U&&(Dr(I,A).flags|=256),A=Wd(I,A,!1),A!==2){if(Gd&&!U){I.errorRecoveryDisabledLanes|=_,qo|=_,g=4;break e}_=mn,mn=g,_!==null&&(mn===null?mn=_:mn.push.apply(mn,_))}g=A}if(_=!1,g!==2)continue}}if(g===1){Dr(i,0),Us(i,o,0,!0);break}e:{switch(u=i,_=g,_){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:Us(u,o,Rn,!Ms);break e;case 2:mn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(g=tc+300-rn(),10<g)){if(Us(u,o,Rn,!Ms),di(u,0,!0)!==0)break e;es=o,u.timeoutHandle=o_(by.bind(null,u,a,mn,ic,Jd,o,Rn,qo,Nr,Ms,_,"Throttled",-0,0),g);break e}by(u,a,mn,ic,Jd,o,Rn,qo,Nr,Ms,_,null,-0,0)}}break}while(!0);Ni(i)}function by(i,o,a,u,g,_,A,I,U,G,W,ne,K,$){if(i.timeoutHandle=-1,ne=o.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wn},Ey(o,_,ne);var ve=(_&62914560)===_?tc-rn():(_&4194048)===_?xy-rn():0;if(ve=wC(ne,ve),ve!==null){es=_,i.cancelPendingCommit=ve(ky.bind(null,i,o,_,a,u,g,A,I,U,W,ne,null,K,$)),Us(i,_,A,!G);return}}ky(i,o,_,a,u,g,A,I,U)}function GA(i){for(var o=i;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var g=a[u],_=g.getSnapshot;g=g.value;try{if(!Sn(_(),g))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Us(i,o,a,u){o&=~Yd,o&=~qo,i.suspendedLanes|=o,i.pingedLanes&=~o,u&&(i.warmLanes|=o),u=i.expirationTimes;for(var g=o;0<g;){var _=31-vt(g),A=1<<_;u[_]=-1,g&=~A}a!==0&&ho(i,a,o)}function sc(){return(Ze&6)===0?(al(0),!1):!0}function Xd(){if(Le!==null){if(tt===0)var i=Le.return;else i=Le,Hi=bo=null,dd(i),Sr=null,Ha=0,i=Le;for(;i!==null;)ry(i.alternate,i),i=i.return;Le=null}}function Dr(i,o){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,cC(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),es=0,Xd(),at=i,Le=a=Bi(i.current,null),qe=o,tt=0,In=null,Ms=!1,br=Qn(i,o),Gd=!1,Nr=Rn=Yd=qo=Ds=_t=0,mn=ol=null,Jd=!1,(o&8)!==0&&(o|=o&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=o;0<u;){var g=31-vt(u),_=1<<g;o|=i[g],u&=~_}return ji=o,xu(),a}function Ny(i,o){De=null,Y.H=Wa,o===Er||o===Pu?(o=Jp(),tt=3):o===ed?(o=Jp(),tt=4):tt=o===wd?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,In=o,Le===null&&(_t=1,Ku(i,Ln(o,i.current)))}function My(){var i=Cn.current;return i===null?!0:(qe&4194048)===qe?zn===null:(qe&62914560)===qe||(qe&536870912)!==0?i===zn:!1}function Dy(){var i=Y.H;return Y.H=Wa,i===null?Wa:i}function Py(){var i=Y.A;return Y.A=FA,i}function oc(){_t=4,Ms||(qe&4194048)!==qe&&Cn.current!==null||(br=!0),(Ds&134217727)===0&&(qo&134217727)===0||at===null||Us(at,qe,Rn,!1)}function Wd(i,o,a){var u=Ze;Ze|=2;var g=Dy(),_=Py();(at!==i||qe!==o)&&(ic=null,Dr(i,o)),o=!1;var A=_t;e:do try{if(tt!==0&&Le!==null){var I=Le,U=In;switch(tt){case 8:Xd(),A=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(o=!0);var G=tt;if(tt=0,In=null,Pr(i,I,U,G),a&&br){A=0;break e}break;default:G=tt,tt=0,In=null,Pr(i,I,U,G)}}YA(),A=_t;break}catch(W){Ny(i,W)}while(!0);return o&&i.shellSuspendCounter++,Hi=bo=null,Ze=u,Y.H=g,Y.A=_,Le===null&&(at=null,qe=0,xu()),A}function YA(){for(;Le!==null;)Vy(Le)}function JA(i,o){var a=Ze;Ze|=2;var u=Dy(),g=Py();at!==i||qe!==o?(ic=null,nc=rn()+500,Dr(i,o)):br=Qn(i,o);e:do try{if(tt!==0&&Le!==null){o=Le;var _=In;t:switch(tt){case 1:tt=0,In=null,Pr(i,o,_,1);break;case 2:case 9:if(Gp(_)){tt=0,In=null,Uy(o);break}o=function(){tt!==2&&tt!==9||at!==i||(tt=7),Ni(i)},_.then(o,o);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:Gp(_)?(tt=0,In=null,Uy(o)):(tt=0,In=null,Pr(i,o,_,7));break;case 5:var A=null;switch(Le.tag){case 26:A=Le.memoizedState;case 5:case 27:var I=Le;if(A?T_(A):I.stateNode.complete){tt=0,In=null;var U=I.sibling;if(U!==null)Le=U;else{var G=I.return;G!==null?(Le=G,rc(G)):Le=null}break t}}tt=0,In=null,Pr(i,o,_,5);break;case 6:tt=0,In=null,Pr(i,o,_,6);break;case 8:Xd(),_t=6;break e;default:throw Error(s(462))}}KA();break}catch(W){Ny(i,W)}while(!0);return Hi=bo=null,Y.H=u,Y.A=g,Ze=a,Le!==null?0:(at=null,qe=0,xu(),_t)}function KA(){for(;Le!==null&&!Rf();)Vy(Le)}function Vy(i){var o=sy(i.alternate,i,ji);i.memoizedProps=i.pendingProps,o===null?rc(i):Le=o}function Uy(i){var o=i,a=o.alternate;switch(o.tag){case 15:case 0:o=Zg(a,o,o.pendingProps,o.type,void 0,qe);break;case 11:o=Zg(a,o,o.pendingProps,o.type.render,o.ref,qe);break;case 5:dd(o);default:ry(a,o),o=Le=Pp(o,ji),o=sy(a,o,ji)}i.memoizedProps=i.pendingProps,o===null?rc(i):Le=o}function Pr(i,o,a,u){Hi=bo=null,dd(o),Sr=null,Ha=0;var g=o.return;try{if(UA(i,g,o,a,qe)){_t=1,Ku(i,Ln(a,i.current)),Le=null;return}}catch(_){if(g!==null)throw Le=g,_;_t=1,Ku(i,Ln(a,i.current)),Le=null;return}o.flags&32768?(Fe||u===1?i=!0:br||(qe&536870912)!==0?i=!1:(Ms=i=!0,(u===2||u===9||u===3||u===6)&&(u=Cn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Ly(o,i)):rc(o)}function rc(i){var o=i;do{if((o.flags&32768)!==0){Ly(o,Ms);return}i=o.return;var a=qA(o.alternate,o,ji);if(a!==null){Le=a;return}if(o=o.sibling,o!==null){Le=o;return}Le=o=i}while(o!==null);_t===0&&(_t=5)}function Ly(i,o){do{var a=OA(i.alternate,i);if(a!==null){a.flags&=32767,Le=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(i=i.sibling,i!==null)){Le=i;return}Le=i=a}while(i!==null);_t=6,Le=null}function ky(i,o,a,u,g,_,A,I,U){i.cancelPendingCommit=null;do ac();while(Ot!==0);if((Ze&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(_=o.lanes|o.childLanes,_|=Of,Nf(i,a,_,A,I,U),i===at&&(Le=at=null,qe=0),Mr=o,Vs=i,es=a,Kd=_,Qd=g,Iy=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,WA(fs,function(){return Fy(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=Y.T,Y.T=null,g=re.p,re.p=2,A=Ze,Ze|=4;try{zA(i,o,a)}finally{Ze=A,re.p=g,Y.T=u}}Ot=1,qy(),Oy(),zy()}}function qy(){if(Ot===1){Ot=0;var i=Vs,o=Mr,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var u=re.p;re.p=2;var g=Ze;Ze|=4;try{_y(o,i);var _=uh,A=Cp(i.containerInfo),I=_.focusedElem,U=_.selectionRange;if(A!==I&&I&&I.ownerDocument&&Ap(I.ownerDocument.documentElement,I)){if(U!==null&&Vf(I)){var G=U.start,W=U.end;if(W===void 0&&(W=G),"selectionStart"in I)I.selectionStart=G,I.selectionEnd=Math.min(W,I.value.length);else{var ne=I.ownerDocument||document,K=ne&&ne.defaultView||window;if(K.getSelection){var $=K.getSelection(),ve=I.textContent.length,Ce=Math.min(U.start,ve),rt=U.end===void 0?Ce:Math.min(U.end,ve);!$.extend&&Ce>rt&&(A=rt,rt=Ce,Ce=A);var z=Sp(I,Ce),k=Sp(I,rt);if(z&&k&&($.rangeCount!==1||$.anchorNode!==z.node||$.anchorOffset!==z.offset||$.focusNode!==k.node||$.focusOffset!==k.offset)){var H=ne.createRange();H.setStart(z.node,z.offset),$.removeAllRanges(),Ce>rt?($.addRange(H),$.extend(k.node,k.offset)):(H.setEnd(k.node,k.offset),$.addRange(H))}}}}for(ne=[],$=I;$=$.parentNode;)$.nodeType===1&&ne.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ne.length;I++){var ee=ne[I];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}vc=!!lh,uh=lh=null}finally{Ze=g,re.p=u,Y.T=a}}i.current=o,Ot=2}}function Oy(){if(Ot===2){Ot=0;var i=Vs,o=Mr,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var u=re.p;re.p=2;var g=Ze;Ze|=4;try{hy(i,o.alternate,o)}finally{Ze=g,re.p=u,Y.T=a}}Ot=3}}function zy(){if(Ot===4||Ot===3){Ot=0,Wl();var i=Vs,o=Mr,a=es,u=Iy;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ot=5:(Ot=0,Mr=Vs=null,By(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Ps=null),ki(a),o=o.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(Kn,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=Y.T,g=re.p,re.p=2,Y.T=null;try{for(var _=i.onRecoverableError,A=0;A<u.length;A++){var I=u[A];_(I.value,{componentStack:I.stack})}}finally{Y.T=o,re.p=g}}(es&3)!==0&&ac(),Ni(i),g=i.pendingLanes,(a&261930)!==0&&(g&42)!==0?i===$d?rl++:(rl=0,$d=i):rl=0,al(0)}}function By(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Ba(o)))}function ac(){return qy(),Oy(),zy(),Fy()}function Fy(){if(Ot!==5)return!1;var i=Vs,o=Kd;Kd=0;var a=ki(es),u=Y.T,g=re.p;try{re.p=32>a?32:a,Y.T=null,a=Qd,Qd=null;var _=Vs,A=es;if(Ot=0,Mr=Vs=null,es=0,(Ze&6)!==0)throw Error(s(331));var I=Ze;if(Ze|=4,Ay(_.current),Ty(_,_.current,A,a),Ze=I,al(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(Kn,_)}catch{}return!0}finally{re.p=g,Y.T=u,By(i,o)}}function Hy(i,o,a){o=Ln(a,o),o=Rd(i.stateNode,o,2),i=Rs(i,o,2),i!==null&&(fo(i,2),Ni(i))}function nt(i,o,a){if(i.tag===3)Hy(i,i,a);else for(;o!==null;){if(o.tag===3){Hy(o,i,a);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ps===null||!Ps.has(u))){i=Ln(a,i),a=Gg(2),u=Rs(o,a,2),u!==null&&(Yg(a,u,o,i),fo(u,2),Ni(u));break}}o=o.return}}function Zd(i,o,a){var u=i.pingCache;if(u===null){u=i.pingCache=new HA;var g=new Set;u.set(o,g)}else g=u.get(o),g===void 0&&(g=new Set,u.set(o,g));g.has(a)||(Gd=!0,g.add(a),i=QA.bind(null,i,o,a),o.then(i,i))}function QA(i,o,a){var u=i.pingCache;u!==null&&u.delete(o),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,at===i&&(qe&a)===a&&(_t===4||_t===3&&(qe&62914560)===qe&&300>rn()-tc?(Ze&2)===0&&Dr(i,0):Yd|=a,Nr===qe&&(Nr=0)),Ni(i)}function Gy(i,o){o===0&&(o=iu()),i=Io(i,o),i!==null&&(fo(i,o),Ni(i))}function $A(i){var o=i.memoizedState,a=0;o!==null&&(a=o.retryLane),Gy(i,a)}function XA(i,o){var a=0;switch(i.tag){case 31:case 13:var u=i.stateNode,g=i.memoizedState;g!==null&&(a=g.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(o),Gy(i,a)}function WA(i,o){return qt(i,o)}var lc=null,Vr=null,jd=!1,uc=!1,eh=!1,Ls=0;function Ni(i){i!==Vr&&i.next===null&&(Vr===null?lc=Vr=i:Vr=Vr.next=i),uc=!0,jd||(jd=!0,jA())}function al(i,o){if(!eh&&uc){eh=!0;do for(var a=!1,u=lc;u!==null;){if(i!==0){var g=u.pendingLanes;if(g===0)var _=0;else{var A=u.suspendedLanes,I=u.pingedLanes;_=(1<<31-vt(42|i)+1)-1,_&=g&~(A&~I),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,Qy(u,_))}else _=qe,_=di(u,u===at?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||Qn(u,_)||(a=!0,Qy(u,_));u=u.next}while(a);eh=!1}}function ZA(){Yy()}function Yy(){uc=jd=!1;var i=0;Ls!==0&&uC()&&(i=Ls);for(var o=rn(),a=null,u=lc;u!==null;){var g=u.next,_=Jy(u,o);_===0?(u.next=null,a===null?lc=g:a.next=g,g===null&&(Vr=a)):(a=u,(i!==0||(_&3)!==0)&&(uc=!0)),u=g}Ot!==0&&Ot!==5||al(i),Ls!==0&&(Ls=0)}function Jy(i,o){for(var a=i.suspendedLanes,u=i.pingedLanes,g=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var A=31-vt(_),I=1<<A,U=g[A];U===-1?((I&a)===0||(I&u)!==0)&&(g[A]=bf(I,o)):U<=o&&(i.expiredLanes|=I),_&=~I}if(o=at,a=qe,a=di(i,i===o?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===o&&(tt===2||tt===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&cs(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Qn(i,a)){if(o=a&-a,o===i.callbackPriority)return o;switch(u!==null&&cs(u),ki(a)){case 2:case 8:a=ya;break;case 32:a=fs;break;case 268435456:a=Zl;break;default:a=fs}return u=Ky.bind(null,i),a=qt(a,u),i.callbackPriority=o,i.callbackNode=a,o}return u!==null&&u!==null&&cs(u),i.callbackPriority=2,i.callbackNode=null,2}function Ky(i,o){if(Ot!==0&&Ot!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(ac()&&i.callbackNode!==a)return null;var u=qe;return u=di(i,i===at?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(wy(i,u,o),Jy(i,rn()),i.callbackNode!=null&&i.callbackNode===a?Ky.bind(null,i):null)}function Qy(i,o){if(ac())return null;wy(i,o,!0)}function jA(){fC(function(){(Ze&6)!==0?qt(ga,ZA):Yy()})}function th(){if(Ls===0){var i=vr;i===0&&(i=ci,ci<<=1,(ci&261888)===0&&(ci=256)),Ls=i}return Ls}function $y(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:sr(""+i)}function Xy(i,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,i.id&&a.setAttribute("form",i.id),o.parentNode.insertBefore(a,o),i=new FormData(i),a.parentNode.removeChild(a),i}function eC(i,o,a,u,g){if(o==="submit"&&a&&a.stateNode===g){var _=$y((g[Bt]||null).action),A=u.submitter;A&&(o=(o=A[Bt]||null)?$y(o.formAction):A.getAttribute("formAction"),o!==null&&(_=o,A=null));var I=new Ai("action","action",null,u,g);i.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ls!==0){var U=A?Xy(g,A):new FormData(g);Ed(a,{pending:!0,data:U,method:g.method,action:_},null,U)}}else typeof _=="function"&&(I.preventDefault(),U=A?Xy(g,A):new FormData(g),Ed(a,{pending:!0,data:U,method:g.method,action:_},_,U))},currentTarget:g}]})}}for(var nh=0;nh<qf.length;nh++){var ih=qf[nh],tC=ih.toLowerCase(),nC=ih[0].toUpperCase()+ih.slice(1);ni(tC,"on"+nC)}ni(Rp,"onAnimationEnd"),ni(wp,"onAnimationIteration"),ni(bp,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(_A,"onTransitionRun"),ni(vA,"onTransitionStart"),ni(TA,"onTransitionCancel"),ni(Np,"onTransitionEnd"),vi("onMouseEnter",["mouseout","mouseover"]),vi("onMouseLeave",["mouseout","mouseover"]),vi("onPointerEnter",["pointerout","pointerover"]),vi("onPointerLeave",["pointerout","pointerover"]),_i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_i("onBeforeInput",["compositionend","keypress","textInput","paste"]),_i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ll));function Wy(i,o){o=(o&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],g=u.event;u=u.listeners;e:{var _=void 0;if(o)for(var A=u.length-1;0<=A;A--){var I=u[A],U=I.instance,G=I.currentTarget;if(I=I.listener,U!==_&&g.isPropagationStopped())break e;_=I,g.currentTarget=G;try{_(g)}catch(W){Cu(W)}g.currentTarget=null,_=U}else for(A=0;A<u.length;A++){if(I=u[A],U=I.instance,G=I.currentTarget,I=I.listener,U!==_&&g.isPropagationStopped())break e;_=I,g.currentTarget=G;try{_(g)}catch(W){Cu(W)}g.currentTarget=null,_=U}}}}function ke(i,o){var a=o[jo];a===void 0&&(a=o[jo]=new Set);var u=i+"__bubble";a.has(u)||(Zy(o,i,2,!1),a.add(u))}function sh(i,o,a){var u=0;o&&(u|=4),Zy(a,i,u,o)}var cc="_reactListening"+Math.random().toString(36).slice(2);function oh(i){if(!i[cc]){i[cc]=!0,Ta.forEach(function(a){a!=="selectionchange"&&(iC.has(a)||sh(a,!1,i),sh(a,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[cc]||(o[cc]=!0,sh("selectionchange",!1,o))}}function Zy(i,o,a,u){switch(R_(o)){case 2:var g=MC;break;case 8:g=DC;break;default:g=Th}a=g.bind(null,o,a,i),g=void 0,!_o||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),u?g!==void 0?i.addEventListener(o,a,{capture:!0,passive:g}):i.addEventListener(o,a,!0):g!==void 0?i.addEventListener(o,a,{passive:g}):i.addEventListener(o,a,!1)}function rh(i,o,a,u,g){var _=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var A=u.tag;if(A===3||A===4){var I=u.stateNode.containerInfo;if(I===g)break;if(A===4)for(A=u.return;A!==null;){var U=A.tag;if((U===3||U===4)&&A.stateNode.containerInfo===g)return;A=A.return}for(;I!==null;){if(A=gi(I),A===null)return;if(U=A.tag,U===5||U===6||U===26||U===27){u=_=A;continue e}I=I.parentNode}}u=u.return}ys(function(){var G=_,W=Dn(a),ne=[];e:{var K=Mp.get(i);if(K!==void 0){var $=Ai,ve=i;switch(i){case"keypress":if(To(a)===0)break e;case"keydown":case"keyup":$=Eu;break;case"focusin":ve="focus",$=So;break;case"focusout":ve="blur",$=So;break;case"beforeblur":case"afterblur":$=So;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Pa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=du;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=E;break;case Rp:case wp:case bp:$=mu;break;case Np:$=w;break;case"scroll":case"scrollend":$=Da;break;case"wheel":$=Q;break;case"copy":case"cut":case"paste":$=pu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=zi;break;case"toggle":case"beforetoggle":$=Me}var Ce=(o&4)!==0,rt=!Ce&&(i==="scroll"||i==="scrollend"),z=Ce?K!==null?K+"Capture":null:K;Ce=[];for(var k=G,H;k!==null;){var ee=k;if(H=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||H===null||z===null||(ee=Zn(k,z),ee!=null&&Ce.push(ul(k,ee,H))),rt)break;k=k.return}0<Ce.length&&(K=new $(K,ve,null,a,W),ne.push({event:K,listeners:Ce}))}}if((o&7)===0){e:{if(K=i==="mouseover"||i==="pointerover",$=i==="mouseout"||i==="pointerout",K&&a!==ba&&(ve=a.relatedTarget||a.fromElement)&&(gi(ve)||ve[mi]))break e;if(($||K)&&(K=W.window===W?W:(K=W.ownerDocument)?K.defaultView||K.parentWindow:window,$?(ve=a.relatedTarget||a.toElement,$=G,ve=ve?gi(ve):null,ve!==null&&(rt=l(ve),Ce=ve.tag,ve!==rt||Ce!==5&&Ce!==27&&Ce!==6)&&(ve=null)):($=null,ve=G),$!==ve)){if(Ce=Pa,ee="onMouseLeave",z="onMouseEnter",k="mouse",(i==="pointerout"||i==="pointerover")&&(Ce=zi,ee="onPointerLeave",z="onPointerEnter",k="pointer"),rt=$==null?K:Tn($),H=ve==null?K:Tn(ve),K=new Ce(ee,k+"leave",$,a,W),K.target=rt,K.relatedTarget=H,ee=null,gi(W)===G&&(Ce=new Ce(z,k+"enter",ve,a,W),Ce.target=H,Ce.relatedTarget=rt,ee=Ce),rt=ee,$&&ve)t:{for(Ce=sC,z=$,k=ve,H=0,ee=z;ee;ee=Ce(ee))H++;ee=0;for(var Se=k;Se;Se=Ce(Se))ee++;for(;0<H-ee;)z=Ce(z),H--;for(;0<ee-H;)k=Ce(k),ee--;for(;H--;){if(z===k||k!==null&&z===k.alternate){Ce=z;break t}z=Ce(z),k=Ce(k)}Ce=null}else Ce=null;$!==null&&jy(ne,K,$,Ce,!1),ve!==null&&rt!==null&&jy(ne,rt,ve,Ce,!0)}}e:{if(K=G?Tn(G):window,$=K.nodeName&&K.nodeName.toLowerCase(),$==="select"||$==="input"&&K.type==="file")var Ke=gp;else if(mp(K))if(yp)Ke=pA;else{Ke=hA;var Te=dA}else $=K.nodeName,!$||$.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?G&&ir(G.elementType)&&(Ke=gp):Ke=mA;if(Ke&&(Ke=Ke(i,G))){pp(ne,Ke,a,W);break e}Te&&Te(i,K,G),i==="focusout"&&G&&K.type==="number"&&G.memoizedProps.value!=null&&Ia(K,"number",K.value)}switch(Te=G?Tn(G):window,i){case"focusin":(mp(Te)||Te.contentEditable==="true")&&(fr=Te,Uf=G,qa=null);break;case"focusout":qa=Uf=fr=null;break;case"mousedown":Lf=!0;break;case"contextmenu":case"mouseup":case"dragend":Lf=!1,xp(ne,a,W);break;case"selectionchange":if(yA)break;case"keydown":case"keyup":xp(ne,a,W)}var Ve;if(We)e:{switch(i){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else cr?Ao(i,a)&&(Oe="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Oe="onCompositionStart");Oe&&(Ii&&a.locale!=="ko"&&(cr||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&cr&&(Ve=Ma()):(Si=W,Na="value"in Si?Si.value:Si.textContent,cr=!0)),Te=fc(G,Oe),0<Te.length&&(Oe=new xi(Oe,i,null,a,W),ne.push({event:Oe,listeners:Te}),Ve?Oe.data=Ve:(Ve=ur(a),Ve!==null&&(Oe.data=Ve)))),(Ve=Vn?lA(i,a):uA(i,a))&&(Oe=fc(G,"onBeforeInput"),0<Oe.length&&(Te=new xi("onBeforeInput","beforeinput",null,a,W),ne.push({event:Te,listeners:Oe}),Te.data=Ve)),eC(ne,i,G,a,W)}Wy(ne,o)})}function ul(i,o,a){return{instance:i,listener:o,currentTarget:a}}function fc(i,o){for(var a=o+"Capture",u=[];i!==null;){var g=i,_=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||_===null||(g=Zn(i,a),g!=null&&u.unshift(ul(i,g,_)),g=Zn(i,o),g!=null&&u.push(ul(i,g,_))),i.tag===3)return u;i=i.return}return[]}function sC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function jy(i,o,a,u,g){for(var _=o._reactName,A=[];a!==null&&a!==u;){var I=a,U=I.alternate,G=I.stateNode;if(I=I.tag,U!==null&&U===u)break;I!==5&&I!==26&&I!==27||G===null||(U=G,g?(G=Zn(a,_),G!=null&&A.unshift(ul(a,G,U))):g||(G=Zn(a,_),G!=null&&A.push(ul(a,G,U)))),a=a.return}A.length!==0&&i.push({event:o,listeners:A})}var oC=/\r\n?/g,rC=/\u0000|\uFFFD/g;function e_(i){return(typeof i=="string"?i:""+i).replace(oC,`
`).replace(rC,"")}function t_(i,o){return o=e_(o),e_(i)===o}function ot(i,o,a,u,g,_){switch(a){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||cn(i,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&cn(i,""+u);break;case"className":En(i,"class",u);break;case"tabIndex":En(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":En(i,a,u);break;case"style":wa(i,u,_);break;case"data":if(o!=="object"){En(i,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=sr(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(o!=="input"&&ot(i,o,"name",g.name,g,null),ot(i,o,"formEncType",g.formEncType,g,null),ot(i,o,"formMethod",g.formMethod,g,null),ot(i,o,"formTarget",g.formTarget,g,null)):(ot(i,o,"encType",g.encType,g,null),ot(i,o,"method",g.method,g,null),ot(i,o,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=sr(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=Wn);break;case"onScroll":u!=null&&ke("scroll",i);break;case"onScrollEnd":u!=null&&ke("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=sr(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":ke("beforetoggle",i),ke("toggle",i),tr(i,"popover",u);break;case"xlinkActuate":bt(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":bt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":bt(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":bt(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":bt(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":bt(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":bt(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":bt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":bt(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":tr(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=fu.get(a)||a,tr(i,a,u))}}function ah(i,o,a,u,g,_){switch(a){case"style":wa(i,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof u=="string"?cn(i,u):(typeof u=="number"||typeof u=="bigint")&&cn(i,""+u);break;case"onScroll":u!=null&&ke("scroll",i);break;case"onScrollEnd":u!=null&&ke("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ea.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),o=a.slice(2,g?a.length-7:void 0),_=i[Bt]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(o,_,g),typeof u=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(o,u,g);break e}a in i?i[a]=u:u===!0?i.setAttribute(a,""):tr(i,a,u)}}}function Xt(i,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",i),ke("load",i);var u=!1,g=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var A=a[_];if(A!=null)switch(_){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:ot(i,o,_,A,a,null)}}g&&ot(i,o,"srcSet",a.srcSet,a,null),u&&ot(i,o,"src",a.src,a,null);return;case"input":ke("invalid",i);var I=_=A=g=null,U=null,G=null;for(u in a)if(a.hasOwnProperty(u)){var W=a[u];if(W!=null)switch(u){case"name":g=W;break;case"type":A=W;break;case"checked":U=W;break;case"defaultChecked":G=W;break;case"value":_=W;break;case"defaultValue":I=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,o));break;default:ot(i,o,u,W,a,null)}}lu(i,_,I,U,G,A,g,!1);return;case"select":ke("invalid",i),u=A=_=null;for(g in a)if(a.hasOwnProperty(g)&&(I=a[g],I!=null))switch(g){case"value":_=I;break;case"defaultValue":A=I;break;case"multiple":u=I;default:ot(i,o,g,I,a,null)}o=_,a=A,i.multiple=!!u,o!=null?hs(i,!!u,o,!1):a!=null&&hs(i,!!u,a,!0);return;case"textarea":ke("invalid",i),_=g=u=null;for(A in a)if(a.hasOwnProperty(A)&&(I=a[A],I!=null))switch(A){case"value":u=I;break;case"defaultValue":g=I;break;case"children":_=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(91));break;default:ot(i,o,A,I,a,null)}ms(i,u,g,_);return;case"option":for(U in a)if(a.hasOwnProperty(U)&&(u=a[U],u!=null))switch(U){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ot(i,o,U,u,a,null)}return;case"dialog":ke("beforetoggle",i),ke("toggle",i),ke("cancel",i),ke("close",i);break;case"iframe":case"object":ke("load",i);break;case"video":case"audio":for(u=0;u<ll.length;u++)ke(ll[u],i);break;case"image":ke("error",i),ke("load",i);break;case"details":ke("toggle",i);break;case"embed":case"source":case"link":ke("error",i),ke("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(u=a[G],u!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:ot(i,o,G,u,a,null)}return;default:if(ir(o)){for(W in a)a.hasOwnProperty(W)&&(u=a[W],u!==void 0&&ah(i,o,W,u,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(u=a[I],u!=null&&ot(i,o,I,u,a,null))}function aC(i,o,a,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,_=null,A=null,I=null,U=null,G=null,W=null;for($ in a){var ne=a[$];if(a.hasOwnProperty($)&&ne!=null)switch($){case"checked":break;case"value":break;case"defaultValue":U=ne;default:u.hasOwnProperty($)||ot(i,o,$,null,u,ne)}}for(var K in u){var $=u[K];if(ne=a[K],u.hasOwnProperty(K)&&($!=null||ne!=null))switch(K){case"type":_=$;break;case"name":g=$;break;case"checked":G=$;break;case"defaultChecked":W=$;break;case"value":A=$;break;case"defaultValue":I=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,o));break;default:$!==ne&&ot(i,o,K,$,u,ne)}}nr(i,A,I,U,G,W,_,g);return;case"select":$=A=I=K=null;for(_ in a)if(U=a[_],a.hasOwnProperty(_)&&U!=null)switch(_){case"value":break;case"multiple":$=U;default:u.hasOwnProperty(_)||ot(i,o,_,null,u,U)}for(g in u)if(_=u[g],U=a[g],u.hasOwnProperty(g)&&(_!=null||U!=null))switch(g){case"value":K=_;break;case"defaultValue":I=_;break;case"multiple":A=_;default:_!==U&&ot(i,o,g,_,u,U)}o=I,a=A,u=$,K!=null?hs(i,!!a,K,!1):!!u!=!!a&&(o!=null?hs(i,!!a,o,!0):hs(i,!!a,a?[]:"",!1));return;case"textarea":$=K=null;for(I in a)if(g=a[I],a.hasOwnProperty(I)&&g!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:ot(i,o,I,null,u,g)}for(A in u)if(g=u[A],_=a[A],u.hasOwnProperty(A)&&(g!=null||_!=null))switch(A){case"value":K=g;break;case"defaultValue":$=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==_&&ot(i,o,A,g,u,_)}uu(i,K,$);return;case"option":for(var ve in a)if(K=a[ve],a.hasOwnProperty(ve)&&K!=null&&!u.hasOwnProperty(ve))switch(ve){case"selected":i.selected=!1;break;default:ot(i,o,ve,null,u,K)}for(U in u)if(K=u[U],$=a[U],u.hasOwnProperty(U)&&K!==$&&(K!=null||$!=null))switch(U){case"selected":i.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:ot(i,o,U,K,u,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in a)K=a[Ce],a.hasOwnProperty(Ce)&&K!=null&&!u.hasOwnProperty(Ce)&&ot(i,o,Ce,null,u,K);for(G in u)if(K=u[G],$=a[G],u.hasOwnProperty(G)&&K!==$&&(K!=null||$!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,o));break;default:ot(i,o,G,K,u,$)}return;default:if(ir(o)){for(var rt in a)K=a[rt],a.hasOwnProperty(rt)&&K!==void 0&&!u.hasOwnProperty(rt)&&ah(i,o,rt,void 0,u,K);for(W in u)K=u[W],$=a[W],!u.hasOwnProperty(W)||K===$||K===void 0&&$===void 0||ah(i,o,W,K,u,$);return}}for(var z in a)K=a[z],a.hasOwnProperty(z)&&K!=null&&!u.hasOwnProperty(z)&&ot(i,o,z,null,u,K);for(ne in u)K=u[ne],$=a[ne],!u.hasOwnProperty(ne)||K===$||K==null&&$==null||ot(i,o,ne,K,u,$)}function n_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lC(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var g=a[u],_=g.transferSize,A=g.initiatorType,I=g.duration;if(_&&I&&n_(A)){for(A=0,I=g.responseEnd,u+=1;u<a.length;u++){var U=a[u],G=U.startTime;if(G>I)break;var W=U.transferSize,ne=U.initiatorType;W&&n_(ne)&&(U=U.responseEnd,A+=W*(U<I?1:(I-G)/(U-G)))}if(--u,o+=8*(_+A)/(g.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var lh=null,uh=null;function dc(i){return i.nodeType===9?i:i.ownerDocument}function i_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function s_(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function ch(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var fh=null;function uC(){var i=window.event;return i&&i.type==="popstate"?i===fh?!1:(fh=i,!0):(fh=null,!1)}var o_=typeof setTimeout=="function"?setTimeout:void 0,cC=typeof clearTimeout=="function"?clearTimeout:void 0,r_=typeof Promise=="function"?Promise:void 0,fC=typeof queueMicrotask=="function"?queueMicrotask:typeof r_<"u"?function(i){return r_.resolve(null).then(i).catch(dC)}:o_;function dC(i){setTimeout(function(){throw i})}function ks(i){return i==="head"}function a_(i,o){var a=o,u=0;do{var g=a.nextSibling;if(i.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(u===0){i.removeChild(g),qr(o);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")cl(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,cl(a);for(var _=a.firstChild;_;){var A=_.nextSibling,I=_.nodeName;_[pi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=A}}else a==="body"&&cl(i.ownerDocument.body);a=g}while(a);qr(o)}function l_(i,o){var a=i;i=0;do{var u=a.nextSibling;if(a.nodeType===1?o?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(o?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=u}while(a)}function dh(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":dh(a),er(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function hC(i,o,a,u){for(;i.nodeType===1;){var g=a;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[pi])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var _=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Bn(i.nextSibling),i===null)break}return null}function mC(i,o,a){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Bn(i.nextSibling),i===null))return null;return i}function u_(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Bn(i.nextSibling),i===null))return null;return i}function hh(i){return i.data==="$?"||i.data==="$~"}function mh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function pC(i,o){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||a.readyState!=="loading")o();else{var u=function(){o(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Bn(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var ph=null;function c_(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(o===0)return Bn(i.nextSibling);o--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||o++}i=i.nextSibling}return null}function f_(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(o===0)return i;o--}else a!=="/$"&&a!=="/&"||o++}i=i.previousSibling}return null}function d_(i,o,a){switch(o=dc(a),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function cl(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);er(i)}var Fn=new Map,h_=new Set;function hc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ts=re.d;re.d={f:gC,r:yC,D:_C,C:vC,L:TC,m:EC,X:AC,S:SC,M:CC};function gC(){var i=ts.f(),o=sc();return i||o}function yC(i){var o=Mn(i);o!==null&&o.tag===5&&o.type==="form"?Ng(o):ts.r(i)}var Ur=typeof document>"u"?null:document;function m_(i,o,a){var u=Ur;if(u&&typeof o=="string"&&o){var g=un(o);g='link[rel="'+i+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),h_.has(g)||(h_.add(g),i={rel:i,crossOrigin:a,href:o},u.querySelector(g)===null&&(o=u.createElement("link"),Xt(o,"link",i),wt(o),u.head.appendChild(o)))}}function _C(i){ts.D(i),m_("dns-prefetch",i,null)}function vC(i,o){ts.C(i,o),m_("preconnect",i,o)}function TC(i,o,a){ts.L(i,o,a);var u=Ur;if(u&&i&&o){var g='link[rel="preload"][as="'+un(o)+'"]';o==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+un(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+un(a.imageSizes)+'"]')):g+='[href="'+un(i)+'"]';var _=g;switch(o){case"style":_=Lr(i);break;case"script":_=kr(i)}Fn.has(_)||(i=T({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:i,as:o},a),Fn.set(_,i),u.querySelector(g)!==null||o==="style"&&u.querySelector(fl(_))||o==="script"&&u.querySelector(dl(_))||(o=u.createElement("link"),Xt(o,"link",i),wt(o),u.head.appendChild(o)))}}function EC(i,o){ts.m(i,o);var a=Ur;if(a&&i){var u=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+un(u)+'"][href="'+un(i)+'"]',_=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=kr(i)}if(!Fn.has(_)&&(i=T({rel:"modulepreload",href:i},o),Fn.set(_,i),a.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(dl(_)))return}u=a.createElement("link"),Xt(u,"link",i),wt(u),a.head.appendChild(u)}}}function SC(i,o,a){ts.S(i,o,a);var u=Ur;if(u&&i){var g=yi(u).hoistableStyles,_=Lr(i);o=o||"default";var A=g.get(_);if(!A){var I={loading:0,preload:null};if(A=u.querySelector(fl(_)))I.loading=5;else{i=T({rel:"stylesheet",href:i,"data-precedence":o},a),(a=Fn.get(_))&&gh(i,a);var U=A=u.createElement("link");wt(U),Xt(U,"link",i),U._p=new Promise(function(G,W){U.onload=G,U.onerror=W}),U.addEventListener("load",function(){I.loading|=1}),U.addEventListener("error",function(){I.loading|=2}),I.loading|=4,mc(A,o,u)}A={type:"stylesheet",instance:A,count:1,state:I},g.set(_,A)}}}function AC(i,o){ts.X(i,o);var a=Ur;if(a&&i){var u=yi(a).hoistableScripts,g=kr(i),_=u.get(g);_||(_=a.querySelector(dl(g)),_||(i=T({src:i,async:!0},o),(o=Fn.get(g))&&yh(i,o),_=a.createElement("script"),wt(_),Xt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function CC(i,o){ts.M(i,o);var a=Ur;if(a&&i){var u=yi(a).hoistableScripts,g=kr(i),_=u.get(g);_||(_=a.querySelector(dl(g)),_||(i=T({src:i,async:!0,type:"module"},o),(o=Fn.get(g))&&yh(i,o),_=a.createElement("script"),wt(_),Xt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function p_(i,o,a,u){var g=(g=Pe.current)?hc(g):null;if(!g)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=Lr(a.href),a=yi(g).hoistableStyles,u=a.get(o),u||(u={type:"style",instance:null,count:0,state:null},a.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Lr(a.href);var _=yi(g).hoistableStyles,A=_.get(i);if(A||(g=g.ownerDocument||g,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,A),(_=g.querySelector(fl(i)))&&!_._p&&(A.instance=_,A.state.loading=5),Fn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Fn.set(i,a),_||xC(g,i,a,A.state))),o&&u===null)throw Error(s(528,""));return A}if(o&&u!==null)throw Error(s(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=kr(a),a=yi(g).hoistableScripts,u=a.get(o),u||(u={type:"script",instance:null,count:0,state:null},a.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Lr(i){return'href="'+un(i)+'"'}function fl(i){return'link[rel="stylesheet"]['+i+"]"}function g_(i){return T({},i,{"data-precedence":i.precedence,precedence:null})}function xC(i,o,a,u){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=i.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),Xt(o,"link",a),wt(o),i.head.appendChild(o))}function kr(i){return'[src="'+un(i)+'"]'}function dl(i){return"script[async]"+i}function y_(i,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var u=i.querySelector('style[data-href~="'+un(a.href)+'"]');if(u)return o.instance=u,wt(u),u;var g=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),wt(u),Xt(u,"style",g),mc(u,a.precedence,i),o.instance=u;case"stylesheet":g=Lr(a.href);var _=i.querySelector(fl(g));if(_)return o.state.loading|=4,o.instance=_,wt(_),_;u=g_(a),(g=Fn.get(g))&&gh(u,g),_=(i.ownerDocument||i).createElement("link"),wt(_);var A=_;return A._p=new Promise(function(I,U){A.onload=I,A.onerror=U}),Xt(_,"link",u),o.state.loading|=4,mc(_,a.precedence,i),o.instance=_;case"script":return _=kr(a.src),(g=i.querySelector(dl(_)))?(o.instance=g,wt(g),g):(u=a,(g=Fn.get(_))&&(u=T({},a),yh(u,g)),i=i.ownerDocument||i,g=i.createElement("script"),wt(g),Xt(g,"link",u),i.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,mc(u,a.precedence,i));return o.instance}function mc(i,o,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,_=g,A=0;A<u.length;A++){var I=u[A];if(I.dataset.precedence===o)_=I;else if(_!==g)break}_?_.parentNode.insertBefore(i,_.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(i,o.firstChild))}function gh(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function yh(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var pc=null;function __(i,o,a){if(pc===null){var u=new Map,g=pc=new Map;g.set(a,u)}else g=pc,u=g.get(a),u||(u=new Map,g.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),g=0;g<a.length;g++){var _=a[g];if(!(_[pi]||_[Rt]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(o)||"";A=i+A;var I=u.get(A);I?I.push(_):u.set(A,[_])}}return u}function v_(i,o,a){i=i.ownerDocument||i,i.head.insertBefore(a,o==="title"?i.querySelector("head > title"):null)}function IC(i,o,a){if(a===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function T_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function RC(i,o,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Lr(u.href),_=o.querySelector(fl(g));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=gc.bind(i),o.then(i,i)),a.state.loading|=4,a.instance=_,wt(_);return}_=o.ownerDocument||o,u=g_(u),(g=Fn.get(g))&&gh(u,g),_=_.createElement("link"),wt(_);var A=_;A._p=new Promise(function(I,U){A.onload=I,A.onerror=U}),Xt(_,"link",u),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,o),(o=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=gc.bind(i),o.addEventListener("load",a),o.addEventListener("error",a))}}var _h=0;function wC(i,o){return i.stylesheets&&i.count===0&&_c(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var u=setTimeout(function(){if(i.stylesheets&&_c(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+o);0<i.imgBytes&&_h===0&&(_h=62500*lC());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&_c(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>_h?50:800)+o);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function gc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_c(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var yc=null;function _c(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,yc=new Map,o.forEach(bC,i),yc=null,gc.call(i))}function bC(i,o){if(!(o.state.loading&4)){var a=yc.get(i);if(a)var u=a.get(null);else{a=new Map,yc.set(i,a);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<g.length;_++){var A=g[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),u=A)}u&&a.set(null,u)}g=o.instance,A=g.getAttribute("data-precedence"),_=a.get(A)||u,_===u&&a.set(null,g),a.set(A,g),this.count++,u=gc.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),_?_.parentNode.insertBefore(g,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),o.state.loading|=4}}var hl={$$typeof:j,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function NC(i,o,a,u,g,_,A,I,U){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hi(0),this.hiddenUpdates=hi(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function E_(i,o,a,u,g,_,A,I,U,G,W,ne){return i=new NC(i,o,a,A,U,G,W,ne,I),o=1,_===!0&&(o|=24),_=An(3,null,null,o),i.current=_,_.stateNode=i,o=Wf(),o.refCount++,i.pooledCache=o,o.refCount++,_.memoizedState={element:u,isDehydrated:a,cache:o},td(_),i}function S_(i){return i?(i=mr,i):mr}function A_(i,o,a,u,g,_){g=S_(g),u.context===null?u.context=g:u.pendingContext=g,u=Is(o),u.payload={element:a},_=_===void 0?null:_,_!==null&&(u.callback=_),a=Rs(i,u,o),a!==null&&(pn(a,i,o),Ya(a,i,o))}function C_(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<o?a:o}}function vh(i,o){C_(i,o),(i=i.alternate)&&C_(i,o)}function x_(i){if(i.tag===13||i.tag===31){var o=Io(i,67108864);o!==null&&pn(o,i,67108864),vh(i,67108864)}}function I_(i){if(i.tag===13||i.tag===31){var o=wn();o=mo(o);var a=Io(i,o);a!==null&&pn(a,i,o),vh(i,o)}}var vc=!0;function MC(i,o,a,u){var g=Y.T;Y.T=null;var _=re.p;try{re.p=2,Th(i,o,a,u)}finally{re.p=_,Y.T=g}}function DC(i,o,a,u){var g=Y.T;Y.T=null;var _=re.p;try{re.p=8,Th(i,o,a,u)}finally{re.p=_,Y.T=g}}function Th(i,o,a,u){if(vc){var g=Eh(u);if(g===null)rh(i,o,u,Tc,a),w_(i,u);else if(VC(g,i,o,a,u))u.stopPropagation();else if(w_(i,u),o&4&&-1<PC.indexOf(i)){for(;g!==null;){var _=Mn(g);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=fi(_.pendingLanes);if(A!==0){var I=_;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var U=1<<31-vt(A);I.entanglements[1]|=U,A&=~U}Ni(_),(Ze&6)===0&&(nc=rn()+500,al(0))}}break;case 31:case 13:I=Io(_,2),I!==null&&pn(I,_,2),sc(),vh(_,2)}if(_=Eh(u),_===null&&rh(i,o,u,Tc,a),_===g)break;g=_}g!==null&&u.stopPropagation()}else rh(i,o,u,null,a)}}function Eh(i){return i=Dn(i),Sh(i)}var Tc=null;function Sh(i){if(Tc=null,i=gi(i),i!==null){var o=l(i);if(o===null)i=null;else{var a=o.tag;if(a===13){if(i=c(o),i!==null)return i;i=null}else if(a===31){if(i=d(o),i!==null)return i;i=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Tc=i,null}function R_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(uo()){case ga:return 2;case ya:return 8;case fs:case wf:return 32;case Zl:return 268435456;default:return 32}default:return 32}}var Ah=!1,qs=null,Os=null,zs=null,ml=new Map,pl=new Map,Bs=[],PC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function w_(i,o){switch(i){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Os=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":ml.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":pl.delete(o.pointerId)}}function gl(i,o,a,u,g,_){return i===null||i.nativeEvent!==_?(i={blockedOn:o,domEventName:a,eventSystemFlags:u,nativeEvent:_,targetContainers:[g]},o!==null&&(o=Mn(o),o!==null&&x_(o)),i):(i.eventSystemFlags|=u,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function VC(i,o,a,u,g){switch(o){case"focusin":return qs=gl(qs,i,o,a,u,g),!0;case"dragenter":return Os=gl(Os,i,o,a,u,g),!0;case"mouseover":return zs=gl(zs,i,o,a,u,g),!0;case"pointerover":var _=g.pointerId;return ml.set(_,gl(ml.get(_)||null,i,o,a,u,g)),!0;case"gotpointercapture":return _=g.pointerId,pl.set(_,gl(pl.get(_)||null,i,o,a,u,g)),!0}return!1}function b_(i){var o=gi(i.target);if(o!==null){var a=l(o);if(a!==null){if(o=a.tag,o===13){if(o=c(a),o!==null){i.blockedOn=o,$n(i.priority,function(){I_(a)});return}}else if(o===31){if(o=d(a),o!==null){i.blockedOn=o,$n(i.priority,function(){I_(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ec(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var a=Eh(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);ba=u,a.target.dispatchEvent(u),ba=null}else return o=Mn(a),o!==null&&x_(o),i.blockedOn=a,!1;o.shift()}return!0}function N_(i,o,a){Ec(i)&&a.delete(o)}function UC(){Ah=!1,qs!==null&&Ec(qs)&&(qs=null),Os!==null&&Ec(Os)&&(Os=null),zs!==null&&Ec(zs)&&(zs=null),ml.forEach(N_),pl.forEach(N_)}function Sc(i,o){i.blockedOn===o&&(i.blockedOn=null,Ah||(Ah=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,UC)))}var Ac=null;function M_(i){Ac!==i&&(Ac=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ac===i&&(Ac=null);for(var o=0;o<i.length;o+=3){var a=i[o],u=i[o+1],g=i[o+2];if(typeof u!="function"){if(Sh(u||a)===null)continue;break}var _=Mn(a);_!==null&&(i.splice(o,3),o-=3,Ed(_,{pending:!0,data:g,method:a.method,action:u},u,g))}}))}function qr(i){function o(U){return Sc(U,i)}qs!==null&&Sc(qs,i),Os!==null&&Sc(Os,i),zs!==null&&Sc(zs,i),ml.forEach(o),pl.forEach(o);for(var a=0;a<Bs.length;a++){var u=Bs[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Bs.length&&(a=Bs[0],a.blockedOn===null);)b_(a),a.blockedOn===null&&Bs.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var g=a[u],_=a[u+1],A=g[Bt]||null;if(typeof _=="function")A||M_(a);else if(A){var I=null;if(_&&_.hasAttribute("formAction")){if(g=_,A=_[Bt]||null)I=A.formAction;else if(Sh(g)!==null)continue}else I=A.action;typeof I=="function"?a[u+1]=I:(a.splice(u,3),u-=3),M_(a)}}}function D_(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return g=A})},focusReset:"manual",scroll:"manual"})}function o(){g!==null&&(g(),g=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),g!==null&&(g(),g=null)}}}function Ch(i){this._internalRoot=i}Cc.prototype.render=Ch.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var a=o.current,u=wn();A_(a,u,i,o,null,null)},Cc.prototype.unmount=Ch.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;A_(i.current,2,null,i,null,null),sc(),o[mi]=null}};function Cc(i){this._internalRoot=i}Cc.prototype.unstable_scheduleHydration=function(i){if(i){var o=su();i={blockedOn:null,target:i,priority:o};for(var a=0;a<Bs.length&&o!==0&&o<Bs[a].priority;a++);Bs.splice(a,0,i),a===0&&b_(i)}};var P_=e.version;if(P_!=="19.2.1")throw Error(s(527,P_,"19.2.1"));re.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=p(o),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var LC={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xc.isDisabled&&xc.supportsFiber)try{Kn=xc.inject(LC),Yt=xc}catch{}}return _l.createRoot=function(i,o){if(!r(i))throw Error(s(299));var a=!1,u="",g=zg,_=Bg,A=Fg;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=E_(i,1,!1,null,null,a,u,null,g,_,A,D_),i[mi]=o.current,oh(i),new Ch(o)},_l.hydrateRoot=function(i,o,a){if(!r(i))throw Error(s(299));var u=!1,g="",_=zg,A=Bg,I=Fg,U=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(U=a.formState)),o=E_(i,1,!0,o,a??null,u,g,U,_,A,I,D_),o.context=S_(null),a=o.current,u=wn(),u=mo(u),g=Is(u),g.callback=null,Rs(a,g,u),a=u,o.current.lanes=a,fo(o,a),Ni(o),i[mi]=o.current,oh(i),new Cc(o)},_l.version="19.2.1",_l}var H_;function JC(){if(H_)return Rh.exports;H_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Rh.exports=YC(),Rh.exports}var KC=JC();const QC=NT(KC);var Hn=(n=>(n.Food="Food",n.Travel="Travel",n.Fashion="Fashion",n.Technology="Technology",n.Lifestyle="Lifestyle",n.Journal="Journal",n))(Hn||{}),Je=(n=>(n.Paragraph="paragraph",n.Heading1="h1",n.Heading2="h2",n.Heading3="h3",n.Image="image",n.Video="video",n.Quote="quote",n.List="list",n.OrderedList="ordered-list",n.Code="code",n.Divider="divider",n))(Je||{});/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),XC=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),G_=n=>{const e=XC(n);return e.charAt(0).toUpperCase()+e.slice(1)},DT=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),WC=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=_e.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:r="",children:l,iconNode:c,...d},y)=>_e.createElement("svg",{ref:y,...ZC,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:DT("lucide",r),...!l&&!WC(d)&&{"aria-hidden":"true"},...d},[...c.map(([p,v])=>_e.createElement(p,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=(n,e)=>{const t=_e.forwardRef(({className:s,...r},l)=>_e.createElement(jC,{ref:l,iconNode:e,className:DT(`lucide-${$C(G_(n))}`,`lucide-${n}`,s),...r}));return t.displayName=G_(n),t};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],t1=Ue("bold",e1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],i1=Ue("calendar",n1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],o1=Ue("camera",s1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],a1=Ue("check",r1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],u1=Ue("chevron-left",l1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],f1=Ue("code",c1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],h1=Ue("coffee",d1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],p1=Ue("ellipsis",m1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],y1=Ue("eye",g1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],v1=Ue("file-text",_1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],E1=Ue("globe",T1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],A1=Ue("hash",S1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],x1=Ue("image",C1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],R1=Ue("italic",I1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],b1=Ue("link",w1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],M1=Ue("list-ordered",N1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],P1=Ue("list",D1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],U1=Ue("menu",V1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=[["path",{d:"M5 12h14",key:"1ays0h"}]],k1=Ue("minus",L1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],O1=Ue("move",q1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],B1=Ue("palette",z1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],H1=Ue("panels-top-left",F1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],Y1=Ue("pen-tool",G1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],K1=Ue("plane",J1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],$1=Ue("plus",Q1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],W1=Ue("quote",X1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],j1=Ue("search",Z1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],tx=Ue("send",ex);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],ix=Ue("smartphone",nx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ox=Ue("sparkles",sx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],ax=Ue("text-align-center",rx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],ux=Ue("text-align-end",lx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],fx=Ue("text-align-start",cx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],hx=Ue("trash-2",dx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],px=Ue("type",mx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],yx=Ue("underline",gx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],vx=Ue("video",_x);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ex=Ue("x",Tx),he={PenTool:Y1,Layout:H1,Image:x1,Type:px,Quote:W1,List:P1,MoreHorizontal:p1,ChevronLeft:u1,Plus:$1,Trash2:hx,Send:tx,Eye:y1,Calendar:i1,Search:j1,Sparkles:ox,Move:O1,X:Ex,Check:a1,Camera:o1,Plane:K1,Coffee:h1,Smartphone:ix,Globe:E1,FileText:v1,Menu:U1,Bold:t1,Italic:R1,Underline:yx,Link:b1,AlignLeft:fx,AlignCenter:ax,AlignRight:ux,Video:vx,Code:f1,ListOrdered:M1,Minus:k1,Hash:A1,Palette:B1};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Sx,Ax;function Cx(){return{geminiUrl:Sx,vertexUrl:Ax}}function xx(n,e,t,s){var r,l;if(!(n!=null&&n.baseUrl)){const c=Cx();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:t:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ls{}function me(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function h(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[d])){const y=n[d];if(Array.isArray(t))for(let p=0;p<y.length;p++){const v=y[p];h(v,e.slice(l+1),t[p])}else for(const p of y)h(p,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in n||(n[d]=[{}]);const y=n[d];h(y[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],r=n[s];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const r=e[s];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(d=>f(d,e.slice(s+1),t)):t}else return t}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function Ix(n,e){for(const[t,s]of Object.entries(e)){const r=t.split("."),l=s.split("."),c=new Set;let d=-1;for(let y=0;y<r.length;y++)if(r[y]==="*"){d=y;break}if(d!==-1&&l.length>d)for(let y=d;y<l.length;y++){const p=l[y];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&c.add(p)}zh(n,r,l,0,c)}}function zh(n,e,t,s,r){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const c=l.slice(0,-2),d=n;if(c in d&&Array.isArray(d[c]))for(const y of d[c])zh(y,e,t,s+1,r)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,d=Object.keys(c).filter(p=>!p.startsWith("_")&&!r.has(p)),y={};for(const p of d)y[p]=c[p];for(const[p,v]of Object.entries(y)){const T=[];for(const S of t.slice(s))S==="*"?T.push(p):T.push(S);h(c,T,v)}for(const p of d)delete c[p]}}else{const c=n;l in c&&zh(c[l],e,t,s+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rx(n){const e={},t=f(n,["operationName"]);t!=null&&h(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&h(e,["_url","resourceName"],s),e}function wx(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],Nx(c)),e}function bx(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],Mx(c)),e}function Nx(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>Dx(c))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function Mx(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>Px(c))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function Dx(n){const e={},t=f(n,["video"]);return t!=null&&h(e,["video"],Ox(t)),e}function Px(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],zx(t)),e}function Vx(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function Ux(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function Lx(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],kx(c)),e}function kx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&h(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function PT(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],qx(c)),e}function qx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&h(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function Ox(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&h(e,["videoBytes"],vm(s));const r=f(n,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function zx(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],vm(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Y_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Y_||(Y_={}));var J_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(J_||(J_={}));var K_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(K_||(K_={}));var Ys;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Ys||(Ys={}));var Q_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Q_||(Q_={}));var $_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})($_||($_={}));var X_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(X_||(X_={}));var W_;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(W_||(W_={}));var Z_;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Z_||(Z_={}));var j_;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(j_||(j_={}));var ev;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(ev||(ev={}));var tv;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(tv||(tv={}));var nv;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(nv||(nv={}));var iv;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(iv||(iv={}));var sv;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(sv||(sv={}));var ov;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ov||(ov={}));var rv;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(rv||(rv={}));var av;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(av||(av={}));var lv;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(lv||(lv={}));var Oc;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Oc||(Oc={}));var uv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(uv||(uv={}));var cv;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(cv||(cv={}));var fv;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(fv||(fv={}));var Bh;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Bh||(Bh={}));var dv;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(dv||(dv={}));var hv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(hv||(hv={}));var mv;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(mv||(mv={}));var pv;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(pv||(pv={}));var gv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(gv||(gv={}));var yv;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(yv||(yv={}));var _v;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(_v||(_v={}));var vv;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(vv||(vv={}));var Tv;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Tv||(Tv={}));var Ev;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Ev||(Ev={}));var Sv;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Sv||(Sv={}));var Av;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Av||(Av={}));var Cv;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Cv||(Cv={}));var xv;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(xv||(xv={}));var Iv;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Iv||(Iv={}));var Rv;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(Rv||(Rv={}));var wv;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(wv||(wv={}));var bv;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(bv||(bv={}));var Nv;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Nv||(Nv={}));var Mv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(Mv||(Mv={}));var Dv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Dv||(Dv={}));var Pv;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Pv||(Pv={}));var Vv;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Vv||(Vv={}));var Uv;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Uv||(Uv={}));var Lv;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Lv||(Lv={}));var kv;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(kv||(kv={}));var qv;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(qv||(qv={}));var Ov;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Ov||(Ov={}));var zv;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(zv||(zv={}));var Bv;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Bv||(Bv={}));var Gr;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Gr||(Gr={}));class Fh{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class vl{get text(){var e,t,s,r,l,c,d,y;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const T=[];for(const S of(y=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&y!==void 0?y:[]){for(const[R,O]of Object.entries(S))R!=="text"&&R!=="thought"&&R!=="thoughtSignature"&&(O!==null||O!==void 0)&&T.push(R);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,p+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,t,s,r,l,c,d,y;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const T of(y=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&y!==void 0?y:[]){for(const[S,R]of Object.entries(T))S!=="inlineData"&&(R!==null||R!==void 0)&&v.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(p+=atob(T.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,s,r,l,c,d,y;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(y=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||y===void 0?void 0:y.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,t,s,r,l,c,d,y,p;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(y=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||y===void 0?void 0:y.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,s,r,l,c,d,y,p;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(y=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||y===void 0?void 0:y.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class Fv{}class Hv{}class Bx{}class Fx{}class Hx{}class Gx{}class Gv{}class Yv{}class Jv{}class Yx{}class zc{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new zc;let r;const l=e;return t?r=bx(l):r=wx(l),Object.assign(s,r),s}}class Kv{}class Qv{}class $v{}class Xv{}class Jx{}class Kx{}class Qx{}class Tm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Tm,l=Lx(e);return Object.assign(s,l),s}}class $x{}class Xx{}class Wx{}class Wv{}class Zx{get text(){var e,t,s;let r="",l=!1;const c=[];for(const d of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[y,p]of Object.entries(d))y!=="text"&&y!=="thought"&&p!==null&&c.push(y);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,r+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,s;let r="";const l=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[d,y]of Object.entries(c))d!=="inlineData"&&y!==null&&l.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class jx{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Em{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Em,l=PT(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $e(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function VT(n,e){const t=$e(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function UT(n){return Array.isArray(n)?n.map(e=>Bc(e)):[Bc(n)]}function Bc(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function LT(n){const e=Bc(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function kT(n){const e=Bc(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Zv(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function qT(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Zv(e)):[Zv(n)]}function Hh(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function jv(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function e0(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function on(n){if(n==null)throw new Error("ContentUnion is required");return Hh(n)?n:{role:"user",parts:qT(n)}}function Sm(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=on(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=on(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>on(t)):[on(e)]}function Yn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(jv(n)||e0(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[on(n)]}const e=[],t=[],s=Hh(n[0]);for(const r of n){const l=Hh(r);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(jv(r)||e0(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return s||e.push({role:"user",parts:qT(t)}),e}function eI(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(Ys).includes(t[0].toUpperCase())?t[0].toUpperCase():Ys.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(Ys).includes(s.toUpperCase())?s.toUpperCase():Ys.TYPE_UNSPECIFIED})}}function Yr(n){const e={},t=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&eI(n.type,e);for(const[c,d]of Object.entries(n))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Ys).includes(d.toUpperCase())?d.toUpperCase():Ys.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=Yr(d);else if(s.includes(c)){const y=[];for(const p of d){if(p.type=="null"){e.nullable=!0;continue}y.push(Yr(p))}e[c]=y}else if(r.includes(c)){const y={};for(const[p,v]of Object.entries(d))y[p]=Yr(v);e[c]=y}else{if(c==="additionalProperties")continue;e[c]=d}return e}function Am(n){return Yr(n)}function Cm(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function xm(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ia(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Yr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Yr(e.response));return n}function sa(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function tI(n,e,t,s=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function us(n,e){if(typeof e!="string")throw new Error("name must be a string");return tI(n,e,"cachedContents")}function OT(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function io(n){return vm(n)}function nI(n){return n!=null&&typeof n=="object"&&"name"in n}function iI(n){return n!=null&&typeof n=="object"&&"video"in n}function sI(n){return n!=null&&typeof n=="object"&&"uri"in n}function zT(n){var e;let t;if(nI(n)&&(t=n.name),!(sI(n)&&(t=n.uri,t===void 0))&&!(iI(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function BT(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function FT(n){for(const e of["models","tunedModels","publisherModels"])if(oI(n,e))return n[e];return[]}function oI(n,e){return n!==null&&typeof n=="object"&&e in n}function rI(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function aI(n,e={}){const t=[],s=new Set;for(const r of n){const l=r.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=rI(r,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function HT(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function lI(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function GT(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const y=c.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function oa(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function YT(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uI(n){const e={},t=f(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>HI(c))),h(e,["inlinedResponses"],l)}const r=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["inlinedEmbedContentResponses"],l)}return e}function cI(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&h(e,["gcsUri"],s);const r=f(n,["bigqueryDestination","outputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function fI(n){const e={},t=f(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&h(e,["gcsDestination","outputUriPrefix"],s);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigqueryDestination","outputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Mc(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&h(e,["displayName"],s);const r=f(n,["metadata","state"]);r!=null&&h(e,["state"],YT(r));const l=f(n,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const c=f(n,["metadata","endTime"]);c!=null&&h(e,["endTime"],c);const d=f(n,["metadata","updateTime"]);d!=null&&h(e,["updateTime"],d);const y=f(n,["metadata","model"]);y!=null&&h(e,["model"],y);const p=f(n,["metadata","output"]);return p!=null&&h(e,["dest"],uI(GT(p))),e}function Gh(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const r=f(n,["state"]);r!=null&&h(e,["state"],YT(r));const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["createTime"]);c!=null&&h(e,["createTime"],c);const d=f(n,["startTime"]);d!=null&&h(e,["startTime"],d);const y=f(n,["endTime"]);y!=null&&h(e,["endTime"],y);const p=f(n,["updateTime"]);p!=null&&h(e,["updateTime"],p);const v=f(n,["model"]);v!=null&&h(e,["model"],v);const T=f(n,["inputConfig"]);T!=null&&h(e,["src"],dI(T));const S=f(n,["outputConfig"]);S!=null&&h(e,["dest"],cI(GT(S)));const R=f(n,["completionStats"]);return R!=null&&h(e,["completionStats"],R),e}function dI(n){const e={},t=f(n,["instancesFormat"]);t!=null&&h(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&h(e,["gcsUri"],s);const r=f(n,["bigquerySource","inputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function hI(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&h(t,["fileName"],s);const r=f(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>FI(n,c))),h(t,["requests","requests"],l)}return t}function mI(n){const e={},t=f(n,["format"]);t!=null&&h(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&h(e,["gcsSource","uris"],s);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigquerySource","inputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function pI(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function gI(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],oa(n,s)),t}function yI(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],oa(n,s)),t}function _I(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],vI(s));const r=f(n,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=f(n,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);const d=f(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const y=f(n,["index"]);y!=null&&h(e,["index"],y);const p=f(n,["logprobsResult"]);p!=null&&h(e,["logprobsResult"],p);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(R=>R)),h(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&h(e,["urlContextMetadata"],T),e}function vI(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),h(e,["citations"],s)}return e}function JT(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>XI(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function TI(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&h(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function EI(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const r=f(n,["dest"]);return e!==void 0&&r!=null&&h(e,["outputConfig"],fI(lI(r))),t}function t0(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],hI(n,HT(n,r)));const l=f(e,["config"]);return l!=null&&TI(l,t),t}function SI(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],$e(n,s));const r=f(e,["src"]);r!=null&&h(t,["inputConfig"],mI(HT(n,r)));const l=f(e,["config"]);return l!=null&&EI(l,t),t}function AI(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&h(e,["batch","displayName"],s),t}function CI(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],MI(n,r));const l=f(e,["config"]);return l!=null&&AI(l,t),t}function xI(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],oa(n,s)),t}function II(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],oa(n,s)),t}function RI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function wI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function bI(n,e){const t={},s=f(e,["contents"]);if(s!=null){let l=Sm(n,s);Array.isArray(l)&&(l=l.map(c=>c)),h(t,["requests[]","request","content"],l)}const r=f(e,["config"]);return r!=null&&(h(t,["_self"],NI(r,t)),Ix(t,{"requests[].*":"requests[].request.*"})),t}function NI(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function MI(n,e){const t={},s=f(e,["fileName"]);s!=null&&h(t,["file_name"],s);const r=f(e,["inlinedRequests"]);return r!=null&&h(t,["requests"],bI(n,r)),t}function DI(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function PI(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function VI(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function UI(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],JT(on(r)));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&h(s,["topP"],c);const d=f(e,["topK"]);d!=null&&h(s,["topK"],d);const y=f(e,["candidateCount"]);y!=null&&h(s,["candidateCount"],y);const p=f(e,["maxOutputTokens"]);p!=null&&h(s,["maxOutputTokens"],p);const v=f(e,["stopSequences"]);v!=null&&h(s,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&h(s,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&h(s,["presencePenalty"],R);const O=f(e,["frequencyPenalty"]);O!=null&&h(s,["frequencyPenalty"],O);const B=f(e,["seed"]);B!=null&&h(s,["seed"],B);const J=f(e,["responseMimeType"]);J!=null&&h(s,["responseMimeType"],J);const X=f(e,["responseSchema"]);X!=null&&h(s,["responseSchema"],Am(X));const te=f(e,["responseJsonSchema"]);if(te!=null&&h(s,["responseJsonSchema"],te),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=f(e,["safetySettings"]);if(t!==void 0&&j!=null){let L=j;Array.isArray(L)&&(L=L.map(D=>WI(D))),h(t,["safetySettings"],L)}const le=f(e,["tools"]);if(t!==void 0&&le!=null){let L=sa(le);Array.isArray(L)&&(L=L.map(D=>jI(ia(D)))),h(t,["tools"],L)}const fe=f(e,["toolConfig"]);if(t!==void 0&&fe!=null&&h(t,["toolConfig"],ZI(fe)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Z=f(e,["cachedContent"]);t!==void 0&&Z!=null&&h(t,["cachedContent"],us(n,Z));const M=f(e,["responseModalities"]);M!=null&&h(s,["responseModalities"],M);const N=f(e,["mediaResolution"]);N!=null&&h(s,["mediaResolution"],N);const b=f(e,["speechConfig"]);if(b!=null&&h(s,["speechConfig"],Cm(b)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&h(s,["thinkingConfig"],P);const V=f(e,["imageConfig"]);return V!=null&&h(s,["imageConfig"],BI(V)),s}function LI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(p=>_I(p))),h(e,["candidates"],y)}const r=f(n,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&h(e,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function kI(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],oa(n,s)),t}function qI(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],oa(n,s)),t}function OI(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function zI(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function BI(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function FI(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["request","model"],$e(n,s));const r=f(e,["contents"]);if(r!=null){let d=Yn(r);Array.isArray(d)&&(d=d.map(y=>JT(y))),h(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&h(t,["metadata"],l);const c=f(e,["config"]);return c!=null&&h(t,["request","generationConfig"],UI(n,c,f(t,["request"],{}))),t}function HI(n){const e={},t=f(n,["response"]);t!=null&&h(e,["response"],LI(t));const s=f(n,["error"]);return s!=null&&h(e,["error"],s),e}function GI(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);if(e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function YI(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const l=f(n,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),t}function JI(n){const e={},t=f(n,["config"]);return t!=null&&GI(t,e),e}function KI(n){const e={},t=f(n,["config"]);return t!=null&&YI(t,e),e}function QI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Mc(c))),h(e,["batchJobs"],l)}return e}function $I(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Gh(c))),h(e,["batchJobs"],l)}return e}function XI(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],DI(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],PI(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&h(e,["inlineData"],pI(y));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function WI(n){const e={},t=f(n,["category"]);if(t!=null&&h(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function ZI(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],VI(t));const s=f(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function jI(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],OI(d));const y=f(n,["googleSearch"]);y!=null&&h(e,["googleSearch"],zI(y));const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var is;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(is||(is={}));class Go{constructor(e,t,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,r)}init(e,t,s){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eR extends ls{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Go(is.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=t0(this.apiClient,e),s=t._url,r=me("{model}:batchGenerateContent",s),d=t.batch.inputConfig.requests,y=d.requests,p=[];for(const v of y){const T=Object.assign({},v);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const R=T.request;R.systemInstruction=S,T.request=R}p.push(T)}return d.requests=p,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${r}`;else if(c)s.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const p=SI(this.apiClient,e);return d=me("batchPredictionJobs",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Gh(v))}else{const p=t0(this.apiClient,e);return d=me("{model}:batchGenerateContent",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Mc(v))}}async createEmbeddingsInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=CI(this.apiClient,e);return l=me("{model}:asyncBatchEmbedContent",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>Mc(y))}}async get(e){var t,s,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const p=qI(this.apiClient,e);return d=me("batchPredictionJobs/{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Gh(v))}else{const p=kI(this.apiClient,e);return d=me("batches/{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Mc(v))}}async cancel(e){var t,s,r,l;let c="",d={};if(this.apiClient.isVertexAI()){const y=yI(this.apiClient,e);c=me("batchPredictionJobs/{name}:cancel",y._url),d=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const y=gI(this.apiClient,e);c=me("batches/{name}:cancel",y._url),d=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const p=KI(e);return d=me("batchPredictionJobs",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=$I(v),S=new Wv;return Object.assign(S,T),S})}else{const p=JI(e);return d=me("batches",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=QI(v),S=new Wv;return Object.assign(S,T),S})}}async delete(e){var t,s,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const p=II(this.apiClient,e);return d=me("batchPredictionJobs/{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>wI(v))}else{const p=xI(this.apiClient,e);return d=me("batches/{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>RI(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tR(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function n0(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>CR(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function nR(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let v=Yn(c);Array.isArray(v)&&(v=v.map(T=>n0(T))),h(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],n0(on(d)));const y=f(n,["tools"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(T=>IR(T))),h(e,["tools"],v)}const p=f(n,["toolConfig"]);if(e!==void 0&&p!=null&&h(e,["toolConfig"],xR(p)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function iR(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let T=Yn(c);Array.isArray(T)&&(T=T.map(S=>S)),h(e,["contents"],T)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],on(d));const y=f(n,["tools"]);if(e!==void 0&&y!=null){let T=y;Array.isArray(T)&&(T=T.map(S=>RR(S))),h(e,["tools"],T)}const p=f(n,["toolConfig"]);e!==void 0&&p!=null&&h(e,["toolConfig"],p);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&h(e,["encryption_spec","kmsKeyName"],v),t}function sR(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],VT(n,s));const r=f(e,["config"]);return r!=null&&nR(r,t),t}function oR(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],VT(n,s));const r=f(e,["config"]);return r!=null&&iR(r,t),t}function rR(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],us(n,s)),t}function aR(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],us(n,s)),t}function lR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function uR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function cR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function fR(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function dR(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function hR(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&h(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function mR(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],us(n,s)),t}function pR(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],us(n,s)),t}function gR(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function yR(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function _R(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function vR(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function TR(n){const e={},t=f(n,["config"]);return t!=null&&_R(t,e),e}function ER(n){const e={},t=f(n,["config"]);return t!=null&&vR(t,e),e}function SR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function AR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function CR(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],cR(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],fR(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&h(e,["inlineData"],tR(y));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function xR(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],dR(t));const s=f(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function IR(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],gR(d));const y=f(n,["googleSearch"]);y!=null&&h(e,["googleSearch"],yR(y));const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function RR(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>hR(S))),h(e,["functionDeclarations"],T)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const r=f(n,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const l=f(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(n,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const d=f(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const y=f(n,["googleMaps"]);y!=null&&h(e,["googleMaps"],y);const p=f(n,["googleSearch"]);p!=null&&h(e,["googleSearch"],p);const v=f(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function wR(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function bR(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function NR(n,e){const t={},s=f(e,["name"]);s!=null&&h(t,["_url","name"],us(n,s));const r=f(e,["config"]);return r!=null&&wR(r,t),t}function MR(n,e){const t={},s=f(e,["name"]);s!=null&&h(t,["_url","name"],us(n,s));const r=f(e,["config"]);return r!=null&&bR(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DR extends ls{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Go(is.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const p=oR(this.apiClient,e);return d=me("cachedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=sR(this.apiClient,e);return d=me("cachedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var t,s,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const p=pR(this.apiClient,e);return d=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=mR(this.apiClient,e);return d=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var t,s,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const p=aR(this.apiClient,e);return d=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=uR(v),S=new $v;return Object.assign(S,T),S})}else{const p=rR(this.apiClient,e);return d=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=lR(v),S=new $v;return Object.assign(S,T),S})}}async update(e){var t,s,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const p=MR(this.apiClient,e);return d=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=NR(this.apiClient,e);return d=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var t,s,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const p=ER(e);return d=me("cachedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=AR(v),S=new Xv;return Object.assign(S,T),S})}else{const p=TR(e);return d=me("cachedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=SR(v),S=new Xv;return Object.assign(S,T),S})}}}function i0(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function dt(n){return this instanceof dt?(this.v=n,this):new dt(n)}function Jr(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(R){return function(O){return Promise.resolve(O).then(R,T)}}function d(R,O){s[R]&&(r[R]=function(B){return new Promise(function(J,X){l.push([R,B,J,X])>1||y(R,B)})},O&&(r[R]=O(r[R])))}function y(R,O){try{p(s[R](O))}catch(B){S(l[0][3],B)}}function p(R){R.value instanceof dt?Promise.resolve(R.value.v).then(v,T):S(l[0][2],R)}function v(R){y("next",R)}function T(R){y("throw",R)}function S(R,O){R(O),l.shift(),l.length&&y(l[0][0],l[0][1])}}function Il(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof i0=="function"?i0(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(c){return new Promise(function(d,y){c=n[l](c),r(d,y,c.done,c.value)})}}function r(l,c,d,y){Promise.resolve(y).then(function(p){l({value:p,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PR(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:KT(t)}function KT(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function VR(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function s0(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const r=[];let l=!0;for(;s<t&&n[s].role==="model";)r.push(n[s]),l&&!KT(n[s])&&(l=!1),s++;l?e.push(...r):e.pop()}return e}class UR{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new LR(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class LR{constructor(e,t,s,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),VR(l)}async sendMessage(e){var t;await this.sendPromise;const s=on(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,d;const y=await r,p=(c=(l=y.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=y.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];v!=null&&(S=(d=v.slice(T))!==null&&d!==void 0?d:[]);const R=p?[p]:[];this.recordHistory(s,R,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const s=on(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?s0(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,r;return Jr(this,arguments,function*(){var c,d,y,p;const v=[];try{for(var T=!0,S=Il(e),R;R=yield dt(S.next()),c=R.done,!c;T=!0){p=R.value,T=!1;const O=p;if(PR(O)){const B=(r=(s=O.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content;B!==void 0&&v.push(B)}yield yield dt(O)}}catch(O){d={error:O}}finally{try{!T&&!c&&(y=S.return)&&(yield dt(y.call(S)))}finally{if(d)throw d.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...s0(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,sf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kR(n){const e={},t=f(n,["file"]);return t!=null&&h(e,["file"],t),e}function qR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function OR(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],zT(t)),e}function zR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function BR(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],zT(t)),e}function FR(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function HR(n){const e={},t=f(n,["config"]);return t!=null&&FR(t,e),e}function GR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YR extends ls{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Go(is.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=HR(e);return l=me("files",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const p=GR(y),v=new $x;return Object.assign(v,p),v})}}async createInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=kR(e);return l=me("upload/v1beta/files",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const p=qR(y),v=new Xx;return Object.assign(v,p),v})}}async get(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=BR(e);return l=me("files/{file}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=OR(e);return l=me("files/{file}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const p=zR(y),v=new Wx;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dc(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function JR(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>lw(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function KR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function QR(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $R(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&h(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function XR(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const r=f(n,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const c=f(n,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);const d=f(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const y=f(n,["logprobs"]);y!=null&&h(e,["logprobs"],y);const p=f(n,["maxOutputTokens"]);p!=null&&h(e,["maxOutputTokens"],p);const v=f(n,["mediaResolution"]);v!=null&&h(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&h(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const R=f(n,["responseMimeType"]);R!=null&&h(e,["responseMimeType"],R);const O=f(n,["responseModalities"]);O!=null&&h(e,["responseModalities"],O);const B=f(n,["responseSchema"]);B!=null&&h(e,["responseSchema"],B);const J=f(n,["routingConfig"]);J!=null&&h(e,["routingConfig"],J);const X=f(n,["seed"]);X!=null&&h(e,["seed"],X);const te=f(n,["speechConfig"]);te!=null&&h(e,["speechConfig"],QT(te));const j=f(n,["stopSequences"]);j!=null&&h(e,["stopSequences"],j);const le=f(n,["temperature"]);le!=null&&h(e,["temperature"],le);const fe=f(n,["thinkingConfig"]);fe!=null&&h(e,["thinkingConfig"],fe);const Z=f(n,["topK"]);Z!=null&&h(e,["topK"],Z);const M=f(n,["topP"]);if(M!=null&&h(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function WR(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function ZR(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function jR(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","maxOutputTokens"],y);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],xm(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],R);const O=f(n,["systemInstruction"]);e!==void 0&&O!=null&&h(e,["setup","systemInstruction"],JR(on(O)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let Z=sa(B);Array.isArray(Z)&&(Z=Z.map(M=>cw(ia(M)))),h(e,["setup","tools"],Z)}const J=f(n,["sessionResumption"]);e!==void 0&&J!=null&&h(e,["setup","sessionResumption"],uw(J));const X=f(n,["inputAudioTranscription"]);e!==void 0&&X!=null&&h(e,["setup","inputAudioTranscription"],X);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&h(e,["setup","outputAudioTranscription"],te);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&h(e,["setup","realtimeInputConfig"],j);const le=f(n,["contextWindowCompression"]);e!==void 0&&le!=null&&h(e,["setup","contextWindowCompression"],le);const fe=f(n,["proactivity"]);return e!==void 0&&fe!=null&&h(e,["setup","proactivity"],fe),t}function ew(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],XR(s));const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","maxOutputTokens"],y);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],QT(xm(T)));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],R);const O=f(n,["systemInstruction"]);e!==void 0&&O!=null&&h(e,["setup","systemInstruction"],on(O));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let Z=sa(B);Array.isArray(Z)&&(Z=Z.map(M=>fw(ia(M)))),h(e,["setup","tools"],Z)}const J=f(n,["sessionResumption"]);e!==void 0&&J!=null&&h(e,["setup","sessionResumption"],J);const X=f(n,["inputAudioTranscription"]);e!==void 0&&X!=null&&h(e,["setup","inputAudioTranscription"],X);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&h(e,["setup","outputAudioTranscription"],te);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&h(e,["setup","realtimeInputConfig"],j);const le=f(n,["contextWindowCompression"]);e!==void 0&&le!=null&&h(e,["setup","contextWindowCompression"],le);const fe=f(n,["proactivity"]);return e!==void 0&&fe!=null&&h(e,["setup","proactivity"],fe),t}function tw(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],$e(n,s));const r=f(e,["config"]);return r!=null&&h(t,["config"],jR(r,t)),t}function nw(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],$e(n,s));const r=f(e,["config"]);return r!=null&&h(t,["config"],ew(r,t)),t}function iw(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],t),e}function sw(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),h(e,["weightedPrompts"],s)}return e}function ow(n){const e={},t=f(n,["media"]);if(t!=null){let p=UT(t);Array.isArray(p)&&(p=p.map(v=>Dc(v))),h(e,["mediaChunks"],p)}const s=f(n,["audio"]);s!=null&&h(e,["audio"],Dc(kT(s)));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&h(e,["video"],Dc(LT(l)));const c=f(n,["text"]);c!=null&&h(e,["text"],c);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const y=f(n,["activityEnd"]);return y!=null&&h(e,["activityEnd"],y),e}function rw(n){const e={},t=f(n,["media"]);if(t!=null){let p=UT(t);Array.isArray(p)&&(p=p.map(v=>v)),h(e,["mediaChunks"],p)}const s=f(n,["audio"]);s!=null&&h(e,["audio"],kT(s));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&h(e,["video"],LT(l));const c=f(n,["text"]);c!=null&&h(e,["text"],c);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const y=f(n,["activityEnd"]);return y!=null&&h(e,["activityEnd"],y),e}function aw(n){const e={},t=f(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&h(e,["serverContent"],s);const r=f(n,["toolCall"]);r!=null&&h(e,["toolCall"],r);const l=f(n,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const c=f(n,["usageMetadata"]);c!=null&&h(e,["usageMetadata"],dw(c));const d=f(n,["goAway"]);d!=null&&h(e,["goAway"],d);const y=f(n,["sessionResumptionUpdate"]);return y!=null&&h(e,["sessionResumptionUpdate"],y),e}function lw(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],KR(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],QR(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&h(e,["inlineData"],Dc(y));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function uw(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function QT(n){const e={},t=f(n,["languageCode"]);t!=null&&h(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&h(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function cw(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],WR(d));const y=f(n,["googleSearch"]);y!=null&&h(e,["googleSearch"],ZR(y));const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function fw(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>$R(S))),h(e,["functionDeclarations"],T)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const r=f(n,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const l=f(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(n,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const d=f(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const y=f(n,["googleMaps"]);y!=null&&h(e,["googleMaps"],y);const p=f(n,["googleSearch"]);p!=null&&h(e,["googleSearch"],p);const v=f(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function dw(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&h(e,["cachedContentTokenCount"],s);const r=f(n,["candidatesTokenCount"]);r!=null&&h(e,["responseTokenCount"],r);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const c=f(n,["thoughtsTokenCount"]);c!=null&&h(e,["thoughtsTokenCount"],c);const d=f(n,["totalTokenCount"]);d!=null&&h(e,["totalTokenCount"],d);const y=f(n,["promptTokensDetails"]);if(y!=null){let R=y;Array.isArray(R)&&(R=R.map(O=>O)),h(e,["promptTokensDetails"],R)}const p=f(n,["cacheTokensDetails"]);if(p!=null){let R=p;Array.isArray(R)&&(R=R.map(O=>O)),h(e,["cacheTokensDetails"],R)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let R=v;Array.isArray(R)&&(R=R.map(O=>O)),h(e,["responseTokensDetails"],R)}const T=f(n,["toolUsePromptTokensDetails"]);if(T!=null){let R=T;Array.isArray(R)&&(R=R.map(O=>O)),h(e,["toolUsePromptTokensDetails"],R)}const S=f(n,["trafficType"]);return S!=null&&h(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hw(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function mw(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],pw(s));const r=f(n,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=f(n,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);const d=f(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const y=f(n,["index"]);y!=null&&h(e,["index"],y);const p=f(n,["logprobsResult"]);p!=null&&h(e,["logprobsResult"],p);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(R=>R)),h(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&h(e,["urlContextMetadata"],T),e}function pw(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),h(e,["citations"],s)}return e}function gw(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["contents"]);if(r!=null){let l=Yn(r);Array.isArray(l)&&(l=l.map(c=>c)),h(t,["contents"],l)}return t}function yw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),h(e,["tokensInfo"],r)}return e}function _w(n){const e={},t=f(n,["values"]);t!=null&&h(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&h(e,["statistics"],vw(s)),e}function vw(n){const e={},t=f(n,["truncated"]);t!=null&&h(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&h(e,["tokenCount"],s),e}function of(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>wb(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function Tw(n){const e={},t=f(n,["controlType"]);t!=null&&h(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&h(e,["computeControl"],s),e}function Ew(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Sw(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&h(e,["systemInstruction"],on(s));const r=f(n,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>jT(d))),h(e,["tools"],c)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&h(e,["generationConfig"],hb(l)),t}function Aw(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["contents"]);if(r!=null){let c=Yn(r);Array.isArray(c)&&(c=c.map(d=>of(d))),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&Ew(l),t}function Cw(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["contents"]);if(r!=null){let c=Yn(r);Array.isArray(c)&&(c=c.map(d=>d)),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&Sw(l,t),t}function xw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&h(e,["totalTokens"],s);const r=f(n,["cachedContentTokenCount"]);return r!=null&&h(e,["cachedContentTokenCount"],r),e}function Iw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&h(e,["totalTokens"],s),e}function Rw(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],$e(n,s)),t}function ww(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],$e(n,s)),t}function bw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function Nw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function Mw(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const y=f(n,["seed"]);e!==void 0&&y!=null&&h(e,["parameters","seed"],y);const p=f(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&h(e,["parameters","safetySetting"],p);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&h(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&h(e,["parameters","includeRaiReason"],S);const R=f(n,["language"]);e!==void 0&&R!=null&&h(e,["parameters","language"],R);const O=f(n,["outputMimeType"]);e!==void 0&&O!=null&&h(e,["parameters","outputOptions","mimeType"],O);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&h(e,["parameters","outputOptions","compressionQuality"],B);const J=f(n,["addWatermark"]);e!==void 0&&J!=null&&h(e,["parameters","addWatermark"],J);const X=f(n,["labels"]);e!==void 0&&X!=null&&h(e,["labels"],X);const te=f(n,["editMode"]);e!==void 0&&te!=null&&h(e,["parameters","editMode"],te);const j=f(n,["baseSteps"]);return e!==void 0&&j!=null&&h(e,["parameters","editConfig","baseSteps"],j),t}function Dw(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(y=>Vb(y))),h(t,["instances[0]","referenceImages"],d)}const c=f(e,["config"]);return c!=null&&Mw(c,t),t}function Pw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>rf(l))),h(e,["generatedImages"],r)}return e}function Vw(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Uw(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["instances[]","task_type"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["instances[]","title"],r);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&h(e,["parameters","outputDimensionality"],l);const c=f(n,["mimeType"]);e!==void 0&&c!=null&&h(e,["instances[]","mimeType"],c);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&h(e,["parameters","autoTruncate"],d),t}function Lw(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["contents"]);if(r!=null){let d=Sm(n,r);Array.isArray(d)&&(d=d.map(y=>y)),h(t,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&Vw(l,t);const c=f(e,["model"]);return c!==void 0&&h(t,["requests[]","model"],$e(n,c)),t}function kw(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["contents"]);if(r!=null){let c=Sm(n,r);Array.isArray(c)&&(c=c.map(d=>d)),h(t,["instances[]","content"],c)}const l=f(e,["config"]);return l!=null&&Uw(l,t),t}function qw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&h(e,["metadata"],r),e}function Ow(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>_w(c))),h(e,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&h(e,["metadata"],r),e}function zw(n){const e={},t=f(n,["endpoint"]);t!=null&&h(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&h(e,["deployedModelId"],s),e}function Bw(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function Fw(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Hw(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Gw(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&h(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function Yw(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],of(on(r)));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&h(s,["topP"],c);const d=f(e,["topK"]);d!=null&&h(s,["topK"],d);const y=f(e,["candidateCount"]);y!=null&&h(s,["candidateCount"],y);const p=f(e,["maxOutputTokens"]);p!=null&&h(s,["maxOutputTokens"],p);const v=f(e,["stopSequences"]);v!=null&&h(s,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&h(s,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&h(s,["presencePenalty"],R);const O=f(e,["frequencyPenalty"]);O!=null&&h(s,["frequencyPenalty"],O);const B=f(e,["seed"]);B!=null&&h(s,["seed"],B);const J=f(e,["responseMimeType"]);J!=null&&h(s,["responseMimeType"],J);const X=f(e,["responseSchema"]);X!=null&&h(s,["responseSchema"],Am(X));const te=f(e,["responseJsonSchema"]);if(te!=null&&h(s,["responseJsonSchema"],te),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=f(e,["safetySettings"]);if(t!==void 0&&j!=null){let L=j;Array.isArray(L)&&(L=L.map(D=>Ub(D))),h(t,["safetySettings"],L)}const le=f(e,["tools"]);if(t!==void 0&&le!=null){let L=sa(le);Array.isArray(L)&&(L=L.map(D=>Fb(ia(D)))),h(t,["tools"],L)}const fe=f(e,["toolConfig"]);if(t!==void 0&&fe!=null&&h(t,["toolConfig"],Bb(fe)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Z=f(e,["cachedContent"]);t!==void 0&&Z!=null&&h(t,["cachedContent"],us(n,Z));const M=f(e,["responseModalities"]);M!=null&&h(s,["responseModalities"],M);const N=f(e,["mediaResolution"]);N!=null&&h(s,["mediaResolution"],N);const b=f(e,["speechConfig"]);if(b!=null&&h(s,["speechConfig"],Cm(b)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&h(s,["thinkingConfig"],P);const V=f(e,["imageConfig"]);return V!=null&&h(s,["imageConfig"],_b(V)),s}function Jw(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],on(r));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&h(s,["topP"],c);const d=f(e,["topK"]);d!=null&&h(s,["topK"],d);const y=f(e,["candidateCount"]);y!=null&&h(s,["candidateCount"],y);const p=f(e,["maxOutputTokens"]);p!=null&&h(s,["maxOutputTokens"],p);const v=f(e,["stopSequences"]);v!=null&&h(s,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&h(s,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&h(s,["presencePenalty"],R);const O=f(e,["frequencyPenalty"]);O!=null&&h(s,["frequencyPenalty"],O);const B=f(e,["seed"]);B!=null&&h(s,["seed"],B);const J=f(e,["responseMimeType"]);J!=null&&h(s,["responseMimeType"],J);const X=f(e,["responseSchema"]);X!=null&&h(s,["responseSchema"],Am(X));const te=f(e,["responseJsonSchema"]);te!=null&&h(s,["responseJsonSchema"],te);const j=f(e,["routingConfig"]);j!=null&&h(s,["routingConfig"],j);const le=f(e,["modelSelectionConfig"]);le!=null&&h(s,["modelConfig"],le);const fe=f(e,["safetySettings"]);if(t!==void 0&&fe!=null){let Y=fe;Array.isArray(Y)&&(Y=Y.map(re=>re)),h(t,["safetySettings"],Y)}const Z=f(e,["tools"]);if(t!==void 0&&Z!=null){let Y=sa(Z);Array.isArray(Y)&&(Y=Y.map(re=>jT(ia(re)))),h(t,["tools"],Y)}const M=f(e,["toolConfig"]);t!==void 0&&M!=null&&h(t,["toolConfig"],M);const N=f(e,["labels"]);t!==void 0&&N!=null&&h(t,["labels"],N);const b=f(e,["cachedContent"]);t!==void 0&&b!=null&&h(t,["cachedContent"],us(n,b));const P=f(e,["responseModalities"]);P!=null&&h(s,["responseModalities"],P);const V=f(e,["mediaResolution"]);V!=null&&h(s,["mediaResolution"],V);const L=f(e,["speechConfig"]);L!=null&&h(s,["speechConfig"],ZT(Cm(L)));const D=f(e,["audioTimestamp"]);D!=null&&h(s,["audioTimestamp"],D);const ae=f(e,["thinkingConfig"]);ae!=null&&h(s,["thinkingConfig"],ae);const Ee=f(e,["imageConfig"]);return Ee!=null&&h(s,["imageConfig"],vb(Ee)),s}function o0(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["contents"]);if(r!=null){let c=Yn(r);Array.isArray(c)&&(c=c.map(d=>of(d))),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&h(t,["generationConfig"],Yw(n,l,t)),t}function r0(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["contents"]);if(r!=null){let c=Yn(r);Array.isArray(c)&&(c=c.map(d=>d)),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&h(t,["generationConfig"],Jw(n,l,t)),t}function a0(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(p=>mw(p))),h(e,["candidates"],y)}const r=f(n,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&h(e,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function l0(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(v=>v)),h(e,["candidates"],p)}const r=f(n,["createTime"]);r!=null&&h(e,["createTime"],r);const l=f(n,["modelVersion"]);l!=null&&h(e,["modelVersion"],l);const c=f(n,["promptFeedback"]);c!=null&&h(e,["promptFeedback"],c);const d=f(n,["responseId"]);d!=null&&h(e,["responseId"],d);const y=f(n,["usageMetadata"]);return y!=null&&h(e,["usageMetadata"],y),e}function Kw(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const r=f(n,["aspectRatio"]);e!==void 0&&r!=null&&h(e,["parameters","aspectRatio"],r);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&h(e,["parameters","safetySetting"],c);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d);const y=f(n,["includeSafetyAttributes"]);e!==void 0&&y!=null&&h(e,["parameters","includeSafetyAttributes"],y);const p=f(n,["includeRaiReason"]);e!==void 0&&p!=null&&h(e,["parameters","includeRaiReason"],p);const v=f(n,["language"]);e!==void 0&&v!=null&&h(e,["parameters","language"],v);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","mimeType"],T);const S=f(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&h(e,["parameters","outputOptions","compressionQuality"],S),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=f(n,["imageSize"]);if(e!==void 0&&R!=null&&h(e,["parameters","sampleImageSize"],R),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function Qw(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const y=f(n,["seed"]);e!==void 0&&y!=null&&h(e,["parameters","seed"],y);const p=f(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&h(e,["parameters","safetySetting"],p);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&h(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&h(e,["parameters","includeRaiReason"],S);const R=f(n,["language"]);e!==void 0&&R!=null&&h(e,["parameters","language"],R);const O=f(n,["outputMimeType"]);e!==void 0&&O!=null&&h(e,["parameters","outputOptions","mimeType"],O);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&h(e,["parameters","outputOptions","compressionQuality"],B);const J=f(n,["addWatermark"]);e!==void 0&&J!=null&&h(e,["parameters","addWatermark"],J);const X=f(n,["labels"]);e!==void 0&&X!=null&&h(e,["labels"],X);const te=f(n,["imageSize"]);e!==void 0&&te!=null&&h(e,["parameters","sampleImageSize"],te);const j=f(n,["enhancePrompt"]);return e!==void 0&&j!=null&&h(e,["parameters","enhancePrompt"],j),t}function $w(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&Kw(l,t),t}function Xw(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&Qw(l,t),t}function Ww(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>ub(c))),h(e,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&h(e,["positivePromptSafetyAttributes"],XT(r)),e}function Zw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>rf(c))),h(e,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&h(e,["positivePromptSafetyAttributes"],WT(r)),e}function jw(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=f(n,["durationSeconds"]);if(e!==void 0&&r!=null&&h(e,["parameters","durationSeconds"],r),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const c=f(n,["resolution"]);e!==void 0&&c!=null&&h(e,["parameters","resolution"],c);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=f(n,["negativePrompt"]);e!==void 0&&y!=null&&h(e,["parameters","negativePrompt"],y);const p=f(n,["enhancePrompt"]);if(e!==void 0&&p!=null&&h(e,["parameters","enhancePrompt"],p),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&h(e,["instances[0]","lastFrame"],af(v));const T=f(n,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(R=>tN(R))),h(e,["instances[0]","referenceImages"],S)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function eb(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=f(n,["fps"]);e!==void 0&&l!=null&&h(e,["parameters","fps"],l);const c=f(n,["durationSeconds"]);e!==void 0&&c!=null&&h(e,["parameters","durationSeconds"],c);const d=f(n,["seed"]);e!==void 0&&d!=null&&h(e,["parameters","seed"],d);const y=f(n,["aspectRatio"]);e!==void 0&&y!=null&&h(e,["parameters","aspectRatio"],y);const p=f(n,["resolution"]);e!==void 0&&p!=null&&h(e,["parameters","resolution"],p);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const T=f(n,["pubsubTopic"]);e!==void 0&&T!=null&&h(e,["parameters","pubsubTopic"],T);const S=f(n,["negativePrompt"]);e!==void 0&&S!=null&&h(e,["parameters","negativePrompt"],S);const R=f(n,["enhancePrompt"]);e!==void 0&&R!=null&&h(e,["parameters","enhancePrompt"],R);const O=f(n,["generateAudio"]);e!==void 0&&O!=null&&h(e,["parameters","generateAudio"],O);const B=f(n,["lastFrame"]);e!==void 0&&B!=null&&h(e,["instances[0]","lastFrame"],li(B));const J=f(n,["referenceImages"]);if(e!==void 0&&J!=null){let j=J;Array.isArray(j)&&(j=j.map(le=>nN(le))),h(e,["instances[0]","referenceImages"],j)}const X=f(n,["mask"]);e!==void 0&&X!=null&&h(e,["instances[0]","mask"],eN(X));const te=f(n,["compressionQuality"]);return e!==void 0&&te!=null&&h(e,["parameters","compressionQuality"],te),t}function tb(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],ob(c)),e}function nb(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],rb(c)),e}function ib(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&h(t,["instances[0]","image"],af(l));const c=f(e,["video"]);c!=null&&h(t,["instances[0]","video"],eE(c));const d=f(e,["source"]);d!=null&&ab(d,t);const y=f(e,["config"]);return y!=null&&jw(y,t),t}function sb(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&h(t,["instances[0]","image"],li(l));const c=f(e,["video"]);c!=null&&h(t,["instances[0]","video"],tE(c));const d=f(e,["source"]);d!=null&&lb(d,t);const y=f(e,["config"]);return y!=null&&eb(y,t),t}function ob(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>fb(c))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function rb(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>db(c))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function ab(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],af(r));const l=f(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],eE(l)),t}function lb(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],li(r));const l=f(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],tE(l)),t}function ub(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["image"],Tb(t));const s=f(n,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const r=f(n,["_self"]);return r!=null&&h(e,["safetyAttributes"],XT(r)),e}function rf(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["image"],$T(t));const s=f(n,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const r=f(n,["_self"]);r!=null&&h(e,["safetyAttributes"],WT(r));const l=f(n,["prompt"]);return l!=null&&h(e,["enhancedPrompt"],l),e}function cb(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["mask"],$T(t));const s=f(n,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),h(e,["labels"],r)}return e}function fb(n){const e={},t=f(n,["video"]);return t!=null&&h(e,["video"],Zb(t)),e}function db(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],jb(t)),e}function hb(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const r=f(n,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const c=f(n,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);const d=f(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const y=f(n,["logprobs"]);y!=null&&h(e,["logprobs"],y);const p=f(n,["maxOutputTokens"]);p!=null&&h(e,["maxOutputTokens"],p);const v=f(n,["mediaResolution"]);v!=null&&h(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&h(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const R=f(n,["responseMimeType"]);R!=null&&h(e,["responseMimeType"],R);const O=f(n,["responseModalities"]);O!=null&&h(e,["responseModalities"],O);const B=f(n,["responseSchema"]);B!=null&&h(e,["responseSchema"],B);const J=f(n,["routingConfig"]);J!=null&&h(e,["routingConfig"],J);const X=f(n,["seed"]);X!=null&&h(e,["seed"],X);const te=f(n,["speechConfig"]);te!=null&&h(e,["speechConfig"],ZT(te));const j=f(n,["stopSequences"]);j!=null&&h(e,["stopSequences"],j);const le=f(n,["temperature"]);le!=null&&h(e,["temperature"],le);const fe=f(n,["thinkingConfig"]);fe!=null&&h(e,["thinkingConfig"],fe);const Z=f(n,["topK"]);Z!=null&&h(e,["topK"],Z);const M=f(n,["topP"]);if(M!=null&&h(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function mb(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],$e(n,s)),t}function pb(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],$e(n,s)),t}function gb(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function yb(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function _b(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function vb(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=f(n,["imageSize"]);s!=null&&h(e,["imageSize"],s);const r=f(n,["outputMimeType"]);r!=null&&h(e,["imageOutputOptions","mimeType"],r);const l=f(n,["outputCompressionQuality"]);return l!=null&&h(e,["imageOutputOptions","compressionQuality"],l),e}function Tb(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&h(e,["imageBytes"],io(t));const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function $T(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["imageBytes"],io(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function af(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&h(e,["bytesBase64Encoded"],io(t));const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function li(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&h(e,["bytesBase64Encoded"],io(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Eb(n,e,t){const s={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&h(t,["_query","pageSize"],r);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&h(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&h(t,["_url","models_url"],BT(n,d)),s}function Sb(n,e,t){const s={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&h(t,["_query","pageSize"],r);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&h(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&h(t,["_url","models_url"],BT(n,d)),s}function Ab(n,e){const t={},s=f(e,["config"]);return s!=null&&Eb(n,s,t),t}function Cb(n,e){const t={},s=f(e,["config"]);return s!=null&&Sb(n,s,t),t}function xb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["_self"]);if(r!=null){let l=FT(r);Array.isArray(l)&&(l=l.map(c=>Yh(c))),h(e,["models"],l)}return e}function Ib(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["_self"]);if(r!=null){let l=FT(r);Array.isArray(l)&&(l=l.map(c=>Jh(c))),h(e,["models"],l)}return e}function Rb(n){const e={},t=f(n,["maskMode"]);t!=null&&h(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&h(e,["maskClasses"],s);const r=f(n,["maskDilation"]);return r!=null&&h(e,["dilation"],r),e}function Yh(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const r=f(n,["description"]);r!=null&&h(e,["description"],r);const l=f(n,["version"]);l!=null&&h(e,["version"],l);const c=f(n,["_self"]);c!=null&&h(e,["tunedModelInfo"],Hb(c));const d=f(n,["inputTokenLimit"]);d!=null&&h(e,["inputTokenLimit"],d);const y=f(n,["outputTokenLimit"]);y!=null&&h(e,["outputTokenLimit"],y);const p=f(n,["supportedGenerationMethods"]);p!=null&&h(e,["supportedActions"],p);const v=f(n,["temperature"]);v!=null&&h(e,["temperature"],v);const T=f(n,["maxTemperature"]);T!=null&&h(e,["maxTemperature"],T);const S=f(n,["topP"]);S!=null&&h(e,["topP"],S);const R=f(n,["topK"]);R!=null&&h(e,["topK"],R);const O=f(n,["thinking"]);return O!=null&&h(e,["thinking"],O),e}function Jh(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const r=f(n,["description"]);r!=null&&h(e,["description"],r);const l=f(n,["versionId"]);l!=null&&h(e,["version"],l);const c=f(n,["deployedModels"]);if(c!=null){let T=c;Array.isArray(T)&&(T=T.map(S=>zw(S))),h(e,["endpoints"],T)}const d=f(n,["labels"]);d!=null&&h(e,["labels"],d);const y=f(n,["_self"]);y!=null&&h(e,["tunedModelInfo"],Gb(y));const p=f(n,["defaultCheckpointId"]);p!=null&&h(e,["defaultCheckpointId"],p);const v=f(n,["checkpoints"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(S=>S)),h(e,["checkpoints"],T)}return e}function wb(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],Bw(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],Fw(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&h(e,["inlineData"],hw(y));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function bb(n){const e={},t=f(n,["productImage"]);return t!=null&&h(e,["image"],li(t)),e}function Nb(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const r=f(n,["baseSteps"]);e!==void 0&&r!=null&&h(e,["parameters","baseSteps"],r);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const c=f(n,["seed"]);e!==void 0&&c!=null&&h(e,["parameters","seed"],c);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const y=f(n,["personGeneration"]);e!==void 0&&y!=null&&h(e,["parameters","personGeneration"],y);const p=f(n,["addWatermark"]);e!==void 0&&p!=null&&h(e,["parameters","addWatermark"],p);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&h(e,["parameters","outputOptions","mimeType"],v);const T=f(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","compressionQuality"],T);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&h(e,["parameters","enhancePrompt"],S);const R=f(n,["labels"]);return e!==void 0&&R!=null&&h(e,["labels"],R),t}function Mb(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["source"]);r!=null&&Pb(r,t);const l=f(e,["config"]);return l!=null&&Nb(l,t),t}function Db(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>rf(r))),h(e,["generatedImages"],s)}return e}function Pb(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=f(n,["personImage"]);e!==void 0&&r!=null&&h(e,["instances[0]","personImage","image"],li(r));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>bb(d))),h(e,["instances[0]","productImages"],c)}return t}function Vb(n){const e={},t=f(n,["referenceImage"]);t!=null&&h(e,["referenceImage"],li(t));const s=f(n,["referenceId"]);s!=null&&h(e,["referenceId"],s);const r=f(n,["referenceType"]);r!=null&&h(e,["referenceType"],r);const l=f(n,["maskImageConfig"]);l!=null&&h(e,["maskImageConfig"],Rb(l));const c=f(n,["controlImageConfig"]);c!=null&&h(e,["controlImageConfig"],Tw(c));const d=f(n,["styleImageConfig"]);d!=null&&h(e,["styleImageConfig"],d);const y=f(n,["subjectImageConfig"]);return y!=null&&h(e,["subjectImageConfig"],y),e}function XT(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const r=f(n,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function WT(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const r=f(n,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function Ub(n){const e={},t=f(n,["category"]);if(t!=null&&h(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function Lb(n){const e={},t=f(n,["image"]);return t!=null&&h(e,["image"],li(t)),e}function kb(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&h(e,["parameters","mode"],s);const r=f(n,["maxPredictions"]);e!==void 0&&r!=null&&h(e,["parameters","maxPredictions"],r);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&h(e,["parameters","confidenceThreshold"],l);const c=f(n,["maskDilation"]);e!==void 0&&c!=null&&h(e,["parameters","maskDilation"],c);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&h(e,["parameters","binaryColorThreshold"],d);const y=f(n,["labels"]);return e!==void 0&&y!=null&&h(e,["labels"],y),t}function qb(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["source"]);r!=null&&zb(r,t);const l=f(e,["config"]);return l!=null&&kb(l,t),t}function Ob(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>cb(r))),h(e,["generatedMasks"],s)}return e}function zb(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],li(r));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&h(e,["instances[0]","scribble"],Lb(l)),t}function ZT(n){const e={},t=f(n,["languageCode"]);t!=null&&h(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&h(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Bb(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],Hw(t));const s=f(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function Fb(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],gb(d));const y=f(n,["googleSearch"]);y!=null&&h(e,["googleSearch"],yb(y));const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function jT(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>Gw(S))),h(e,["functionDeclarations"],T)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const r=f(n,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const l=f(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(n,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const d=f(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const y=f(n,["googleMaps"]);y!=null&&h(e,["googleMaps"],y);const p=f(n,["googleSearch"]);p!=null&&h(e,["googleSearch"],p);const v=f(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function Hb(n){const e={},t=f(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&h(e,["createTime"],s);const r=f(n,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function Gb(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&h(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&h(e,["createTime"],s);const r=f(n,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function Yb(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const r=f(n,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function Jb(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const r=f(n,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function Kb(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","name"],$e(n,s));const r=f(e,["config"]);return r!=null&&Yb(r,t),t}function Qb(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["config"]);return r!=null&&Jb(r,t),t}function $b(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const r=f(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&h(e,["parameters","safetySetting"],r);const l=f(n,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const c=f(n,["includeRaiReason"]);e!==void 0&&c!=null&&h(e,["parameters","includeRaiReason"],c);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&h(e,["parameters","outputOptions","mimeType"],d);const y=f(n,["outputCompressionQuality"]);e!==void 0&&y!=null&&h(e,["parameters","outputOptions","compressionQuality"],y);const p=f(n,["enhanceInputImage"]);e!==void 0&&p!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],p);const v=f(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const T=f(n,["labels"]);e!==void 0&&T!=null&&h(e,["labels"],T);const S=f(n,["numberOfImages"]);e!==void 0&&S!=null&&h(e,["parameters","sampleCount"],S);const R=f(n,["mode"]);return e!==void 0&&R!=null&&h(e,["parameters","mode"],R),t}function Xb(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["image"]);r!=null&&h(t,["instances[0]","image"],li(r));const l=f(e,["upscaleFactor"]);l!=null&&h(t,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(e,["config"]);return c!=null&&$b(c,t),t}function Wb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>rf(l))),h(e,["generatedImages"],r)}return e}function Zb(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&h(e,["videoBytes"],io(s));const r=f(n,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function jb(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],io(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function eN(n){const e={},t=f(n,["image"]);t!=null&&h(e,["_self"],li(t));const s=f(n,["maskMode"]);return s!=null&&h(e,["maskMode"],s),e}function tN(n){const e={},t=f(n,["image"]);t!=null&&h(e,["image"],af(t));const s=f(n,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function nN(n){const e={},t=f(n,["image"]);t!=null&&h(e,["image"],li(t));const s=f(n,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function eE(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const s=f(n,["videoBytes"]);s!=null&&h(e,["encodedVideo"],io(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["encoding"],r),e}function tE(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&h(e,["bytesBase64Encoded"],io(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iN(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&h(e,["displayName"],s),t}function sN(n){const e={},t=f(n,["config"]);return t!=null&&iN(t,e),e}function oN(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),t}function rN(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&oN(s,e),e}function aN(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function lN(n,e){const t={},s=f(n,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["customMetadata"],l)}const r=f(n,["chunkingConfig"]);return e!==void 0&&r!=null&&h(e,["chunkingConfig"],r),t}function uN(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],fN(c)),e}function cN(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const s=f(n,["fileName"]);s!=null&&h(e,["fileName"],s);const r=f(n,["config"]);return r!=null&&lN(r,e),e}function fN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&h(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function dN(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function hN(n){const e={},t=f(n,["config"]);return t!=null&&dN(t,e),e}function mN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["fileSearchStores"],l)}return e}function nE(n,e){const t={},s=f(n,["mimeType"]);e!==void 0&&s!=null&&h(e,["mimeType"],s);const r=f(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=f(n,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(y=>y)),h(e,["customMetadata"],d)}const c=f(n,["chunkingConfig"]);return e!==void 0&&c!=null&&h(e,["chunkingConfig"],c),t}function pN(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const s=f(n,["config"]);return s!=null&&nE(s,e),e}function gN(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yN="Content-Type",_N="X-Server-Timeout",vN="User-Agent",Kh="x-goog-api-client",TN="1.31.0",EN=`google-genai-sdk/${TN}`,SN="v1beta1",AN="v1beta",u0=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class CN{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:SN,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:AN,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const r=[this.getRequestUrlInternal(t)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))r.searchParams.append(c,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?s[r]=Object.assign(Object.assign({},s[r]),l):l!==void 0&&(s[r]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,r){if(t&&t.timeout||r){const l=new AbortController,c=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>l.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=c}return t&&t.extraBody!==null&&xN(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await c0(r),new Fh(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await c0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return Jr(this,arguments,function*(){const r=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";for(;;){const{done:d,value:y}=yield dt(r.read());if(d){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=l.decode(y,{stream:!0});try{const T=JSON.parse(p);if("error"in T){const S=JSON.parse(JSON.stringify(T.error)),R=S.status,O=S.code,B=`got status: ${R}. ${JSON.stringify(T)}`;if(O>=400&&O<600)throw new sf({message:B,status:O})}}catch(T){if(T.name==="ApiError")throw T}c+=p;let v=c.match(u0);for(;v;){const T=v[1];try{const S=new Response(T,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield dt(new Fh(S)),c=c.slice(v[0].length),v=c.match(u0)}catch(S){throw new Error(`exception parsing stream chunk ${T}. ${S}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=EN+" "+this.clientOptions.userAgentExtra;return e[vN]=t,e[Kh]=t,e[yN]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))s.append(r,l);e.timeout&&e.timeout>0&&s.append(_N,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);r.sizeBytes=String(c.size);const d=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const y={file:r},p=this.getFileName(e),v=me("upload/v1beta/files",y._url),T=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,p,y,t==null?void 0:t.httpOptions);return l.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,s){var r;const l=this.clientOptions.uploader,c=await l.stat(t),d=String(c.size),y=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:c.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),T={};s!=null&&nE(s,T);const S=await this.fetchUploadUrl(p,d,y,v,T,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,r,l,c){var d;let y={};c?y=c:y={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const p=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:y});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=p==null?void 0:p.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function c0(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(s);throw t>=400&&t<600?new sf({message:r,status:t}):new Error(r)}}function xN(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const d=Object.assign({},l);for(const y in c)if(Object.prototype.hasOwnProperty.call(c,y)){const p=c[y],v=d[y];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?d[y]=s(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),d[y]=p)}return d}const r=s(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IN="mcp_used/unknown";let RN=!1;function iE(n){for(const e of n)if(wN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return RN}function sE(n){var e;const t=(e=n[Kh])!==null&&e!==void 0?e:"";n[Kh]=(t+` ${IN}`).trimStart()}function wN(n){return n!==null&&typeof n=="object"&&n instanceof Im}function bN(n,e=100){return Jr(this,arguments,function*(){let s,r=0;for(;r<e;){const l=yield dt(n.listTools({cursor:s}));for(const c of l.tools)yield yield dt(c),r++;if(!l.nextCursor)break;s=l.nextCursor}})}class Im{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Im(e,t)}async initialize(){var e,t,s,r;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var d=!0,y=(t=void 0,Il(bN(v))),p;p=await y.next(),e=p.done,!e;d=!0){r=p.value,d=!1;const T=r;c.push(T);const S=T.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=v}}catch(T){t={error:T}}finally{try{!d&&!e&&(s=y.return)&&await s.call(y)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),aI(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await r.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function NN(n,e,t){const s=new jx;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(s,r),e(s)}class MN{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=VN(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),y=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let p=()=>{};const v=new Promise(j=>{p=j}),T=e.callbacks,S=function(){p({})},R=this.apiClient,O={onopen:S,onmessage:j=>{NN(R,T.onmessage,j)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(j){},onclose:(s=T==null?void 0:T.onclose)!==null&&s!==void 0?s:function(j){}},B=this.webSocketFactory.create(y,PN(c),O);B.connect(),await v;const te={setup:{model:$e(this.apiClient,e.model)}};return B.send(JSON.stringify(te)),new DN(B,this.apiClient)}}class DN{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=sw(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=iw(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Gr.PLAY)}pause(){this.sendPlaybackControl(Gr.PAUSE)}stop(){this.sendPlaybackControl(Gr.STOP)}resetContext(){this.sendPlaybackControl(Gr.RESET_CONTEXT)}close(){this.conn.close()}}function PN(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function VN(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function LN(n,e,t){const s=new Zx;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const c=aw(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class kN{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new MN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,r,l,c,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&iE(e.config.tools)&&sE(T);const S=BN(T);if(this.apiClient.isVertexAI())v=`${y}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const b=this.apiClient.getApiKey();let P="BidiGenerateContent",V="key";b!=null&&b.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",V="access_token"),v=`${y}/ws/google.ai.generativelanguage.${p}.GenerativeService.${P}?${V}=${b}`}let R=()=>{};const O=new Promise(b=>{R=b}),B=e.callbacks,J=function(){var b;(b=B==null?void 0:B.onopen)===null||b===void 0||b.call(B),R({})},X=this.apiClient,te={onopen:J,onmessage:b=>{LN(X,B.onmessage,b)},onerror:(t=B==null?void 0:B.onerror)!==null&&t!==void 0?t:function(b){},onclose:(s=B==null?void 0:B.onclose)!==null&&s!==void 0?s:function(b){}},j=this.webSocketFactory.create(v,zN(S),te);j.connect(),await O;let le=$e(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&le.startsWith("publishers/")){const b=this.apiClient.getProject(),P=this.apiClient.getLocation();le=`projects/${b}/locations/${P}/`+le}let fe={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Oc.AUDIO]}:e.config.responseModalities=[Oc.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Z=(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],M=[];for(const b of Z)if(this.isCallableTool(b)){const P=b;M.push(await P.tool())}else M.push(b);M.length>0&&(e.config.tools=M);const N={model:le,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?fe=nw(this.apiClient,N):fe=tw(this.apiClient,N),delete fe.config,j.send(JSON.stringify(fe)),new ON(j,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const qN={turnComplete:!0};class ON{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=Yn(t.turns),e.isVertexAI()||(s=s.map(r=>of(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(UN)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},qN),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:rw(e)}:t={realtimeInput:ow(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function zN(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function BN(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const f0=10;function d0(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Kr(c)){r=!0;break}if(!r)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Kr(n){return"callTool"in n&&typeof n.callTool=="function"}function FN(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>Kr(r)))!==null&&s!==void 0?s:!1}function h0(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,r)=>{if(Kr(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(r)}),t}function m0(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HN extends ls{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,r,l,c,d;const y=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!FN(t)||d0(t.config))return await this.generateContentInternal(y);const p=h0(t);if(p.length>0){const B=p.map(J=>`tools[${J}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${B}.`)}let v,T;const S=Yn(y.contents),R=(l=(r=(s=y.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:f0;let O=0;for(;O<R&&(v=await this.generateContentInternal(y),!(!v.functionCalls||v.functionCalls.length===0));){const B=v.candidates[0].content,J=[];for(const X of(d=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(Kr(X)){const j=await X.callTool(v.functionCalls);J.push(...j)}O++,T={role:"user",parts:J},y.contents=Yn(y.contents),y.contents.push(B),y.contents.push(T),m0(y.config)&&(S.push(B),S.push(T))}return m0(y.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async t=>{var s,r,l,c,d;if(this.maybeMoveToResponseJsonSchem(t),d0(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const y=h0(t);if(y.length>0){const T=y.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(l=(r=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(d=(c=t==null?void 0:t.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(p&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var r;let l;const c=[];if(s!=null&&s.generatedImages)for(const y of s.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((r=y==null?void 0:y.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=y==null?void 0:y.safetyAttributes:c.push(y);let d;return l?d={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:d={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},d}),this.list=async t=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Go(is.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var s,r,l,c,d,y;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(l=t.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((y=(d=t.source)===null||d===void 0?void 0:d.video)===null||y===void 0)&&y.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async y=>Kr(y)?await y.tool():y)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(d.config.tools=c,e.config&&e.config.tools&&iE(e.config.tools)){const y=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},y);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),sE(p),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return d}async initAfcToolsMap(e){var t,s,r;const l=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(Kr(c)){const d=c,y=await d.tool();for(const p of(r=y.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,d)}}return l}async processAfcStream(e){var t,s,r;const l=(r=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:f0;let c=!1,d=0;const y=await this.initAfcToolsMap(e);return(function(p,v,T){var S,R;return Jr(this,arguments,function*(){for(var O,B,J,X;d<l;){c&&(d++,c=!1);const fe=yield dt(p.processParamsMaybeAddMcpUsage(T)),Z=yield dt(p.generateContentStreamInternal(fe)),M=[],N=[];try{for(var te=!0,j=(B=void 0,Il(Z)),le;le=yield dt(j.next()),O=le.done,!O;te=!0){X=le.value,te=!1;const b=X;if(yield yield dt(b),b.candidates&&(!((S=b.candidates[0])===null||S===void 0)&&S.content)){N.push(b.candidates[0].content);for(const P of(R=b.candidates[0].content.parts)!==null&&R!==void 0?R:[])if(d<l&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(P.functionCall.name)){const V=yield dt(v.get(P.functionCall.name).callTool([P.functionCall]));M.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(b){B={error:b}}finally{try{!te&&!O&&(J=j.return)&&(yield dt(J.call(j)))}finally{if(B)throw B.error}}if(M.length>0){c=!0;const b=new vl;b.candidates=[{content:{role:"user",parts:M}}],yield yield dt(b);const P=[];P.push(...N),P.push({role:"user",parts:M});const V=Yn(T.contents).concat(P);T.contents=V}else break}})})(this,y,e)}async generateContentInternal(e){var t,s,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const p=r0(this.apiClient,e);return d=me("{model}:generateContent",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=l0(v),S=new vl;return Object.assign(S,T),S})}else{const p=o0(this.apiClient,e);return d=me("{model}:generateContent",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=a0(v),S=new vl;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,s,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const p=r0(this.apiClient,e);return d=me("{model}:streamGenerateContent?alt=sse",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(T){return Jr(this,arguments,function*(){var S,R,O,B;try{for(var J=!0,X=Il(T),te;te=yield dt(X.next()),S=te.done,!S;J=!0){B=te.value,J=!1;const j=B,le=l0(yield dt(j.json()));le.sdkHttpResponse={headers:j.headers};const fe=new vl;Object.assign(fe,le),yield yield dt(fe)}}catch(j){R={error:j}}finally{try{!J&&!S&&(O=X.return)&&(yield dt(O.call(X)))}finally{if(R)throw R.error}}})})}else{const p=o0(this.apiClient,e);return d=me("{model}:streamGenerateContent?alt=sse",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(T){return Jr(this,arguments,function*(){var S,R,O,B;try{for(var J=!0,X=Il(T),te;te=yield dt(X.next()),S=te.done,!S;J=!0){B=te.value,J=!1;const j=B,le=a0(yield dt(j.json()));le.sdkHttpResponse={headers:j.headers};const fe=new vl;Object.assign(fe,le),yield yield dt(fe)}}catch(j){R={error:j}}finally{try{!J&&!S&&(O=X.return)&&(yield dt(O.call(X)))}finally{if(R)throw R.error}}})})}}async embedContent(e){var t,s,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const p=kw(this.apiClient,e);return d=me("{model}:predict",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=Ow(v),S=new Fv;return Object.assign(S,T),S})}else{const p=Lw(this.apiClient,e);return d=me("{model}:batchEmbedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=qw(v),S=new Fv;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,s,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const p=Xw(this.apiClient,e);return d=me("{model}:predict",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=Zw(v),S=new Hv;return Object.assign(S,T),S})}else{const p=$w(this.apiClient,e);return d=me("{model}:predict",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=Ww(v),S=new Hv;return Object.assign(S,T),S})}}async editImageInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=Dw(this.apiClient,e);return l=me("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const p=Pw(y),v=new Bx;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=Xb(this.apiClient,e);return l=me("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const p=Wb(y),v=new Fx;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=Mb(this.apiClient,e);return l=me("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const p=Db(y),v=new Hx;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=qb(this.apiClient,e);return l=me("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const p=Ob(y),v=new Gx;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const p=pb(this.apiClient,e);return d=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Jh(v))}else{const p=mb(this.apiClient,e);return d=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Yh(v))}}async listInternal(e){var t,s,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const p=Cb(this.apiClient,e);return d=me("{models_url}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=Ib(v),S=new Gv;return Object.assign(S,T),S})}else{const p=Ab(this.apiClient,e);return d=me("{models_url}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=xb(v),S=new Gv;return Object.assign(S,T),S})}}async update(e){var t,s,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const p=Qb(this.apiClient,e);return d=me("{model}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Jh(v))}else{const p=Kb(this.apiClient,e);return d=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Yh(v))}}async delete(e){var t,s,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const p=ww(this.apiClient,e);return d=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=Nw(v),S=new Yv;return Object.assign(S,T),S})}else{const p=Rw(this.apiClient,e);return d=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=bw(v),S=new Yv;return Object.assign(S,T),S})}}async countTokens(e){var t,s,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const p=Cw(this.apiClient,e);return d=me("{model}:countTokens",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=Iw(v),S=new Jv;return Object.assign(S,T),S})}else{const p=Aw(this.apiClient,e);return d=me("{model}:countTokens",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=xw(v),S=new Jv;return Object.assign(S,T),S})}}async computeTokens(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=gw(this.apiClient,e);return l=me("{model}:computeTokens",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const p=yw(y),v=new Yx;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const p=sb(this.apiClient,e);return d=me("{model}:predictLongRunning",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const T=nb(v),S=new zc;return Object.assign(S,T),S})}else{const p=ib(this.apiClient,e);return d=me("{model}:predictLongRunning",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const T=tb(v),S=new zc;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GN extends ls{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const p=Ux(e);return d=me("{operationName}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c}else{const p=Vx(e);return d=me("{operationName}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=Rx(e);return l=me("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YN(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function JN(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>tM(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function KN(n,e,t){const s={},r=f(e,["expireTime"]);t!==void 0&&r!=null&&h(t,["expireTime"],r);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&h(t,["newSessionExpireTime"],l);const c=f(e,["uses"]);t!==void 0&&c!=null&&h(t,["uses"],c);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&h(t,["bidiGenerateContentSetup"],eM(n,d));const y=f(e,["lockAdditionalFields"]);return t!==void 0&&y!=null&&h(t,["fieldMask"],y),s}function QN(n,e){const t={},s=f(e,["config"]);return s!=null&&h(t,["config"],KN(n,s,t)),t}function $N(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function XN(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function WN(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function ZN(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function jN(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","maxOutputTokens"],y);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],xm(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],R);const O=f(n,["systemInstruction"]);e!==void 0&&O!=null&&h(e,["setup","systemInstruction"],JN(on(O)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let Z=sa(B);Array.isArray(Z)&&(Z=Z.map(M=>iM(ia(M)))),h(e,["setup","tools"],Z)}const J=f(n,["sessionResumption"]);e!==void 0&&J!=null&&h(e,["setup","sessionResumption"],nM(J));const X=f(n,["inputAudioTranscription"]);e!==void 0&&X!=null&&h(e,["setup","inputAudioTranscription"],X);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&h(e,["setup","outputAudioTranscription"],te);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&h(e,["setup","realtimeInputConfig"],j);const le=f(n,["contextWindowCompression"]);e!==void 0&&le!=null&&h(e,["setup","contextWindowCompression"],le);const fe=f(n,["proactivity"]);return e!==void 0&&fe!=null&&h(e,["setup","proactivity"],fe),t}function eM(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],$e(n,s));const r=f(e,["config"]);return r!=null&&h(t,["config"],jN(r,t)),t}function tM(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],$N(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],XN(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&h(e,["inlineData"],YN(y));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function nM(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function iM(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],WN(d));const y=f(n,["googleSearch"]);y!=null&&h(e,["googleSearch"],ZN(y));const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sM(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function oM(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=sM(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(p=>c.includes(p)?`generationConfig.${p}`:p));const y=[];l&&y.push(l),d.length>0&&y.push(...d),y.length>0?n.fieldMask=y.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class rM extends ls{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=QN(this.apiClient,e);l=me("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const y=oM(d,e.config);return r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aM(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),t}function lM(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&aM(s,e),e}function uM(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function cM(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function fM(n){const e={},t=f(n,["parent"]);t!=null&&h(e,["_url","parent"],t);const s=f(n,["config"]);return s!=null&&cM(s,e),e}function dM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hM extends ls{constructor(e){super(),this.apiClient=e,this.list=async t=>new Go(is.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=uM(e);return l=me("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var t,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=lM(e);r=me("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=fM(e);return l=me("{parent}/documents",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const p=dM(y),v=new Jx;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mM extends ls{constructor(e,t=new hM(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new Go(is.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=sN(e);return l=me("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async get(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=aN(e);return l=me("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var t,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=rN(e);r=me("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=hN(e);return l=me("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const p=mN(y),v=new Kx;return Object.assign(v,p),v})}}async uploadToFileSearchStoreInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=pN(e);return l=me("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const p=gN(y),v=new Qx;return Object.assign(v,p),v})}}async importFile(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=cN(e);return l=me("{file_search_store_name}:importFile",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const p=uN(y),v=new Tm;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pM(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function gM(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function yM(n,e){const t={},s=f(n,["sdkHttpResponse"]);return s!=null&&h(t,["sdkHttpResponse"],s),t}function _M(n,e){const t={},s=f(n,["sdkHttpResponse"]);return s!=null&&h(t,["sdkHttpResponse"],s),t}function vM(n,e,t){const s={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&h(e,["displayName"],r),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const c=f(n,["learningRateMultiplier"]);if(c!=null&&h(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&h(e,["tuningTask","hyperparameters","batchSize"],d);const y=f(n,["learningRate"]);if(e!==void 0&&y!=null&&h(e,["tuningTask","hyperparameters","learningRate"],y),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function TM(n,e,t){const s={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const R=f(n,["validationDataset"]);e!==void 0&&R!=null&&h(e,["supervisedTuningSpec"],p0(R))}else if(r==="PREFERENCE_TUNING"){const R=f(n,["validationDataset"]);e!==void 0&&R!=null&&h(e,["preferenceOptimizationSpec"],p0(R))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const c=f(n,["description"]);e!==void 0&&c!=null&&h(e,["description"],c);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const R=f(n,["epochCount"]);e!==void 0&&R!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],R)}else if(d==="PREFERENCE_TUNING"){const R=f(n,["epochCount"]);e!==void 0&&R!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],R)}let y=f(t,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const R=f(n,["learningRateMultiplier"]);e!==void 0&&R!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],R)}else if(y==="PREFERENCE_TUNING"){const R=f(n,["learningRateMultiplier"]);e!==void 0&&R!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],R)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const R=f(n,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],R)}else if(p==="PREFERENCE_TUNING"){const R=f(n,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],R)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const R=f(n,["adapterSize"]);e!==void 0&&R!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],R)}else if(v==="PREFERENCE_TUNING"){const R=f(n,["adapterSize"]);e!==void 0&&R!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],R)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=f(n,["labels"]);e!==void 0&&T!=null&&h(e,["labels"],T);const S=f(n,["beta"]);return e!==void 0&&S!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),s}function EM(n,e){const t={},s=f(n,["baseModel"]);s!=null&&h(t,["baseModel"],s);const r=f(n,["preTunedModel"]);r!=null&&h(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&DM(l);const c=f(n,["config"]);return c!=null&&vM(c,t),t}function SM(n,e){const t={},s=f(n,["baseModel"]);s!=null&&h(t,["baseModel"],s);const r=f(n,["preTunedModel"]);r!=null&&h(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&PM(l,t,e);const c=f(n,["config"]);return c!=null&&TM(c,t,e),t}function AM(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function CM(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function xM(n,e,t){const s={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=f(n,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),s}function IM(n,e,t){const s={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=f(n,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),s}function RM(n,e){const t={},s=f(n,["config"]);return s!=null&&xM(s,t),t}function wM(n,e){const t={},s=f(n,["config"]);return s!=null&&IM(s,t),t}function bM(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>oE(d))),h(t,["tuningJobs"],c)}return t}function NM(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>Qh(d))),h(t,["tuningJobs"],c)}return t}function MM(n,e){const t={},s=f(n,["name"]);s!=null&&h(t,["model"],s);const r=f(n,["name"]);return r!=null&&h(t,["endpoint"],r),t}function DM(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=f(n,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),h(t,["examples","examples"],r)}return t}function PM(n,e,t){const s={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=f(n,["gcsUri"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=f(n,["gcsUri"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=f(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=f(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function oE(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["state"]);l!=null&&h(t,["state"],OT(l));const c=f(n,["createTime"]);c!=null&&h(t,["createTime"],c);const d=f(n,["tuningTask","startTime"]);d!=null&&h(t,["startTime"],d);const y=f(n,["tuningTask","completeTime"]);y!=null&&h(t,["endTime"],y);const p=f(n,["updateTime"]);p!=null&&h(t,["updateTime"],p);const v=f(n,["description"]);v!=null&&h(t,["description"],v);const T=f(n,["baseModel"]);T!=null&&h(t,["baseModel"],T);const S=f(n,["_self"]);return S!=null&&h(t,["tunedModel"],MM(S)),t}function Qh(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["state"]);l!=null&&h(t,["state"],OT(l));const c=f(n,["createTime"]);c!=null&&h(t,["createTime"],c);const d=f(n,["startTime"]);d!=null&&h(t,["startTime"],d);const y=f(n,["endTime"]);y!=null&&h(t,["endTime"],y);const p=f(n,["updateTime"]);p!=null&&h(t,["updateTime"],p);const v=f(n,["error"]);v!=null&&h(t,["error"],v);const T=f(n,["description"]);T!=null&&h(t,["description"],T);const S=f(n,["baseModel"]);S!=null&&h(t,["baseModel"],S);const R=f(n,["tunedModel"]);R!=null&&h(t,["tunedModel"],R);const O=f(n,["preTunedModel"]);O!=null&&h(t,["preTunedModel"],O);const B=f(n,["supervisedTuningSpec"]);B!=null&&h(t,["supervisedTuningSpec"],B);const J=f(n,["preferenceOptimizationSpec"]);J!=null&&h(t,["preferenceOptimizationSpec"],J);const X=f(n,["tuningDataStats"]);X!=null&&h(t,["tuningDataStats"],X);const te=f(n,["encryptionSpec"]);te!=null&&h(t,["encryptionSpec"],te);const j=f(n,["partnerModelTuningSpec"]);j!=null&&h(t,["partnerModelTuningSpec"],j);const le=f(n,["customBaseModel"]);le!=null&&h(t,["customBaseModel"],le);const fe=f(n,["experiment"]);fe!=null&&h(t,["experiment"],fe);const Z=f(n,["labels"]);Z!=null&&h(t,["labels"],Z);const M=f(n,["outputUri"]);M!=null&&h(t,["outputUri"],M);const N=f(n,["pipelineJob"]);N!=null&&h(t,["pipelineJob"],N);const b=f(n,["serviceAccount"]);b!=null&&h(t,["serviceAccount"],b);const P=f(n,["tunedModelDisplayName"]);P!=null&&h(t,["tunedModelDisplayName"],P);const V=f(n,["veoTuningSpec"]);return V!=null&&h(t,["veoTuningSpec"],V),t}function VM(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["metadata"]);l!=null&&h(t,["metadata"],l);const c=f(n,["done"]);c!=null&&h(t,["done"],c);const d=f(n,["error"]);return d!=null&&h(t,["error"],d),t}function p0(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&h(t,["validationDatasetUri"],s);const r=f(n,["vertexDatasetResource"]);return r!=null&&h(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UM extends ls{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Go(is.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),l=await this.tuneMldevInternal(r);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Bh.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const p=CM(e);return d=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>Qh(v))}else{const p=AM(e);return d=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>oE(v))}}async listInternal(e){var t,s,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const p=wM(e);return d=me("tuningJobs",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=NM(v),S=new Kv;return Object.assign(S,T),S})}else{const p=RM(e);return d=me("tunedModels",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=bM(v),S=new Kv;return Object.assign(S,T),S})}}async cancel(e){var t,s,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const p=gM(e);return d=me("{name}:cancel",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=_M(v),S=new Qv;return Object.assign(S,T),S})}else{const p=pM(e);return d=me("{name}:cancel",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=yM(v),S=new Qv;return Object.assign(S,T),S})}}async tuneInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=SM(e,e);return l=me("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>Qh(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=EM(e);return l=me("tunedModels",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>VM(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LM{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const kM=1024*1024*8,qM=3,OM=1e3,zM=2,Fc="x-goog-upload-status";async function BM(n,e,t){var s;const r=await rE(n,e,t),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[Fc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function FM(n,e,t){var s;const r=await rE(n,e,t),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[Fc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=PT(l),d=new Em;return Object.assign(d,c),d}async function rE(n,e,t){var s,r;let l=0,c=0,d=new Fh(new Response),y="upload";for(l=n.size;c<l;){const p=Math.min(kM,l-c),v=n.slice(c,c+p);c+p>=l&&(y+=", finalize");let T=0,S=OM;for(;T<qM&&(d=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":String(c),"Content-Length":String(p)}}}),!(!((s=d==null?void 0:d.headers)===null||s===void 0)&&s[Fc]));)T++,await GM(S),S=S*zM;if(c+=p,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r[Fc])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function HM(n){return{size:n.size,type:n.type}}function GM(n){return new Promise(e=>setTimeout(e,n))}class YM{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await BM(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await FM(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await HM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JM{create(e,t,s){return new KM(e,t,s)}}class KM{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const g0="x-goog-api-key";class QM{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(g0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(g0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $M="gl-node/";class XM{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=xx(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new QM(this.apiKey);this.apiClient=new CN({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:$M+"web",uploader:new YM,downloader:new LM}),this.models=new HN(this.apiClient),this.live=new kN(this.apiClient,r,new JM),this.batches=new eR(this.apiClient),this.chats=new UR(this.models,this.apiClient),this.caches=new DR(this.apiClient),this.files=new YR(this.apiClient),this.operations=new GN(this.apiClient),this.authTokens=new rM(this.apiClient),this.tunings=new UM(this.apiClient),this.fileSearchStores=new mM(this.apiClient)}}const aE=()=>{const n="PLACEHOLDER_API_KEY";return new XM({apiKey:n})},WM=async(n,e)=>{const t=aE();if(!t)return"Error: API Key missing.";try{const s=`
      You are a sophisticated, helpful writing assistant for a high-end lifestyle blog.
      
      Task: ${n}
      
      ${e?`Context from previous paragraphs: ${e}`:""}

      Keep the tone elegant, minimal, and engaging. Do not use markdown formatting like **bold** or # headers in the response unless explicitly asked, just return plain text or simple paragraphs.
    `;return(await t.models.generateContent({model:"gemini-2.5-flash",contents:s})).text||""}catch(s){return console.error("Gemini generation error:",s),"Failed to generate content. Please try again."}},ZM=async n=>{var t;const e=aE();if(!e)return"";try{return((t=(await e.models.generateContent({model:"gemini-2.5-flash",contents:`Generate a catchy, elegant, short blog post title based on this summary: ${n}. Return ONLY the title text.`})).text)==null?void 0:t.trim())||""}catch{return""}},Hs=({html:n,tagName:e,className:t,onChange:s,placeholder:r,onKeyDown:l,onPaste:c,readOnly:d,autoFocus:y,onFocus:p,style:v})=>{const T=_e.useRef(null);_e.useEffect(()=>{T.current&&n!==T.current.innerHTML&&document.activeElement!==T.current&&(T.current.innerHTML=n)},[n]),_e.useEffect(()=>{T.current&&T.current.innerHTML!==n&&(T.current.innerHTML=n)},[]);const S=R=>{s(R.currentTarget.innerHTML)};return _e.useEffect(()=>{if(y&&T.current){const R=document.createRange(),O=window.getSelection();R.selectNodeContents(T.current),R.collapse(!1),O&&(O.removeAllRanges(),O.addRange(R)),T.current.focus()}},[y]),MT.createElement(e,{ref:T,className:`${t} empty:before:content-[attr(data-placeholder)] empty:before:text-stone-300 cursor-text outline-none`,contentEditable:!d,suppressContentEditableWarning:!0,"data-placeholder":r,onInput:S,onBlur:S,onFocus:p,onKeyDown:l,onPaste:c,style:v})},jM=[{label:"Default",value:"#292524"},{label:"Rose",value:"#be185d"},{label:"Emerald",value:"#059669"},{label:"Blue",value:"#2563eb"},{label:"Amber",value:"#d97706"},{label:"Purple",value:"#7e22ce"},{label:"Gray",value:"#78716c"}],lE=({blocks:n,onChange:e,readOnly:t=!1})=>{const[s,r]=_e.useState(null),[l,c]=_e.useState(null),[d,y]=_e.useState(null),[p,v]=_e.useState(!1),[T,S]=_e.useState(""),[R,O]=_e.useState(null),[B,J]=_e.useState(!1),[X,te]=_e.useState({top:0,left:0}),[j,le]=_e.useState(!1),fe=_e.useRef(null);_e.useEffect(()=>{const ae=Ee=>{d&&!Ee.target.closest(".block-menu-trigger")&&y(null),B&&fe.current&&!fe.current.contains(Ee.target)&&(J(!1),le(!1))};return document.addEventListener("mousedown",ae),()=>document.removeEventListener("mousedown",ae)},[d,B]);const Z=(ae,Ee)=>{if(t)return;const Y=n.map(re=>re.id===ae?{...re,...Ee}:re);e(Y),y(null)},M=(ae,Ee=Je.Paragraph)=>{if(t)return;const Y={id:Math.random().toString(36).substr(2,9),type:Ee,content:"",width:100,align:"left"},re=n.findIndex(Ne=>Ne.id===ae),de=[...n];de.splice(re+1,0,Y),e(de),setTimeout(()=>r(Y.id),10)},N=ae=>{if(t||n.length<=1)return;const Ee=n.findIndex(re=>re.id===ae),Y=n.filter(re=>re.id!==ae);e(Y),Ee>0&&r(Y[Ee-1].id)},b=(ae,Ee=null)=>{if(document.execCommand(ae,!1,Ee),s){const Y=document.getElementById(`block-${s}`);Y&&Z(s,{content:Y.innerHTML})}},P=()=>{var de,Ne;const ae=window.getSelection();if(!ae||ae.isCollapsed){J(!1),le(!1);return}const Y=ae.getRangeAt(0).getBoundingClientRect(),re=(de=fe.current)==null?void 0:de.getBoundingClientRect();re&&((Ne=fe.current)!=null&&Ne.contains(ae.anchorNode))&&(te({top:Y.top-re.top-50,left:Y.left-re.left+Y.width/2-140}),J(!0))};_e.useEffect(()=>{if(!t)return document.addEventListener("selectionchange",P),()=>document.removeEventListener("selectionchange",P)},[t]);const V=(ae,Ee)=>{const Y=ae.clipboardData.items;for(let re=0;re<Y.length;re++)if(Y[re].type.indexOf("image")!==-1){ae.preventDefault();const de=Y[re].getAsFile();if(de){const Ne=new FileReader;Ne.onload=Xe=>{var q;Z(Ee,{type:Je.Image,src:(q=Xe.target)==null?void 0:q.result,content:""})},Ne.readAsDataURL(de)}return}},L=async ae=>{if(!T.trim())return;v(!0);const Ee=n.findIndex(Ne=>Ne.id===ae)-1,Y=Ee>=0?n[Ee].content:"",de=(await WM(T,Y)).replace(/```html/g,"").replace(/```/g,"");Z(ae,{content:de}),v(!1),O(null),S("")},D=ae=>{const Ee=`w-full bg-transparent resize-none placeholder:text-stone-300 ${ae.align==="center"?"text-center":ae.align==="right"?"text-right":"text-left"}`,Y=s===ae.id,re={html:ae.content,onChange:de=>Z(ae.id,{content:de}),onFocus:()=>r(ae.id),onKeyDown:de=>{de.key==="Enter"&&!de.shiftKey&&(de.preventDefault(),M(ae.id,Je.Paragraph)),de.key==="Backspace"&&!ae.content&&(de.preventDefault(),N(ae.id))},onPaste:de=>V(de,ae.id),readOnly:t,className:Ee,autoFocus:Y};switch(ae.type){case Je.Heading1:return C.jsx(Hs,{tagName:"h1",style:{fontSize:"3.75rem",lineHeight:"1.1",fontWeight:700},className:`font-serif mb-6 mt-10 text-stone-900 ${Ee}`,placeholder:"Heading 1",...re});case Je.Heading2:return C.jsx(Hs,{tagName:"h2",style:{fontSize:"2.5rem",lineHeight:"1.2",fontWeight:700},className:`font-serif mb-4 mt-8 text-stone-800 ${Ee}`,placeholder:"Heading 2",...re});case Je.Heading3:return C.jsx(Hs,{tagName:"h3",style:{fontSize:"1.75rem",lineHeight:"1.3",fontWeight:600},className:`font-serif mb-3 mt-6 text-stone-800 ${Ee}`,placeholder:"Heading 3",...re});case Je.Quote:return C.jsxs("div",{className:"flex gap-4 border-l-4 border-rose-300 pl-4 py-2 bg-stone-50/50 rounded-r-lg my-4",children:[C.jsx(he.Quote,{className:"text-stone-300 flex-shrink-0",size:24}),C.jsx(Hs,{tagName:"div",className:`text-xl font-serif italic text-stone-700 ${Ee}`,placeholder:"Empty quote...",...re})]});case Je.Code:return C.jsxs("div",{className:"bg-stone-900 rounded-lg p-4 my-4 relative group",children:[C.jsx("div",{className:"absolute right-2 top-2 text-xs text-stone-500",children:ae.language||"Code"}),C.jsx(Hs,{tagName:"pre",className:`font-mono text-sm text-stone-200 ${Ee}`,placeholder:"Write code...",...re})]});case Je.List:return C.jsxs("div",{className:"flex gap-3 items-start my-2",children:[C.jsx("div",{className:"mt-2.5 w-1.5 h-1.5 rounded-full bg-stone-800 flex-shrink-0"}),C.jsx(Hs,{tagName:"div",className:`text-lg leading-relaxed ${Ee}`,placeholder:"List item",...re})]});case Je.OrderedList:return C.jsxs("div",{className:"flex gap-3 items-start my-2",children:[C.jsx("span",{className:"mt-1 font-bold text-stone-400 select-none",children:"1."}),C.jsx(Hs,{tagName:"div",className:`text-lg leading-relaxed ${Ee}`,placeholder:"List item",...re})]});case Je.Image:return C.jsx(y0,{block:ae,updateBlock:Z,readOnly:t,isVideo:!1});case Je.Video:return C.jsx(y0,{block:ae,updateBlock:Z,readOnly:t,isVideo:!0});case Je.Divider:return C.jsx("hr",{className:"border-stone-200 my-8"});default:return C.jsx(Hs,{tagName:"div",className:`text-lg leading-relaxed min-h-[1.5em] text-stone-700 ${Ee}`,placeholder:"Type '/' for commands...",...re})}};return C.jsxs("div",{className:"relative max-w-3xl mx-auto pb-32",ref:fe,children:[B&&!t&&C.jsxs("div",{className:"absolute z-50 bg-stone-900 text-white rounded-lg shadow-xl flex items-center p-1 gap-1 -translate-x-1/2 animate-fade-in",style:{top:X.top,left:"50%"},children:[C.jsx(Gs,{icon:he.Bold,onClick:()=>b("bold")}),C.jsx(Gs,{icon:he.Italic,onClick:()=>b("italic")}),C.jsx(Gs,{icon:he.Underline,onClick:()=>b("underline")}),C.jsx(Gs,{icon:he.Link,onClick:()=>{const ae=prompt("Enter link URL:");ae&&b("createLink",ae)}}),C.jsxs("div",{className:"relative",children:[C.jsx(Gs,{icon:he.Palette,onClick:()=>le(!j)}),j&&C.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 bg-white p-2 rounded-lg shadow-xl border border-stone-200 flex gap-2 z-50 animate-fade-in",children:jM.map(ae=>C.jsx("button",{className:"w-6 h-6 rounded-full border border-stone-200 hover:scale-110 transition-transform",style:{backgroundColor:ae.value},title:ae.label,onMouseDown:Ee=>{Ee.preventDefault(),b("foreColor",ae.value),le(!1)}},ae.value))})]}),C.jsx("div",{className:"w-px h-4 bg-stone-700 mx-1"}),C.jsx(Gs,{icon:he.AlignLeft,onClick:()=>b("justifyLeft")}),C.jsx(Gs,{icon:he.AlignCenter,onClick:()=>b("justifyCenter")}),C.jsx(Gs,{icon:he.AlignRight,onClick:()=>b("justifyRight")})]}),n.map(ae=>C.jsxs("div",{id:`block-${ae.id}`,className:"group relative flex items-start -ml-12 pl-12 mb-2",onMouseEnter:()=>!t&&c(ae.id),onMouseLeave:()=>!t&&c(null),children:[!t&&C.jsxs("div",{className:`absolute left-0 top-1.5 flex gap-1 transition-opacity duration-200 ${l===ae.id||d===ae.id?"opacity-100":"opacity-0"}`,children:[C.jsx("button",{onClick:()=>M(ae.id),className:"p-1 hover:bg-stone-100 rounded text-stone-400 hover:text-stone-600 transition-colors",children:C.jsx(he.Plus,{size:16})}),C.jsxs("div",{className:"relative",children:[C.jsx("button",{className:`p-1 rounded text-stone-400 hover:text-stone-600 cursor-pointer block-menu-trigger transition-colors ${d===ae.id?"bg-stone-100 text-stone-900":"hover:bg-stone-100"}`,onClick:Ee=>{Ee.stopPropagation(),y(d===ae.id?null:ae.id)},children:C.jsx(he.MoreHorizontal,{size:16})}),d===ae.id&&C.jsxs("div",{className:"absolute left-0 top-full mt-2 w-64 bg-white border border-stone-100 shadow-xl rounded-xl overflow-hidden z-20 py-1 animate-fade-in block-menu-trigger",children:[C.jsx("div",{className:"px-4 py-2 text-xs font-bold text-stone-400 uppercase tracking-wider bg-stone-50 border-b border-stone-50",children:"Turn into"}),C.jsx(oi,{label:"Text",icon:he.Type,onClick:()=>Z(ae.id,{type:Je.Paragraph})}),C.jsx(oi,{label:"Heading 1",icon:he.Type,style:{fontSize:"1.5rem",fontWeight:"bold"},onClick:()=>Z(ae.id,{type:Je.Heading1})}),C.jsx(oi,{label:"Heading 2",icon:he.Type,style:{fontSize:"1.25rem",fontWeight:"bold"},onClick:()=>Z(ae.id,{type:Je.Heading2})}),C.jsx(oi,{label:"Heading 3",icon:he.Type,style:{fontSize:"1.1rem",fontWeight:"bold"},onClick:()=>Z(ae.id,{type:Je.Heading3})}),C.jsx(oi,{label:"Bullet List",icon:he.List,onClick:()=>Z(ae.id,{type:Je.List})}),C.jsx(oi,{label:"Numbered List",icon:he.ListOrdered,onClick:()=>Z(ae.id,{type:Je.OrderedList})}),C.jsx(oi,{label:"Quote",icon:he.Quote,onClick:()=>Z(ae.id,{type:Je.Quote})}),C.jsx(oi,{label:"Code Block",icon:he.Code,onClick:()=>Z(ae.id,{type:Je.Code})}),C.jsx("div",{className:"px-4 py-2 text-xs font-bold text-stone-400 uppercase tracking-wider bg-stone-50 border-b border-stone-50 border-t mt-1",children:"Insert"}),C.jsx(oi,{label:"Image",icon:he.Image,onClick:()=>Z(ae.id,{type:Je.Image})}),C.jsx(oi,{label:"Video Embed",icon:he.Video,onClick:()=>Z(ae.id,{type:Je.Video})}),C.jsx(oi,{label:"Divider",icon:he.Minus,onClick:()=>Z(ae.id,{type:Je.Divider})}),C.jsx("div",{className:"h-px bg-stone-100 my-1"}),C.jsxs("button",{onClick:()=>N(ae.id),className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[C.jsx(he.Trash2,{size:14})," Delete Block"]})]})]})]}),C.jsxs("div",{className:"w-full relative",children:[s===ae.id&&ae.type===Je.Paragraph&&!ae.content&&!t&&C.jsxs("button",{onClick:()=>O(ae.id),className:"absolute -top-7 left-0 text-[10px] font-bold text-purple-600 bg-purple-50 px-2 py-1 rounded-full flex items-center gap-1 hover:bg-purple-100 transition-colors",children:[C.jsx(he.Sparkles,{size:10})," AI WRITER"]}),D(ae)]}),R===ae.id&&C.jsxs("div",{className:"absolute top-full left-0 mt-2 z-30 w-full max-w-md bg-white rounded-xl shadow-2xl border border-purple-100 p-4 animate-fade-in",children:[C.jsxs("div",{className:"flex justify-between items-center mb-2",children:[C.jsxs("span",{className:"text-xs font-bold text-purple-600 uppercase tracking-wider flex items-center gap-1",children:[C.jsx(he.Sparkles,{size:12})," Gemini Assistant"]}),C.jsx("button",{onClick:()=>O(null),children:C.jsx(he.X,{size:14,className:"text-stone-400"})})]}),C.jsx("input",{type:"text",value:T,onChange:Ee=>S(Ee.target.value),placeholder:"Ask Gemini to write...",className:"w-full text-sm border-b border-stone-200 pb-2 mb-3 outline-none focus:border-purple-300",autoFocus:!0,onKeyDown:Ee=>Ee.key==="Enter"&&L(ae.id)}),C.jsx("div",{className:"flex justify-end gap-2",children:C.jsx("button",{onClick:()=>L(ae.id),disabled:p||!T,className:"bg-purple-600 text-white px-3 py-1.5 rounded-lg text-xs font-medium hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2",children:p?"Thinking...":"Generate"})})]})]},ae.id)),!t&&C.jsxs("button",{onClick:()=>M(n[n.length-1].id,Je.Paragraph),className:"w-full py-4 text-stone-300 hover:text-stone-500 text-sm flex items-center justify-center gap-2 transition-colors border-t border-transparent hover:border-stone-100 mt-8",children:[C.jsx(he.Plus,{size:14})," Add block at end"]})]})},Gs=({icon:n,onClick:e})=>C.jsx("button",{onMouseDown:t=>{t.preventDefault(),e()},className:"p-1.5 hover:bg-stone-700 rounded text-stone-300 hover:text-white transition-colors",children:C.jsx(n,{size:14})}),oi=({label:n,icon:e,onClick:t,style:s})=>C.jsxs("button",{onClick:t,className:"w-full text-left px-4 py-2 text-sm hover:bg-stone-50 flex items-center gap-3 text-stone-700 transition-colors",children:[C.jsx(e,{size:14,className:"text-stone-400 flex-shrink-0"})," ",C.jsx("span",{style:s,children:n})]}),y0=({block:n,updateBlock:e,readOnly:t,isVideo:s})=>{const r=_e.useRef(null),l=c=>{var S,R,O;if(t)return;const d=c.clientX,y=((S=r.current)==null?void 0:S.offsetWidth)||0,p=((O=(R=r.current)==null?void 0:R.parentElement)==null?void 0:O.offsetWidth)||1,v=B=>{const J=B.clientX-d,X=y+J,te=Math.min(100,Math.max(20,X/p*100));e(n.id,{width:te})},T=()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",T)};window.addEventListener("mousemove",v),window.addEventListener("mouseup",T)};return!n.src&&!n.content?C.jsxs("div",{className:"bg-stone-50 border-2 border-dashed border-stone-200 rounded-xl p-8 text-center hover:bg-stone-100 transition-colors",children:[s?C.jsx(he.Video,{className:"mx-auto text-stone-300 mb-2",size:32}):C.jsx(he.Image,{className:"mx-auto text-stone-300 mb-2",size:32}),C.jsx("p",{className:"text-stone-500 text-sm mb-4",children:s?"Embed Video":"Upload Image"}),s?C.jsx("input",{type:"text",placeholder:"Paste YouTube URL...",className:"w-full max-w-sm mx-auto px-4 py-2 border border-stone-300 rounded-lg text-sm",onBlur:c=>{let d=c.target.value;d.includes("youtube.com/watch?v=")?d=d.replace("watch?v=","embed/"):d.includes("youtu.be/")&&(d=d.replace("youtu.be/","youtube.com/embed/")),e(n.id,{src:d})}}):C.jsxs("label",{className:"cursor-pointer bg-white border border-stone-300 text-stone-600 px-4 py-2 rounded-lg hover:bg-stone-50 transition-colors text-sm font-medium inline-block",children:["Choose File",C.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:c=>{var y;const d=(y=c.target.files)==null?void 0:y[0];if(d){const p=new FileReader;p.onloadend=()=>e(n.id,{src:p.result}),p.readAsDataURL(d)}}})]})]}):C.jsx("div",{className:`relative group/media my-6 flex ${n.align==="center"?"justify-center":n.align==="right"?"justify-end":"justify-start"}`,children:C.jsxs("div",{ref:r,className:"relative rounded-lg overflow-hidden shadow-sm",style:{width:`${n.width||100}%`},children:[s?C.jsx("iframe",{src:n.src,className:"w-full aspect-video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):C.jsx("img",{src:n.src,alt:"Block media",className:"w-full h-auto"}),!t&&C.jsx("div",{onMouseDown:l,className:"absolute right-2 bottom-2 w-6 h-6 bg-white rounded-full shadow cursor-ew-resize flex items-center justify-center opacity-0 group-hover/media:opacity-100 transition-opacity z-10",children:C.jsx(he.Move,{size:12})}),!t&&C.jsxs("div",{className:"absolute top-2 right-2 bg-white/90 backdrop-blur rounded-lg p-1 flex gap-1 opacity-0 group-hover/media:opacity-100 transition-opacity",children:[C.jsx("button",{onClick:()=>e(n.id,{align:"left"}),className:"p-1 hover:bg-stone-100 rounded",children:C.jsx(he.AlignLeft,{size:12})}),C.jsx("button",{onClick:()=>e(n.id,{align:"center"}),className:"p-1 hover:bg-stone-100 rounded",children:C.jsx(he.AlignCenter,{size:12})}),C.jsx("button",{onClick:()=>e(n.id,{align:"right"}),className:"p-1 hover:bg-stone-100 rounded",children:C.jsx(he.AlignRight,{size:12})})]})]})})},e2=()=>{};var _0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},t2=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const r=n[t++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const l=n[t++];e[s++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=n[t++],c=n[t++],d=n[t++],y=((r&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((r&15)<<12|(l&63)<<6|c&63)}}return e.join("")},cE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const l=n[r],c=r+1<n.length,d=c?n[r+1]:0,y=r+2<n.length,p=y?n[r+2]:0,v=l>>2,T=(l&3)<<4|d>>4;let S=(d&15)<<2|p>>6,R=p&63;y||(R=64,c||(S=64)),s.push(t[v],t[T],t[S],t[R])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(uE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):t2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const l=t[n.charAt(r++)],d=r<n.length?t[n.charAt(r)]:0;++r;const p=r<n.length?t[n.charAt(r)]:64;++r;const T=r<n.length?t[n.charAt(r)]:64;if(++r,l==null||d==null||p==null||T==null)throw new n2;const S=l<<2|d>>4;if(s.push(S),p!==64){const R=d<<4&240|p>>2;if(s.push(R),T!==64){const O=p<<6&192|T;s.push(O)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class n2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i2=function(n){const e=uE(n);return cE.encodeByteArray(e,!0)},Hc=function(n){return i2(n).replace(/\./g,"")},s2=function(n){try{return cE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=()=>o2().__FIREBASE_DEFAULTS__,a2=()=>{if(typeof process>"u"||typeof _0>"u")return;const n=_0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},l2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&s2(n[1]);return e&&JSON.parse(e)},Rm=()=>{try{return e2()||r2()||a2()||l2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},u2=n=>{var e,t;return(t=(e=Rm())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},c2=n=>{const e=u2(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},fE=()=>{var n;return(n=Rm())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function d2(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",r=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Hc(JSON.stringify(t)),Hc(JSON.stringify(c)),""].join(".")}const Rl={};function m2(){const n={prod:[],emulator:[]};for(const e of Object.keys(Rl))Rl[e]?n.emulator.push(e):n.prod.push(e);return n}function p2(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let v0=!1;function g2(n,e){if(typeof window>"u"||typeof document>"u"||!wm(window.location.host)||Rl[n]===e||Rl[n]||v0)return;Rl[n]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",l=m2().prod.length>0;function c(){const S=document.getElementById(s);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function y(S,R){S.setAttribute("width","24"),S.setAttribute("id",R),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{v0=!0,c()},S}function v(S,R){S.setAttribute("id",R),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=p2(s),R=t("text"),O=document.getElementById(R)||document.createElement("span"),B=t("learnmore"),J=document.getElementById(B)||document.createElement("a"),X=t("preprendIcon"),te=document.getElementById(X)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const j=S.element;d(j),v(J,B);const le=p();y(te,X),j.append(te,O,J,le),document.body.appendChild(j)}l?(O.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _2(){var e;const n=(e=Rm())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function v2(){return!_2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function T2(){try{return typeof indexedDB=="object"}catch{return!1}}function E2(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var l;e(((l=r.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2="FirebaseError";class ra extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=S2,Object.setPrototypeOf(this,ra.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dE.prototype.create)}}class dE{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},r=`${this.service}/${e}`,l=this.errors[e],c=l?A2(l,s):"Error",d=`${this.serviceName}: ${c} (${r}).`;return new ra(r,d,s)}}function A2(n,e){return n.replace(C2,(t,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const C2=/\{\$([^}]+)}/g;function Gc(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const r of t){if(!s.includes(r))return!1;const l=n[r],c=e[r];if(T0(l)&&T0(c)){if(!Gc(l,c))return!1}else if(l!==c)return!1}for(const r of s)if(!t.includes(r))return!1;return!0}function T0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(n){return n&&n._delegate?n._delegate:n}class Dl{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new f2;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(R2(e))try{this.getOrInitializeService({instanceIdentifier:Oo})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:r});s.resolve(l)}catch{}}}}clearInstance(e=Oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oo){return this.instances.has(e)}getOptions(e=Oo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&c.resolve(r)}return r}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const l=this.instances.get(s);return l&&e(l,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const r of s)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:I2(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Oo){return this.component?this.component.multipleInstances?e:Oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function I2(n){return n===Oo?void 0:n}function R2(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new x2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ye||(Ye={}));const b2={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},N2=Ye.INFO,M2={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},D2=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),r=M2[e];if(r)console[r](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hE{constructor(e){this.name=e,this._logLevel=N2,this._logHandler=D2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?b2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const P2=(n,e)=>e.some(t=>n instanceof t);let E0,S0;function V2(){return E0||(E0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function U2(){return S0||(S0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mE=new WeakMap,$h=new WeakMap,pE=new WeakMap,Mh=new WeakMap,bm=new WeakMap;function L2(n){const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Ks(n.result)),r()},c=()=>{s(n.error),r()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&mE.set(t,n)}).catch(()=>{}),bm.set(e,n),e}function k2(n){if($h.has(n))return;const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),r()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});$h.set(n,e)}let Xh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return $h.get(n);if(e==="objectStoreNames")return n.objectStoreNames||pE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ks(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function q2(n){Xh=n(Xh)}function O2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Dh(this),e,...t);return pE.set(s,e.sort?e.sort():[e]),Ks(s)}:U2().includes(n)?function(...e){return n.apply(Dh(this),e),Ks(mE.get(this))}:function(...e){return Ks(n.apply(Dh(this),e))}}function z2(n){return typeof n=="function"?O2(n):(n instanceof IDBTransaction&&k2(n),P2(n,V2())?new Proxy(n,Xh):n)}function Ks(n){if(n instanceof IDBRequest)return L2(n);if(Mh.has(n))return Mh.get(n);const e=z2(n);return e!==n&&(Mh.set(n,e),bm.set(e,n)),e}const Dh=n=>bm.get(n);function B2(n,e,{blocked:t,upgrade:s,blocking:r,terminated:l}={}){const c=indexedDB.open(n,e),d=Ks(c);return s&&c.addEventListener("upgradeneeded",y=>{s(Ks(c.result),y.oldVersion,y.newVersion,Ks(c.transaction),y)}),t&&c.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),d.then(y=>{l&&y.addEventListener("close",()=>l()),r&&y.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const F2=["get","getKey","getAll","getAllKeys","count"],H2=["put","add","delete","clear"],Ph=new Map;function A0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ph.get(e))return Ph.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,r=H2.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(r||F2.includes(t)))return;const l=async function(c,...d){const y=this.transaction(c,r?"readwrite":"readonly");let p=y.store;return s&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),r&&y.done]))[0]};return Ph.set(e,l),l}q2(n=>({...n,get:(e,t,s)=>A0(e,t)||n.get(e,t,s),has:(e,t)=>!!A0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Y2(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function Y2(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wh="@firebase/app",C0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os=new hE("@firebase/app"),J2="@firebase/app-compat",K2="@firebase/analytics-compat",Q2="@firebase/analytics",$2="@firebase/app-check-compat",X2="@firebase/app-check",W2="@firebase/auth",Z2="@firebase/auth-compat",j2="@firebase/database",eD="@firebase/data-connect",tD="@firebase/database-compat",nD="@firebase/functions",iD="@firebase/functions-compat",sD="@firebase/installations",oD="@firebase/installations-compat",rD="@firebase/messaging",aD="@firebase/messaging-compat",lD="@firebase/performance",uD="@firebase/performance-compat",cD="@firebase/remote-config",fD="@firebase/remote-config-compat",dD="@firebase/storage",hD="@firebase/storage-compat",mD="@firebase/firestore",pD="@firebase/ai",gD="@firebase/firestore-compat",yD="firebase",_D="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh="[DEFAULT]",vD={[Wh]:"fire-core",[J2]:"fire-core-compat",[Q2]:"fire-analytics",[K2]:"fire-analytics-compat",[X2]:"fire-app-check",[$2]:"fire-app-check-compat",[W2]:"fire-auth",[Z2]:"fire-auth-compat",[j2]:"fire-rtdb",[eD]:"fire-data-connect",[tD]:"fire-rtdb-compat",[nD]:"fire-fn",[iD]:"fire-fn-compat",[sD]:"fire-iid",[oD]:"fire-iid-compat",[rD]:"fire-fcm",[aD]:"fire-fcm-compat",[lD]:"fire-perf",[uD]:"fire-perf-compat",[cD]:"fire-rc",[fD]:"fire-rc-compat",[dD]:"fire-gcs",[hD]:"fire-gcs-compat",[mD]:"fire-fst",[gD]:"fire-fst-compat",[pD]:"fire-vertex","fire-js":"fire-js",[yD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=new Map,TD=new Map,jh=new Map;function x0(n,e){try{n.container.addComponent(e)}catch(t){os.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Jc(n){const e=n.name;if(jh.has(e))return os.debug(`There were multiple attempts to register component ${e}.`),!1;jh.set(e,n);for(const t of Yc.values())x0(t,n);for(const t of TD.values())x0(t,n);return!0}function ED(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function SD(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qs=new dE("app","Firebase",AD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Dl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=_D;function gE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Zh,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Qs.create("bad-app-name",{appName:String(r)});if(t||(t=fE()),!t)throw Qs.create("no-options");const l=Yc.get(r);if(l){if(Gc(t,l.options)&&Gc(s,l.config))return l;throw Qs.create("duplicate-app",{appName:r})}const c=new w2(r);for(const y of jh.values())c.addComponent(y);const d=new CD(t,s,c);return Yc.set(r,d),d}function ID(n=Zh){const e=Yc.get(n);if(!e&&n===Zh&&fE())return gE();if(!e)throw Qs.create("no-app",{appName:n});return e}function Qr(n,e,t){let s=vD[n]??n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),l=e.match(/\s|\//);if(r||l){const c=[`Unable to register library "${s}" with version "${e}":`];r&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),os.warn(c.join(" "));return}Jc(new Dl(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD="firebase-heartbeat-database",wD=1,Pl="firebase-heartbeat-store";let Vh=null;function yE(){return Vh||(Vh=B2(RD,wD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Pl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Qs.create("idb-open",{originalErrorMessage:n.message})})),Vh}async function bD(n){try{const t=(await yE()).transaction(Pl),s=await t.objectStore(Pl).get(_E(n));return await t.done,s}catch(e){if(e instanceof ra)os.warn(e.message);else{const t=Qs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});os.warn(t.message)}}}async function I0(n,e){try{const s=(await yE()).transaction(Pl,"readwrite");await s.objectStore(Pl).put(e,_E(n)),await s.done}catch(t){if(t instanceof ra)os.warn(t.message);else{const s=Qs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});os.warn(s.message)}}}function _E(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND=1024,MD=30;class DD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new VD(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=R0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats.length>MD){const c=UD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){os.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=R0(),{heartbeatsToSend:s,unsentEntries:r}=PD(this._heartbeatsCache.heartbeats),l=Hc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return os.warn(t),""}}}function R0(){return new Date().toISOString().substring(0,10)}function PD(n,e=ND){const t=[];let s=n.slice();for(const r of n){const l=t.find(c=>c.agent===r.agent);if(l){if(l.dates.push(r.date),w0(t)>e){l.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),w0(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class VD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return T2()?E2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await bD(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return I0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return I0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function w0(n){return Hc(JSON.stringify({version:2,heartbeats:n})).length}function UD(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(n){Jc(new Dl("platform-logger",e=>new G2(e),"PRIVATE")),Jc(new Dl("heartbeat",e=>new DD(e),"PRIVATE")),Qr(Wh,C0,n),Qr(Wh,C0,"esm2020"),Qr("fire-js","")}LD("");var kD="firebase",qD="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qr(kD,qD,"app");var b0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $s,vE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,N){function b(){}b.prototype=N.prototype,M.F=N.prototype,M.prototype=new b,M.prototype.constructor=M,M.D=function(P,V,L){for(var D=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)D[ae-2]=arguments[ae];return N.prototype[V].apply(P,D)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(M,N,b){b||(b=0);const P=Array(16);if(typeof N=="string")for(var V=0;V<16;++V)P[V]=N.charCodeAt(b++)|N.charCodeAt(b++)<<8|N.charCodeAt(b++)<<16|N.charCodeAt(b++)<<24;else for(V=0;V<16;++V)P[V]=N[b++]|N[b++]<<8|N[b++]<<16|N[b++]<<24;N=M.g[0],b=M.g[1],V=M.g[2];let L=M.g[3],D;D=N+(L^b&(V^L))+P[0]+3614090360&4294967295,N=b+(D<<7&4294967295|D>>>25),D=L+(V^N&(b^V))+P[1]+3905402710&4294967295,L=N+(D<<12&4294967295|D>>>20),D=V+(b^L&(N^b))+P[2]+606105819&4294967295,V=L+(D<<17&4294967295|D>>>15),D=b+(N^V&(L^N))+P[3]+3250441966&4294967295,b=V+(D<<22&4294967295|D>>>10),D=N+(L^b&(V^L))+P[4]+4118548399&4294967295,N=b+(D<<7&4294967295|D>>>25),D=L+(V^N&(b^V))+P[5]+1200080426&4294967295,L=N+(D<<12&4294967295|D>>>20),D=V+(b^L&(N^b))+P[6]+2821735955&4294967295,V=L+(D<<17&4294967295|D>>>15),D=b+(N^V&(L^N))+P[7]+4249261313&4294967295,b=V+(D<<22&4294967295|D>>>10),D=N+(L^b&(V^L))+P[8]+1770035416&4294967295,N=b+(D<<7&4294967295|D>>>25),D=L+(V^N&(b^V))+P[9]+2336552879&4294967295,L=N+(D<<12&4294967295|D>>>20),D=V+(b^L&(N^b))+P[10]+4294925233&4294967295,V=L+(D<<17&4294967295|D>>>15),D=b+(N^V&(L^N))+P[11]+2304563134&4294967295,b=V+(D<<22&4294967295|D>>>10),D=N+(L^b&(V^L))+P[12]+1804603682&4294967295,N=b+(D<<7&4294967295|D>>>25),D=L+(V^N&(b^V))+P[13]+4254626195&4294967295,L=N+(D<<12&4294967295|D>>>20),D=V+(b^L&(N^b))+P[14]+2792965006&4294967295,V=L+(D<<17&4294967295|D>>>15),D=b+(N^V&(L^N))+P[15]+1236535329&4294967295,b=V+(D<<22&4294967295|D>>>10),D=N+(V^L&(b^V))+P[1]+4129170786&4294967295,N=b+(D<<5&4294967295|D>>>27),D=L+(b^V&(N^b))+P[6]+3225465664&4294967295,L=N+(D<<9&4294967295|D>>>23),D=V+(N^b&(L^N))+P[11]+643717713&4294967295,V=L+(D<<14&4294967295|D>>>18),D=b+(L^N&(V^L))+P[0]+3921069994&4294967295,b=V+(D<<20&4294967295|D>>>12),D=N+(V^L&(b^V))+P[5]+3593408605&4294967295,N=b+(D<<5&4294967295|D>>>27),D=L+(b^V&(N^b))+P[10]+38016083&4294967295,L=N+(D<<9&4294967295|D>>>23),D=V+(N^b&(L^N))+P[15]+3634488961&4294967295,V=L+(D<<14&4294967295|D>>>18),D=b+(L^N&(V^L))+P[4]+3889429448&4294967295,b=V+(D<<20&4294967295|D>>>12),D=N+(V^L&(b^V))+P[9]+568446438&4294967295,N=b+(D<<5&4294967295|D>>>27),D=L+(b^V&(N^b))+P[14]+3275163606&4294967295,L=N+(D<<9&4294967295|D>>>23),D=V+(N^b&(L^N))+P[3]+4107603335&4294967295,V=L+(D<<14&4294967295|D>>>18),D=b+(L^N&(V^L))+P[8]+1163531501&4294967295,b=V+(D<<20&4294967295|D>>>12),D=N+(V^L&(b^V))+P[13]+2850285829&4294967295,N=b+(D<<5&4294967295|D>>>27),D=L+(b^V&(N^b))+P[2]+4243563512&4294967295,L=N+(D<<9&4294967295|D>>>23),D=V+(N^b&(L^N))+P[7]+1735328473&4294967295,V=L+(D<<14&4294967295|D>>>18),D=b+(L^N&(V^L))+P[12]+2368359562&4294967295,b=V+(D<<20&4294967295|D>>>12),D=N+(b^V^L)+P[5]+4294588738&4294967295,N=b+(D<<4&4294967295|D>>>28),D=L+(N^b^V)+P[8]+2272392833&4294967295,L=N+(D<<11&4294967295|D>>>21),D=V+(L^N^b)+P[11]+1839030562&4294967295,V=L+(D<<16&4294967295|D>>>16),D=b+(V^L^N)+P[14]+4259657740&4294967295,b=V+(D<<23&4294967295|D>>>9),D=N+(b^V^L)+P[1]+2763975236&4294967295,N=b+(D<<4&4294967295|D>>>28),D=L+(N^b^V)+P[4]+1272893353&4294967295,L=N+(D<<11&4294967295|D>>>21),D=V+(L^N^b)+P[7]+4139469664&4294967295,V=L+(D<<16&4294967295|D>>>16),D=b+(V^L^N)+P[10]+3200236656&4294967295,b=V+(D<<23&4294967295|D>>>9),D=N+(b^V^L)+P[13]+681279174&4294967295,N=b+(D<<4&4294967295|D>>>28),D=L+(N^b^V)+P[0]+3936430074&4294967295,L=N+(D<<11&4294967295|D>>>21),D=V+(L^N^b)+P[3]+3572445317&4294967295,V=L+(D<<16&4294967295|D>>>16),D=b+(V^L^N)+P[6]+76029189&4294967295,b=V+(D<<23&4294967295|D>>>9),D=N+(b^V^L)+P[9]+3654602809&4294967295,N=b+(D<<4&4294967295|D>>>28),D=L+(N^b^V)+P[12]+3873151461&4294967295,L=N+(D<<11&4294967295|D>>>21),D=V+(L^N^b)+P[15]+530742520&4294967295,V=L+(D<<16&4294967295|D>>>16),D=b+(V^L^N)+P[2]+3299628645&4294967295,b=V+(D<<23&4294967295|D>>>9),D=N+(V^(b|~L))+P[0]+4096336452&4294967295,N=b+(D<<6&4294967295|D>>>26),D=L+(b^(N|~V))+P[7]+1126891415&4294967295,L=N+(D<<10&4294967295|D>>>22),D=V+(N^(L|~b))+P[14]+2878612391&4294967295,V=L+(D<<15&4294967295|D>>>17),D=b+(L^(V|~N))+P[5]+4237533241&4294967295,b=V+(D<<21&4294967295|D>>>11),D=N+(V^(b|~L))+P[12]+1700485571&4294967295,N=b+(D<<6&4294967295|D>>>26),D=L+(b^(N|~V))+P[3]+2399980690&4294967295,L=N+(D<<10&4294967295|D>>>22),D=V+(N^(L|~b))+P[10]+4293915773&4294967295,V=L+(D<<15&4294967295|D>>>17),D=b+(L^(V|~N))+P[1]+2240044497&4294967295,b=V+(D<<21&4294967295|D>>>11),D=N+(V^(b|~L))+P[8]+1873313359&4294967295,N=b+(D<<6&4294967295|D>>>26),D=L+(b^(N|~V))+P[15]+4264355552&4294967295,L=N+(D<<10&4294967295|D>>>22),D=V+(N^(L|~b))+P[6]+2734768916&4294967295,V=L+(D<<15&4294967295|D>>>17),D=b+(L^(V|~N))+P[13]+1309151649&4294967295,b=V+(D<<21&4294967295|D>>>11),D=N+(V^(b|~L))+P[4]+4149444226&4294967295,N=b+(D<<6&4294967295|D>>>26),D=L+(b^(N|~V))+P[11]+3174756917&4294967295,L=N+(D<<10&4294967295|D>>>22),D=V+(N^(L|~b))+P[2]+718787259&4294967295,V=L+(D<<15&4294967295|D>>>17),D=b+(L^(V|~N))+P[9]+3951481745&4294967295,M.g[0]=M.g[0]+N&4294967295,M.g[1]=M.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+L&4294967295}s.prototype.v=function(M,N){N===void 0&&(N=M.length);const b=N-this.blockSize,P=this.C;let V=this.h,L=0;for(;L<N;){if(V==0)for(;L<=b;)r(this,M,L),L+=this.blockSize;if(typeof M=="string"){for(;L<N;)if(P[V++]=M.charCodeAt(L++),V==this.blockSize){r(this,P),V=0;break}}else for(;L<N;)if(P[V++]=M[L++],V==this.blockSize){r(this,P),V=0;break}}this.h=V,this.o+=N},s.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var N=1;N<M.length-8;++N)M[N]=0;N=this.o*8;for(var b=M.length-8;b<M.length;++b)M[b]=N&255,N/=256;for(this.v(M),M=Array(16),N=0,b=0;b<4;++b)for(let P=0;P<32;P+=8)M[N++]=this.g[b]>>>P&255;return M};function l(M,N){var b=d;return Object.prototype.hasOwnProperty.call(b,M)?b[M]:b[M]=N(M)}function c(M,N){this.h=N;const b=[];let P=!0;for(let V=M.length-1;V>=0;V--){const L=M[V]|0;P&&L==N||(b[V]=L,P=!1)}this.g=b}var d={};function y(M){return-128<=M&&M<128?l(M,function(N){return new c([N|0],N<0?-1:0)}):new c([M|0],M<0?-1:0)}function p(M){if(isNaN(M)||!isFinite(M))return T;if(M<0)return J(p(-M));const N=[];let b=1;for(let P=0;M>=b;P++)N[P]=M/b|0,b*=4294967296;return new c(N,0)}function v(M,N){if(M.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(M.charAt(0)=="-")return J(v(M.substring(1),N));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=p(Math.pow(N,8));let P=T;for(let L=0;L<M.length;L+=8){var V=Math.min(8,M.length-L);const D=parseInt(M.substring(L,L+V),N);V<8?(V=p(Math.pow(N,V)),P=P.j(V).add(p(D))):(P=P.j(b),P=P.add(p(D)))}return P}var T=y(0),S=y(1),R=y(16777216);n=c.prototype,n.m=function(){if(B(this))return-J(this).m();let M=0,N=1;for(let b=0;b<this.g.length;b++){const P=this.i(b);M+=(P>=0?P:4294967296+P)*N,N*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(O(this))return"0";if(B(this))return"-"+J(this).toString(M);const N=p(Math.pow(M,6));var b=this;let P="";for(;;){const V=le(b,N).g;b=X(b,V.j(N));let L=((b.g.length>0?b.g[0]:b.h)>>>0).toString(M);if(b=V,O(b))return L+P;for(;L.length<6;)L="0"+L;P=L+P}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function O(M){if(M.h!=0)return!1;for(let N=0;N<M.g.length;N++)if(M.g[N]!=0)return!1;return!0}function B(M){return M.h==-1}n.l=function(M){return M=X(this,M),B(M)?-1:O(M)?0:1};function J(M){const N=M.g.length,b=[];for(let P=0;P<N;P++)b[P]=~M.g[P];return new c(b,~M.h).add(S)}n.abs=function(){return B(this)?J(this):this},n.add=function(M){const N=Math.max(this.g.length,M.g.length),b=[];let P=0;for(let V=0;V<=N;V++){let L=P+(this.i(V)&65535)+(M.i(V)&65535),D=(L>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);P=D>>>16,L&=65535,D&=65535,b[V]=D<<16|L}return new c(b,b[b.length-1]&-2147483648?-1:0)};function X(M,N){return M.add(J(N))}n.j=function(M){if(O(this)||O(M))return T;if(B(this))return B(M)?J(this).j(J(M)):J(J(this).j(M));if(B(M))return J(this.j(J(M)));if(this.l(R)<0&&M.l(R)<0)return p(this.m()*M.m());const N=this.g.length+M.g.length,b=[];for(var P=0;P<2*N;P++)b[P]=0;for(P=0;P<this.g.length;P++)for(let V=0;V<M.g.length;V++){const L=this.i(P)>>>16,D=this.i(P)&65535,ae=M.i(V)>>>16,Ee=M.i(V)&65535;b[2*P+2*V]+=D*Ee,te(b,2*P+2*V),b[2*P+2*V+1]+=L*Ee,te(b,2*P+2*V+1),b[2*P+2*V+1]+=D*ae,te(b,2*P+2*V+1),b[2*P+2*V+2]+=L*ae,te(b,2*P+2*V+2)}for(M=0;M<N;M++)b[M]=b[2*M+1]<<16|b[2*M];for(M=N;M<2*N;M++)b[M]=0;return new c(b,0)};function te(M,N){for(;(M[N]&65535)!=M[N];)M[N+1]+=M[N]>>>16,M[N]&=65535,N++}function j(M,N){this.g=M,this.h=N}function le(M,N){if(O(N))throw Error("division by zero");if(O(M))return new j(T,T);if(B(M))return N=le(J(M),N),new j(J(N.g),J(N.h));if(B(N))return N=le(M,J(N)),new j(J(N.g),N.h);if(M.g.length>30){if(B(M)||B(N))throw Error("slowDivide_ only works with positive integers.");for(var b=S,P=N;P.l(M)<=0;)b=fe(b),P=fe(P);var V=Z(b,1),L=Z(P,1);for(P=Z(P,2),b=Z(b,2);!O(P);){var D=L.add(P);D.l(M)<=0&&(V=V.add(b),L=D),P=Z(P,1),b=Z(b,1)}return N=X(M,V.j(N)),new j(V,N)}for(V=T;M.l(N)>=0;){for(b=Math.max(1,Math.floor(M.m()/N.m())),P=Math.ceil(Math.log(b)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),L=p(b),D=L.j(N);B(D)||D.l(M)>0;)b-=P,L=p(b),D=L.j(N);O(L)&&(L=S),V=V.add(L),M=X(M,D)}return new j(V,M)}n.B=function(M){return le(this,M).h},n.and=function(M){const N=Math.max(this.g.length,M.g.length),b=[];for(let P=0;P<N;P++)b[P]=this.i(P)&M.i(P);return new c(b,this.h&M.h)},n.or=function(M){const N=Math.max(this.g.length,M.g.length),b=[];for(let P=0;P<N;P++)b[P]=this.i(P)|M.i(P);return new c(b,this.h|M.h)},n.xor=function(M){const N=Math.max(this.g.length,M.g.length),b=[];for(let P=0;P<N;P++)b[P]=this.i(P)^M.i(P);return new c(b,this.h^M.h)};function fe(M){const N=M.g.length+1,b=[];for(let P=0;P<N;P++)b[P]=M.i(P)<<1|M.i(P-1)>>>31;return new c(b,M.h)}function Z(M,N){const b=N>>5;N%=32;const P=M.g.length-b,V=[];for(let L=0;L<P;L++)V[L]=N>0?M.i(L+b)>>>N|M.i(L+b+1)<<32-N:M.i(L+b);return new c(V,M.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,vE=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=v,$s=c}).apply(typeof b0<"u"?b0:typeof self<"u"?self:typeof window<"u"?window:{});var Ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var TE,Sl,EE,Pc,em,SE,AE,CE;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ic=="object"&&Ic];for(var E=0;E<m.length;++E){var x=m[E];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var s=t(this);function r(m,E){if(E)e:{var x=s;m=m.split(".");for(var w=0;w<m.length-1;w++){var F=m[w];if(!(F in x))break e;x=x[F]}m=m[m.length-1],w=x[m],E=E(w),E!=w&&E!=null&&e(x,m,{configurable:!0,writable:!0,value:E})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(E){var x=[],w;for(w in E)Object.prototype.hasOwnProperty.call(E,w)&&x.push([w,E[w]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function y(m,E,x){return m.call.apply(m.bind,arguments)}function p(m,E,x){return p=y,p.apply(null,arguments)}function v(m,E){var x=Array.prototype.slice.call(arguments,1);return function(){var w=x.slice();return w.push.apply(w,arguments),m.apply(this,w)}}function T(m,E){function x(){}x.prototype=E.prototype,m.Z=E.prototype,m.prototype=new x,m.prototype.constructor=m,m.Ob=function(w,F,Q){for(var ue=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)ue[Me-2]=arguments[Me];return E.prototype[F].apply(w,ue)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function R(m){const E=m.length;if(E>0){const x=Array(E);for(let w=0;w<E;w++)x[w]=m[w];return x}return[]}function O(m,E){for(let w=1;w<arguments.length;w++){const F=arguments[w];var x=typeof F;if(x=x!="object"?x:F?Array.isArray(F)?"array":x:"null",x=="array"||x=="object"&&typeof F.length=="number"){x=m.length||0;const Q=F.length||0;m.length=x+Q;for(let ue=0;ue<Q;ue++)m[x+ue]=F[ue]}else m.push(F)}}class B{constructor(E,x){this.i=E,this.j=x,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function J(m){c.setTimeout(()=>{throw m},0)}function X(){var m=M;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class te{constructor(){this.h=this.g=null}add(E,x){const w=j.get();w.set(E,x),this.h?this.h.next=w:this.g=w,this.h=w}}var j=new B(()=>new le,m=>m.reset());class le{constructor(){this.next=this.g=this.h=null}set(E,x){this.h=E,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,Z=!1,M=new te,N=()=>{const m=Promise.resolve(void 0);fe=()=>{m.then(b)}};function b(){for(var m;m=X();){try{m.h.call(m.g)}catch(x){J(x)}var E=j;E.j(m),E.h<100&&(E.h++,m.next=E.g,E.g=m)}Z=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const x=()=>{};c.addEventListener("test",x,E),c.removeEventListener("test",x,E)}catch{}return m})();function D(m){return/^[\s\xa0]*$/.test(m)}function ae(m,E){V.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,E)}T(ae,V),ae.prototype.init=function(m,E){const x=this.type=m.type,w=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget,E||(x=="mouseover"?E=m.fromElement:x=="mouseout"&&(E=m.toElement)),this.relatedTarget=E,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Ee="closure_listenable_"+(Math.random()*1e6|0),Y=0;function re(m,E,x,w,F){this.listener=m,this.proxy=null,this.src=E,this.type=x,this.capture=!!w,this.ha=F,this.key=++Y,this.da=this.fa=!1}function de(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Ne(m,E,x){for(const w in m)E.call(x,m[w],w,m)}function Xe(m,E){for(const x in m)E.call(void 0,m[x],x,m)}function q(m){const E={};for(const x in m)E[x]=m[x];return E}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(m,E){let x,w;for(let F=1;F<arguments.length;F++){w=arguments[F];for(x in w)m[x]=w[x];for(let Q=0;Q<se.length;Q++)x=se[Q],Object.prototype.hasOwnProperty.call(w,x)&&(m[x]=w[x])}}function ye(m){this.src=m,this.g={},this.h=0}ye.prototype.add=function(m,E,x,w,F){const Q=m.toString();m=this.g[Q],m||(m=this.g[Q]=[],this.h++);const ue=Pe(m,E,w,F);return ue>-1?(E=m[ue],x||(E.fa=!1)):(E=new re(E,this.src,Q,!!w,F),E.fa=x,m.push(E)),E};function Ie(m,E){const x=E.type;if(x in m.g){var w=m.g[x],F=Array.prototype.indexOf.call(w,E,void 0),Q;(Q=F>=0)&&Array.prototype.splice.call(w,F,1),Q&&(de(E),m.g[x].length==0&&(delete m.g[x],m.h--))}}function Pe(m,E,x,w){for(let F=0;F<m.length;++F){const Q=m[F];if(!Q.da&&Q.listener==E&&Q.capture==!!x&&Q.ha==w)return F}return-1}var He="closure_lm_"+(Math.random()*1e6|0),kt={};function ht(m,E,x,w,F){if(Array.isArray(E)){for(let Q=0;Q<E.length;Q++)ht(m,E[Q],x,w,F);return null}return x=pa(x),m&&m[Ee]?m.J(E,x,d(w)?!!w.capture:!1,F):ao(m,E,x,!1,w,F)}function ao(m,E,x,w,F,Q){if(!E)throw Error("Invalid event type");const ue=d(F)?!!F.capture:!!F;let Me=lo(m);if(Me||(m[He]=Me=new ye(m)),x=Me.add(E,x,w,ue,Q),x.proxy)return x;if(w=$o(),x.proxy=w,w.src=m,w.listener=x,m.addEventListener)L||(F=ue),F===void 0&&(F=!1),m.addEventListener(E.toString(),w,F);else if(m.attachEvent)m.attachEvent(ui(E.toString()),w);else if(m.addListener&&m.removeListener)m.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return x}function $o(){function m(x){return E.call(m.src,m.listener,x)}const E=ha;return m}function Xo(m,E,x,w,F){if(Array.isArray(E))for(var Q=0;Q<E.length;Q++)Xo(m,E[Q],x,w,F);else w=d(w)?!!w.capture:!!w,x=pa(x),m&&m[Ee]?(m=m.i,Q=String(E).toString(),Q in m.g&&(E=m.g[Q],x=Pe(E,x,w,F),x>-1&&(de(E[x]),Array.prototype.splice.call(E,x,1),E.length==0&&(delete m.g[Q],m.h--)))):m&&(m=lo(m))&&(E=m.g[E.toString()],m=-1,E&&(m=Pe(E,x,w,F)),(x=m>-1?E[m]:null)&&Wo(x))}function Wo(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[Ee])Ie(E.i,m);else{var x=m.type,w=m.proxy;E.removeEventListener?E.removeEventListener(x,w,m.capture):E.detachEvent?E.detachEvent(ui(x),w):E.addListener&&E.removeListener&&E.removeListener(w),(x=lo(E))?(Ie(x,m),x.h==0&&(x.src=null,E[He]=null)):de(m)}}}function ui(m){return m in kt?kt[m]:kt[m]="on"+m}function ha(m,E){if(m.da)m=!0;else{E=new ae(E,this);const x=m.listener,w=m.ha||m.src;m.fa&&Wo(m),m=x.call(w,E)}return m}function lo(m){return m=m[He],m instanceof ye?m:null}var ma="__closure_events_fn_"+(Math.random()*1e9>>>0);function pa(m){return typeof m=="function"?m:(m[ma]||(m[ma]=function(E){return m.handleEvent(E)}),m[ma])}function xt(){P.call(this),this.i=new ye(this),this.M=this,this.G=null}T(xt,P),xt.prototype[Ee]=!0,xt.prototype.removeEventListener=function(m,E,x,w){Xo(this,m,E,x,w)};function qt(m,E){var x,w=m.G;if(w)for(x=[];w;w=w.G)x.push(w);if(m=m.M,w=E.type||E,typeof E=="string")E=new V(E,m);else if(E instanceof V)E.target=E.target||m;else{var F=E;E=new V(w,m),ce(E,F)}F=!0;let Q,ue;if(x)for(ue=x.length-1;ue>=0;ue--)Q=E.g=x[ue],F=cs(Q,w,!0,E)&&F;if(Q=E.g=m,F=cs(Q,w,!0,E)&&F,F=cs(Q,w,!1,E)&&F,x)for(ue=0;ue<x.length;ue++)Q=E.g=x[ue],F=cs(Q,w,!1,E)&&F}xt.prototype.N=function(){if(xt.Z.N.call(this),this.i){var m=this.i;for(const E in m.g){const x=m.g[E];for(let w=0;w<x.length;w++)de(x[w]);delete m.g[E],m.h--}}this.G=null},xt.prototype.J=function(m,E,x,w){return this.i.add(String(m),E,!1,x,w)},xt.prototype.K=function(m,E,x,w){return this.i.add(String(m),E,!0,x,w)};function cs(m,E,x,w){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();let F=!0;for(let Q=0;Q<E.length;++Q){const ue=E[Q];if(ue&&!ue.da&&ue.capture==x){const Me=ue.listener,Tt=ue.ha||ue.src;ue.fa&&Ie(m.i,ue),F=Me.call(Tt,w)!==!1&&F}}return F&&!w.defaultPrevented}function Rf(m,E){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=p(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:c.setTimeout(m,E||0)}function Wl(m){m.g=Rf(()=>{m.g=null,m.i&&(m.i=!1,Wl(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class rn extends P{constructor(E,x){super(),this.m=E,this.l=x,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Wl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function uo(m){P.call(this),this.h=m,this.g={}}T(uo,P);var ga=[];function ya(m){Ne(m.g,function(E,x){this.g.hasOwnProperty(x)&&Wo(E)},m),m.g={}}uo.prototype.N=function(){uo.Z.N.call(this),ya(this)},uo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fs=c.JSON.stringify,wf=c.JSON.parse,Zl=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function jl(){}function eu(){}var Kn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yt(){V.call(this,"d")}T(Yt,V);function Nn(){V.call(this,"c")}T(Nn,V);var vt={},tu=null;function Zo(){return tu=tu||new xt}vt.Ia="serverreachability";function nu(m){V.call(this,vt.Ia,m)}T(nu,V);function ci(m){const E=Zo();qt(E,new nu(E))}vt.STAT_EVENT="statevent";function co(m,E){V.call(this,vt.STAT_EVENT,m),this.stat=E}T(co,V);function It(m){const E=Zo();qt(E,new co(E,m))}vt.Ja="timingevent";function fi(m,E){V.call(this,vt.Ja,m),this.size=E}T(fi,V);function di(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},E)}function Qn(){this.g=!0}Qn.prototype.ua=function(){this.g=!1};function bf(m,E,x,w,F,Q){m.info(function(){if(m.g)if(Q){var ue="",Me=Q.split("&");for(let We=0;We<Me.length;We++){var Tt=Me[We].split("=");if(Tt.length>1){const mt=Tt[0];Tt=Tt[1];const Vn=mt.split("_");ue=Vn.length>=2&&Vn[1]=="type"?ue+(mt+"="+Tt+"&"):ue+(mt+"=redacted&")}}}else ue=null;else ue=Q;return"XMLHTTP REQ ("+w+") [attempt "+F+"]: "+E+`
`+x+`
`+ue})}function iu(m,E,x,w,F,Q,ue){m.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+F+"]: "+E+`
`+x+`
`+Q+" "+ue})}function hi(m,E,x,w){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+Nf(m,x)+(w?" "+w:"")})}function fo(m,E){m.info(function(){return"TIMEOUT: "+E})}Qn.prototype.info=function(){};function Nf(m,E){if(!m.g)return E;if(!E)return null;try{const Q=JSON.parse(E);if(Q){for(m=0;m<Q.length;m++)if(Array.isArray(Q[m])){var x=Q[m];if(!(x.length<2)){var w=x[1];if(Array.isArray(w)&&!(w.length<1)){var F=w[0];if(F!="noop"&&F!="stop"&&F!="close")for(let ue=1;ue<w.length;ue++)w[ue]=""}}}}return fs(Q)}catch{return E}}var ho={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_a={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},va;function mo(){}T(mo,jl),mo.prototype.g=function(){return new XMLHttpRequest},va=new mo;function ki(m){return encodeURIComponent(String(m))}function su(m){var E=1;m=m.split(":");const x=[];for(;E>0&&m.length;)x.push(m.shift()),E--;return m.length&&x.push(m.join(":")),x}function $n(m,E,x,w){this.j=m,this.i=E,this.l=x,this.S=w||1,this.V=new uo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Xn}function Xn(){this.i=null,this.g="",this.h=!1}var Rt={},Bt={};function mi(m,E,x){m.M=1,m.A=po(bt(E)),m.u=x,m.R=!0,jo(m,null)}function jo(m,E){m.F=Date.now(),pi(m),m.B=bt(m.A);var x=m.B,w=m.S;Array.isArray(w)||(w=[String(w)]),ir(x.i,"t",w),m.C=0,x=m.j.L,m.h=new Xn,m.g=vu(m.j,x?E:null,!m.u),m.P>0&&(m.O=new rn(p(m.Y,m,m.g),m.P)),E=m.V,x=m.g,w=m.ba;var F="readystatechange";Array.isArray(F)||(F&&(ga[0]=F.toString()),F=ga);for(let Q=0;Q<F.length;Q++){const ue=ht(x,F[Q],w||E.handleEvent,!1,E.h||E);if(!ue)break;E.g[ue.key]=ue}E=m.J?q(m.J):{},m.u?(m.v||(m.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,E)):(m.v="GET",m.g.ea(m.B,m.v,null,E)),ci(),bf(m.i,m.v,m.B,m.l,m.S,m.u)}$n.prototype.ba=function(m){m=m.target;const E=this.O;E&&jn(m)==3?E.j():this.Y(m)},$n.prototype.Y=function(m){try{if(m==this.g)e:{const Me=jn(this.g),Tt=this.g.ya(),We=this.g.ca();if(!(Me<3)&&(Me!=3||this.g&&(this.h.h||this.g.la()||Jt(this.g)))){this.K||Me!=4||Tt==7||(Tt==8||We<=0?ci(3):ci(2)),gi(this);var E=this.g.ca();this.X=E;var x=Mf(this);if(this.o=E==200,iu(this.i,this.v,this.B,this.l,this.S,Me,E),this.o){if(this.U&&!this.L){t:{if(this.g){var w,F=this.g;if((w=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(w)){var Q=w;break t}}Q=null}if(m=Q)hi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,yi(this,m);else{this.o=!1,this.m=3,It(12),Tn(this),Mn(this);break e}}if(this.R){m=!0;let mt;for(;!this.K&&this.C<x.length;)if(mt=ru(this,x),mt==Bt){Me==4&&(this.m=4,It(14),m=!1),hi(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==Rt){this.m=4,It(15),hi(this.i,this.l,x,"[Invalid Chunk]"),m=!1;break}else hi(this.i,this.l,mt,null),yi(this,mt);if(ou(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||x.length!=0||this.h.h||(this.m=1,It(16),m=!1),this.o=this.o&&m,!m)hi(this.i,this.l,x,"[Invalid Chunked Response]"),Tn(this),Mn(this);else if(x.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Va(ue),ue.P=!0,It(11))}}else hi(this.i,this.l,x,null),yi(this,x);Me==4&&Tn(this),this.o&&!this.K&&(Me==4?pu(this.j,this):(this.o=!1,pi(this)))}else Oi(this.g),E==400&&x.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),Tn(this),Mn(this)}}}catch{}finally{}};function Mf(m){if(!ou(m))return m.g.la();const E=Jt(m.g);if(E==="")return"";let x="";const w=E.length,F=jn(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Tn(m),Mn(m),"";m.h.i=new c.TextDecoder}for(let Q=0;Q<w;Q++)m.h.h=!0,x+=m.h.i.decode(E[Q],{stream:!(F&&Q==w-1)});return E.length=0,m.h.g+=x,m.C=0,m.h.g}function ou(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function ru(m,E){var x=m.C,w=E.indexOf(`
`,x);return w==-1?Bt:(x=Number(E.substring(x,w)),isNaN(x)?Rt:(w+=1,w+x>E.length?Bt:(E=E.slice(w,w+x),m.C=w+x,E)))}$n.prototype.cancel=function(){this.K=!0,Tn(this)};function pi(m){m.T=Date.now()+m.H,er(m,m.H)}function er(m,E){if(m.D!=null)throw Error("WatchDog timer not null");m.D=di(p(m.aa,m),E)}function gi(m){m.D&&(c.clearTimeout(m.D),m.D=null)}$n.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(fo(this.i,this.B),this.M!=2&&(ci(),It(17)),Tn(this),this.m=2,Mn(this)):er(this,this.T-m)};function Mn(m){m.j.I==0||m.K||pu(m.j,m)}function Tn(m){gi(m);var E=m.O;E&&typeof E.dispose=="function"&&E.dispose(),m.O=null,ya(m.V),m.g&&(E=m.g,m.g=null,E.abort(),E.dispose())}function yi(m,E){try{var x=m.j;if(x.I!=0&&(x.g==m||vi(x.h,m))){if(!m.L&&vi(x.h,m)&&x.I==3){try{var w=x.Ba.g.parse(E)}catch{w=null}if(Array.isArray(w)&&w.length==3){var F=w;if(F[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<m.F)lr(x),vs(x);else break e;So(x),It(18)}}else x.xa=F[1],0<x.xa-x.K&&F[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=di(p(x.Va,x),6e3));_i(x.h)<=1&&x.ta&&(x.ta=void 0)}else xi(x,11)}else if((m.L||x.g==m)&&lr(x),!D(E))for(F=x.Ba.g.parse(E),E=0;E<F.length;E++){let We=F[E];const mt=We[0];if(!(mt<=x.K))if(x.K=mt,We=We[1],x.I==2)if(We[0]=="c"){x.M=We[1],x.ba=We[2];const Vn=We[3];Vn!=null&&(x.ka=Vn,x.j.info("VER="+x.ka));const Ii=We[4];Ii!=null&&(x.za=Ii,x.j.info("SVER="+x.za));const ei=We[5];ei!=null&&typeof ei=="number"&&ei>0&&(w=1.5*ei,x.O=w,x.j.info("backChannelRequestTimeoutMs_="+w)),w=x;const ti=m.g;if(ti){const Ao=ti.g?ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ao){var Q=w.h;Q.g||Ao.indexOf("spdy")==-1&&Ao.indexOf("quic")==-1&&Ao.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Sa(Q,Q.h),Q.h=null))}if(w.G){const ur=ti.g?ti.g.getResponseHeader("X-HTTP-Session-Id"):null;ur&&(w.wa=ur,et(w.J,w.G,ur))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-m.F,x.j.info("Handshake RTT: "+x.T+"ms")),w=x;var ue=m;if(w.na=_u(w,w.L?w.ba:null,w.W),ue.L){Aa(w.h,ue);var Me=ue,Tt=w.O;Tt&&(Me.H=Tt),Me.D&&(gi(Me),pi(Me)),w.g=ue}else hu(w);x.i.length>0&&Ci(x)}else We[0]!="stop"&&We[0]!="close"||xi(x,7);else x.I==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?xi(x,7):Da(x):We[0]!="noop"&&x.l&&x.l.qa(We),x.A=0)}}ci(4)}catch{}}var wt=class{constructor(m,E){this.g=m,this.map=E}};function Ta(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ea(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function _i(m){return m.h?1:m.g?m.g.size:0}function vi(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function Sa(m,E){m.g?m.g.add(E):m.h=E}function Aa(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}Ta.prototype.cancel=function(){if(this.i=Ca(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Ca(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const x of m.g.values())E=E.concat(x.G);return E}return R(m.i)}var au=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tr(m,E){if(m){m=m.split("&");for(let x=0;x<m.length;x++){const w=m[x].indexOf("=");let F,Q=null;w>=0?(F=m[x].substring(0,w),Q=m[x].substring(w+1)):F=m[x],E(F,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function En(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;m instanceof En?(this.l=m.l,Ft(this,m.j),this.o=m.o,this.g=m.g,ds(this,m.u),this.h=m.h,xa(this,fu(m.i)),this.m=m.m):m&&(E=String(m).match(au))?(this.l=!1,Ft(this,E[1]||"",!0),this.o=Ti(E[2]||""),this.g=Ti(E[3]||"",!0),ds(this,E[4]),this.h=Ti(E[5]||"",!0),xa(this,E[6]||"",!0),this.m=Ti(E[7]||"")):(this.l=!1,this.i=new ms(null,this.l))}En.prototype.toString=function(){const m=[];var E=this.j;E&&m.push(go(E,nr,!0),":");var x=this.g;return(x||E=="file")&&(m.push("//"),(E=this.o)&&m.push(go(E,nr,!0),"@"),m.push(ki(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&m.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&m.push("/"),m.push(go(x,x.charAt(0)=="/"?Ia:lu,!0))),(x=this.i.toString())&&m.push("?",x),(x=this.m)&&m.push("#",go(x,uu)),m.join("")},En.prototype.resolve=function(m){const E=bt(this);let x=!!m.j;x?Ft(E,m.j):x=!!m.o,x?E.o=m.o:x=!!m.g,x?E.g=m.g:x=m.u!=null;var w=m.h;if(x)ds(E,m.u);else if(x=!!m.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var F=E.h.lastIndexOf("/");F!=-1&&(w=E.h.slice(0,F+1)+w)}if(F=w,F==".."||F==".")w="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){w=F.lastIndexOf("/",0)==0,F=F.split("/");const Q=[];for(let ue=0;ue<F.length;){const Me=F[ue++];Me=="."?w&&ue==F.length&&Q.push(""):Me==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),w&&ue==F.length&&Q.push("")):(Q.push(Me),w=!0)}w=Q.join("/")}else w=F}return x?E.h=w:x=m.i.toString()!=="",x?xa(E,fu(m.i)):x=!!m.m,x&&(E.m=m.m),E};function bt(m){return new En(m)}function Ft(m,E,x){m.j=x?Ti(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function ds(m,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);m.u=E}else m.u=null}function xa(m,E,x){E instanceof ms?(m.i=E,sr(m.i,m.l)):(x||(E=go(E,hs)),m.i=new ms(E,m.l))}function et(m,E,x){m.i.set(E,x)}function po(m){return et(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Ti(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function go(m,E,x){return typeof m=="string"?(m=encodeURI(m).replace(E,un),x&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function un(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var nr=/[#\/\?@]/g,lu=/[#\?:]/g,Ia=/[#\?]/g,hs=/[#\?@]/g,uu=/#/g;function ms(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function cn(m){m.g||(m.g=new Map,m.h=0,m.i&&tr(m.i,function(E,x){m.add(decodeURIComponent(E.replace(/\+/g," ")),x)}))}n=ms.prototype,n.add=function(m,E){cn(this),this.i=null,m=ps(this,m);let x=this.g.get(m);return x||this.g.set(m,x=[]),x.push(E),this.h+=1,this};function cu(m,E){cn(m),E=ps(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function Ra(m,E){return cn(m),E=ps(m,E),m.g.has(E)}n.forEach=function(m,E){cn(this),this.g.forEach(function(x,w){x.forEach(function(F){m.call(E,F,w,this)},this)},this)};function wa(m,E){cn(m);let x=[];if(typeof E=="string")Ra(m,E)&&(x=x.concat(m.g.get(ps(m,E))));else for(m=Array.from(m.g.values()),E=0;E<m.length;E++)x=x.concat(m[E]);return x}n.set=function(m,E){return cn(this),this.i=null,m=ps(this,m),Ra(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},n.get=function(m,E){return m?(m=wa(this,m),m.length>0?String(m[0]):E):E};function ir(m,E,x){cu(m,E),x.length>0&&(m.i=null,m.g.set(ps(m,E),R(x)),m.h+=x.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(let w=0;w<E.length;w++){var x=E[w];const F=ki(x);x=wa(this,x);for(let Q=0;Q<x.length;Q++){let ue=F;x[Q]!==""&&(ue+="="+ki(x[Q])),m.push(ue)}}return this.i=m.join("&")};function fu(m){const E=new ms;return E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),E}function ps(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function sr(m,E){E&&!m.j&&(cn(m),m.i=null,m.g.forEach(function(x,w){const F=w.toLowerCase();w!=F&&(cu(this,w),ir(this,F,x))},m)),m.j=E}function Wn(m,E){const x=new Qn;if(c.Image){const w=new Image;w.onload=v(Dn,x,"TestLoadImage: loaded",!0,E,w),w.onerror=v(Dn,x,"TestLoadImage: error",!1,E,w),w.onabort=v(Dn,x,"TestLoadImage: abort",!1,E,w),w.ontimeout=v(Dn,x,"TestLoadImage: timeout",!1,E,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=m}else E(!1)}function ba(m,E){const x=new Qn,w=new AbortController,F=setTimeout(()=>{w.abort(),Dn(x,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:w.signal}).then(Q=>{clearTimeout(F),Q.ok?Dn(x,"TestPingServer: ok",!0,E):Dn(x,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(F),Dn(x,"TestPingServer: error",!1,E)})}function Dn(m,E,x,w,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),w(x)}catch{}}function gs(){this.g=new Zl}function Ei(m){this.i=m.Sb||null,this.h=m.ab||!1}T(Ei,jl),Ei.prototype.g=function(){return new yo(this.i,this.h)};function yo(m,E){xt.call(this),this.H=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(yo,xt),n=yo.prototype,n.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=E,this.readyState=1,Zn(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(E.body=m),(this.H||c).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ys(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Zn(this)),this.g&&(this.readyState=3,Zn(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;or(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function or(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?ys(this):Zn(this),this.readyState==3&&or(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,ys(this))},n.Na=function(m){this.g&&(this.response=m,ys(this))},n.ga=function(){this.g&&ys(this)};function ys(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Zn(m)}n.setRequestHeader=function(m,E){this.A.append(m,E)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var x=E.next();!x.done;)x=x.value,m.push(x[0]+": "+x[1]),x=E.next();return m.join(`\r
`)};function Zn(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(yo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Pn(m){let E="";return Ne(m,function(x,w){E+=w,E+=":",E+=x,E+=`\r
`}),E}function _o(m,E,x){e:{for(w in x){var w=!1;break e}w=!0}w||(x=Pn(x),typeof m=="string"?x!=null&&ki(x):et(m,E,x))}function it(m){xt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(it,xt);var Si=/^https?$/i,Na=["POST","PUT"];n=it.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,E,x,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():va.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(Q){vo(this,Q);return}if(m=x||"",x=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var F in w)x.set(F,w[F]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Q of w.keys())x.set(Q,w.get(Q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(x.keys()).find(Q=>Q.toLowerCase()=="content-type"),F=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(Na,E,void 0)>=0)||w||F||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ue]of x)this.g.setRequestHeader(Q,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Q){vo(this,Q)}};function vo(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.o=5,Ma(m),qi(m)}function Ma(m){m.A||(m.A=!0,qt(m,"complete"),qt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,qt(this,"complete"),qt(this,"abort"),qi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qi(this,!0)),it.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?To(this):this.Xa())},n.Xa=function(){To(this)};function To(m){if(m.h&&typeof l<"u"){if(m.v&&jn(m)==4)setTimeout(m.Ca.bind(m),0);else if(qt(m,"readystatechange"),jn(m)==4){m.h=!1;try{const Q=m.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var x;if(!(x=E)){var w;if(w=Q===0){let ue=String(m.D).match(au)[1]||null;!ue&&c.self&&c.self.location&&(ue=c.self.location.protocol.slice(0,-1)),w=!Si.test(ue?ue.toLowerCase():"")}x=w}if(x)qt(m,"complete"),qt(m,"success");else{m.o=6;try{var F=jn(m)>2?m.g.statusText:""}catch{F=""}m.l=F+" ["+m.ca()+"]",Ma(m)}}finally{qi(m)}}}}function qi(m,E){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const x=m.g;m.g=null,E||qt(m,"ready");try{x.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function jn(m){return m.g?m.g.readyState:0}n.ca=function(){try{return jn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),wf(E)}};function Jt(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Oi(m){const E={};m=(m.g&&jn(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<m.length;w++){if(D(m[w]))continue;var x=su(m[w]);const F=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const Q=E[F]||[];E[F]=Q,Q.push(x)}Xe(E,function(w){return w.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ai(m,E,x){return x&&x.internalChannelParams&&x.internalChannelParams[m]||E}function _s(m){this.za=0,this.i=[],this.j=new Qn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ai("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ai("baseRetryDelayMs",5e3,m),this.Za=Ai("retryDelaySeedMs",1e4,m),this.Ta=Ai("forwardChannelMaxRetries",2,m),this.va=Ai("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Ta(m&&m.concurrentRequestLimit),this.Ba=new gs,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=_s.prototype,n.ka=8,n.I=1,n.connect=function(m,E,x,w){It(0),this.W=m,this.H=E||{},x&&w!==void 0&&(this.H.OSID=x,this.H.OAID=w),this.F=this.X,this.J=_u(this,null,this.W),Ci(this)};function Da(m){if(rr(m),m.I==3){var E=m.V++,x=bt(m.J);if(et(x,"SID",m.M),et(x,"RID",E),et(x,"TYPE","terminate"),Eo(m,x),E=new $n(m,m.j,E),E.M=2,E.A=po(bt(x)),x=!1,c.navigator&&c.navigator.sendBeacon)try{x=c.navigator.sendBeacon(E.A.toString(),"")}catch{}!x&&c.Image&&(new Image().src=E.A,x=!0),x||(E.g=vu(E.j,null),E.g.ea(E.A)),E.F=Date.now(),pi(E)}yu(m)}function vs(m){m.g&&(Va(m),m.g.cancel(),m.g=null)}function rr(m){vs(m),m.v&&(c.clearTimeout(m.v),m.v=null),lr(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function Ci(m){if(!Ea(m.h)&&!m.m){m.m=!0;var E=m.Ea;fe||N(),Z||(fe(),Z=!0),M.add(E,m),m.D=0}}function ar(m,E){return _i(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=E.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=di(p(m.Ea,m,E),gu(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const F=new $n(this,this.j,m);let Q=this.o;if(this.U&&(Q?(Q=q(Q),ce(Q,this.U)):Q=this.U),this.u!==null||this.R||(F.J=Q,Q=null),this.S)e:{for(var E=0,x=0;x<this.i.length;x++){t:{var w=this.i[x];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(E+=w,E>4096){E=x;break e}if(E===4096||x===this.i.length-1){E=x+1;break e}}E=1e3}else E=1e3;E=du(this,F,E),x=bt(this.J),et(x,"RID",m),et(x,"CVER",22),this.G&&et(x,"X-HTTP-Session-Id",this.G),Eo(this,x),Q&&(this.R?E="headers="+ki(Pn(Q))+"&"+E:this.u&&_o(x,this.u,Q)),Sa(this.h,F),this.Ra&&et(x,"TYPE","init"),this.S?(et(x,"$req",E),et(x,"SID","null"),F.U=!0,mi(F,x,null)):mi(F,x,E),this.I=2}}else this.I==3&&(m?Pa(this,m):this.i.length==0||Ea(this.h)||Pa(this))};function Pa(m,E){var x;E?x=E.l:x=m.V++;const w=bt(m.J);et(w,"SID",m.M),et(w,"RID",x),et(w,"AID",m.K),Eo(m,w),m.u&&m.o&&_o(w,m.u,m.o),x=new $n(m,m.j,x,m.D+1),m.u===null&&(x.J=m.o),E&&(m.i=E.G.concat(m.i)),E=du(m,x,1e3),x.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Sa(m.h,x),mi(x,w,E)}function Eo(m,E){m.H&&Ne(m.H,function(x,w){et(E,w,x)}),m.l&&Ne({},function(x,w){et(E,w,x)})}function du(m,E,x){x=Math.min(m.i.length,x);const w=m.l?p(m.l.Ka,m.l,m):null;e:{var F=m.i;let Me=-1;for(;;){const Tt=["count="+x];Me==-1?x>0?(Me=F[0].g,Tt.push("ofs="+Me)):Me=0:Tt.push("ofs="+Me);let We=!0;for(let mt=0;mt<x;mt++){var Q=F[mt].g;const Vn=F[mt].map;if(Q-=Me,Q<0)Me=Math.max(0,F[mt].g-100),We=!1;else try{Q="req"+Q+"_"||"";try{var ue=Vn instanceof Map?Vn:Object.entries(Vn);for(const[Ii,ei]of ue){let ti=ei;d(ei)&&(ti=fs(ei)),Tt.push(Q+Ii+"="+encodeURIComponent(ti))}}catch(Ii){throw Tt.push(Q+"type="+encodeURIComponent("_badmap")),Ii}}catch{w&&w(Vn)}}if(We){ue=Tt.join("&");break e}}ue=void 0}return m=m.i.splice(0,x),E.G=m,ue}function hu(m){if(!m.g&&!m.v){m.Y=1;var E=m.Da;fe||N(),Z||(fe(),Z=!0),M.add(E,m),m.A=0}}function So(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=di(p(m.Da,m),gu(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,mu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=di(p(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),vs(this),mu(this))};function Va(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function mu(m){m.g=new $n(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var E=bt(m.na);et(E,"RID","rpc"),et(E,"SID",m.M),et(E,"AID",m.K),et(E,"CI",m.F?"0":"1"),!m.F&&m.ia&&et(E,"TO",m.ia),et(E,"TYPE","xmlhttp"),Eo(m,E),m.u&&m.o&&_o(E,m.u,m.o),m.O&&(m.g.H=m.O);var x=m.g;m=m.ba,x.M=1,x.A=po(bt(E)),x.u=null,x.R=!0,jo(x,m)}n.Va=function(){this.C!=null&&(this.C=null,vs(this),So(this),It(19))};function lr(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function pu(m,E){var x=null;if(m.g==E){lr(m),Va(m),m.g=null;var w=2}else if(vi(m.h,E))x=E.G,Aa(m.h,E),w=1;else return;if(m.I!=0){if(E.o)if(w==1){x=E.u?E.u.length:0,E=Date.now()-E.F;var F=m.D;w=Zo(),qt(w,new fi(w,x)),Ci(m)}else hu(m);else if(F=E.m,F==3||F==0&&E.X>0||!(w==1&&ar(m,E)||w==2&&So(m)))switch(x&&x.length>0&&(E=m.h,E.i=E.i.concat(x)),F){case 1:xi(m,5);break;case 4:xi(m,10);break;case 3:xi(m,6);break;default:xi(m,2)}}}function gu(m,E){let x=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(x*=2),x*E}function xi(m,E){if(m.j.info("Error code "+E),E==2){var x=p(m.bb,m),w=m.Ua;const F=!w;w=new En(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ft(w,"https"),po(w),F?Wn(w.toString(),x):ba(w.toString(),x)}else It(2);m.I=0,m.l&&m.l.pa(E),yu(m),rr(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function yu(m){if(m.I=0,m.ja=[],m.l){const E=Ca(m.h);(E.length!=0||m.i.length!=0)&&(O(m.ja,E),O(m.ja,m.i),m.h.i.length=0,R(m.i),m.i.length=0),m.l.oa()}}function _u(m,E,x){var w=x instanceof En?bt(x):new En(x);if(w.g!="")E&&(w.g=E+"."+w.g),ds(w,w.u);else{var F=c.location;w=F.protocol,E=E?E+"."+F.hostname:F.hostname,F=+F.port;const Q=new En(null);w&&Ft(Q,w),E&&(Q.g=E),F&&ds(Q,F),x&&(Q.h=x),w=Q}return x=m.G,E=m.wa,x&&E&&et(w,x,E),et(w,"VER",m.ka),Eo(m,w),w}function vu(m,E,x){if(E&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Aa&&!m.ma?new it(new Ei({ab:x})):new it(m.ma),E.Fa(m.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tu(){}n=Tu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ts(){}Ts.prototype.g=function(m,E){return new an(m,E)};function an(m,E){xt.call(this),this.g=new _s(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(m?m["X-WebChannel-Client-Profile"]=E.sa:m={"X-WebChannel-Client-Profile":E.sa}),this.g.U=m,(m=E&&E.Qb)&&!D(m)&&(this.g.u=m),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!D(E)&&(this.g.G=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new zi(this)}T(an,xt),an.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){Da(this.g)},an.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var x={};x.__data__=m,m=x}else this.v&&(x={},x.__data__=fs(m),m=x);E.i.push(new wt(E.Ya++,m)),E.I==3&&Ci(E)},an.prototype.N=function(){this.g.l=null,delete this.j,Da(this.g),delete this.g,an.Z.N.call(this)};function Eu(m){Yt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const x in E){m=x;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}T(Eu,Yt);function Su(){Nn.call(this),this.status=1}T(Su,Nn);function zi(m){this.g=m}T(zi,Tu),zi.prototype.ra=function(){qt(this.g,"a")},zi.prototype.qa=function(m){qt(this.g,new Eu(m))},zi.prototype.pa=function(m){qt(this.g,new Su)},zi.prototype.oa=function(){qt(this.g,"b")},Ts.prototype.createWebChannel=Ts.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,CE=function(){return new Ts},AE=function(){return Zo()},SE=vt,em={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ho.NO_ERROR=0,ho.TIMEOUT=8,ho.HTTP_ERROR=6,Pc=ho,_a.COMPLETE="complete",EE=_a,eu.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",xt.prototype.listen=xt.prototype.J,Sl=eu,it.prototype.listenOnce=it.prototype.K,it.prototype.getLastError=it.prototype.Ha,it.prototype.getLastErrorCode=it.prototype.ya,it.prototype.getStatus=it.prototype.ca,it.prototype.getResponseJson=it.prototype.La,it.prototype.getResponseText=it.prototype.la,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Fa,TE=it}).apply(typeof Ic<"u"?Ic:typeof self<"u"?self:typeof window<"u"?window:{});const N0="@firebase/firestore",M0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aa="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=new hE("@firebase/firestore");function Or(){return Fo.logLevel}function ge(n,...e){if(Fo.logLevel<=Ye.DEBUG){const t=e.map(Nm);Fo.debug(`Firestore (${aa}): ${n}`,...t)}}function rs(n,...e){if(Fo.logLevel<=Ye.ERROR){const t=e.map(Nm);Fo.error(`Firestore (${aa}): ${n}`,...t)}}function Wr(n,...e){if(Fo.logLevel<=Ye.WARN){const t=e.map(Nm);Fo.warn(`Firestore (${aa}): ${n}`,...t)}}function Nm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,xE(n,s,t)}function xE(n,e,t){let s=`FIRESTORE (${aa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw rs(s),new Error(s)}function je(n,e,t,s){let r="Unexpected state";typeof t=="string"?r=t:s=t,n||xE(e,r,s)}function be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends ra{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nn.UNAUTHENTICATED)))}shutdown(){}}class zD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class BD{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){je(this.o===void 0,42304);let s=this.i;const r=y=>this.i!==s?(s=this.i,t(y)):Promise.resolve();let l=new ns;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ns,e.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await r(this.currentUser)}))},d=y=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((y=>d(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?d(y):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ns)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(je(typeof s.accessToken=="string",31837,{l:s}),new IE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class FD{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class HD{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new FD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class D0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,SD(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){je(this.o===void 0,3512);const s=l=>{l.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ge("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const r=l=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new D0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new D0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=YD(40);for(let l=0;l<r.length;++l)s.length<20&&r[l]<t&&(s+=e.charAt(r[l]%62))}return s}}function ze(n,e){return n<e?-1:n>e?1:0}function tm(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const r=n.charAt(s),l=e.charAt(s);if(r!==l)return Uh(r)===Uh(l)?ze(r,l):Uh(r)?1:-1}return ze(n.length,e.length)}const JD=55296,KD=57343;function Uh(n){const e=n.charCodeAt(0);return e>=JD&&e<=KD}function Zr(n,e,t){return n.length===e.length&&n.every(((s,r)=>t(s,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="__name__";class Mi{constructor(e,t,s){t===void 0?t=0:t>e.length&&xe(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&xe(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Mi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let r=0;r<s;r++){const l=Mi.compareSegments(e.get(r),t.get(r));if(l!==0)return l}return ze(e.length,t.length)}static compareSegments(e,t){const s=Mi.isNumericId(e),r=Mi.isNumericId(t);return s&&!r?-1:!s&&r?1:s&&r?Mi.extractNumericId(e).compare(Mi.extractNumericId(t)):tm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $s.fromString(e.substring(4,e.length-2))}}class lt extends Mi{construct(e,t,s){return new lt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new pe(ie.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((r=>r.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const QD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends Mi{construct(e,t,s){return new Zt(e,t,s)}static isValidIdentifier(e){return QD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===P0}static keyField(){return new Zt([P0])}static fromServerFormat(e){const t=[];let s="",r=0;const l=()=>{if(s.length===0)throw new pe(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;r<e.length;){const d=e[r];if(d==="\\"){if(r+1===e.length)throw new pe(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[r+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new pe(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,r+=2}else d==="`"?(c=!c,r++):d!=="."||c?(s+=d,r++):(l(),r++)}if(l(),c)throw new pe(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(t)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(lt.fromString(e))}static fromName(e){return new Ae(lt.fromString(e).popFirst(5))}static empty(){return new Ae(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(n,e,t){if(!t)throw new pe(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function $D(n,e,t,s){if(e===!0&&s===!0)throw new pe(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function V0(n){if(!Ae.isDocumentKey(n))throw new pe(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function U0(n){if(Ae.isDocumentKey(n))throw new pe(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function lf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":xe(12329,{type:typeof n})}function ri(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=lf(n);throw new pe(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Fl(n,e){if(!wE(n))throw new pe(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const r=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(r&&typeof c!==r){t=`JSON field '${s}' must be a ${r}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new pe(ie.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=-62135596800,k0=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*k0);return new ut(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<L0)throw new pe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/k0}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Fl(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-L0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:Lt("string",ut._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ut(0,0))}static max(){return new Re(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=-1;function XD(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=Re.fromTimestamp(s===1e9?new ut(t+1,0):new ut(t,s));return new Ws(r,Ae.empty(),e)}function WD(n){return new Ws(n.readTime,n.key,Vl)}class Ws{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ws(Re.min(),Ae.empty(),Vl)}static max(){return new Ws(Re.max(),Ae.empty(),Vl)}}function ZD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ae.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function la(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==jD)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((s,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,r)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,s)=>{t(e)}))}static reject(e){return new oe(((t,s)=>{s(e)}))}static waitFor(e){return new oe(((t,s)=>{let r=0,l=0,c=!1;e.forEach((d=>{++r,d.next((()=>{++l,c&&l===r&&t()}),(y=>s(y)))})),c=!0,l===r&&t()}))}static or(e){let t=oe.resolve(!1);for(const s of e)t=t.next((r=>r?oe.resolve(r):s()));return t}static forEach(e,t){const s=[];return e.forEach(((r,l)=>{s.push(t.call(this,r,l))})),this.waitFor(s)}static mapArray(e,t){return new oe(((s,r)=>{const l=e.length,c=new Array(l);let d=0;for(let y=0;y<l;y++){const p=y;t(e[p]).next((v=>{c[p]=v,++d,d===l&&s(c)}),(v=>r(v)))}}))}static doWhile(e,t){return new oe(((s,r)=>{const l=()=>{e()===!0?t().next((()=>{l()}),r):s()};l()}))}}function tP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ua(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}uf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm=-1;function cf(n){return n==null}function Kc(n){return n===0&&1/n==-1/0}function nP(n){return typeof n=="number"&&Number.isInteger(n)&&!Kc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="";function iP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=q0(e)),e=sP(n.get(t),e);return q0(e)}function sP(n,e){let t=e;const s=n.length;for(let r=0;r<s;r++){const l=n.charAt(r);switch(l){case"\0":t+="";break;case bE:t+="";break;default:t+=l}}return t}function q0(n){return n+bE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function so(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function NE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t){this.comparator=e,this.root=t||Wt.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return t+s.left.size;r<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rc(this.root,e,this.comparator,!0)}}class Rc{constructor(e,t,s,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,t,s,r,l){this.key=e,this.value=t,this.color=s??Wt.RED,this.left=r??Wt.EMPTY,this.right=l??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,r,l){return new Wt(e??this.key,t??this.value,s??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let r=this;const l=s(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,t,s),null):l===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Wt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,t,s,r,l){return this}insert(e,t,s){return new Wt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new z0(this.data.getIterator())}getIteratorFrom(e){return new z0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=s.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new zt(this.comparator);return t.data=e,t}}class z0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new bn([])}unionWith(e){let t=new zt(Zt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new bn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zr(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new ME("Invalid base64 string: "+l):l}})(e);return new jt(t)}static fromUint8Array(e){const t=(function(r){let l="";for(let c=0;c<r.length;++c)l+=String.fromCharCode(r[c]);return l})(e);return new jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const oP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zs(n){if(je(!!n,39018),typeof n=="string"){let e=0;const t=oP.exec(n);if(je(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function js(n){return typeof n=="string"?jt.fromBase64String(n):jt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="server_timestamp",PE="__type__",VE="__previous_value__",UE="__local_write_time__";function Pm(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[PE])==null?void 0:s.stringValue)===DE}function ff(n){const e=n.mapValue.fields[VE];return Pm(e)?ff(e):e}function Ul(n){const e=Zs(n.mapValue.fields[UE].timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,t,s,r,l,c,d,y,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=r,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=y,this.useFetchStreams=p,this.isUsingEmulator=v}}const Qc="(default)";class Ll{constructor(e,t){this.projectId=e,this.database=t||Qc}static empty(){return new Ll("","")}get isDefaultDatabase(){return this.database===Qc}isEqual(e){return e instanceof Ll&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="__type__",aP="__max__",wc={mapValue:{}},kE="__vector__",$c="value";function eo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Pm(n)?4:uP(n)?9007199254740991:lP(n)?10:11:xe(28295,{value:n})}function Li(n,e){if(n===e)return!0;const t=eo(n);if(t!==eo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ul(n).isEqual(Ul(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const c=Zs(r.timestampValue),d=Zs(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,l){return js(r.bytesValue).isEqual(js(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,l){return At(r.geoPointValue.latitude)===At(l.geoPointValue.latitude)&&At(r.geoPointValue.longitude)===At(l.geoPointValue.longitude)})(n,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return At(r.integerValue)===At(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const c=At(r.doubleValue),d=At(l.doubleValue);return c===d?Kc(c)===Kc(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return Zr(n.arrayValue.values||[],e.arrayValue.values||[],Li);case 10:case 11:return(function(r,l){const c=r.mapValue.fields||{},d=l.mapValue.fields||{};if(O0(c)!==O0(d))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(d[y]===void 0||!Li(c[y],d[y])))return!1;return!0})(n,e);default:return xe(52216,{left:n})}}function kl(n,e){return(n.values||[]).find((t=>Li(t,e)))!==void 0}function jr(n,e){if(n===e)return 0;const t=eo(n),s=eo(e);if(t!==s)return ze(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=At(l.integerValue||l.doubleValue),y=At(c.integerValue||c.doubleValue);return d<y?-1:d>y?1:d===y?0:isNaN(d)?isNaN(y)?0:-1:1})(n,e);case 3:return B0(n.timestampValue,e.timestampValue);case 4:return B0(Ul(n),Ul(e));case 5:return tm(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=js(l),y=js(c);return d.compareTo(y)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),y=c.split("/");for(let p=0;p<d.length&&p<y.length;p++){const v=ze(d[p],y[p]);if(v!==0)return v}return ze(d.length,y.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=ze(At(l.latitude),At(c.latitude));return d!==0?d:ze(At(l.longitude),At(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return F0(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var S,R,O,B;const d=l.fields||{},y=c.fields||{},p=(S=d[$c])==null?void 0:S.arrayValue,v=(R=y[$c])==null?void 0:R.arrayValue,T=ze(((O=p==null?void 0:p.values)==null?void 0:O.length)||0,((B=v==null?void 0:v.values)==null?void 0:B.length)||0);return T!==0?T:F0(p,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===wc.mapValue&&c===wc.mapValue)return 0;if(l===wc.mapValue)return 1;if(c===wc.mapValue)return-1;const d=l.fields||{},y=Object.keys(d),p=c.fields||{},v=Object.keys(p);y.sort(),v.sort();for(let T=0;T<y.length&&T<v.length;++T){const S=tm(y[T],v[T]);if(S!==0)return S;const R=jr(d[y[T]],p[v[T]]);if(R!==0)return R}return ze(y.length,v.length)})(n.mapValue,e.mapValue);default:throw xe(23264,{he:t})}}function B0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);const t=Zs(n),s=Zs(e),r=ze(t.seconds,s.seconds);return r!==0?r:ze(t.nanos,s.nanos)}function F0(n,e){const t=n.values||[],s=e.values||[];for(let r=0;r<t.length&&r<s.length;++r){const l=jr(t[r],s[r]);if(l)return l}return ze(t.length,s.length)}function ea(n){return nm(n)}function nm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Zs(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return js(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ae.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",r=!0;for(const l of t.values||[])r?r=!1:s+=",",s+=nm(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let r="{",l=!0;for(const c of s)l?l=!1:r+=",",r+=`${c}:${nm(t.fields[c])}`;return r+"}"})(n.mapValue):xe(61005,{value:n})}function Vc(n){switch(eo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ff(n);return e?16+Vc(e):16;case 5:return 2*n.stringValue.length;case 6:return js(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,l)=>r+Vc(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let r=0;return so(s.fields,((l,c)=>{r+=l.length+Vc(c)})),r})(n.mapValue);default:throw xe(13486,{value:n})}}function H0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function im(n){return!!n&&"integerValue"in n}function Vm(n){return!!n&&"arrayValue"in n}function G0(n){return!!n&&"nullValue"in n}function Y0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Uc(n){return!!n&&"mapValue"in n}function lP(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[LE])==null?void 0:s.stringValue)===kE}function wl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return so(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=wl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=wl(n.arrayValue.values[t]);return e}return{...n}}function uP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===aP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.value=e}static empty(){return new yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Uc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wl(t)}setAll(e){let t=Zt.emptyPath(),s={},r=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const y=this.getFieldsMap(t);this.applyChanges(y,s,r),s={},r=[],t=d.popLast()}c?s[d.lastSegment()]=wl(c):r.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,r)}delete(e){const t=this.field(e.popLast());Uc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Li(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=t.mapValue.fields[e.get(s)];Uc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,s){so(t,((r,l)=>e[r]=l));for(const r of s)delete e[r]}clone(){return new yn(wl(this.value))}}function qE(n){const e=[];return so(n.fields,((t,s)=>{const r=new Zt([t]);if(Uc(s)){const l=qE(s.mapValue).fields;if(l.length===0)e.push(r);else for(const c of l)e.push(r.child(c))}else e.push(r)})),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,t,s,r,l,c,d){this.key=e,this.documentType=t,this.version=s,this.readTime=r,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new sn(e,0,Re.min(),Re.min(),Re.min(),yn.empty(),0)}static newFoundDocument(e,t,s,r){return new sn(e,1,t,Re.min(),s,r,0)}static newNoDocument(e,t){return new sn(e,2,t,Re.min(),Re.min(),yn.empty(),0)}static newUnknownDocument(e,t){return new sn(e,3,t,Re.min(),Re.min(),yn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,t){this.position=e,this.inclusive=t}}function J0(n,e,t){let s=0;for(let r=0;r<n.position.length;r++){const l=e[r],c=n.position[r];if(l.field.isKeyField()?s=Ae.comparator(Ae.fromName(c.referenceValue),t.key):s=jr(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function K0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Li(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t="asc"){this.field=e,this.dir=t}}function cP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{}class Ut extends OE{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new dP(e,t,s):t==="array-contains"?new pP(e,s):t==="in"?new gP(e,s):t==="not-in"?new yP(e,s):t==="array-contains-any"?new _P(e,s):new Ut(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new hP(e,s):new mP(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(jr(t,this.value)):t!==null&&eo(this.value)===eo(t)&&this.matchesComparison(jr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ai extends OE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ai(e,t)}matches(e){return zE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zE(n){return n.op==="and"}function BE(n){return fP(n)&&zE(n)}function fP(n){for(const e of n.filters)if(e instanceof ai)return!1;return!0}function sm(n){if(n instanceof Ut)return n.field.canonicalString()+n.op.toString()+ea(n.value);if(BE(n))return n.filters.map((e=>sm(e))).join(",");{const e=n.filters.map((t=>sm(t))).join(",");return`${n.op}(${e})`}}function FE(n,e){return n instanceof Ut?(function(s,r){return r instanceof Ut&&s.op===r.op&&s.field.isEqual(r.field)&&Li(s.value,r.value)})(n,e):n instanceof ai?(function(s,r){return r instanceof ai&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((l,c,d)=>l&&FE(c,r.filters[d])),!0):!1})(n,e):void xe(19439)}function HE(n){return n instanceof Ut?(function(t){return`${t.field.canonicalString()} ${t.op} ${ea(t.value)}`})(n):n instanceof ai?(function(t){return t.op.toString()+" {"+t.getFilters().map(HE).join(" ,")+"}"})(n):"Filter"}class dP extends Ut{constructor(e,t,s){super(e,t,s),this.key=Ae.fromName(s.referenceValue)}matches(e){const t=Ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class hP extends Ut{constructor(e,t){super(e,"in",t),this.keys=GE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class mP extends Ut{constructor(e,t){super(e,"not-in",t),this.keys=GE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function GE(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Ae.fromName(s.referenceValue)))}class pP extends Ut{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vm(t)&&kl(t.arrayValue,this.value)}}class gP extends Ut{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&kl(this.value.arrayValue,t)}}class yP extends Ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(kl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!kl(this.value.arrayValue,t)}}class _P extends Ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>kl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e,t=null,s=[],r=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=r,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function Q0(n,e=null,t=[],s=[],r=null,l=null,c=null){return new vP(n,e,t,s,r,l,c)}function Um(n){const e=be(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>sm(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),cf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>ea(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>ea(s))).join(",")),e.Te=t}return e.Te}function Lm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!cP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!FE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!K0(n.startAt,e.startAt)&&K0(n.endAt,e.endAt)}function om(n){return Ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,t=null,s=[],r=[],l=null,c="F",d=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=r,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function TP(n,e,t,s,r,l,c,d){return new Hl(n,e,t,s,r,l,c,d)}function km(n){return new Hl(n)}function $0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function YE(n){return n.collectionGroup!==null}function bl(n){const e=be(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new zt(Zt.comparator);return c.filters.forEach((y=>{y.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Wc(l,s))})),t.has(Zt.keyField().canonicalString())||e.Ie.push(new Wc(Zt.keyField(),s))}return e.Ie}function Di(n){const e=be(n);return e.Ee||(e.Ee=EP(e,bl(n))),e.Ee}function EP(n,e){if(n.limitType==="F")return Q0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new Wc(r.field,l)}));const t=n.endAt?new Xc(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Xc(n.startAt.position,n.startAt.inclusive):null;return Q0(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function rm(n,e){const t=n.filters.concat([e]);return new Hl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function am(n,e,t){return new Hl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function df(n,e){return Lm(Di(n),Di(e))&&n.limitType===e.limitType}function JE(n){return`${Um(Di(n))}|lt:${n.limitType}`}function zr(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((r=>HE(r))).join(", ")}]`),cf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((r=>ea(r))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((r=>ea(r))).join(",")),`Target(${s})`})(Di(n))}; limitType=${n.limitType})`}function hf(n,e){return e.isFoundDocument()&&(function(s,r){const l=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ae.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,r){for(const l of bl(s))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,r){for(const l of s.filters)if(!l.matches(r))return!1;return!0})(n,e)&&(function(s,r){return!(s.startAt&&!(function(c,d,y){const p=J0(c,d,y);return c.inclusive?p<=0:p<0})(s.startAt,bl(s),r)||s.endAt&&!(function(c,d,y){const p=J0(c,d,y);return c.inclusive?p>=0:p>0})(s.endAt,bl(s),r))})(n,e)}function SP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function KE(n){return(e,t)=>{let s=!1;for(const r of bl(n)){const l=AP(r,e,t);if(l!==0)return l;s=s||r.field.isKeyField()}return 0}}function AP(n,e,t){const s=n.field.isKeyField()?Ae.comparator(e.key,t.key):(function(l,c,d){const y=c.data.field(l),p=d.data.field(l);return y!==null&&p!==null?jr(y,p):xe(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return xe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[r,l]of s)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[t]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){so(this.inner,((t,s)=>{for(const[r,l]of s)e(r,l)}))}isEmpty(){return NE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=new gt(Ae.comparator);function as(){return CP}const QE=new gt(Ae.comparator);function Al(...n){let e=QE;for(const t of n)e=e.insert(t.key,t);return e}function $E(n){let e=QE;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function zo(){return Nl()}function XE(){return Nl()}function Nl(){return new Yo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const xP=new gt(Ae.comparator),IP=new zt(Ae.comparator);function Be(...n){let e=IP;for(const t of n)e=e.add(t);return e}const RP=new zt(ze);function wP(){return RP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kc(e)?"-0":e}}function WE(n){return{integerValue:""+n}}function ZE(n,e){return nP(e)?WE(e):qm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(){this._=void 0}}function bP(n,e,t){return n instanceof ql?(function(r,l){const c={fields:{[PE]:{stringValue:DE},[UE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&Pm(l)&&(l=ff(l)),l&&(c.fields[VE]=l),{mapValue:c}})(t,e):n instanceof Ol?eS(n,e):n instanceof zl?tS(n,e):(function(r,l){const c=jE(r,l),d=X0(c)+X0(r.Ae);return im(c)&&im(r.Ae)?WE(d):qm(r.serializer,d)})(n,e)}function NP(n,e,t){return n instanceof Ol?eS(n,e):n instanceof zl?tS(n,e):t}function jE(n,e){return n instanceof Bl?(function(s){return im(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class ql extends mf{}class Ol extends mf{constructor(e){super(),this.elements=e}}function eS(n,e){const t=nS(e);for(const s of n.elements)t.some((r=>Li(r,s)))||t.push(s);return{arrayValue:{values:t}}}class zl extends mf{constructor(e){super(),this.elements=e}}function tS(n,e){let t=nS(e);for(const s of n.elements)t=t.filter((r=>!Li(r,s)));return{arrayValue:{values:t}}}class Bl extends mf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function X0(n){return At(n.integerValue||n.doubleValue)}function nS(n){return Vm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,t){this.field=e,this.transform=t}}function MP(n,e){return n.field.isEqual(e.field)&&(function(s,r){return s instanceof Ol&&r instanceof Ol||s instanceof zl&&r instanceof zl?Zr(s.elements,r.elements,Li):s instanceof Bl&&r instanceof Bl?Li(s.Ae,r.Ae):s instanceof ql&&r instanceof ql})(n.transform,e.transform)}class DP{constructor(e,t){this.version=e,this.transformResults=t}}class Jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class pf{}function sS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Om(n.key,Jn.none()):new Gl(n.key,n.data,Jn.none());{const t=n.data,s=yn.empty();let r=new zt(Zt.comparator);for(let l of e.fields)if(!r.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),r=r.add(l)}return new oo(n.key,s,new bn(r.toArray()),Jn.none())}}function PP(n,e,t){n instanceof Gl?(function(r,l,c){const d=r.value.clone(),y=Z0(r.fieldTransforms,l,c.transformResults);d.setAll(y),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof oo?(function(r,l,c){if(!Lc(r.precondition,l))return void l.convertToUnknownDocument(c.version);const d=Z0(r.fieldTransforms,l,c.transformResults),y=l.data;y.setAll(oS(r)),y.setAll(d),l.convertToFoundDocument(c.version,y).setHasCommittedMutations()})(n,e,t):(function(r,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Ml(n,e,t,s){return n instanceof Gl?(function(l,c,d,y){if(!Lc(l.precondition,c))return d;const p=l.value.clone(),v=j0(l.fieldTransforms,y,c);return p.setAll(v),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(n,e,t,s):n instanceof oo?(function(l,c,d,y){if(!Lc(l.precondition,c))return d;const p=j0(l.fieldTransforms,y,c),v=c.data;return v.setAll(oS(l)),v.setAll(p),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,s):(function(l,c,d){return Lc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function VP(n,e){let t=null;for(const s of n.fieldTransforms){const r=e.data.field(s.field),l=jE(s.transform,r||null);l!=null&&(t===null&&(t=yn.empty()),t.set(s.field,l))}return t||null}function W0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Zr(s,r,((l,c)=>MP(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Gl extends pf{constructor(e,t,s,r=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class oo extends pf{constructor(e,t,s,r,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function oS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function Z0(n,e,t){const s=new Map;je(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const l=n[r],c=l.transform,d=e.data.field(l.field);s.set(l.field,NP(c,d,t[r]))}return s}function j0(n,e,t){const s=new Map;for(const r of n){const l=r.transform,c=t.data.field(r.field);s.set(r.field,bP(l,c,e))}return s}class Om extends pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UP extends pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,t,s,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&PP(l,e,s[r])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Ml(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Ml(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=XE();return this.mutations.forEach((r=>{const l=e.get(r.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(r.key)?null:d;const y=sS(c,d);y!==null&&s.set(r.key,y),c.isValidDocument()||c.convertToNoDocument(Re.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Be())}isEqual(e){return this.batchId===e.batchId&&Zr(this.mutations,e.mutations,((t,s)=>W0(t,s)))&&Zr(this.baseMutations,e.baseMutations,((t,s)=>W0(t,s)))}}class zm{constructor(e,t,s,r){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=r}static from(e,t,s){je(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return xP})();const l=e.mutations;for(let c=0;c<l.length;c++)r=r.insert(l[c].key,s[c].version);return new zm(e,t,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,Ge;function OP(n){switch(n){case ie.OK:return xe(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return xe(15467,{code:n})}}function rS(n){if(n===void 0)return rs("GRPC error has no .code"),ie.UNKNOWN;switch(n){case Vt.OK:return ie.OK;case Vt.CANCELLED:return ie.CANCELLED;case Vt.UNKNOWN:return ie.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return ie.INTERNAL;case Vt.UNAVAILABLE:return ie.UNAVAILABLE;case Vt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Vt.NOT_FOUND:return ie.NOT_FOUND;case Vt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Vt.ABORTED:return ie.ABORTED;case Vt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Vt.DATA_LOSS:return ie.DATA_LOSS;default:return xe(39323,{code:n})}}(Ge=Vt||(Vt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=new $s([4294967295,4294967295],0);function eT(n){const e=zP().encode(n),t=new vE;return t.update(e),new Uint8Array(t.digest())}function tT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new $s([t,s],0),new $s([r,l],0)]}class Bm{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Cl(`Invalid padding: ${t}`);if(s<0)throw new Cl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Cl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Cl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=$s.fromNumber(this.ge)}ye(e,t,s){let r=e.add(t.multiply($s.fromNumber(s)));return r.compare(BP)===1&&(r=new $s([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=eT(e),[s,r]=tT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,r,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Bm(l,r,t);return s.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=eT(e),[s,r]=tT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,r,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Cl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,t,s,r,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const r=new Map;return r.set(e,Yl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new gf(Re.min(),r,new gt(ze),as(),Be())}}class Yl{constructor(e,t,s,r,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Yl(s,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t,s,r){this.be=e,this.removedTargetIds=t,this.key=s,this.De=r}}class aS{constructor(e,t){this.targetId=e,this.Ce=t}}class lS{constructor(e,t,s=jt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=r}}class nT{constructor(){this.ve=0,this.Fe=iT(),this.Me=jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),t=Be(),s=Be();return this.Fe.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:s=s.add(r);break;default:xe(38017,{changeType:l})}})),new Yl(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=iT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class FP{constructor(e){this.Ge=e,this.ze=new Map,this.je=as(),this.Je=bc(),this.He=bc(),this.Ye=new gt(ze)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,s=e.Ce.count,r=this.ot(t);if(r){const l=r.target;if(om(l))if(s===0){const c=new Ae(l.path);this.et(t,c,sn.newNoDocument(c,Re.min()))}else je(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const d=this.ut(e),y=d?this.ct(d,e,c):1;if(y!==0){this.it(t);const p=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:l=0}=t;let c,d;try{c=js(s).toUint8Array()}catch(y){if(y instanceof ME)return Wr("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{d=new Bm(c,r,l)}catch(y){return Wr(y instanceof Cl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return d.ge===0?null:d}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let r=0;return s.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&om(d.target)){const y=new Ae(d.target.path);this.It(y).has(c)||this.Et(c,y)||this.et(c,y,sn.newNoDocument(y,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=Be();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((y=>{const p=this.ot(y);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const r=new gf(e,t,this.Ye,this.je,s);return this.je=as(),this.Je=bc(),this.He=bc(),this.Ye=new gt(ze),r}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new nT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new zt(ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new zt(ze),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function bc(){return new gt(Ae.comparator)}function iT(){return new gt(Ae.comparator)}const HP={asc:"ASCENDING",desc:"DESCENDING"},GP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YP={and:"AND",or:"OR"};class JP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function lm(n,e){return n.useProto3Json||cf(e)?e:{value:e}}function Zc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function KP(n,e){return Zc(n,e.toTimestamp())}function Pi(n){return je(!!n,49232),Re.fromTimestamp((function(t){const s=Zs(t);return new ut(s.seconds,s.nanos)})(n))}function Fm(n,e){return um(n,e).canonicalString()}function um(n,e){const t=(function(r){return new lt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function cS(n){const e=lt.fromString(n);return je(pS(e),10190,{key:e.toString()}),e}function cm(n,e){return Fm(n.databaseId,e.path)}function Lh(n,e){const t=cS(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ae(dS(t))}function fS(n,e){return Fm(n.databaseId,e)}function QP(n){const e=cS(n);return e.length===4?lt.emptyPath():dS(e)}function fm(n){return new lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dS(n){return je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function sT(n,e,t){return{name:cm(n,e),fields:t.value.mapValue.fields}}function $P(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:xe(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(p,v){return p.useProto3Json?(je(v===void 0||typeof v=="string",58123),jt.fromBase64String(v||"")):(je(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),jt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(p){const v=p.code===void 0?ie.UNKNOWN:rS(p.code);return new pe(v,p.message||"")})(c);t=new lS(s,r,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Lh(n,s.document.name),l=Pi(s.document.updateTime),c=s.document.createTime?Pi(s.document.createTime):Re.min(),d=new yn({mapValue:{fields:s.document.fields}}),y=sn.newFoundDocument(r,l,c,d),p=s.targetIds||[],v=s.removedTargetIds||[];t=new kc(p,v,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Lh(n,s.document),l=s.readTime?Pi(s.readTime):Re.min(),c=sn.newNoDocument(r,l),d=s.removedTargetIds||[];t=new kc([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Lh(n,s.document),l=s.removedTargetIds||[];t=new kc([],l,r,null)}else{if(!("filter"in e))return xe(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:l}=s,c=new qP(r,l),d=s.targetId;t=new aS(d,c)}}return t}function XP(n,e){let t;if(e instanceof Gl)t={update:sT(n,e.key,e.value)};else if(e instanceof Om)t={delete:cm(n,e.key)};else if(e instanceof oo)t={update:sT(n,e.key,e.data),updateMask:oV(e.fieldMask)};else{if(!(e instanceof UP))return xe(16599,{Vt:e.type});t={verify:cm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const d=c.transform;if(d instanceof ql)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ol)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof zl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Bl)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw xe(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:KP(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:xe(27497)})(n,e.precondition)),t}function WP(n,e){return n&&n.length>0?(je(e!==void 0,14353),n.map((t=>(function(r,l){let c=r.updateTime?Pi(r.updateTime):Pi(l);return c.isEqual(Re.min())&&(c=Pi(l)),new DP(c,r.transformResults||[])})(t,e)))):[]}function ZP(n,e){return{documents:[fS(n,e.path)]}}function jP(n,e){const t={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=fS(n,r);const l=(function(p){if(p.length!==0)return mS(ai.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((v=>(function(S){return{field:Br(S.field),direction:nV(S.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=lm(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:r}}function eV(n){let e=QP(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let r=null;if(s>0){je(s===1,65062);const v=t.from[0];v.allDescendants?r=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(T){const S=hS(T);return S instanceof ai&&BE(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((S=>(function(O){return new Wc(Fr(O.field),(function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let S;return S=typeof T=="object"?T.value:T,cf(S)?null:S})(t.limit));let y=null;t.startAt&&(y=(function(T){const S=!!T.before,R=T.values||[];return new Xc(R,S)})(t.startAt));let p=null;return t.endAt&&(p=(function(T){const S=!T.before,R=T.values||[];return new Xc(R,S)})(t.endAt)),TP(e,r,c,l,d,"F",y,p)}function tV(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function hS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Fr(t.unaryFilter.field);return Ut.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Fr(t.unaryFilter.field);return Ut.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Fr(t.unaryFilter.field);return Ut.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Fr(t.unaryFilter.field);return Ut.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ut.create(Fr(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ai.create(t.compositeFilter.filters.map((s=>hS(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return xe(1026)}})(t.compositeFilter.op))})(n):xe(30097,{filter:n})}function nV(n){return HP[n]}function iV(n){return GP[n]}function sV(n){return YP[n]}function Br(n){return{fieldPath:n.canonicalString()}}function Fr(n){return Zt.fromServerFormat(n.fieldPath)}function mS(n){return n instanceof Ut?(function(t){if(t.op==="=="){if(Y0(t.value))return{unaryFilter:{field:Br(t.field),op:"IS_NAN"}};if(G0(t.value))return{unaryFilter:{field:Br(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Y0(t.value))return{unaryFilter:{field:Br(t.field),op:"IS_NOT_NAN"}};if(G0(t.value))return{unaryFilter:{field:Br(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Br(t.field),op:iV(t.op),value:t.value}}})(n):n instanceof ai?(function(t){const s=t.getFilters().map((r=>mS(r)));return s.length===1?s[0]:{compositeFilter:{op:sV(t.op),filters:s}}})(n):xe(54877,{filter:n})}function oV(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function pS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,t,s,r,l=Re.min(),c=Re.min(),d=jt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=y}withSequenceNumber(e){return new Js(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.yt=e}}function aV(n){const e=eV({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?am(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(){this.Cn=new uV}addToCollectionParentIndex(e,t){return this.Cn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Ws.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Ws.min())}updateCollectionGroup(e,t,s){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class uV{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t]||new zt(lt.comparator),l=!r.has(s);return this.index[t]=r.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t];return r&&r.has(s)}getEntries(e){return(this.index[e]||new zt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gS=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(gS,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ta(0)}static cr(){return new ta(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="LruGarbageCollector",cV=1048576;function aT([n,e],[t,s]){const r=ze(n,t);return r===0?ze(e,s):r}class fV{constructor(e){this.Ir=e,this.buffer=new zt(aT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();aT(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class dV{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(rT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ua(t)?ge(rT,"Ignoring IndexedDB error during garbage collection: ",t):await la(t)}await this.Vr(3e5)}))}}class hV{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(uf.ce);const s=new fV(t);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(oT)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,r,l,c,d,y,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,c=Date.now(),this.nthSequenceNumber(e,r)))).next((T=>(s=T,d=Date.now(),this.removeTargets(e,s,t)))).next((T=>(l=T,y=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(p=Date.now(),Or()<=Ye.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${r} in `+(d-c)+`ms
	Removed ${l} targets in `+(y-d)+`ms
	Removed ${T} documents in `+(p-y)+`ms
Total Duration: ${p-v}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:T}))))}}function mV(n,e){return new hV(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(){this.changes=new Yo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?oe.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,t,s,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(s!==null&&Ml(s.mutation,r,bn.empty(),ut.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Be()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Be()){const r=zo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,s).next((l=>{let c=Al();return l.forEach(((d,y)=>{c=c.insert(d,y.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=zo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Be())))}populateOverlays(e,t,s){const r=[];return s.forEach((l=>{t.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,s,r){let l=as();const c=Nl(),d=(function(){return Nl()})();return t.forEach(((y,p)=>{const v=s.get(p.key);r.has(p.key)&&(v===void 0||v.mutation instanceof oo)?l=l.insert(p.key,p):v!==void 0?(c.set(p.key,v.mutation.getFieldMask()),Ml(v.mutation,p,v.mutation.getFieldMask(),ut.now())):c.set(p.key,bn.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((p,v)=>c.set(p,v))),t.forEach(((p,v)=>d.set(p,new gV(v,c.get(p)??null)))),d)))}recalculateAndSaveOverlays(e,t){const s=Nl();let r=new gt(((c,d)=>c-d)),l=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((y=>{const p=t.get(y);if(p===null)return;let v=s.get(y)||bn.empty();v=d.applyToLocalView(p,v),s.set(y,v);const T=(r.get(d.batchId)||Be()).add(y);r=r.insert(d.batchId,T)}))})).next((()=>{const c=[],d=r.getReverseIterator();for(;d.hasNext();){const y=d.getNext(),p=y.key,v=y.value,T=XE();v.forEach((S=>{if(!l.has(S)){const R=sS(t.get(S),s.get(S));R!==null&&T.set(S,R),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,T))}return oe.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,r){return(function(c){return Ae.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):YE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,r):this.getDocumentsMatchingCollectionQuery(e,t,s,r)}getNextDocuments(e,t,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,r).next((l=>{const c=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,r-l.size):oe.resolve(zo());let d=Vl,y=l;return c.next((p=>oe.forEach(p,((v,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(v)?oe.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{y=y.insert(v,S)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,y,p,Be()))).next((v=>({batchId:d,changes:$E(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ae(t)).next((s=>{let r=Al();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,r){const l=t.collectionGroup;let c=Al();return this.indexManager.getCollectionParents(e,l).next((d=>oe.forEach(d,(y=>{const p=(function(T,S){return new Hl(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,s,r).next((v=>{v.forEach(((T,S)=>{c=c.insert(T,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,r)))).next((c=>{l.forEach(((y,p)=>{const v=p.getKey();c.get(v)===null&&(c=c.insert(v,sn.newInvalidDocument(v)))}));let d=Al();return c.forEach(((y,p)=>{const v=l.get(y);v!==void 0&&Ml(v.mutation,p,bn.empty(),ut.now()),hf(t,p)&&(d=d.insert(y,p))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return oe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Pi(r.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:aV(r.bundledQuery),readTime:Pi(r.readTime)}})(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(){this.overlays=new gt(Ae.comparator),this.qr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const s=zo();return oe.forEach(t,(r=>this.getOverlay(e,r).next((l=>{l!==null&&s.set(r,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((r,l)=>{this.St(e,t,l)})),oe.resolve()}removeOverlaysForBatchId(e,t,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),oe.resolve()}getOverlaysForCollection(e,t,s){const r=zo(),l=t.length+1,c=new Ae(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const y=d.getNext().value,p=y.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&y.largestBatchId>s&&r.set(y.getKey(),y)}return oe.resolve(r)}getOverlaysForCollectionGroup(e,t,s,r){let l=new gt(((p,v)=>p-v));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let v=l.get(p.largestBatchId);v===null&&(v=zo(),l=l.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const d=zo(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((p,v)=>d.set(p,v))),!(d.size()>=r)););return oe.resolve(d)}St(e,t,s){const r=this.overlays.get(s.key);if(r!==null){const c=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new kP(t,s));let l=this.qr.get(t);l===void 0&&(l=Be(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(){this.Qr=new zt(Gt.$r),this.Ur=new zt(Gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Gt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Gt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ae(new lt([])),s=new Gt(t,e),r=new Gt(t,e+1),l=[];return this.Ur.forEachInRange([s,r],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ae(new lt([])),s=new Gt(t,e),r=new Gt(t,e+1);let l=Be();return this.Ur.forEachInRange([s,r],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Gt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Gt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ae.comparator(e.key,t.key)||ze(e.Yr,t.Yr)}static Kr(e,t){return ze(e.Yr,t.Yr)||Ae.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new zt(Gt.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,r){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new LP(l,t,s,r);this.mutationQueue.push(c);for(const d of r)this.Zr=this.Zr.add(new Gt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return oe.resolve(c)}lookupMutationBatch(e,t){return oe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,r=this.ei(s),l=r<0?0:r;return oe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?Dm:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Gt(t,0),r=new Gt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,r],(c=>{const d=this.Xr(c.Yr);l.push(d)})),oe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new zt(ze);return t.forEach((r=>{const l=new Gt(r,0),c=new Gt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{s=s.add(d.Yr)}))})),oe.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,r=s.length+1;let l=s;Ae.isDocumentKey(l)||(l=l.child(""));const c=new Gt(new Ae(l),0);let d=new zt(ze);return this.Zr.forEachWhile((y=>{const p=y.key.path;return!!s.isPrefixOf(p)&&(p.length===r&&(d=d.add(y.Yr)),!0)}),c),oe.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){je(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return oe.forEach(t.mutations,(r=>{const l=new Gt(r.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Gt(t,0),r=this.Zr.firstAfterOrEqual(s);return oe.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e){this.ri=e,this.docs=(function(){return new gt(Ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,r=this.docs.get(s),l=r?r.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return oe.resolve(s?s.document.mutableCopy():sn.newInvalidDocument(t))}getEntries(e,t){let s=as();return t.forEach((r=>{const l=this.docs.get(r);s=s.insert(r,l?l.document.mutableCopy():sn.newInvalidDocument(r))})),oe.resolve(s)}getDocumentsMatchingQuery(e,t,s,r){let l=as();const c=t.path,d=new Ae(c.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(d);for(;y.hasNext();){const{key:p,value:{document:v}}=y.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||ZD(WD(v),s)<=0||(r.has(v.key)||hf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return oe.resolve(l)}getAllFromCollectionGroup(e,t,s,r){xe(9500)}ii(e,t){return oe.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new AV(this)}getSize(e){return oe.resolve(this.size)}}class AV extends pV{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),oe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e){this.persistence=e,this.si=new Yo((t=>Um(t)),Lm),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new Hm,this.targetCount=0,this.ai=ta.ur()}forEachTarget(e,t){return this.si.forEach(((s,r)=>t(r))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),oe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ta(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Pr(t),oe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,s){let r=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)})),oe.waitFor(l).next((()=>r))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return oe.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),oe.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const r=this.persistence.referenceDelegate,l=[];return r&&t.forEach((c=>{l.push(r.markPotentiallyOrphaned(e,c))})),oe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return oe.resolve(s)}containsKey(e,t){return oe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,t){this.ui={},this.overlays={},this.ci=new uf(0),this.li=!1,this.li=!0,this.hi=new TV,this.referenceDelegate=e(this),this.Pi=new CV(this),this.indexManager=new lV,this.remoteDocumentCache=(function(r){return new SV(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new rV(t),this.Ii=new _V(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new EV(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ge("MemoryPersistence","Starting transaction:",e);const r=new xV(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((l=>this.referenceDelegate.di(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Ai(e,t){return oe.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class xV extends eP{constructor(e){super(),this.currentSequenceNumber=e}}class Gm{constructor(e){this.persistence=e,this.Ri=new Hm,this.Vi=null}static mi(e){return new Gm(e)}get fi(){if(this.Vi)return this.Vi;throw xe(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),oe.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,(s=>{const r=Ae.fromPath(s);return this.gi(e,r).next((l=>{l||t.removeEntry(r,Re.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class jc{constructor(e,t){this.persistence=e,this.pi=new Yo((s=>iP(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=mV(this,t)}static mi(e,t){return new jc(e,t)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((r=>s+r))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return oe.forEach(this.pi,((s,r)=>this.br(e,s,r).next((l=>l?oe.resolve():t(r)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.ii(e,(c=>this.br(e,c,t).next((d=>{d||(s++,l.removeEntry(c,Re.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Vc(e.data.value)),t}br(e,t,s){return oe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return oe.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,t,s,r){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=r}static As(e,t){let s=Be(),r=Be();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new Ym(e,t.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return v2()?8:tP(y2())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,r){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,r,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new IV;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,s,r){return s.documentReadCount<this.fs?(Or()<=Ye.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",zr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):(Or()<=Ye.DEBUG&&ge("QueryEngine","Query:",zr(t),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Or()<=Ye.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",zr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Di(t))):oe.resolve())}ys(e,t){if($0(t))return oe.resolve(null);let s=Di(t);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=am(t,null,"F"),s=Di(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=Be(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,s).next((y=>{const p=this.Ds(t,d);return this.Cs(t,p,c,y.readTime)?this.ys(e,am(t,null,"F")):this.vs(e,p,t,y)}))))})))))}ws(e,t,s,r){return $0(t)||r.isEqual(Re.min())?oe.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,r)?oe.resolve(null):(Or()<=Ye.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),zr(t)),this.vs(e,c,t,XD(r,Vl)).next((d=>d)))}))}Ds(e,t){let s=new zt(KE(e));return t.forEach(((r,l)=>{hf(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,r){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Ss(e,t,s){return Or()<=Ye.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",zr(t)),this.ps.getDocumentsMatchingQuery(e,t,Ws.min(),s)}vs(e,t,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="LocalStore",wV=3e8;class bV{constructor(e,t,s,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new gt(ze),this.xs=new Yo((l=>Um(l)),Lm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function NV(n,e,t,s){return new bV(n,e,t,s)}async function _S(n,e){const t=be(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return t.mutationQueue.getAllMutationBatches(s).next((l=>(r=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],d=[];let y=Be();for(const p of r){c.push(p.batchId);for(const v of p.mutations)y=y.add(v.key)}for(const p of l){d.push(p.batchId);for(const v of p.mutations)y=y.add(v.key)}return t.localDocuments.getDocuments(s,y).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:d})))}))}))}function MV(n,e){const t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,y,p,v){const T=p.batch,S=T.keys();let R=oe.resolve();return S.forEach((O=>{R=R.next((()=>v.getEntry(y,O))).next((B=>{const J=p.docVersions.get(O);je(J!==null,48541),B.version.compareTo(J)<0&&(T.applyToRemoteDocument(B,p),B.isValidDocument()&&(B.setReadTime(p.commitVersion),v.addEntry(B)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(y,T)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let y=Be();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(y=y.add(d.batch.mutations[p].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(s,r)))}))}function vS(n){const e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function DV(n,e){const t=be(n),s=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const d=[];e.targetChanges.forEach(((v,T)=>{const S=r.get(T);if(!S)return;d.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,T))));let R=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?R=R.withResumeToken(jt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,s)),r=r.insert(T,R),(function(B,J,X){return B.resumeToken.approximateByteSize()===0||J.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=wV?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0})(S,R,v)&&d.push(t.Pi.updateTargetData(l,R))}));let y=as(),p=Be();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(PV(l,c,e.documentUpdates).next((v=>{y=v.ks,p=v.qs}))),!s.isEqual(Re.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(v)}return oe.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,y,p))).next((()=>y))})).then((l=>(t.Ms=r,l)))}function PV(n,e,t){let s=Be(),r=Be();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=as();return t.forEach(((d,y)=>{const p=l.get(d);y.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(d)),y.isNoDocument()&&y.version.isEqual(Re.min())?(e.removeEntry(d,y.readTime),c=c.insert(d,y)):!p.isValidDocument()||y.version.compareTo(p.version)>0||y.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(y),c=c.insert(d,y)):ge(Jm,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",y.version)})),{ks:c,qs:r}}))}function VV(n,e){const t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Dm),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function UV(n,e){const t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return t.Pi.getTargetData(s,e).next((l=>l?(r=l,oe.resolve(r)):t.Pi.allocateTargetId(s).next((c=>(r=new Js(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=t.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function dm(n,e,t){const s=be(n),r=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!ua(c))throw c;ge(Jm,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function lT(n,e,t){const s=be(n);let r=Re.min(),l=Be();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(y,p,v){const T=be(y),S=T.xs.get(v);return S!==void 0?oe.resolve(T.Ms.get(S)):T.Pi.getTargetData(p,v)})(s,c,Di(e)).next((d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,d.targetId).next((y=>{l=y}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?r:Re.min(),t?l:Be()))).next((d=>(LV(s,SP(e),d),{documents:d,Qs:l})))))}function LV(n,e,t){let s=n.Os.get(e)||Re.min();t.forEach(((r,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class uT{constructor(){this.activeTargetIds=wP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kV{constructor(){this.Mo=new uT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new uT,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="ConnectivityMonitor";class fT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(cT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(cT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nc=null;function hm(){return Nc===null?Nc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Nc++,"0x"+Nc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh="RestConnection",OV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zV{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===Qc?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,t,s,r,l){const c=hm(),d=this.zo(e,t.toUriEncodedString());ge(kh,`Sending RPC '${e}' ${c}:`,d,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,r,l);const{host:p}=new URL(d),v=wm(p);return this.Jo(e,d,y,s,v).then((T=>(ge(kh,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw Wr(kh,`RPC '${e}' ${c} failed with error: `,T,"url: ",d,"request:",s),T}))}Ho(e,t,s,r,l,c){return this.Go(e,t,s,r,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+aa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,l)=>e[l]=r)),s&&s.headers.forEach(((r,l)=>e[l]=r))}zo(e,t){const s=OV[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class FV extends zV{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,r,l){const c=hm();return new Promise(((d,y)=>{const p=new TE;p.setWithCredentials(!0),p.listenOnce(EE.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Pc.NO_ERROR:const T=p.getResponseJson();ge(tn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case Pc.TIMEOUT:ge(tn,`RPC '${e}' ${c} timed out`),y(new pe(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Pc.HTTP_ERROR:const S=p.getStatus();if(ge(tn,`RPC '${e}' ${c} failed with status:`,S,"response text:",p.getResponseText()),S>0){let R=p.getResponseJson();Array.isArray(R)&&(R=R[0]);const O=R==null?void 0:R.error;if(O&&O.status&&O.message){const B=(function(X){const te=X.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(te)>=0?te:ie.UNKNOWN})(O.status);y(new pe(B,O.message))}else y(new pe(ie.UNKNOWN,"Server responded with status "+p.getStatus()))}else y(new pe(ie.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ge(tn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(r);ge(tn,`RPC '${e}' ${c} sending request:`,r),p.send(t,"POST",v,s,15)}))}T_(e,t,s){const r=hm(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=CE(),d=AE(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(y.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,t,s),y.encodeInitMessageHeaders=!0;const v=l.join("");ge(tn,`Creating RPC '${e}' stream ${r}: ${v}`,y);const T=c.createWebChannel(v,y);this.I_(T);let S=!1,R=!1;const O=new BV({Yo:J=>{R?ge(tn,`Not sending because RPC '${e}' stream ${r} is closed:`,J):(S||(ge(tn,`Opening RPC '${e}' stream ${r} transport.`),T.open(),S=!0),ge(tn,`RPC '${e}' stream ${r} sending:`,J),T.send(J))},Zo:()=>T.close()}),B=(J,X,te)=>{J.listen(X,(j=>{try{te(j)}catch(le){setTimeout((()=>{throw le}),0)}}))};return B(T,Sl.EventType.OPEN,(()=>{R||(ge(tn,`RPC '${e}' stream ${r} transport opened.`),O.o_())})),B(T,Sl.EventType.CLOSE,(()=>{R||(R=!0,ge(tn,`RPC '${e}' stream ${r} transport closed`),O.a_(),this.E_(T))})),B(T,Sl.EventType.ERROR,(J=>{R||(R=!0,Wr(tn,`RPC '${e}' stream ${r} transport errored. Name:`,J.name,"Message:",J.message),O.a_(new pe(ie.UNAVAILABLE,"The operation could not be completed")))})),B(T,Sl.EventType.MESSAGE,(J=>{var X;if(!R){const te=J.data[0];je(!!te,16349);const j=te,le=(j==null?void 0:j.error)||((X=j[0])==null?void 0:X.error);if(le){ge(tn,`RPC '${e}' stream ${r} received error:`,le);const fe=le.status;let Z=(function(b){const P=Vt[b];if(P!==void 0)return rS(P)})(fe),M=le.message;Z===void 0&&(Z=ie.INTERNAL,M="Unknown error status: "+fe+" with message "+le.message),R=!0,O.a_(new pe(Z,M)),T.close()}else ge(tn,`RPC '${e}' stream ${r} received:`,te),O.u_(te)}})),B(d,SE.STAT_EVENT,(J=>{J.stat===em.PROXY?ge(tn,`RPC '${e}' stream ${r} detected buffering proxy`):J.stat===em.NOPROXY&&ge(tn,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{O.__()}),0),O}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function qh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(n){return new JP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,t,s=1e3,r=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=r,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-s);r>0&&ge("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="PersistentStream";class ES{constructor(e,t,s,r,l,c,d,y){this.Mi=e,this.S_=s,this.b_=r,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new TS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(rs(t.toString()),rs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===t&&this.G_(s,r)}),(s=>{e((()=>{const r=new pe(ie.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(dT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ge(dT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class HV extends ES{constructor(e,t,s,r,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,r,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=$P(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Re.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Re.min():c.readTime?Pi(c.readTime):Re.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=fm(this.serializer),t.addTarget=(function(l,c){let d;const y=c.target;if(d=om(y)?{documents:ZP(l,y)}:{query:jP(l,y).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=uS(l,c.resumeToken);const p=lm(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(Re.min())>0){d.readTime=Zc(l,c.snapshotVersion.toTimestamp());const p=lm(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const s=tV(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=fm(this.serializer),t.removeTarget=e,this.q_(t)}}class GV extends ES{constructor(e,t,s,r,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,r,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=WP(e.writeResults,e.commitTime),s=Pi(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=fm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>XP(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{}class JV extends YV{constructor(e,t,s,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new pe(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,um(t,s),r,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(ie.UNKNOWN,l.toString())}))}Ho(e,t,s,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,um(t,s),r,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(ie.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class KV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(rs(t),this.aa=!1):ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="RemoteStore";class QV{constructor(e,t,s,r,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Jo(this)&&(ge(Ho,"Restarting streams for network reachability change."),await(async function(y){const p=be(y);p.Ea.add(4),await Jl(p),p.Ra.set("Unknown"),p.Ea.delete(4),await _f(p)})(this))}))})),this.Ra=new KV(s,r)}}async function _f(n){if(Jo(n))for(const e of n.da)await e(!0)}async function Jl(n){for(const e of n.da)await e(!1)}function SS(n,e){const t=be(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Xm(t)?$m(t):ca(t).O_()&&Qm(t,e))}function Km(n,e){const t=be(n),s=ca(t);t.Ia.delete(e),s.O_()&&AS(t,e),t.Ia.size===0&&(s.O_()?s.L_():Jo(t)&&t.Ra.set("Unknown"))}function Qm(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ca(n).Y_(e)}function AS(n,e){n.Va.Ue(e),ca(n).Z_(e)}function $m(n){n.Va=new FP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ca(n).start(),n.Ra.ua()}function Xm(n){return Jo(n)&&!ca(n).x_()&&n.Ia.size>0}function Jo(n){return be(n).Ea.size===0}function CS(n){n.Va=void 0}async function $V(n){n.Ra.set("Online")}async function XV(n){n.Ia.forEach(((e,t)=>{Qm(n,e)}))}async function WV(n,e){CS(n),Xm(n)?(n.Ra.ha(e),$m(n)):n.Ra.set("Unknown")}async function ZV(n,e,t){if(n.Ra.set("Online"),e instanceof lS&&e.state===2&&e.cause)try{await(async function(r,l){const c=l.cause;for(const d of l.targetIds)r.Ia.has(d)&&(await r.remoteSyncer.rejectListen(d,c),r.Ia.delete(d),r.Va.removeTarget(d))})(n,e)}catch(s){ge(Ho,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await ef(n,s)}else if(e instanceof kc?n.Va.Ze(e):e instanceof aS?n.Va.st(e):n.Va.tt(e),!t.isEqual(Re.min()))try{const s=await vS(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((y,p)=>{if(y.resumeToken.approximateByteSize()>0){const v=l.Ia.get(p);v&&l.Ia.set(p,v.withResumeToken(y.resumeToken,c))}})),d.targetMismatches.forEach(((y,p)=>{const v=l.Ia.get(y);if(!v)return;l.Ia.set(y,v.withResumeToken(jt.EMPTY_BYTE_STRING,v.snapshotVersion)),AS(l,y);const T=new Js(v.target,y,p,v.sequenceNumber);Qm(l,T)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(s){ge(Ho,"Failed to raise snapshot:",s),await ef(n,s)}}async function ef(n,e,t){if(!ua(e))throw e;n.Ea.add(1),await Jl(n),n.Ra.set("Offline"),t||(t=()=>vS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ge(Ho,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await _f(n)}))}function xS(n,e){return e().catch((t=>ef(n,t,e)))}async function vf(n){const e=be(n),t=to(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Dm;for(;jV(e);)try{const r=await VV(e.localStore,s);if(r===null){e.Ta.length===0&&t.L_();break}s=r.batchId,e4(e,r)}catch(r){await ef(e,r)}IS(e)&&RS(e)}function jV(n){return Jo(n)&&n.Ta.length<10}function e4(n,e){n.Ta.push(e);const t=to(n);t.O_()&&t.X_&&t.ea(e.mutations)}function IS(n){return Jo(n)&&!to(n).x_()&&n.Ta.length>0}function RS(n){to(n).start()}async function t4(n){to(n).ra()}async function n4(n){const e=to(n);for(const t of n.Ta)e.ea(t.mutations)}async function i4(n,e,t){const s=n.Ta.shift(),r=zm.from(s,e,t);await xS(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await vf(n)}async function s4(n,e){e&&to(n).X_&&await(async function(s,r){if((function(c){return OP(c)&&c!==ie.ABORTED})(r.code)){const l=s.Ta.shift();to(s).B_(),await xS(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,r))),await vf(s)}})(n,e),IS(n)&&RS(n)}async function hT(n,e){const t=be(n);t.asyncQueue.verifyOperationInProgress(),ge(Ho,"RemoteStore received new credentials");const s=Jo(t);t.Ea.add(3),await Jl(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await _f(t)}async function o4(n,e){const t=be(n);e?(t.Ea.delete(2),await _f(t)):e||(t.Ea.add(2),await Jl(t),t.Ra.set("Unknown"))}function ca(n){return n.ma||(n.ma=(function(t,s,r){const l=be(t);return l.sa(),new HV(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:$V.bind(null,n),t_:XV.bind(null,n),r_:WV.bind(null,n),H_:ZV.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Xm(n)?$m(n):n.Ra.set("Unknown")):(await n.ma.stop(),CS(n))}))),n.ma}function to(n){return n.fa||(n.fa=(function(t,s,r){const l=be(t);return l.sa(),new GV(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:t4.bind(null,n),r_:s4.bind(null,n),ta:n4.bind(null,n),na:i4.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await vf(n)):(await n.fa.stop(),n.Ta.length>0&&(ge(Ho,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,t,s,r,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=r,this.removalCallback=l,this.deferred=new ns,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,r,l){const c=Date.now()+s,d=new Wm(e,t,c,r,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zm(n,e){if(rs("AsyncQueue",`${e}: ${n}`),ua(n))return new pe(ie.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{static emptySet(e){return new $r(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ae.comparator(t.key,s.key):(t,s)=>Ae.comparator(t.key,s.key),this.keyedMap=Al(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $r)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=s.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new $r;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(){this.ga=new gt(Ae.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):xe(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class na{constructor(e,t,s,r,l,c,d,y,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=y,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,r,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new na(e,t,$r.emptySet(t),c,s,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&df(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==s[r].type||!t[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class a4{constructor(){this.queries=pT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const r=be(t),l=r.queries;r.queries=pT(),l.forEach(((c,d)=>{for(const y of d.Sa)y.onError(s)}))})(this,new pe(ie.ABORTED,"Firestore shutting down"))}}function pT(){return new Yo((n=>JE(n)),df)}async function wS(n,e){const t=be(n);let s=3;const r=e.query;let l=t.queries.get(r);l?!l.ba()&&e.Da()&&(s=2):(l=new r4,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(r,!0);break;case 1:l.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(c){const d=Zm(c,`Initialization of query '${zr(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&jm(t)}async function bS(n,e){const t=be(n),s=e.query;let r=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?r=e.Da()?0:1:!l.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function l4(n,e){const t=be(n);let s=!1;for(const r of e){const l=r.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(r)&&(s=!0);c.wa=r}}s&&jm(t)}function u4(n,e,t){const s=be(n),r=s.queries.get(e);if(r)for(const l of r.Sa)l.onError(t);s.queries.delete(e)}function jm(n){n.Ca.forEach((e=>{e.next()}))}var mm,gT;(gT=mm||(mm={})).Ma="default",gT.Cache="cache";class NS{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new na(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=na.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==mm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e){this.key=e}}class DS{constructor(e){this.key=e}}class c4{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Be(),this.mutatedKeys=Be(),this.eu=KE(e),this.tu=new $r(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new mT,r=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=r,d=!1;const y=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((v,T)=>{const S=r.get(v),R=hf(this.query,T)?T:null,O=!!S&&this.mutatedKeys.has(S.key),B=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let J=!1;S&&R?S.data.isEqual(R.data)?O!==B&&(s.track({type:3,doc:R}),J=!0):this.su(S,R)||(s.track({type:2,doc:R}),J=!0,(y&&this.eu(R,y)>0||p&&this.eu(R,p)<0)&&(d=!0)):!S&&R?(s.track({type:0,doc:R}),J=!0):S&&!R&&(s.track({type:1,doc:S}),J=!0,(y||p)&&(d=!0)),J&&(R?(c=c.add(R),l=B?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:c,iu:s,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,r){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,T)=>(function(R,O){const B=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Rt:J})}};return B(R)-B(O)})(v.type,T.type)||this.eu(v.doc,T.doc))),this.ou(s),r=r??!1;const d=t&&!r?this._u():[],y=this.Xa.size===0&&this.current&&!r?1:0,p=y!==this.Za;return this.Za=y,c.length!==0||p?{snapshot:new na(this.query,e.tu,l,c,e.mutatedKeys,y===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new mT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Be(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new DS(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new MS(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return na.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ep="SyncEngine";class f4{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class d4{constructor(e){this.key=e,this.hu=!1}}class h4{constructor(e,t,s,r,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Yo((d=>JE(d)),df),this.Iu=new Map,this.Eu=new Set,this.du=new gt(Ae.comparator),this.Au=new Map,this.Ru=new Hm,this.Vu={},this.mu=new Map,this.fu=ta.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function m4(n,e,t=!0){const s=qS(n);let r;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.lu()):r=await PS(s,e,t,!0),r}async function p4(n,e){const t=qS(n);await PS(t,e,!0,!1)}async function PS(n,e,t,s){const r=await UV(n.localStore,Di(e)),l=r.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await g4(n,e,l,c==="current",r.resumeToken)),n.isPrimaryClient&&t&&SS(n.remoteStore,r),d}async function g4(n,e,t,s,r){n.pu=(T,S,R)=>(async function(B,J,X,te){let j=J.view.ru(X);j.Cs&&(j=await lT(B.localStore,J.query,!1).then((({documents:M})=>J.view.ru(M,j))));const le=te&&te.targetChanges.get(J.targetId),fe=te&&te.targetMismatches.get(J.targetId)!=null,Z=J.view.applyChanges(j,B.isPrimaryClient,le,fe);return _T(B,J.targetId,Z.au),Z.snapshot})(n,T,S,R);const l=await lT(n.localStore,e,!0),c=new c4(e,l.Qs),d=c.ru(l.documents),y=Yl.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",r),p=c.applyChanges(d,n.isPrimaryClient,y);_T(n,t,p.au);const v=new f4(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function y4(n,e,t){const s=be(n),r=s.Tu.get(e),l=s.Iu.get(r.targetId);if(l.length>1)return s.Iu.set(r.targetId,l.filter((c=>!df(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await dm(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),t&&Km(s.remoteStore,r.targetId),pm(s,r.targetId)})).catch(la)):(pm(s,r.targetId),await dm(s.localStore,r.targetId,!0))}async function _4(n,e){const t=be(n),s=t.Tu.get(e),r=t.Iu.get(s.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Km(t.remoteStore,s.targetId))}async function v4(n,e,t){const s=I4(n);try{const r=await(function(c,d){const y=be(c),p=ut.now(),v=d.reduce(((R,O)=>R.add(O.key)),Be());let T,S;return y.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let O=as(),B=Be();return y.Ns.getEntries(R,v).next((J=>{O=J,O.forEach(((X,te)=>{te.isValidDocument()||(B=B.add(X))}))})).next((()=>y.localDocuments.getOverlayedDocuments(R,O))).next((J=>{T=J;const X=[];for(const te of d){const j=VP(te,T.get(te.key).overlayedDocument);j!=null&&X.push(new oo(te.key,j,qE(j.value.mapValue),Jn.exists(!0)))}return y.mutationQueue.addMutationBatch(R,p,X,d)})).next((J=>{S=J;const X=J.applyToLocalDocumentSet(T,B);return y.documentOverlayCache.saveOverlays(R,J.batchId,X)}))})).then((()=>({batchId:S.batchId,changes:$E(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(c,d,y){let p=c.Vu[c.currentUser.toKey()];p||(p=new gt(ze)),p=p.insert(d,y),c.Vu[c.currentUser.toKey()]=p})(s,r.batchId,t),await Kl(s,r.changes),await vf(s.remoteStore)}catch(r){const l=Zm(r,"Failed to persist write");t.reject(l)}}async function VS(n,e){const t=be(n);try{const s=await DV(t.localStore,e);e.targetChanges.forEach(((r,l)=>{const c=t.Au.get(l);c&&(je(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.hu=!0:r.modifiedDocuments.size>0?je(c.hu,14607):r.removedDocuments.size>0&&(je(c.hu,42227),c.hu=!1))})),await Kl(t,s,e)}catch(s){await la(s)}}function yT(n,e,t){const s=be(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const r=[];s.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&r.push(d.snapshot)})),(function(c,d){const y=be(c);y.onlineState=d;let p=!1;y.queries.forEach(((v,T)=>{for(const S of T.Sa)S.va(d)&&(p=!0)})),p&&jm(y)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function T4(n,e,t){const s=be(n);s.sharedClientState.updateQueryState(e,"rejected",t);const r=s.Au.get(e),l=r&&r.key;if(l){let c=new gt(Ae.comparator);c=c.insert(l,sn.newNoDocument(l,Re.min()));const d=Be().add(l),y=new gf(Re.min(),new Map,new gt(ze),c,d);await VS(s,y),s.du=s.du.remove(l),s.Au.delete(e),tp(s)}else await dm(s.localStore,e,!1).then((()=>pm(s,e,t))).catch(la)}async function E4(n,e){const t=be(n),s=e.batch.batchId;try{const r=await MV(t.localStore,e);LS(t,s,null),US(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Kl(t,r)}catch(r){await la(r)}}async function S4(n,e,t){const s=be(n);try{const r=await(function(c,d){const y=be(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return y.mutationQueue.lookupMutationBatch(p,d).next((T=>(je(T!==null,37113),v=T.keys(),y.mutationQueue.removeMutationBatch(p,T)))).next((()=>y.mutationQueue.performConsistencyCheck(p))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(p,v,d))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>y.localDocuments.getDocuments(p,v)))}))})(s.localStore,e);LS(s,e,t),US(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Kl(s,r)}catch(r){await la(r)}}function US(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function LS(n,e,t){const s=be(n);let r=s.Vu[s.currentUser.toKey()];if(r){const l=r.get(e);l&&(t?l.reject(t):l.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function pm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||kS(n,s)}))}function kS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Km(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),tp(n))}function _T(n,e,t){for(const s of t)s instanceof MS?(n.Ru.addReference(s.key,e),A4(n,s)):s instanceof DS?(ge(ep,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||kS(n,s.key)):xe(19791,{wu:s})}function A4(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(ge(ep,"New document in limbo: "+t),n.Eu.add(s),tp(n))}function tp(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ae(lt.fromString(e)),s=n.fu.next();n.Au.set(s,new d4(t)),n.du=n.du.insert(t,s),SS(n.remoteStore,new Js(Di(km(t.path)),s,"TargetPurposeLimboResolution",uf.ce))}}async function Kl(n,e,t){const s=be(n),r=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((d,y)=>{c.push(s.pu(y,e,t).then((p=>{var v;if((p||t)&&s.isPrimaryClient){const T=p?!p.fromCache:(v=t==null?void 0:t.targetChanges.get(y.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(y.targetId,T?"current":"not-current")}if(p){r.push(p);const T=Ym.As(y.targetId,p);l.push(T)}})))})),await Promise.all(c),s.Pu.H_(r),await(async function(y,p){const v=be(y);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>oe.forEach(p,(S=>oe.forEach(S.Es,(R=>v.persistence.referenceDelegate.addReference(T,S.targetId,R))).next((()=>oe.forEach(S.ds,(R=>v.persistence.referenceDelegate.removeReference(T,S.targetId,R)))))))))}catch(T){if(!ua(T))throw T;ge(Jm,"Failed to update sequence numbers: "+T)}for(const T of p){const S=T.targetId;if(!T.fromCache){const R=v.Ms.get(S),O=R.snapshotVersion,B=R.withLastLimboFreeSnapshotVersion(O);v.Ms=v.Ms.insert(S,B)}}})(s.localStore,l))}async function C4(n,e){const t=be(n);if(!t.currentUser.isEqual(e)){ge(ep,"User change. New user:",e.toKey());const s=await _S(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((y=>{y.reject(new pe(ie.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Kl(t,s.Ls)}}function x4(n,e){const t=be(n),s=t.Au.get(e);if(s&&s.hu)return Be().add(s.key);{let r=Be();const l=t.Iu.get(e);if(!l)return r;for(const c of l){const d=t.Tu.get(c);r=r.unionWith(d.view.nu)}return r}}function qS(n){const e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=VS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=x4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=T4.bind(null,e),e.Pu.H_=l4.bind(null,e.eventManager),e.Pu.yu=u4.bind(null,e.eventManager),e}function I4(n){const e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=E4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=S4.bind(null,e),e}class tf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return NV(this.persistence,new RV,e.initialUser,this.serializer)}Cu(e){return new yS(Gm.mi,this.serializer)}Du(e){return new kV}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tf.provider={build:()=>new tf};class R4 extends tf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){je(this.persistence.referenceDelegate instanceof jc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new dV(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new yS((s=>jc.mi(s,t)),this.serializer)}}class gm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>yT(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=C4.bind(null,this.syncEngine),await o4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new a4})()}createDatastore(e){const t=yf(e.databaseInfo.databaseId),s=(function(l){return new FV(l)})(e.databaseInfo);return(function(l,c,d,y){return new JV(l,c,d,y)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,r,l,c,d){return new QV(s,r,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>yT(this.syncEngine,t,0)),(function(){return fT.v()?new fT:new qV})())}createSyncEngine(e,t){return(function(r,l,c,d,y,p,v){const T=new h4(r,l,c,d,y,p);return v&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const l=be(r);ge(Ho,"RemoteStore shutting down."),l.Ea.add(5),await Jl(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}gm.provider={build:()=>new gm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):rs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no="FirestoreClient";class w4{constructor(e,t,s,r,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=r,this.user=nn.UNAUTHENTICATED,this.clientId=Mm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{ge(no,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(ge(no,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ns;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Zm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Oh(n,e){n.asyncQueue.verifyOperationInProgress(),ge(no,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async r=>{s.isEqual(r)||(await _S(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function vT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await b4(n);ge(no,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>hT(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,r)=>hT(e.remoteStore,r))),n._onlineComponents=e}async function b4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge(no,"Using user provided OfflineComponentProvider");try{await Oh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ie.FAILED_PRECONDITION||r.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Wr("Error using user provided cache. Falling back to memory cache: "+t),await Oh(n,new tf)}}else ge(no,"Using default OfflineComponentProvider"),await Oh(n,new R4(void 0));return n._offlineComponents}async function zS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge(no,"Using user provided OnlineComponentProvider"),await vT(n,n._uninitializedComponentsProvider._online)):(ge(no,"Using default OnlineComponentProvider"),await vT(n,new gm))),n._onlineComponents}function N4(n){return zS(n).then((e=>e.syncEngine))}async function BS(n){const e=await zS(n),t=e.eventManager;return t.onListen=m4.bind(null,e.syncEngine),t.onUnlisten=y4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=p4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=_4.bind(null,e.syncEngine),t}function M4(n,e,t={}){const s=new ns;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,y,p){const v=new OS({next:S=>{v.Nu(),c.enqueueAndForget((()=>bS(l,T)));const R=S.docs.has(d);!R&&S.fromCache?p.reject(new pe(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&S.fromCache&&y&&y.source==="server"?p.reject(new pe(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),T=new NS(km(d.path),v,{includeMetadataChanges:!0,qa:!0});return wS(l,T)})(await BS(n),n.asyncQueue,e,t,s))),s.promise}function D4(n,e,t={}){const s=new ns;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,y,p){const v=new OS({next:S=>{v.Nu(),c.enqueueAndForget((()=>bS(l,T))),S.fromCache&&y.source==="server"?p.reject(new pe(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),T=new NS(d,v,{includeMetadataChanges:!0,qa:!0});return wS(l,T)})(await BS(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="firestore.googleapis.com",ET=!0;class ST{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=HS,this.ssl=ET}else this.host=e.host,this.ssl=e.ssl??ET;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cV)throw new pe(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$D("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FS(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tf{constructor(e,t,s,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ST({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ST(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new OD;switch(s.type){case"firstParty":return new HD(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pe(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=TT.get(t);s&&(ge("ComponentProvider","Removing Datastore"),TT.delete(t),s.terminate())})(this),Promise.resolve()}}function P4(n,e,t,s={}){var p;n=ri(n,Tf);const r=wm(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;r&&(d2(`https://${d}`),g2("Firestore",!0)),l.host!==HS&&l.host!==d&&Wr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...l,host:d,ssl:r,emulatorOptions:s};if(!Gc(y,c)&&(n._setSettings(y),s.mockUserToken)){let v,T;if(typeof s.mockUserToken=="string")v=s.mockUserToken,T=nn.MOCK_USER;else{v=h2(s.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new pe(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new nn(S)}n._authCredentials=new zD(new IE(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new fa(this.firestore,e,this._query)}}class Ct{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}toJSON(){return{type:Ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Fl(t,Ct._jsonSchema))return new Ct(e,s||null,new Ae(lt.fromString(t.referencePath)))}}Ct._jsonSchemaVersion="firestore/documentReference/1.0",Ct._jsonSchema={type:Lt("string",Ct._jsonSchemaVersion),referencePath:Lt("string")};class Xs extends fa{constructor(e,t,s){super(e,t,km(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new Ae(e))}withConverter(e){return new Xs(this.firestore,e,this._path)}}function Ko(n,e,...t){if(n=ss(n),RE("collection","path",e),n instanceof Tf){const s=lt.fromString(e,...t);return U0(s),new Xs(n,null,s)}{if(!(n instanceof Ct||n instanceof Xs))throw new pe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(lt.fromString(e,...t));return U0(s),new Xs(n.firestore,null,s)}}function ro(n,e,...t){if(n=ss(n),arguments.length===1&&(e=Mm.newId()),RE("doc","path",e),n instanceof Tf){const s=lt.fromString(e,...t);return V0(s),new Ct(n,null,new Ae(s))}{if(!(n instanceof Ct||n instanceof Xs))throw new pe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(lt.fromString(e,...t));return V0(s),new Ct(n.firestore,n instanceof Xs?n.converter:null,new Ae(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="AsyncQueue";class CT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new TS(this,"async_queue_retry"),this._c=()=>{const s=qh();s&&ge(AT,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=qh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=qh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ns;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ua(e))throw e;ge(AT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,rs("INTERNAL UNHANDLED ERROR: ",xT(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Wm.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(r),r}uc(){this.nc&&xe(47125,{Pc:xT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function xT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Qo extends Tf{constructor(e,t,s,r){super(e,t,s,r),this.type="firestore",this._queue=new CT,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new CT(e),this._firestoreClient=void 0,await e}}}function V4(n,e){const t=typeof n=="object"?n:ID(),s=typeof n=="string"?n:Qc,r=ED(t,"firestore").getImmediate({identifier:s});if(!r._initialized){const l=c2("firestore");l&&P4(r,...l)}return r}function np(n){if(n._terminated)throw new pe(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||U4(n),n._firestoreClient}function U4(n){var s,r,l;const e=n._freezeSettings(),t=(function(d,y,p,v){return new rP(d,y,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,FS(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new w4(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const y=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(y),_online:y}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gn(jt.fromBase64String(e))}catch(t){throw new pe(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Gn(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Fl(e,Gn._jsonSchema))return Gn.fromBase64String(e.bytes)}}Gn._jsonSchemaVersion="firestore/bytes/1.0",Gn._jsonSchema={type:Lt("string",Gn._jsonSchemaVersion),bytes:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vi._jsonSchemaVersion}}static fromJSON(e){if(Fl(e,Vi._jsonSchema))return new Vi(e.latitude,e.longitude)}}Vi._jsonSchemaVersion="firestore/geoPoint/1.0",Vi._jsonSchema={type:Lt("string",Vi._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==r[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ui._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Fl(e,Ui._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ui(e.vectorValues);throw new pe(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ui._jsonSchemaVersion="firestore/vectorValue/1.0",Ui._jsonSchema={type:Lt("string",Ui._jsonSchemaVersion),vectorValues:Lt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=/^__.*__$/;class k4{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new oo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gl(e,this.data,t,this.fieldTransforms)}}class GS{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new oo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function YS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ac:n})}}class ip{constructor(e,t,s,r,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=r,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ip({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return nf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(YS(this.Ac)&&L4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class q4{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||yf(e)}Cc(e,t,s,r=!1){return new ip({Ac:e,methodName:t,Dc:s,path:Zt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sf(n){const e=n._freezeSettings(),t=yf(n._databaseId);return new q4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function JS(n,e,t,s,r,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,r);rp("Data must be an object, but it was:",c,s);const d=KS(s,c);let y,p;if(l.merge)y=new bn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const T of l.mergeFields){const S=ym(e,T,t);if(!c.contains(S))throw new pe(ie.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);$S(v,S)||v.push(S)}y=new bn(v),p=c.fieldTransforms.filter((T=>y.covers(T.field)))}else y=null,p=c.fieldTransforms;return new k4(new yn(d),y,p)}class Af extends Ql{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Af}}class sp extends Ql{_toFieldTransform(e){return new iS(e.path,new ql)}isEqual(e){return e instanceof sp}}class op extends Ql{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Bl(e.serializer,ZE(e.serializer,this.Fc));return new iS(e.path,t)}isEqual(e){return e instanceof op&&this.Fc===e.Fc}}function O4(n,e,t,s){const r=n.Cc(1,e,t);rp("Data must be an object, but it was:",r,s);const l=[],c=yn.empty();so(s,((y,p)=>{const v=ap(e,y,t);p=ss(p);const T=r.yc(v);if(p instanceof Af)l.push(v);else{const S=$l(p,T);S!=null&&(l.push(v),c.set(v,S))}}));const d=new bn(l);return new GS(c,d,r.fieldTransforms)}function z4(n,e,t,s,r,l){const c=n.Cc(1,e,t),d=[ym(e,s,t)],y=[r];if(l.length%2!=0)throw new pe(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(ym(e,l[S])),y.push(l[S+1]);const p=[],v=yn.empty();for(let S=d.length-1;S>=0;--S)if(!$S(p,d[S])){const R=d[S];let O=y[S];O=ss(O);const B=c.yc(R);if(O instanceof Af)p.push(R);else{const J=$l(O,B);J!=null&&(p.push(R),v.set(R,J))}}const T=new bn(p);return new GS(v,T,c.fieldTransforms)}function B4(n,e,t,s=!1){return $l(t,n.Cc(s?4:3,e))}function $l(n,e){if(QS(n=ss(n)))return rp("Unsupported field value:",e,n),KS(n,e);if(n instanceof Ql)return(function(s,r){if(!YS(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const l=[];let c=0;for(const d of s){let y=$l(d,r.wc(c));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,r){if((s=ss(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return ZE(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=ut.fromDate(s);return{timestampValue:Zc(r.serializer,l)}}if(s instanceof ut){const l=new ut(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Zc(r.serializer,l)}}if(s instanceof Vi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Gn)return{bytesValue:uS(r.serializer,s._byteString)};if(s instanceof Ct){const l=r.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw r.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Fm(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Ui)return(function(c,d){return{mapValue:{fields:{[LE]:{stringValue:kE},[$c]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw d.Sc("VectorValues must only contain numeric values.");return qm(d.serializer,p)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${lf(s)}`)})(n,e)}function KS(n,e){const t={};return NE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):so(n,((s,r)=>{const l=$l(r,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function QS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ut||n instanceof Vi||n instanceof Gn||n instanceof Ct||n instanceof Ql||n instanceof Ui)}function rp(n,e,t){if(!QS(t)||!wE(t)){const s=lf(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function ym(n,e,t){if((e=ss(e))instanceof Ef)return e._internalPath;if(typeof e=="string")return ap(n,e);throw nf("Field path arguments must be of type string or ",n,!1,void 0,t)}const F4=new RegExp("[~\\*/\\[\\]]");function ap(n,e,t){if(e.search(F4)>=0)throw nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ef(...e.split("."))._internalPath}catch{throw nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function nf(n,e,t,s,r){const l=s&&!s.isEmpty(),c=r!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let y="";return(l||c)&&(y+=" (found",l&&(y+=` in field ${s}`),c&&(y+=` in document ${r}`),y+=")"),new pe(ie.INVALID_ARGUMENT,d+n+y)}function $S(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,t,s,r,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new H4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(lp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class H4 extends XS{data(){return super.data()}}function lp(n,e){return typeof e=="string"?ap(n,e):e instanceof Ef?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pe(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class up{}class Y4 extends up{}function cp(n,e,...t){let s=[];e instanceof up&&s.push(e),s=s.concat(t),(function(l){const c=l.filter((y=>y instanceof dp)).length,d=l.filter((y=>y instanceof Cf)).length;if(c>1||c>0&&d>0)throw new pe(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const r of s)n=r._apply(n);return n}class Cf extends Y4{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Cf(e,t,s)}_apply(e){const t=this._parse(e);return WS(e._query,t),new fa(e.firestore,e.converter,rm(e._query,t))}_parse(e){const t=Sf(e.firestore);return(function(l,c,d,y,p,v,T){let S;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new pe(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){RT(T,v);const O=[];for(const B of T)O.push(IT(y,l,B));S={arrayValue:{values:O}}}else S=IT(y,l,T)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||RT(T,v),S=B4(d,c,T,v==="in"||v==="not-in");return Ut.create(p,v,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function fp(n,e,t){const s=e,r=lp("where",n);return Cf._create(r,s,t)}class dp extends up{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new dp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:ai.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,l){let c=r;const d=l.getFlattenedFilters();for(const y of d)WS(c,y),c=rm(c,y)})(e._query,t),new fa(e.firestore,e.converter,rm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function IT(n,e,t){if(typeof(t=ss(t))=="string"){if(t==="")throw new pe(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!YE(e)&&t.indexOf("/")!==-1)throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(lt.fromString(t));if(!Ae.isDocumentKey(s))throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return H0(n,new Ae(s))}if(t instanceof Ct)return H0(n,t._key);throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lf(t)}.`)}function RT(n,e){if(!Array.isArray(n)||n.length===0)throw new pe(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WS(n,e){const t=(function(r,l){for(const c of r)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new pe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class J4{convertValue(e,t="none"){switch(eo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return so(e,((r,l)=>{s[r]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,r,l;const t=(l=(r=(s=e.fields)==null?void 0:s[$c].arrayValue)==null?void 0:r.values)==null?void 0:l.map((c=>At(c.doubleValue)));return new Ui(t)}convertGeoPoint(e){return new Vi(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=ff(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Ul(e));default:return null}}convertTimestamp(e){const t=Zs(e);return new ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=lt.fromString(e);je(pS(s),9688,{name:e});const r=new Ll(s.get(1),s.get(3)),l=new Ae(s.popFirst(5));return r.isEqual(t)||rs(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class xl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bo extends XS{constructor(e,t,s,r,l,c){super(e,t,s,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new qc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(lp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Bo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Bo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bo._jsonSchema={type:Lt("string",Bo._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class qc extends Bo{data(e={}){return super.data(e)}}class Xr{constructor(e,t,s,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new xl(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new qc(this._firestore,this._userDataWriter,s.key,s,new xl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((d=>{const y=new qc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new xl(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:y,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const y=new qc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new xl(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,v=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:K4(d.type),doc:y,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Mm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],r=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),r.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function K4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(n){n=ri(n,Ct);const e=ri(n.firestore,Qo);return M4(np(e),n._key).then((t=>Q4(e,n,t)))}Xr._jsonSchemaVersion="firestore/querySnapshot/1.0",Xr._jsonSchema={type:Lt("string",Xr._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class eA extends J4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,t)}}function da(n){n=ri(n,fa);const e=ri(n.firestore,Qo),t=np(e),s=new eA(e);return G4(n._query),D4(t,n._query).then((r=>new Xr(e,s,n,r)))}function hp(n,e,t){n=ri(n,Ct);const s=ri(n.firestore,Qo),r=ZS(n.converter,e);return xf(s,[JS(Sf(s),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Jn.none())])}function tA(n,e,t,...s){n=ri(n,Ct);const r=ri(n.firestore,Qo),l=Sf(r);let c;return c=typeof(e=ss(e))=="string"||e instanceof Ef?z4(l,"updateDoc",n._key,e,t,s):O4(l,"updateDoc",n._key,e),xf(r,[c.toMutation(n._key,Jn.exists(!0))])}function nA(n){return xf(ri(n.firestore,Qo),[new Om(n._key,Jn.none())])}function iA(n,e){const t=ri(n.firestore,Qo),s=ro(n),r=ZS(n.converter,e);return xf(t,[JS(Sf(n.firestore),"addDoc",s._key,r,n.converter!==null,{}).toMutation(s._key,Jn.exists(!1))]).then((()=>s))}function xf(n,e){return(function(s,r){const l=new ns;return s.asyncQueue.enqueueAndForget((async()=>v4(await N4(s),r,l))),l.promise})(np(n),e)}function Q4(n,e,t){const s=t.docs.get(e._key),r=new eA(n);return new Bo(n,r,e._key,s,new xl(t.hasPendingWrites,t.fromCache),e.converter)}function Xl(){return new sp("serverTimestamp")}function $4(n){return new op("increment",n)}(function(e,t=!0){(function(r){aa=r})(xD),Jc(new Dl("firestore",((s,{instanceIdentifier:r,options:l})=>{const c=s.getProvider("app").getImmediate(),d=new Qo(new BD(s.getProvider("auth-internal")),new GD(c,s.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new pe(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ll(p.options.projectId,v)})(c,r),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Qr(N0,M0,e),Qr(N0,M0,"esm2020")})();const X4={apiKey:"AIzaSyBUQ8ffhmUa22o0Udzx86PCh9K2-OwI7nQ",authDomain:"roshines-b2d35.firebaseapp.com",projectId:"roshines-b2d35",storageBucket:"roshines-b2d35.firebasestorage.app",messagingSenderId:"435883929042",appId:"1:435883929042:web:7bce7bbdb807681bd46c0b"},W4=gE(X4),_n=V4(W4),vn={SUBSCRIBERS:"subscribers",COMMENTS:"comments",LIKES:"likes",POSTS:"posts"},Z4=async n=>{try{const e=Ko(_n,vn.SUBSCRIBERS),t=cp(e,fp("email","==",n));(await da(t)).empty&&await iA(e,{email:n,subscribedAt:Xl()})}catch(e){throw console.error("Error subscribing user:",e),e}},wT=async()=>{try{const n=Ko(_n,vn.SUBSCRIBERS);return(await da(n)).size}catch(n){return console.error("Error getting subscribers count:",n),0}},j4=async()=>{try{const n=Ko(_n,vn.SUBSCRIBERS);return(await da(n)).docs.map(t=>t.data().email)}catch(n){return console.error("Error getting subscribers:",n),[]}},eU=async n=>{try{const e=Ko(_n,vn.COMMENTS),t=cp(e,fp("postId","==",n));return(await da(t)).docs.map(l=>{const c=l.data();return{id:l.id,postId:c.postId,userId:c.userId,userName:c.userName,userAvatar:c.userAvatar,content:c.content,createdAt:c.createdAt instanceof ut?c.createdAt.toDate().toISOString():c.createdAt||new Date().toISOString()}}).sort((l,c)=>new Date(c.createdAt).getTime()-new Date(l.createdAt).getTime())}catch(e){return console.error("Error getting comments:",e),[]}},tU=async(n,e,t)=>{try{const s=Ko(_n,vn.COMMENTS),r={postId:n,userId:e.id,userName:e.name,userAvatar:e.avatar||null,content:t,createdAt:Xl()};return{id:(await iA(s,r)).id,postId:n,userId:e.id,userName:e.name,userAvatar:e.avatar,content:t,createdAt:new Date().toISOString()}}catch(s){throw console.error("Error adding comment:",s),s}},nU=async(n,e)=>{try{const t=`${n}_${e}`,s=ro(_n,vn.LIKES,t),r=await jS(s);let l=!1;r.exists()?(await nA(s),l=!1):(await hp(s,{postId:n,userId:e,likedAt:Xl()}),l=!0);const c=await sA(n);return await iU(n,c),{liked:l,count:c}}catch(t){throw console.error("Error toggling like:",t),t}},iU=async(n,e)=>{try{const t=ro(_n,vn.POSTS,n);await tA(t,{likesCount:e})}catch(t){console.error("Error syncing likes count:",t)}},sA=async n=>{try{const e=Ko(_n,vn.LIKES),t=cp(e,fp("postId","==",n));return(await da(t)).size}catch(e){return console.error("Error getting like count:",e),0}},sU=async(n,e)=>{try{const t=await sA(n);if(!e)return{liked:!1,count:t};const s=`${n}_${e}`,r=ro(_n,vn.LIKES,s);return{liked:(await jS(r)).exists(),count:t}}catch(t){return console.error("Error getting like status:",t),{liked:!1,count:0}}},oU=async n=>{try{for(const e of n){const t=ro(_n,vn.POSTS,e.id);await hp(t,{...e,updatedAt:Xl()})}}catch(e){throw console.error("Error saving posts:",e),e}},rU=async()=>{try{const n=Ko(_n,vn.POSTS),e=await da(n);return e.empty?null:e.docs.map(t=>{const s=t.data();return{id:t.id,title:s.title,excerpt:s.excerpt,coverImage:s.coverImage,category:s.category,tags:s.tags||[],blocks:s.blocks||[],author:s.author,publishedAt:s.publishedAt,scheduledAt:s.scheduledAt,status:s.status,views:s.views||0,likesCount:s.likesCount||0}})}catch(n){return console.error("Error getting posts:",n),null}},bT=async n=>{try{const e=ro(_n,vn.POSTS,n.id);await hp(e,{...n,updatedAt:Xl()})}catch(e){throw console.error("Error saving post:",e),e}},aU=async n=>{try{const e=ro(_n,vn.POSTS,n);await nA(e)}catch(e){throw console.error("Error deleting post:",e),e}},lU=async n=>{try{const e=ro(_n,vn.POSTS,n);await tA(e,{views:$4(1)})}catch(e){console.error("Error incrementing views:",e)}};class If{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const uU=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},Hr={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:uU()},cU=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},fU=async(n,e,t={})=>{const s=await fetch(Hr.origin+n,{method:"POST",headers:t,body:e}),r=await s.text(),l=new If(s.status,r);if(s.ok)return l;throw l},dU=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},hU=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},mU=n=>n.webdriver||!n.languages||n.languages.length===0,pU=()=>new If(451,"Unavailable For Headless Browser"),gU=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},yU=n=>{var e;return!((e=n.list)!=null&&e.length)||!n.watchVariable},_U=(n,e)=>n instanceof FormData?n.get(e):n[e],vU=(n,e)=>{if(yU(n))return!1;gU(n.list,n.watchVariable);const t=_U(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},TU=()=>new If(403,"Forbidden"),EU=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},SU=async(n,e,t)=>{const s=Number(await t.get(n)||0);return e-Date.now()+s},AU=async(n,e,t)=>{if(!e.throttle||!t)return!1;EU(e.throttle,e.id);const s=e.id||n;return await SU(s,e.throttle,t)>0?!0:(await t.set(s,Date.now().toString()),!1)},CU=()=>new If(429,"Too Many Requests"),xU=async(n,e,t,s)=>{const r=cU(s),l=r.publicKey||Hr.publicKey,c=r.blockHeadless||Hr.blockHeadless,d=r.storageProvider||Hr.storageProvider,y={...Hr.blockList,...r.blockList},p={...Hr.limitRate,...r.limitRate};return c&&mU(navigator)?Promise.reject(pU()):(dU(l,n,e),hU(t),t&&vU(y,t)?Promise.reject(TU()):await AU(location.pathname,p,d)?Promise.reject(CU()):fU("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:l,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},IU={[Hn.Food]:{color:"bg-emerald-100 text-emerald-800",icon:he.Coffee},[Hn.Travel]:{color:"bg-sky-100 text-sky-800",icon:he.Plane},[Hn.Fashion]:{color:"bg-rose-100 text-rose-800",icon:he.Camera},[Hn.Technology]:{color:"bg-indigo-100 text-indigo-800",icon:he.Smartphone},[Hn.Lifestyle]:{color:"bg-orange-100 text-indigo-800",icon:he.Globe},[Hn.Journal]:{color:"bg-stone-200 text-stone-800",icon:he.FileText}},oA="https://images.unsplash.com/photo-1493770348161-369560ae357d?auto=format&fit=crop&q=80&w=1920",RU="/Roshines/profile.jpeg",wU="/Roshines/signature.png",Tl=[{id:"1",title:"The Art of Slow Living in Kyoto",excerpt:"Discovering peace in the ancient capital through tea ceremonies and hidden gardens.",coverImage:"https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?auto=format&fit=crop&q=80&w=800",category:Hn.Travel,tags:["Japan","Mindfulness","Travel"],author:"Roshni",publishedAt:new Date().toISOString(),status:"published",views:1240,blocks:[{id:"b1",type:Je.Heading1,content:"Arrival in Arashiyama",width:100},{id:"b2",type:Je.Paragraph,content:"The morning mist clung to the mountains as we stepped off the train. Kyoto feels differenttime moves slower here.",width:100},{id:"b3",type:Je.Image,content:"",src:"https://images.unsplash.com/photo-1624253321171-1be53e12f5f4?auto=format&fit=crop&q=80&w=800",width:100},{id:"b4",type:Je.Quote,content:"Beauty lies in the spaces between things.",width:100}]},{id:"2",title:"Minimalist Wardrobe Essentials",excerpt:"Building a capsule wardrobe that lasts a lifetime with just 20 items.",coverImage:"https://images.unsplash.com/photo-1483985988355-763728e1935b?auto=format&fit=crop&q=80&w=800",category:Hn.Fashion,tags:["Style","Sustainable","Minimalism"],author:"Roshni",publishedAt:new Date(Date.now()-864e5).toISOString(),status:"published",views:850,blocks:[{id:"b1",type:Je.Paragraph,content:"Fast fashion is out. Timeless pieces are in.",width:100}]}],bU=({message:n,onClose:e})=>(_e.useEffect(()=>{if(n){const t=setTimeout(e,4e3);return()=>clearTimeout(t)}},[n,e]),n?C.jsxs("div",{className:"fixed bottom-6 right-6 z-[100] bg-stone-900 text-white px-6 py-4 rounded-xl shadow-2xl flex items-center gap-3 animate-slide-up",children:[C.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-500 flex items-center justify-center text-stone-900",children:C.jsx(he.Check,{size:16})}),C.jsx("p",{className:"font-medium text-sm",children:n}),C.jsx("button",{onClick:e,className:"ml-2 text-stone-500 hover:text-white",children:C.jsx(he.X,{size:14})})]}):null),NU=({view:n,setView:e,searchQuery:t,setSearchQuery:s,onOpenNewsletter:r,user:l,onLogout:c})=>{const[d,y]=_e.useState(!1);return C.jsxs("header",{className:"sticky top-0 z-40 bg-white/80 backdrop-blur border-b border-stone-100 transition-all duration-300",children:[C.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center justify-between",children:[C.jsxs("div",{className:"flex items-center gap-8",children:[C.jsx("button",{onClick:()=>e({type:"home"}),className:"text-2xl font-serif font-bold tracking-tighter hover:opacity-70 transition-opacity",children:"Ro-shines"}),C.jsxs("nav",{className:"hidden md:flex items-center gap-6 text-sm font-medium text-stone-500",children:[C.jsx("button",{onClick:()=>e({type:"home"}),className:`hover:text-stone-900 transition-colors ${n.type==="home"?"text-stone-900":""}`,children:"Stories"}),C.jsx("button",{onClick:()=>e({type:"about"}),className:`hover:text-stone-900 transition-colors ${n.type==="about"?"text-stone-900":""}`,children:"About"}),(l==null?void 0:l.isAdmin)&&C.jsx("button",{onClick:()=>e({type:"admin-dashboard"}),className:`hover:text-stone-900 transition-colors ${n.type.startsWith("admin")?"text-stone-900":""}`,children:"Dashboard"})]})]}),C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsxs("div",{className:"relative hidden md:block group",children:[C.jsx(he.Search,{className:"absolute left-3 top-2.5 text-stone-400 group-focus-within:text-stone-600 transition-colors",size:16}),C.jsx("input",{type:"text",placeholder:"Search stories...",value:t,onChange:p=>s(p.target.value),className:"pl-9 pr-4 py-2 bg-stone-100/50 hover:bg-stone-100 focus:bg-white border border-transparent focus:border-stone-200 rounded-full text-sm outline-none transition-all w-48 focus:w-64"})]}),l?C.jsxs("div",{className:"flex items-center gap-3 pl-4 border-l border-stone-200",children:[C.jsx("span",{className:"text-sm font-medium hidden md:block",children:l.name}),C.jsx("button",{onClick:c,className:"text-xs text-stone-500 hover:text-red-600 underline",children:"Logout"})]}):C.jsx("button",{onClick:()=>e({type:"login"}),className:"text-sm font-bold hover:text-stone-600 px-3 py-2",children:"Login"}),C.jsx("button",{onClick:r,className:"bg-stone-900 text-white px-5 py-2 rounded-full text-sm font-bold hover:bg-stone-700 transition-colors shadow-lg hover:shadow-xl hidden md:block",children:"Subscribe"}),C.jsx("button",{className:"md:hidden p-2",onClick:()=>y(!d),children:d?C.jsx(he.X,{}):C.jsx(he.Menu,{})})]})]}),d&&C.jsxs("div",{className:"md:hidden absolute top-full left-0 right-0 bg-white border-b border-stone-100 p-6 flex flex-col gap-4 shadow-xl animate-fade-in",children:[C.jsx("input",{type:"text",placeholder:"Search...",value:t,onChange:p=>s(p.target.value),className:"w-full p-3 bg-stone-50 rounded-xl text-sm mb-2"}),C.jsx("button",{onClick:()=>{e({type:"home"}),y(!1)},className:"text-left font-serif text-xl",children:"Stories"}),C.jsx("button",{onClick:()=>{e({type:"about"}),y(!1)},className:"text-left font-serif text-xl",children:"About"}),(l==null?void 0:l.isAdmin)&&C.jsx("button",{onClick:()=>{e({type:"admin-dashboard"}),y(!1)},className:"text-left font-serif text-xl",children:"Dashboard"}),C.jsx("hr",{className:"border-stone-100"}),C.jsx("button",{onClick:r,className:"w-full bg-stone-900 text-white py-3 rounded-xl font-bold",children:"Subscribe"})]})]})},MU=({onOpenNewsletter:n,onNavigate:e})=>C.jsx("footer",{className:"bg-stone-900 text-stone-400 py-16",children:C.jsxs("div",{className:"max-w-7xl mx-auto px-6 grid md:grid-cols-4 gap-12",children:[C.jsxs("div",{className:"col-span-1 md:col-span-2",children:[C.jsx("h3",{className:"text-2xl font-serif text-white mb-6",children:"Ro-shines"}),C.jsx("p",{className:"max-w-xs mb-8 leading-relaxed",children:"A digital sanctuary for thoughtful living, design, and culture. Crafted with intention."}),C.jsx("p",{className:"text-xs",children:" 2026 Ro-shines. All rights reserved."})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"text-white font-bold mb-6 uppercase tracking-wider text-xs",children:"Explore"}),C.jsxs("ul",{className:"space-y-4 text-sm",children:[C.jsx("li",{children:C.jsx("button",{onClick:()=>e({type:"home"}),className:"hover:text-white cursor-pointer transition-colors text-left",children:"Home"})}),C.jsx("li",{children:C.jsx("button",{onClick:()=>e({type:"about"}),className:"hover:text-white cursor-pointer transition-colors text-left",children:"About"})})]})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"text-white font-bold mb-6 uppercase tracking-wider text-xs",children:"Newsletter"}),C.jsx("p",{className:"text-sm mb-4",children:"Get the latest stories delivered to your inbox."}),C.jsx("button",{onClick:n,className:"text-white underline hover:text-stone-200",children:"Subscribe Now"})]})]})}),DU=({isOpen:n,onClose:e,onSubscribe:t})=>{const[s,r]=_e.useState(""),[l,c]=_e.useState("idle"),d=_e.useRef(null);if(!n)return null;const y=v=>{if(typeof v=="string")return v;if(v!=null&&v.text)return v.text;if(v!=null&&v.message)return v.message;try{return JSON.stringify(v)}catch{return"Unknown error occurred"}},p=async v=>{if(v.preventDefault(),!!s){c("sending");try{await Z4(s),await xU("service_gb35lgl","template_7522o7h",{email:s,to_name:"Subscriber",from_name:"Ro-shines",message:"Welcome to the Ro-shines community!"},{publicKey:"DlAJfvPA4KeZpbAB9"}),console.log("Email sent successfully via EmailJS"),t(s),c("success")}catch(T){console.error("EmailJS Failed:",T);const S=y(T);alert(`Oops! Failed to send confirmation email.
Reason: ${S}`),c("idle")}}};return C.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-stone-900/40 backdrop-blur-sm animate-fade-in",children:C.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full shadow-2xl relative overflow-hidden",children:[C.jsx("button",{onClick:e,className:"absolute right-4 top-4 text-stone-400 hover:text-stone-600",children:C.jsx(he.X,{size:20})}),l==="success"?C.jsxs("div",{className:"text-center animate-fade-in",children:[C.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-600",children:C.jsx(he.Check,{size:32})}),C.jsx("h3",{className:"text-2xl font-serif font-bold text-stone-900 mb-2",children:"Welcome Aboard!"}),C.jsxs("p",{className:"text-stone-500 mb-6",children:["We've sent a warm welcome letter to ",C.jsx("b",{children:s}),"."]})]}):C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"text-center mb-8",children:[C.jsx("div",{className:"w-16 h-16 bg-stone-100 rounded-full flex items-center justify-center mx-auto mb-4 text-stone-900",children:C.jsx(he.Send,{size:24})}),C.jsx("h3",{className:"text-2xl font-serif font-bold text-stone-900 mb-2",children:"Join the Community"}),C.jsx("p",{className:"text-stone-500",children:"Weekly stories, curated links, and design inspiration."})]}),C.jsxs("form",{ref:d,onSubmit:p,children:[C.jsx("input",{type:"email",name:"email",placeholder:"your@email.com",value:s,onChange:v=>r(v.target.value),className:"w-full bg-stone-50 border border-stone-200 rounded-xl px-4 py-3 mb-3 outline-none focus:border-stone-400 transition-colors",required:!0,disabled:l==="sending"}),C.jsx("button",{type:"submit",disabled:l==="sending",className:"w-full bg-stone-900 text-white font-bold py-3 rounded-xl hover:bg-stone-800 transition-transform active:scale-95 disabled:opacity-70 flex items-center justify-center gap-2",children:l==="sending"?C.jsx(C.Fragment,{children:"Processing..."}):"Subscribe"})]})]})]})})},PU="roshni.nekkanti@gmail.com",VU=n=>{try{const t=n.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(t).split("").map(r=>"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(s)}catch(e){return console.error("Failed to decode JWT:",e),null}},UU=({onLogin:n})=>{const[e,t]=_e.useState(!1),[s,r]=_e.useState(null),l=_e.useRef(null),c=_e.useRef(n);return _e.useEffect(()=>{c.current=n},[n]),_e.useEffect(()=>{let d=null,y=null,p=!0;const v=S=>{if(p)try{const R=VU(S.credential);if(!R||!R.email)return;const O=R.email,B=R.name||R.email.split("@")[0],J=R.picture||`https://ui-avatars.com/api/?name=${encodeURIComponent(B)}&background=random`,X=O===PU,te={id:"google-"+R.sub,name:B,email:O,avatar:J,isAdmin:X};c.current(te)}catch(R){console.error("Google Sign-In error:",R)}},T=()=>{p&&typeof window<"u"&&window.google&&(window.google.accounts.id.initialize({client_id:"1034688397355-ppjp8bk2r8lbj7npuati79oj1hfcllo3.apps.googleusercontent.com",callback:v,auto_select:!1,cancel_on_tap_outside:!0}),l.current&&window.google.accounts.id.renderButton(l.current,{type:"standard",theme:"filled_black",size:"large",text:"signin_with",shape:"pill",width:300}))};return window.google?T():(d=setInterval(()=>{window.google&&(d&&clearInterval(d),d=null,T())},100),y=setTimeout(()=>{d&&(clearInterval(d),d=null)},1e4)),()=>{p=!1,d&&clearInterval(d),y&&clearTimeout(y)}},[]),C.jsxs("div",{className:"min-h-[80vh] flex items-center justify-center p-4 relative overflow-hidden",children:[C.jsx("div",{className:"absolute inset-0 z-0",children:C.jsx("img",{src:oA,className:"w-full h-full object-cover opacity-10 blur-sm",alt:""})}),C.jsxs("div",{className:"relative z-10 max-w-sm w-full bg-white/90 backdrop-blur p-8 rounded-3xl shadow-2xl border border-white/50 text-center",children:[C.jsxs("div",{className:"mb-8",children:[C.jsx("h2",{className:"text-3xl font-serif font-bold text-stone-900 mb-2",children:"Welcome"}),C.jsx("p",{className:"text-stone-500",children:"Sign in with your Google account to continue."})]}),s&&C.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm",children:s}),e?C.jsxs("div",{className:"flex items-center justify-center py-4",children:[C.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-stone-900"}),C.jsx("span",{className:"ml-3 text-stone-600",children:"Signing in..."})]}):C.jsx("div",{className:"flex justify-center",children:C.jsx("div",{ref:l})}),C.jsx("p",{className:"mt-8 text-xs text-stone-400",children:"By continuing, you agree to our Terms of Service and Privacy Policy."})]})]})},LU=({aboutImage:n,signatureImage:e})=>C.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-16 animate-fade-in",children:[C.jsxs("div",{className:"flex flex-col md:flex-row gap-16 items-center mb-20",children:[C.jsxs("div",{className:"w-full md:w-1/2 relative group px-8 md:px-0",children:[C.jsx("div",{className:"aspect-[3/4] relative overflow-hidden rounded-t-full border-4 border-white shadow-2xl transition-all duration-500 z-10",children:C.jsx("img",{src:n,alt:"Roshni",className:"w-full h-full object-cover transition-all duration-700 grayscale group-hover:grayscale-0 group-hover:scale-110"})}),C.jsx("div",{className:"absolute -z-10 top-6 -right-4 md:-right-8 w-full h-full rounded-t-full border-2 border-stone-900 hidden md:block transition-transform duration-500 group-hover:translate-x-2 group-hover:-translate-y-2"})]}),C.jsxs("div",{className:"w-full md:w-1/2 md:pl-8 text-center md:text-left",children:[C.jsxs("div",{className:"mb-8",children:[C.jsx("span",{className:"font-serif italic text-2xl text-rose-800 mb-3 block",children:"The Face Behind Ro-shines"}),C.jsx("h1",{className:"text-5xl lg:text-6xl font-serif font-bold text-stone-900 mb-6 leading-tight",children:"Roshni Nekkanti"})]}),C.jsxs("div",{className:"space-y-6 text-lg text-stone-600 font-light leading-relaxed",children:[C.jsx("p",{children:"Welcome to my digital sanctuary. Ro-shines is born from a desire to slow down and document the beautiful details that often go unnoticed in our busy lives."}),C.jsx("p",{children:"By day, I am a Developer crafting elegant AI Agents in the urban hum, but my heart yearns for the stillness of the mountains. This blog is the bridge between those two worlds. When I'm not coding, I am an artist of the intentional life: practicing mindfulness among the butterflies in my garden, exploring nature's quiet pockets, and celebrating sustainable fashion."}),C.jsx("p",{children:"Dive into these pages for travel diaries and conscious living tips, a curated collection viewed with intentionality and balance. May these stories illuminate your path."})]}),C.jsx("div",{className:"mt-10",children:C.jsx("img",{src:e,alt:"Signature",className:"h-12 opacity-50 mx-auto md:mx-0"})})]})]}),C.jsxs("div",{className:"border-t border-stone-200 pt-16",children:[C.jsx("h2",{className:"text-3xl font-serif font-bold text-stone-900 mb-10 text-center md:text-left",children:"Let's Connect"}),C.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[C.jsxs("a",{href:"mailto:roshni.nekkanti@gmail.com",className:"group relative bg-white p-10 rounded-3xl border border-stone-100 shadow-sm hover:shadow-lg hover:border-rose-100 transition-all overflow-hidden text-center md:text-left",children:[C.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:C.jsx(he.Send,{size:80})}),C.jsxs("div",{className:"relative z-10",children:[C.jsx("div",{className:"w-14 h-14 bg-stone-50 rounded-full flex items-center justify-center text-stone-900 mb-6 group-hover:scale-110 transition-transform mx-auto md:mx-0",children:C.jsx(he.Send,{size:24})}),C.jsx("h3",{className:"font-bold text-xl text-stone-900 mb-2",children:"Email Me"}),C.jsx("p",{className:"text-stone-500 mb-6",children:"For collaborations, questions, or just to say hello."}),C.jsx("p",{className:"font-serif text-lg text-stone-900 border-b-2 border-rose-100 inline-block pb-1 group-hover:border-rose-300 transition-colors break-all",children:"roshni.nekkanti@gmail.com"})]})]}),C.jsxs("a",{href:"https://instagram.com/Roshni_Chowdary",target:"_blank",rel:"noopener noreferrer",className:"group relative bg-white p-10 rounded-3xl border border-stone-100 shadow-sm hover:shadow-lg hover:border-rose-100 transition-all overflow-hidden text-center md:text-left",children:[C.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:C.jsx(he.Camera,{size:80})}),C.jsxs("div",{className:"relative z-10",children:[C.jsx("div",{className:"w-14 h-14 bg-stone-50 rounded-full flex items-center justify-center text-stone-900 mb-6 group-hover:scale-110 transition-transform mx-auto md:mx-0",children:C.jsx(he.Camera,{size:24})}),C.jsx("h3",{className:"font-bold text-xl text-stone-900 mb-2",children:"Follow Along"}),C.jsx("p",{className:"text-stone-500 mb-6",children:"Daily inspiration and behind the scenes."}),C.jsx("p",{className:"font-serif text-lg text-stone-900 border-b-2 border-rose-100 inline-block pb-1 group-hover:border-rose-300 transition-colors",children:"@Roshni_Chowdary"})]})]})]})]})]}),kU=({settings:n,onSave:e,onCancel:t})=>{const[s,r]=_e.useState(n),l=(c,d)=>{var p;const y=(p=c.target.files)==null?void 0:p[0];if(y){const v=new FileReader;v.onloadend=()=>{r({...s,[d]:v.result})},v.readAsDataURL(y)}};return C.jsxs("div",{className:"max-w-2xl mx-auto px-6 py-12 animate-fade-in",children:[C.jsx("h1",{className:"text-3xl font-serif font-bold text-stone-900 mb-8",children:"Site Settings"}),C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-bold text-stone-700 mb-2",children:"Site Name"}),C.jsx("input",{type:"text",value:s.siteName,onChange:c=>r({...s,siteName:c.target.value}),className:"w-full p-3 bg-white border border-stone-200 rounded-xl outline-none focus:border-stone-900"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-bold text-stone-700 mb-2",children:"Hero Image"}),C.jsxs("div",{className:"flex flex-col gap-2",children:[C.jsxs("label",{className:"cursor-pointer bg-white border border-stone-300 text-stone-600 px-4 py-2 rounded-lg hover:bg-stone-50 transition-colors text-sm font-medium w-fit flex items-center gap-2",children:[C.jsx(he.Camera,{size:16})," Upload Hero Image",C.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:c=>l(c,"heroImage")})]}),C.jsx("img",{src:s.heroImage,className:"w-full h-32 object-cover rounded-lg opacity-80 border border-stone-200"})]})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-bold text-stone-700 mb-2",children:"About Page Image"}),C.jsxs("div",{className:"flex flex-col gap-2",children:[C.jsxs("label",{className:"cursor-pointer bg-white border border-stone-300 text-stone-600 px-4 py-2 rounded-lg hover:bg-stone-50 transition-colors text-sm font-medium w-fit flex items-center gap-2",children:[C.jsx(he.Camera,{size:16})," Upload About Image",C.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:c=>l(c,"aboutImage")})]}),C.jsx("img",{src:s.aboutImage,className:"w-full h-32 object-cover rounded-lg opacity-80 border border-stone-200"})]})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-bold text-stone-700 mb-2",children:"Signature Image"}),C.jsxs("div",{className:"flex flex-col gap-2",children:[C.jsxs("label",{className:"cursor-pointer bg-white border border-stone-300 text-stone-600 px-4 py-2 rounded-lg hover:bg-stone-50 transition-colors text-sm font-medium w-fit flex items-center gap-2",children:[C.jsx(he.PenTool,{size:16})," Upload Signature Image",C.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:c=>l(c,"signatureImage")})]}),C.jsx("div",{className:"p-4 border border-stone-200 rounded-lg bg-white w-fit",children:C.jsx("img",{src:s.signatureImage,className:"h-12 opacity-80",alt:"Signature preview"})})]})]}),C.jsxs("div",{className:"flex gap-4 pt-4",children:[C.jsx("button",{onClick:t,className:"flex-1 py-3 text-stone-600 font-medium hover:bg-stone-100 rounded-xl transition-colors",children:"Cancel"}),C.jsx("button",{onClick:()=>e(s),className:"flex-1 py-3 bg-stone-900 text-white font-bold rounded-xl hover:bg-stone-800 transition-colors",children:"Save Changes"})]})]})]})},qU=({postId:n,initialCount:e,initialLiked:t,userId:s})=>{const[r,l]=_e.useState(t),[c,d]=_e.useState(e),[y,p]=_e.useState(!1);_e.useEffect(()=>{l(t),d(e)},[t,e]);const v=async()=>{if(!s)return;const T=!r;l(T),d(S=>T?S+1:Math.max(0,S-1)),T&&p(!0);try{const S=await nU(n,s);d(S.count),l(S.liked)}catch{l(!T),d(R=>T?Math.max(0,R-1):R+1)}};return _e.useEffect(()=>{if(y){const T=setTimeout(()=>p(!1),500);return()=>clearTimeout(T)}},[y]),C.jsxs("button",{onClick:v,disabled:!s,className:`flex items-center gap-2 px-4 py-2 rounded-full transition-all duration-300 ${r?"bg-rose-50 text-rose-600":"bg-stone-50 text-stone-500 hover:bg-stone-100"}`,children:[C.jsx(he.Sparkles,{size:18,className:`transition-transform duration-300 ${y?"scale-150 rotate-12":""} ${r?"fill-rose-600":""}`}),C.jsx("span",{className:"font-bold text-sm",children:c})]})},OU=({postId:n,currentUser:e,onLoginReq:t})=>{const[s,r]=_e.useState([]),[l,c]=_e.useState(""),[d,y]=_e.useState(!1);_e.useEffect(()=>{eU(n).then(r)},[n]);const p=async v=>{if(v.preventDefault(),!e){t();return}if(l.trim()){y(!0);try{const T=await tU(n,e,l);r([T,...s]),c("")}finally{y(!1)}}};return C.jsxs("div",{className:"mt-16 border-t border-stone-100 pt-12",children:[C.jsxs("h3",{className:"text-2xl font-serif font-bold text-stone-900 mb-8",children:["Discussion (",s.length,")"]}),C.jsxs("form",{onSubmit:p,className:"mb-12 relative",children:[C.jsx("textarea",{value:l,onChange:v=>c(v.target.value),placeholder:e?"Share your thoughts...":"Please login to comment...",className:"w-full bg-stone-50 rounded-xl p-4 min-h-[120px] outline-none border border-transparent focus:border-stone-200 focus:bg-white transition-all resize-none",disabled:d}),C.jsx("div",{className:"absolute bottom-4 right-4",children:e?C.jsx("button",{type:"submit",disabled:!l.trim()||d,className:"bg-stone-900 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-stone-800 disabled:opacity-50 transition-colors",children:d?"Posting...":"Post Comment"}):C.jsx("button",{type:"button",onClick:t,className:"text-sm font-bold text-stone-900 underline",children:"Login to post"})})]}),C.jsx("div",{className:"space-y-8",children:s.map(v=>C.jsxs("div",{className:"flex gap-4 animate-fade-in",children:[C.jsx("div",{className:"w-10 h-10 rounded-full bg-stone-200 flex items-center justify-center text-stone-500 font-bold overflow-hidden",children:v.userAvatar?C.jsx("img",{src:v.userAvatar,className:"w-full h-full object-cover"}):v.userName.charAt(0)}),C.jsxs("div",{children:[C.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[C.jsx("span",{className:"font-bold text-stone-900 text-sm",children:v.userName}),C.jsxs("span",{className:"text-xs text-stone-400",children:[" ",new Date(v.createdAt).toLocaleDateString()]})]}),C.jsx("p",{className:"text-stone-600 text-sm leading-relaxed",children:v.content})]})]},v.id))})]})},rA=({post:n,onBack:e,currentUser:t,onLoginReq:s,onEdit:r})=>{const[l,c]=_e.useState({liked:!1,count:n.likesCount||0});return _e.useEffect(()=>{sU(n.id,t==null?void 0:t.id).then(d=>{c({liked:d.liked,count:Math.max(d.count,n.likesCount||0)})}),window.scrollTo(0,0)},[n.id,t]),C.jsxs("article",{className:"min-h-screen bg-white animate-fade-in",children:[C.jsxs("div",{className:"h-[50vh] md:h-[60vh] relative overflow-hidden",children:[C.jsx("img",{src:n.coverImage,alt:n.title,className:"w-full h-full object-cover"}),C.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),C.jsxs("div",{className:"absolute top-6 left-6 z-20 flex gap-2",children:[C.jsx("button",{onClick:e,className:"bg-white/20 backdrop-blur-md text-white p-3 rounded-full hover:bg-white/30 transition-colors",children:C.jsx(he.ChevronLeft,{size:24})}),(t==null?void 0:t.isAdmin)&&r&&C.jsxs("button",{onClick:r,className:"bg-white/20 backdrop-blur-md text-white p-3 rounded-full hover:bg-white/30 transition-colors flex items-center gap-2",children:[C.jsx(he.PenTool,{size:20}),C.jsx("span",{className:"text-sm font-medium hidden md:inline",children:"Edit"})]})]}),C.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 md:p-12 text-white max-w-4xl mx-auto",children:[C.jsx("span",{className:"inline-block px-3 py-1 rounded-md bg-white/20 backdrop-blur text-xs font-bold uppercase tracking-widest mb-4",children:n.category}),C.jsx("h1",{className:"text-4xl md:text-6xl font-serif font-bold mb-6 leading-tight",children:n.title}),C.jsxs("div",{className:"flex items-center gap-6 text-sm font-medium text-white/80",children:[C.jsx("span",{children:n.author}),C.jsx("span",{children:new Date(n.publishedAt).toLocaleDateString()}),C.jsxs("span",{children:[n.views," reads"]})]})]})]}),C.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-12",children:[C.jsx("p",{className:"text-xl md:text-2xl text-stone-600 font-serif leading-relaxed mb-12 italic border-l-4 border-stone-200 pl-6",children:n.excerpt}),C.jsx("div",{className:"max-w-none",children:C.jsx(lE,{blocks:n.blocks,onChange:()=>{},readOnly:!0})}),C.jsxs("div",{className:"mt-16 pt-8 border-t border-stone-100 flex flex-col md:flex-row justify-between items-center gap-6",children:[C.jsx("div",{className:"flex flex-wrap gap-2",children:n.tags.map(d=>C.jsxs("span",{className:"text-xs font-bold text-stone-500 bg-stone-100 px-3 py-1 rounded-full uppercase tracking-wider",children:["#",d]},d))}),C.jsx(qU,{postId:n.id,initialCount:l.count,initialLiked:l.liked,userId:t==null?void 0:t.id})]}),C.jsx(OU,{postId:n.id,currentUser:t,onLoginReq:s})]})]})},El=({posts:n,onPostClick:e,searchQuery:t,heroImage:s})=>{const[r,l]=_e.useState("All"),c=_e.useMemo(()=>{const d=new Date;let y=n.filter(p=>p.status==="published"&&(!p.scheduledAt||new Date(p.scheduledAt)<=d));if(r!=="All"&&(y=y.filter(p=>p.category===r)),t.trim()){const p=t.toLowerCase();y=y.filter(v=>v.title.toLowerCase().includes(p)||v.excerpt.toLowerCase().includes(p)||v.tags.some(T=>T.toLowerCase().includes(p)))}return y},[n,r,t]);return C.jsxs("main",{className:"min-h-screen",children:[!t&&C.jsxs("section",{className:"relative h-[60vh] flex items-center justify-center overflow-hidden",children:[C.jsx("div",{className:"absolute inset-0 bg-stone-200",children:C.jsx("img",{src:s,className:"w-full h-full object-cover opacity-50 transition-opacity duration-1000",alt:"Hero"})}),C.jsxs("div",{className:"relative z-10 text-center px-4 animate-slide-up",children:[C.jsx("span",{className:"inline-block py-1 px-3 rounded-full bg-white/20 backdrop-blur-sm text-stone-900 text-xs font-semibold uppercase tracking-widest mb-4 border border-white/30",children:"Welcome to Ro-shines"}),C.jsx("h1",{className:"text-5xl md:text-7xl font-serif font-bold text-stone-900 mb-6 drop-shadow-sm",children:"Stories by Roshni"}),C.jsx("p",{className:"text-lg md:text-xl text-stone-700 max-w-2xl mx-auto font-light",children:"Exploring the intersection of design, culture, and conscious living."})]})]}),C.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-16",children:[t&&C.jsx("div",{className:"mb-8 pb-4 border-b border-stone-200",children:C.jsxs("h2",{className:"text-2xl font-serif text-stone-800",children:['Search results for "',C.jsx("span",{className:"italic",children:t}),'"']})}),!t&&C.jsxs("div",{className:"flex flex-wrap gap-4 justify-center mb-16",children:[C.jsx("button",{onClick:()=>l("All"),className:`px-5 py-2 rounded-full text-sm font-medium transition-all duration-300 ${r==="All"?"bg-stone-800 text-white shadow-lg":"bg-white text-stone-500 hover:bg-stone-100"}`,children:"All Stories"}),Object.values(Hn).map(d=>{const y=IU[d].icon;return C.jsxs("button",{onClick:()=>l(d),className:`px-5 py-2 rounded-full text-sm font-medium transition-all duration-300 flex items-center gap-2 ${r===d?"bg-stone-800 text-white shadow-lg":"bg-white text-stone-500 hover:bg-stone-100"}`,children:[C.jsx(y,{size:14})," ",d]},d)})]}),C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 md:gap-12",children:c.map(d=>C.jsxs("article",{onClick:()=>e(d.id),className:"group cursor-pointer flex flex-col gap-4 animate-fade-in",children:[C.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden rounded-xl bg-stone-100",children:[C.jsx("img",{src:d.coverImage,alt:d.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}),C.jsx("div",{className:"absolute top-4 left-4 bg-white/90 backdrop-blur px-3 py-1 text-xs font-bold uppercase tracking-wider rounded-md shadow-sm",children:d.category})]}),C.jsxs("div",{children:[C.jsx("h2",{className:"text-2xl font-serif font-bold text-stone-900 group-hover:text-rose-900 transition-colors mb-2 leading-tight",children:d.title}),C.jsx("p",{className:"text-stone-500 line-clamp-2 text-sm leading-relaxed mb-3",children:d.excerpt}),C.jsxs("div",{className:"flex items-center gap-2 text-xs text-stone-400 font-medium",children:[C.jsx("span",{children:new Date(d.publishedAt).toLocaleDateString()}),C.jsx("span",{children:""}),C.jsxs("span",{children:[d.views," views"]})]})]})]},d.id))}),c.length===0&&C.jsxs("div",{className:"text-center py-20 text-stone-400",children:[C.jsx(he.Coffee,{size:48,className:"mx-auto mb-4 opacity-50"}),C.jsx("p",{children:"No stories found."}),t&&C.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 text-stone-800 underline",children:"Clear Search"})]})]})]})},zU=({isOpen:n,onClose:e,onConfirm:t})=>n?C.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-fade-in",children:C.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl",children:[C.jsx("div",{className:"w-12 h-12 bg-red-100 text-red-600 rounded-full flex items-center justify-center mb-4 mx-auto",children:C.jsx(he.Trash2,{size:24})}),C.jsx("h3",{className:"text-xl font-bold text-center text-stone-900 mb-2",children:"Delete Story?"}),C.jsx("p",{className:"text-center text-stone-500 text-sm mb-6",children:"Are you sure you want to delete this story? This action cannot be undone."}),C.jsxs("div",{className:"flex gap-3",children:[C.jsx("button",{onClick:e,className:"flex-1 py-2.5 rounded-xl border border-stone-200 text-stone-600 font-medium hover:bg-stone-50",children:"Cancel"}),C.jsx("button",{onClick:t,className:"flex-1 py-2.5 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700",children:"Delete"})]})]})}):null,BU=({posts:n,onEdit:e,onNew:t,onDelete:s,onToggleStatus:r,onOpenSettings:l})=>{const[c,d]=_e.useState(null),[y,p]=_e.useState("stories"),[v,T]=_e.useState([]);_e.useEffect(()=>{y==="subscribers"&&j4().then(T)},[y]);const S=()=>{const R=v.join(","),O=encodeURIComponent("Latest Updates from Ro-shines"),B=encodeURIComponent(`Hello,

I just published a new story on the blog! 

Check it out here: `+window.location.origin+`

Warmly,
Roshni`);window.location.href=`mailto:?bcc=${R}&subject=${O}&body=${B}`};return C.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12 animate-fade-in",children:[C.jsx(zU,{isOpen:!!c,onClose:()=>d(null),onConfirm:()=>{c&&s(c),d(null)}}),C.jsxs("div",{className:"flex justify-between items-center mb-10",children:[C.jsxs("div",{children:[C.jsx("h1",{className:"text-3xl font-serif font-bold text-stone-900 mb-1",children:"Dashboard"}),C.jsx("p",{className:"text-stone-500",children:"Manage your stories and site settings."})]}),C.jsxs("div",{className:"flex gap-3",children:[C.jsxs("button",{onClick:l,className:"bg-white border border-stone-200 text-stone-700 px-4 py-2.5 rounded-xl font-bold hover:bg-stone-50 transition-colors flex items-center gap-2",children:[C.jsx(he.Type,{size:18})," Site Settings"]}),C.jsxs("button",{onClick:t,className:"bg-stone-900 text-white px-6 py-2.5 rounded-xl font-bold hover:bg-stone-800 transition-colors flex items-center gap-2 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[C.jsx(he.Plus,{size:18})," New Story"]})]})]}),C.jsxs("div",{className:"flex gap-6 mb-8 border-b border-stone-100",children:[C.jsx("button",{onClick:()=>p("stories"),className:`pb-4 text-sm font-bold transition-colors border-b-2 ${y==="stories"?"text-stone-900 border-stone-900":"text-stone-400 border-transparent hover:text-stone-600"}`,children:"Stories"}),C.jsx("button",{onClick:()=>p("subscribers"),className:`pb-4 text-sm font-bold transition-colors border-b-2 ${y==="subscribers"?"text-stone-900 border-stone-900":"text-stone-400 border-transparent hover:text-stone-600"}`,children:"Subscribers"})]}),y==="stories"?C.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-stone-100 overflow-hidden",children:[C.jsxs("table",{className:"w-full",children:[C.jsx("thead",{className:"bg-stone-50 border-b border-stone-100",children:C.jsxs("tr",{children:[C.jsx("th",{className:"text-left py-4 px-6 text-xs font-bold text-stone-500 uppercase tracking-wider",children:"Title"}),C.jsx("th",{className:"text-left py-4 px-6 text-xs font-bold text-stone-500 uppercase tracking-wider",children:"Status"}),C.jsx("th",{className:"text-left py-4 px-6 text-xs font-bold text-stone-500 uppercase tracking-wider",children:"Views"}),C.jsx("th",{className:"text-left py-4 px-6 text-xs font-bold text-stone-500 uppercase tracking-wider",children:"Date"}),C.jsx("th",{className:"text-right py-4 px-6 text-xs font-bold text-stone-500 uppercase tracking-wider",children:"Actions"})]})}),C.jsx("tbody",{className:"divide-y divide-stone-50",children:n.map(R=>C.jsxs("tr",{className:"hover:bg-stone-50/50 transition-colors",children:[C.jsxs("td",{className:"py-4 px-6",children:[C.jsx("div",{className:"font-bold text-stone-900",children:R.title}),C.jsx("div",{className:"text-xs text-stone-400 mt-1",children:R.category})]}),C.jsx("td",{className:"py-4 px-6",children:C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${R.status==="published"?"bg-emerald-500":"bg-amber-500"}`}),C.jsx("span",{className:"text-sm font-medium text-stone-600 capitalize",children:R.status}),C.jsx("button",{onClick:()=>r(R.id),className:`ml-2 text-xs font-bold px-2 py-1 rounded border transition-colors ${R.status==="published"?"border-stone-200 text-stone-500 hover:bg-stone-100":"bg-stone-900 text-white border-transparent hover:bg-stone-800"}`,children:R.status==="published"?"Unpublish":"Publish"})]})}),C.jsx("td",{className:"py-4 px-6 text-sm text-stone-600",children:R.views}),C.jsx("td",{className:"py-4 px-6 text-sm text-stone-600",children:new Date(R.publishedAt).toLocaleDateString()}),C.jsxs("td",{className:"py-4 px-6 text-right space-x-2",children:[C.jsx("button",{onClick:()=>e(R.id),className:"text-stone-400 hover:text-indigo-600 transition-colors p-2 hover:bg-indigo-50 rounded-lg",children:C.jsx(he.PenTool,{size:18})}),C.jsx("button",{onClick:()=>d(R.id),className:"text-stone-400 hover:text-red-600 transition-colors p-2 hover:bg-red-50 rounded-lg",children:C.jsx(he.Trash2,{size:18})})]})]},R.id))})]}),n.length===0&&C.jsx("div",{className:"p-12 text-center text-stone-400",children:C.jsx("p",{children:"No stories yet. Start writing your first one!"})})]}):C.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-stone-100 overflow-hidden p-8",children:[C.jsxs("div",{className:"flex justify-between items-center mb-8",children:[C.jsxs("div",{children:[C.jsxs("h2",{className:"text-xl font-bold text-stone-900",children:["Subscriber List (",v.length,")"]}),C.jsx("p",{className:"text-stone-500 text-sm mt-1",children:"People who have joined your newsletter."})]}),C.jsxs("button",{onClick:S,disabled:v.length===0,className:"bg-stone-900 text-white px-6 py-2.5 rounded-xl font-bold hover:bg-stone-800 transition-colors flex items-center gap-2 disabled:opacity-50",children:[C.jsx(he.Send,{size:16})," Send Update"]})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[v.map((R,O)=>C.jsxs("div",{className:"p-4 border border-stone-100 rounded-xl bg-stone-50 flex items-center gap-3",children:[C.jsx("div",{className:"w-8 h-8 rounded-full bg-stone-200 flex items-center justify-center text-stone-500 font-bold text-xs",children:R.charAt(0).toUpperCase()}),C.jsx("span",{className:"text-stone-600 font-medium text-sm",children:R})]},O)),v.length===0&&C.jsx("div",{className:"col-span-3 text-center text-stone-400 py-10",children:"No subscribers yet."})]})]})]})},FU=({post:n,onSave:e,onCancel:t})=>{var J;const[s,r]=_e.useState(n),[l,c]=_e.useState(!1),[d,y]=_e.useState(!1),[p,v]=_e.useState(""),T=X=>{r({...s,blocks:X})},S=async()=>{if(!s.blocks.length)return;const X=s.blocks.slice(0,3).map(j=>j.content).join(" "),te=await ZM(X);te&&r({...s,title:te})},R=X=>{X.key==="Enter"&&p.trim()&&(X.preventDefault(),s.tags.includes(p.trim())||r({...s,tags:[...s.tags,p.trim()]}),v(""))},O=X=>{r({...s,tags:s.tags.filter(te=>te!==X)})},B=X=>{var j;const te=(j=X.target.files)==null?void 0:j[0];if(te){if(te.size>5*1024*1024){alert("Image is too large. Please use an image under 5MB or provide a URL instead.");return}const le=new Image,fe=new FileReader;fe.onload=Z=>{var M;le.onload=()=>{const N=document.createElement("canvas"),b=N.getContext("2d"),P=1200;let{width:V,height:L}=le;V>L&&V>P?(L=L*P/V,V=P):L>P&&(V=V*P/L,L=P),N.width=V,N.height=L,b==null||b.drawImage(le,0,0,V,L);const D=N.toDataURL("image/jpeg",.7);if(D.length*3/4>800*1024){alert("Image is still too large after compression. Please use a smaller image or provide a URL instead.");return}r({...s,coverImage:D})},le.src=(M=Z.target)==null?void 0:M.result},fe.readAsDataURL(te)}};return d?C.jsxs("div",{className:"fixed inset-0 bg-stone-50 z-50 overflow-y-auto",children:[C.jsxs("div",{className:"sticky top-0 bg-white border-b border-stone-200 px-6 py-4 flex justify-between items-center z-40",children:[C.jsx("h2",{className:"font-bold text-stone-500",children:"Preview Mode"}),C.jsx("button",{onClick:()=>y(!1),className:"bg-stone-900 text-white px-4 py-2 rounded-lg font-bold text-sm",children:"Close Preview"})]}),C.jsx(rA,{post:s,onBack:()=>y(!1),currentUser:null,onLoginReq:()=>{}})]}):C.jsxs("div",{className:"flex h-screen overflow-hidden bg-white",children:[C.jsxs("div",{className:`fixed inset-y-0 right-0 w-80 bg-white border-l border-stone-200 transform transition-transform duration-300 z-30 shadow-2xl p-6 overflow-y-auto ${l?"translate-x-0":"translate-x-full"}`,children:[C.jsxs("div",{className:"flex justify-between items-center mb-6",children:[C.jsx("h3",{className:"font-serif font-bold text-xl",children:"Post Settings"}),C.jsx("button",{onClick:()=>c(!1),className:"text-stone-400 hover:text-stone-600",children:C.jsx(he.X,{size:20})})]}),C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-2",children:"Publish Date"}),C.jsxs("div",{className:"relative",children:[C.jsx(he.Calendar,{className:"absolute left-3 top-3 text-stone-400",size:16}),C.jsx("input",{type:"datetime-local",value:s.scheduledAt||"",onChange:X=>r({...s,scheduledAt:X.target.value}),className:"w-full pl-10 pr-3 py-2 bg-stone-50 rounded-lg text-sm border border-stone-200 outline-none focus:border-stone-800"})]}),C.jsx("p",{className:"text-xs text-stone-400 mt-1",children:"Leave empty to publish immediately."})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-2",children:"Category"}),C.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.keys(Hn).map(X=>C.jsx("button",{onClick:()=>r({...s,category:X}),className:`text-xs font-bold py-2 px-3 rounded-lg border transition-colors ${s.category===X?"bg-stone-900 text-white border-stone-900":"bg-white text-stone-500 border-stone-200 hover:border-stone-400"}`,children:X},X))})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-2",children:"Tags"}),C.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:s.tags.map(X=>C.jsxs("span",{className:"inline-flex items-center gap-1 bg-stone-100 px-2 py-1 rounded text-xs font-bold text-stone-600",children:["#",X," ",C.jsx("button",{onClick:()=>O(X),children:C.jsx(he.X,{size:10})})]},X))}),C.jsxs("div",{className:"relative",children:[C.jsx(he.Hash,{className:"absolute left-3 top-2.5 text-stone-400",size:14}),C.jsx("input",{type:"text",placeholder:"Add tag + Enter",value:p,onChange:X=>v(X.target.value),onKeyDown:R,className:"w-full pl-8 pr-3 py-2 bg-stone-50 rounded-lg text-sm border border-stone-200 outline-none focus:border-stone-800"})]})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-2",children:"Cover Image"}),C.jsxs("div",{className:"flex flex-col gap-3",children:[C.jsxs("div",{className:"flex gap-2",children:[C.jsxs("label",{className:"cursor-pointer bg-white border border-stone-300 text-stone-600 px-3 py-2 rounded-lg hover:bg-stone-50 transition-colors text-xs font-medium flex items-center gap-1",children:[C.jsx(he.Camera,{size:14})," Upload",C.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:B})]}),C.jsx("span",{className:"text-xs text-stone-400 self-center",children:"or"})]}),C.jsx("input",{type:"url",placeholder:"Paste image URL...",value:(J=s.coverImage)!=null&&J.startsWith("data:")?"":s.coverImage||"",onChange:X=>r({...s,coverImage:X.target.value}),className:"w-full px-3 py-2 bg-stone-50 rounded-lg text-xs border border-stone-200 outline-none focus:border-stone-800"}),C.jsx("p",{className:"text-[10px] text-stone-400",children:"Tip: Use image URLs from Unsplash, Imgur, or any public link"}),s.coverImage&&C.jsx("img",{src:s.coverImage,className:"w-full h-32 object-cover rounded-lg bg-stone-100 border border-stone-200"})]})]})]})]}),C.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative transition-all duration-300",style:{marginRight:l?"320px":"0"},children:[C.jsxs("header",{className:"bg-white border-b border-stone-100 px-6 py-4 flex items-center justify-between z-20",children:[C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsx("button",{onClick:t,className:"p-2 hover:bg-stone-100 rounded-full text-stone-500 transition-colors",children:C.jsx(he.ChevronLeft,{size:20})}),C.jsxs("div",{className:"text-sm font-medium text-stone-400",children:[s.status==="draft"?"Draft":"Published",s.scheduledAt&&`  Scheduled: ${new Date(s.scheduledAt).toLocaleDateString()}`]})]}),C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsxs("button",{onClick:()=>y(!0),className:"p-2 text-stone-400 hover:text-stone-900 font-bold text-sm flex items-center gap-1",children:[C.jsx(he.Eye,{size:16})," ",C.jsx("span",{className:"hidden md:inline",children:"Preview"})]}),C.jsxs("button",{onClick:()=>c(!l),className:`p-2 font-bold text-sm flex items-center gap-1 transition-colors ${l?"text-stone-900 bg-stone-100 rounded-lg":"text-stone-400 hover:text-stone-900"}`,children:[C.jsx(he.Layout,{size:16})," ",C.jsx("span",{className:"hidden md:inline",children:"Settings"})]}),C.jsx("div",{className:"h-6 w-px bg-stone-200 mx-2"}),C.jsx("button",{onClick:()=>e({...s,status:"draft"}),className:"px-4 py-2 text-stone-600 font-bold text-sm hover:bg-stone-50 rounded-lg transition-colors",children:"Save Draft"}),C.jsx("button",{onClick:()=>e({...s,status:"published"}),className:"px-5 py-2 bg-stone-900 text-white font-bold text-sm rounded-lg hover:bg-stone-800 transition-colors shadow-lg hover:shadow-xl",children:"Publish"})]})]}),C.jsx("div",{className:"flex-1 overflow-y-auto bg-white scroll-smooth",children:C.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-12",children:[C.jsxs("div",{className:"mb-8 group relative",children:[C.jsx("textarea",{value:s.title,onChange:X=>r({...s,title:X.target.value}),placeholder:"Story Title",className:"w-full text-4xl md:text-5xl font-serif font-bold text-stone-900 placeholder:text-stone-300 outline-none resize-none bg-transparent overflow-hidden",rows:1,onInput:X=>{const te=X.target;te.style.height="auto",te.style.height=te.scrollHeight+"px"}}),C.jsxs("button",{onClick:S,className:"absolute right-0 top-2 opacity-0 group-hover:opacity-100 transition-opacity text-xs font-bold text-purple-600 bg-purple-50 px-2 py-1 rounded-full flex items-center gap-1 hover:bg-purple-100",children:[C.jsx(he.Sparkles,{size:12})," Suggest Title"]})]}),C.jsx("div",{className:"mb-12",children:C.jsx("textarea",{value:s.excerpt,onChange:X=>r({...s,excerpt:X.target.value}),placeholder:"Write a short excerpt...",className:"w-full text-xl text-stone-500 font-serif italic outline-none resize-none bg-transparent",rows:2})}),C.jsx(lE,{blocks:s.blocks,onChange:T})]})})]})]})},HU=()=>{const[n,e]=_e.useState({type:"home"}),[t,s]=_e.useState([]),[r,l]=_e.useState(null),[c,d]=_e.useState(""),[y,p]=_e.useState(!1),[v,T]=_e.useState(null),[S,R]=_e.useState({siteName:"Ro-shines",heroImage:oA,aboutImage:RU,signatureImage:wU}),O=_e.useRef(null);_e.useEffect(()=>{(async()=>{try{const b=await rU();if(b&&b.length>0)s(b),localStorage.setItem("roshines_posts",JSON.stringify(b));else{const P=localStorage.getItem("roshines_posts");P?s(JSON.parse(P)):(s(Tl),localStorage.setItem("roshines_posts",JSON.stringify(Tl)),await oU(Tl))}}catch(b){console.error("Error loading posts from Firestore:",b);const P=localStorage.getItem("roshines_posts");P?s(JSON.parse(P)):(s(Tl),localStorage.setItem("roshines_posts",JSON.stringify(Tl)))}})();const M=localStorage.getItem("roshines_settings");M&&R(JSON.parse(M));const N=localStorage.getItem("roshines_user");if(N)try{l(JSON.parse(N))}catch{console.error("Failed to restore user session"),localStorage.removeItem("roshines_user")}},[]),_e.useEffect(()=>{t.length>0&&localStorage.setItem("roshines_posts",JSON.stringify(t))},[t]),_e.useEffect(()=>{if(n.type==="post"){const Z=n.postId;O.current!==Z&&(s(M=>M.map(N=>N.id===Z?{...N,views:(N.views||0)+1}:N)),O.current=Z,lU(Z).catch(M=>console.error("Failed to save view count:",M)))}else O.current=null},[n]);const B=Z=>{l(Z),localStorage.setItem("roshines_user",JSON.stringify(Z)),e({type:"home"})},J=()=>{l(null),localStorage.removeItem("roshines_user"),e({type:"home"})},X=Z=>{R(Z),localStorage.setItem("roshines_settings",JSON.stringify(Z)),e({type:"admin-dashboard"})},te=async Z=>{const M=t.find(b=>b.id===Z.id),N=(M==null?void 0:M.status)!=="published"&&Z.status==="published";s(M?t.map(b=>b.id===Z.id?Z:b):[Z,...t]);try{await bT(Z)}catch(b){console.error("Error saving post to Firestore:",b)}if(e({type:"admin-dashboard"}),N){const b=await wT();T(`Newsletter sent to ${b} subscribers!`)}},j=async Z=>{s(t.filter(M=>M.id!==Z));try{await aU(Z)}catch(M){console.error("Error deleting post from Firestore:",M)}},le=async Z=>{const M=t.find(N=>N.id===Z);if(M){const N=M.status==="published"?"draft":"published",b={...M,status:N};s(t.map(P=>P.id===Z?b:P));try{await bT(b)}catch(P){console.error("Error updating post status in Firestore:",P)}if(N==="published"){const P=await wT();T(`Newsletter sent to ${P} subscribers!`)}}},fe=()=>{switch(n.type){case"home":return C.jsx(El,{posts:t,onPostClick:N=>e({type:"post",postId:N}),searchQuery:c,heroImage:S.heroImage});case"post":const Z=t.find(N=>N.id===n.postId);return Z?C.jsx(rA,{post:Z,onBack:()=>e({type:"home"}),currentUser:r,onLoginReq:()=>e({type:"login"}),onEdit:()=>e({type:"admin-editor",postId:Z.id})}):C.jsx("div",{children:"Post not found"});case"about":return C.jsx(LU,{aboutImage:S.aboutImage,signatureImage:S.signatureImage});case"login":case"register":return C.jsx(UU,{onLogin:B});case"admin-dashboard":return r!=null&&r.isAdmin?C.jsx(BU,{posts:t,onEdit:N=>e({type:"admin-editor",postId:N}),onNew:()=>e({type:"admin-editor"}),onDelete:j,onToggleStatus:le,onOpenSettings:()=>e({type:"admin-settings"})}):C.jsx(El,{posts:t,onPostClick:N=>e({type:"post",postId:N}),searchQuery:c,heroImage:S.heroImage});case"admin-editor":if(!(r!=null&&r.isAdmin))return C.jsx(El,{posts:t,onPostClick:N=>e({type:"post",postId:N}),searchQuery:c,heroImage:S.heroImage});const M=n.postId?t.find(N=>N.id===n.postId):{id:Math.random().toString(36).substr(2,9),title:"",excerpt:"",coverImage:"https://images.unsplash.com/photo-1507646227500-4d389b0012be?auto=format&fit=crop&q=80&w=1200",category:Hn.Lifestyle,tags:[],blocks:[{id:"1",type:Je.Paragraph,content:"",width:100}],author:r.name,publishedAt:new Date().toISOString(),status:"draft",views:0};return C.jsx(FU,{post:M,onSave:te,onCancel:()=>e({type:"admin-dashboard"})});case"admin-settings":return r!=null&&r.isAdmin?C.jsx(kU,{settings:S,onSave:X,onCancel:()=>e({type:"admin-dashboard"})}):C.jsx(El,{posts:t,onPostClick:N=>e({type:"post",postId:N}),searchQuery:c,heroImage:S.heroImage});default:return C.jsx(El,{posts:t,onPostClick:N=>e({type:"post",postId:N}),searchQuery:c,heroImage:S.heroImage})}};return C.jsxs("div",{className:"min-h-screen bg-stone-50 text-stone-800 font-sans selection:bg-rose-100 selection:text-rose-900",children:[C.jsx(bU,{message:v,onClose:()=>T(null)}),n.type!=="admin-editor"&&C.jsx(NU,{view:n,setView:e,searchQuery:c,setSearchQuery:d,onOpenNewsletter:()=>p(!0),user:r,onLogout:J}),fe(),n.type!=="admin-editor"&&C.jsx(MU,{onOpenNewsletter:()=>p(!0),onNavigate:e}),C.jsx(DU,{isOpen:y,onClose:()=>p(!1),onSubscribe:Z=>console.log("Subscribed:",Z)})]})},aA=document.getElementById("root");if(!aA)throw new Error("Could not find root element to mount to");const GU=QC.createRoot(aA);GU.render(C.jsx(MT.StrictMode,{children:C.jsx(HU,{})}));
