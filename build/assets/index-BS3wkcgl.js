(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();function UT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var bh={exports:{}},Tl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q_;function zC(){if(q_)return Tl;q_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var d in r)d!=="key"&&(l[d]=r[d])}else l=r;return r=l.ref,{$$typeof:n,type:s,key:c,ref:r!==void 0?r:null,props:l}}return Tl.Fragment=e,Tl.jsx=t,Tl.jsxs=t,Tl}var O_;function BC(){return O_||(O_=1,bh.exports=zC()),bh.exports}var A=BC(),Nh={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z_;function FC(){if(z_)return be;z_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function I(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,H={};function $(O,oe,he){this.props=O,this.context=oe,this.refs=H,this.updater=he||L}$.prototype.isReactComponent={},$.prototype.setState=function(O,oe){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,oe,"setState")},$.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function te(){}te.prototype=$.prototype;function j(O,oe,he){this.props=O,this.context=oe,this.refs=H,this.updater=he||L}var le=j.prototype=new te;le.constructor=j,z(le,$.prototype),le.isPureReactComponent=!0;var fe=Array.isArray;function ae(){}var P={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function b(O,oe,he){var ve=he.ref;return{$$typeof:n,type:O,key:oe,ref:ve!==void 0?ve:null,props:he}}function M(O,oe){return b(O.type,oe,O.props)}function D(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function U(O){var oe={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(he){return oe[he]})}var V=/\/+/g;function ne(O,oe){return typeof O=="object"&&O!==null&&O.key!=null?U(""+O.key):oe.toString(36)}function _e(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(ae,ae):(O.status="pending",O.then(function(oe){O.status==="pending"&&(O.status="fulfilled",O.value=oe)},function(oe){O.status==="pending"&&(O.status="rejected",O.reason=oe)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function B(O,oe,he,ve,Ie){var Pe=typeof O;(Pe==="undefined"||Pe==="boolean")&&(O=null);var He=!1;if(O===null)He=!0;else switch(Pe){case"bigint":case"string":case"number":He=!0;break;case"object":switch(O.$$typeof){case n:case e:He=!0;break;case v:return He=O._init,B(He(O._payload),oe,he,ve,Ie)}}if(He)return Ie=Ie(O),He=ve===""?"."+ne(O,0):ve,fe(Ie)?(he="",He!=null&&(he=He.replace(V,"$&/")+"/"),B(Ie,oe,he,"",function(fo){return fo})):Ie!=null&&(D(Ie)&&(Ie=M(Ie,he+(Ie.key==null||O&&O.key===Ie.key?"":(""+Ie.key).replace(V,"$&/")+"/")+He)),oe.push(Ie)),1;He=0;var Lt=ve===""?".":ve+":";if(fe(O))for(var ht=0;ht<O.length;ht++)ve=O[ht],Pe=Lt+ne(ve,ht),He+=B(ve,oe,he,Pe,Ie);else if(ht=I(O),typeof ht=="function")for(O=ht.call(O),ht=0;!(ve=O.next()).done;)ve=ve.value,Pe=Lt+ne(ve,ht++),He+=B(ve,oe,he,Pe,Ie);else if(Pe==="object"){if(typeof O.then=="function")return B(_e(O),oe,he,ve,Ie);throw oe=String(O),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return He}function Z(O,oe,he){if(O==null)return O;var ve=[],Ie=0;return B(O,ve,"","",function(Pe){return oe.call(he,Pe,Ie++)}),ve}function ce(O){if(O._status===-1){var oe=O._result;oe=oe(),oe.then(function(he){(O._status===0||O._status===-1)&&(O._status=1,O._result=he)},function(he){(O._status===0||O._status===-1)&&(O._status=2,O._result=he)}),O._status===-1&&(O._status=0,O._result=oe)}if(O._status===1)return O._result.default;throw O._result}var Re=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Xe={map:Z,forEach:function(O,oe,he){Z(O,function(){oe.apply(this,arguments)},he)},count:function(O){var oe=0;return Z(O,function(){oe++}),oe},toArray:function(O){return Z(O,function(oe){return oe})||[]},only:function(O){if(!D(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return be.Activity=T,be.Children=Xe,be.Component=$,be.Fragment=t,be.Profiler=r,be.PureComponent=j,be.StrictMode=s,be.Suspense=g,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,be.__COMPILER_RUNTIME={__proto__:null,c:function(O){return P.H.useMemoCache(O)}},be.cache=function(O){return function(){return O.apply(null,arguments)}},be.cacheSignal=function(){return null},be.cloneElement=function(O,oe,he){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ve=z({},O.props),Ie=O.key;if(oe!=null)for(Pe in oe.key!==void 0&&(Ie=""+oe.key),oe)!R.call(oe,Pe)||Pe==="key"||Pe==="__self"||Pe==="__source"||Pe==="ref"&&oe.ref===void 0||(ve[Pe]=oe[Pe]);var Pe=arguments.length-2;if(Pe===1)ve.children=he;else if(1<Pe){for(var He=Array(Pe),Lt=0;Lt<Pe;Lt++)He[Lt]=arguments[Lt+2];ve.children=He}return b(O.type,Ie,ve)},be.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},be.createElement=function(O,oe,he){var ve,Ie={},Pe=null;if(oe!=null)for(ve in oe.key!==void 0&&(Pe=""+oe.key),oe)R.call(oe,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(Ie[ve]=oe[ve]);var He=arguments.length-2;if(He===1)Ie.children=he;else if(1<He){for(var Lt=Array(He),ht=0;ht<He;ht++)Lt[ht]=arguments[ht+2];Ie.children=Lt}if(O&&O.defaultProps)for(ve in He=O.defaultProps,He)Ie[ve]===void 0&&(Ie[ve]=He[ve]);return b(O,Pe,Ie)},be.createRef=function(){return{current:null}},be.forwardRef=function(O){return{$$typeof:d,render:O}},be.isValidElement=D,be.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:ce}},be.memo=function(O,oe){return{$$typeof:p,type:O,compare:oe===void 0?null:oe}},be.startTransition=function(O){var oe=P.T,he={};P.T=he;try{var ve=O(),Ie=P.S;Ie!==null&&Ie(he,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(ae,Re)}catch(Pe){Re(Pe)}finally{oe!==null&&he.types!==null&&(oe.types=he.types),P.T=oe}},be.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},be.use=function(O){return P.H.use(O)},be.useActionState=function(O,oe,he){return P.H.useActionState(O,oe,he)},be.useCallback=function(O,oe){return P.H.useCallback(O,oe)},be.useContext=function(O){return P.H.useContext(O)},be.useDebugValue=function(){},be.useDeferredValue=function(O,oe){return P.H.useDeferredValue(O,oe)},be.useEffect=function(O,oe){return P.H.useEffect(O,oe)},be.useEffectEvent=function(O){return P.H.useEffectEvent(O)},be.useId=function(){return P.H.useId()},be.useImperativeHandle=function(O,oe,he){return P.H.useImperativeHandle(O,oe,he)},be.useInsertionEffect=function(O,oe){return P.H.useInsertionEffect(O,oe)},be.useLayoutEffect=function(O,oe){return P.H.useLayoutEffect(O,oe)},be.useMemo=function(O,oe){return P.H.useMemo(O,oe)},be.useOptimistic=function(O,oe){return P.H.useOptimistic(O,oe)},be.useReducer=function(O,oe,he){return P.H.useReducer(O,oe,he)},be.useRef=function(O){return P.H.useRef(O)},be.useState=function(O){return P.H.useState(O)},be.useSyncExternalStore=function(O,oe,he){return P.H.useSyncExternalStore(O,oe,he)},be.useTransition=function(){return P.H.useTransition()},be.version="19.2.1",be}var B_;function Sm(){return B_||(B_=1,Nh.exports=FC()),Nh.exports}var me=Sm();const kT=UT(me);var Mh={exports:{}},El={},Dh={exports:{}},Ph={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function HC(){return F_||(F_=1,(function(n){function e(B,Z){var ce=B.length;B.push(Z);e:for(;0<ce;){var Re=ce-1>>>1,Xe=B[Re];if(0<r(Xe,Z))B[Re]=Z,B[ce]=Xe,ce=Re;else break e}}function t(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var Z=B[0],ce=B.pop();if(ce!==Z){B[0]=ce;e:for(var Re=0,Xe=B.length,O=Xe>>>1;Re<O;){var oe=2*(Re+1)-1,he=B[oe],ve=oe+1,Ie=B[ve];if(0>r(he,ce))ve<Xe&&0>r(Ie,he)?(B[Re]=Ie,B[ve]=ce,Re=ve):(B[Re]=he,B[oe]=ce,Re=oe);else if(ve<Xe&&0>r(Ie,ce))B[Re]=Ie,B[ve]=ce,Re=ve;else break e}}return Z}function r(B,Z){var ce=B.sortIndex-Z.sortIndex;return ce!==0?ce:B.id-Z.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var g=[],p=[],v=1,T=null,S=3,I=!1,L=!1,z=!1,H=!1,$=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function le(B){for(var Z=t(p);Z!==null;){if(Z.callback===null)s(p);else if(Z.startTime<=B)s(p),Z.sortIndex=Z.expirationTime,e(g,Z);else break;Z=t(p)}}function fe(B){if(z=!1,le(B),!L)if(t(g)!==null)L=!0,ae||(ae=!0,U());else{var Z=t(p);Z!==null&&_e(fe,Z.startTime-B)}}var ae=!1,P=-1,R=5,b=-1;function M(){return H?!0:!(n.unstable_now()-b<R)}function D(){if(H=!1,ae){var B=n.unstable_now();b=B;var Z=!0;try{e:{L=!1,z&&(z=!1,te(P),P=-1),I=!0;var ce=S;try{t:{for(le(B),T=t(g);T!==null&&!(T.expirationTime>B&&M());){var Re=T.callback;if(typeof Re=="function"){T.callback=null,S=T.priorityLevel;var Xe=Re(T.expirationTime<=B);if(B=n.unstable_now(),typeof Xe=="function"){T.callback=Xe,le(B),Z=!0;break t}T===t(g)&&s(g),le(B)}else s(g);T=t(g)}if(T!==null)Z=!0;else{var O=t(p);O!==null&&_e(fe,O.startTime-B),Z=!1}}break e}finally{T=null,S=ce,I=!1}Z=void 0}}finally{Z?U():ae=!1}}}var U;if(typeof j=="function")U=function(){j(D)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ne=V.port2;V.port1.onmessage=D,U=function(){ne.postMessage(null)}}else U=function(){$(D,0)};function _e(B,Z){P=$(function(){B(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(B){switch(S){case 1:case 2:case 3:var Z=3;break;default:Z=S}var ce=S;S=Z;try{return B()}finally{S=ce}},n.unstable_requestPaint=function(){H=!0},n.unstable_runWithPriority=function(B,Z){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ce=S;S=B;try{return Z()}finally{S=ce}},n.unstable_scheduleCallback=function(B,Z,ce){var Re=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Re+ce:Re):ce=Re,B){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=ce+Xe,B={id:v++,callback:Z,priorityLevel:B,startTime:ce,expirationTime:Xe,sortIndex:-1},ce>Re?(B.sortIndex=ce,e(p,B),t(g)===null&&B===t(p)&&(z?(te(P),P=-1):z=!0,_e(fe,ce-Re))):(B.sortIndex=Xe,e(g,B),L||I||(L=!0,ae||(ae=!0,U()))),B},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(B){var Z=S;return function(){var ce=S;S=Z;try{return B.apply(this,arguments)}finally{S=ce}}}})(Ph)),Ph}var H_;function GC(){return H_||(H_=1,Dh.exports=HC()),Dh.exports}var Vh={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function YC(){if(G_)return en;G_=1;var n=Sm();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(g,p,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:g,containerInfo:p,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,en.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,v)},en.flushSync=function(g){var p=c.T,v=s.p;try{if(c.T=null,s.p=2,g)return g()}finally{c.T=p,s.p=v,s.d.f()}},en.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},en.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},en.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,T=d(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,I=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:I}):v==="script"&&s.d.X(g,{crossOrigin:T,integrity:S,fetchPriority:I,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},en.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=d(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},en.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,T=d(v,p.crossOrigin);s.d.L(g,v,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},en.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=d(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},en.requestFormReset=function(g){s.d.r(g)},en.unstable_batchedUpdates=function(g,p){return g(p)},en.useFormState=function(g,p,v){return c.H.useFormState(g,p,v)},en.useFormStatus=function(){return c.H.useHostTransitionStatus()},en.version="19.2.1",en}var Y_;function JC(){if(Y_)return Vh.exports;Y_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Vh.exports=YC(),Vh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J_;function KC(){if(J_)return El;J_=1;var n=GC(),e=Sm(),t=JC();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var o=i,a=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(a=o.return),i=o.return;while(i)}return o.tag===3?a:null}function c(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function d(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function g(i){if(l(i)!==i)throw Error(s(188))}function p(i){var o=i.alternate;if(!o){if(o=l(i),o===null)throw Error(s(188));return o!==i?null:i}for(var a=i,u=o;;){var y=a.return;if(y===null)break;var _=y.alternate;if(_===null){if(u=y.return,u!==null){a=u;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===a)return g(y),i;if(_===u)return g(y),o;_=_.sibling}throw Error(s(188))}if(a.return!==u.return)a=y,u=_;else{for(var C=!1,w=y.child;w;){if(w===a){C=!0,a=y,u=_;break}if(w===u){C=!0,u=y,a=_;break}w=w.sibling}if(!C){for(w=_.child;w;){if(w===a){C=!0,a=_,u=y;break}if(w===u){C=!0,u=_,a=y;break}w=w.sibling}if(!C)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:o}function v(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=v(i),o!==null)return o;i=i.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),j=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function U(i){return i===null||typeof i!="object"?null:(i=D&&i[D]||i["@@iterator"],typeof i=="function"?i:null)}var V=Symbol.for("react.client.reference");function ne(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===V?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case z:return"Fragment";case $:return"Profiler";case H:return"StrictMode";case fe:return"Suspense";case ae:return"SuspenseList";case b:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case L:return"Portal";case j:return i.displayName||"Context";case te:return(i._context.displayName||"Context")+".Consumer";case le:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case P:return o=i.displayName||null,o!==null?o:ne(i.type)||"Memo";case R:o=i._payload,i=i._init;try{return ne(i(o))}catch{}}return null}var _e=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},Re=[],Xe=-1;function O(i){return{current:i}}function oe(i){0>Xe||(i.current=Re[Xe],Re[Xe]=null,Xe--)}function he(i,o){Xe++,Re[Xe]=i.current,i.current=o}var ve=O(null),Ie=O(null),Pe=O(null),He=O(null);function Lt(i,o){switch(he(Pe,o),he(Ie,i),he(ve,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?a_(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=a_(o),i=l_(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}oe(ve),he(ve,i)}function ht(){oe(ve),oe(Ie),oe(Pe)}function fo(i){i.memoizedState!==null&&he(He,i);var o=ve.current,a=l_(o,i.type);o!==a&&(he(Ie,i),he(ve,a))}function Zo(i){Ie.current===i&&(oe(ve),oe(Ie)),He.current===i&&(oe(He),gl._currentValue=ce)}var jo,er;function fi(i){if(jo===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);jo=o&&o[1]||"",er=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+jo+i+er}var ga=!1;function ho(i,o){if(!i||ga)return"";ga=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(X){var K=X}Reflect.construct(i,[],ie)}else{try{ie.call()}catch(X){K=X}i.call(ie.prototype)}}else{try{throw Error()}catch(X){K=X}(ie=i())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(X){if(X&&K&&typeof X.stack=="string")return[X.stack,K.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),C=_[0],w=_[1];if(C&&w){var k=C.split(`
`),J=w.split(`
`);for(y=u=0;u<k.length&&!k[u].includes("DetermineComponentFrameRoot");)u++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(u===k.length||y===J.length)for(u=k.length-1,y=J.length-1;1<=u&&0<=y&&k[u]!==J[y];)y--;for(;1<=u&&0<=y;u--,y--)if(k[u]!==J[y]){if(u!==1||y!==1)do if(u--,y--,0>y||k[u]!==J[y]){var W=`
`+k[u].replace(" at new "," at ");return i.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",i.displayName)),W}while(1<=u&&0<=y);break}}}finally{ga=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?fi(a):""}function ya(i,o){switch(i.tag){case 26:case 27:case 5:return fi(i.type);case 16:return fi("Lazy");case 13:return i.child!==o&&o!==null?fi("Suspense Fallback"):fi("Suspense");case 19:return fi("SuspenseList");case 0:case 15:return ho(i.type,!1);case 11:return ho(i.type.render,!1);case 1:return ho(i.type,!0);case 31:return fi("Activity");default:return""}}function _a(i){try{var o="",a=null;do o+=ya(i,a),a=i,i=i.return;while(i);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var xt=Object.prototype.hasOwnProperty,qt=n.unstable_scheduleCallback,hs=n.unstable_cancelCallback,Mf=n.unstable_shouldYield,eu=n.unstable_requestPaint,ln=n.unstable_now,mo=n.unstable_getCurrentPriorityLevel,va=n.unstable_ImmediatePriority,Ta=n.unstable_UserBlockingPriority,ms=n.unstable_NormalPriority,Df=n.unstable_LowPriority,tu=n.unstable_IdlePriority,nu=n.log,iu=n.unstable_setDisableYieldValue,Kn=null,Yt=null;function Nn(i){if(typeof nu=="function"&&iu(i),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(Kn,i)}catch{}}var vt=Math.clz32?Math.clz32:ou,su=Math.log,tr=Math.LN2;function ou(i){return i>>>=0,i===0?32:31-(su(i)/tr|0)|0}var di=256,po=262144,Rt=4194304;function hi(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function mi(i,o,a){var u=i.pendingLanes;if(u===0)return 0;var y=0,_=i.suspendedLanes,C=i.pingedLanes;i=i.warmLanes;var w=u&134217727;return w!==0?(u=w&~_,u!==0?y=hi(u):(C&=w,C!==0?y=hi(C):a||(a=w&~i,a!==0&&(y=hi(a))))):(w=u&~_,w!==0?y=hi(w):C!==0?y=hi(C):a||(a=u&~i,a!==0&&(y=hi(a)))),y===0?0:o!==0&&o!==y&&(o&_)===0&&(_=y&-y,a=o&-o,_>=a||_===32&&(a&4194048)!==0)?o:y}function Qn(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Pf(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ru(){var i=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),i}function pi(i){for(var o=[],a=0;31>a;a++)o.push(i);return o}function go(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Vf(i,o,a,u,y,_){var C=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var w=i.entanglements,k=i.expirationTimes,J=i.hiddenUpdates;for(a=C&~a;0<a;){var W=31-vt(a),ie=1<<W;w[W]=0,k[W]=-1;var K=J[W];if(K!==null)for(J[W]=null,W=0;W<K.length;W++){var X=K[W];X!==null&&(X.lane&=-536870913)}a&=~ie}u!==0&&yo(i,u,0),_!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=_&~(C&~o))}function yo(i,o,a){i.pendingLanes|=o,i.suspendedLanes&=~o;var u=31-vt(o);i.entangledLanes|=o,i.entanglements[u]=i.entanglements[u]|1073741824|a&261930}function Ea(i,o){var a=i.entangledLanes|=o;for(i=i.entanglements;a;){var u=31-vt(a),y=1<<u;y&o|i[u]&o&&(i[u]|=o),a&=~y}}function Sa(i,o){var a=o&-o;return a=(a&42)!==0?1:_o(a),(a&(i.suspendedLanes|o))!==0?0:a}function _o(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Oi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function au(){var i=Z.p;return i!==0?i:(i=window.event,i===void 0?32:M_(i.type))}function $n(i,o){var a=Z.p;try{return Z.p=i,o()}finally{Z.p=a}}var Xn=Math.random().toString(36).slice(2),It="__reactFiber$"+Xn,Bt="__reactProps$"+Xn,gi="__reactContainer$"+Xn,nr="__reactEvents$"+Xn,Uf="__reactListeners$"+Xn,lu="__reactHandles$"+Xn,uu="__reactResources$"+Xn,yi="__reactMarker$"+Xn;function ir(i){delete i[It],delete i[Bt],delete i[nr],delete i[Uf],delete i[lu]}function _i(i){var o=i[It];if(o)return o;for(var a=i.parentNode;a;){if(o=a[gi]||a[It]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(i=p_(i);i!==null;){if(a=i[It])return a;i=p_(i)}return o}i=a,a=i.parentNode}return null}function Mn(i){if(i=i[It]||i[gi]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function Tn(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function vi(i){var o=i[uu];return o||(o=i[uu]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function wt(i){i[yi]=!0}var Aa=new Set,Ca={};function Ti(i,o){Ei(i,o),Ei(i+"Capture",o)}function Ei(i,o){for(Ca[i]=o,i=0;i<o.length;i++)Aa.add(o[i])}var xa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ra={},Ia={};function cu(i){return xt.call(Ia,i)?!0:xt.call(Ra,i)?!1:xa.test(i)?Ia[i]=!0:(Ra[i]=!0,!1)}function sr(i,o,a){if(cu(o))if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+a)}}function En(i,o,a){if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+a)}}function bt(i,o,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(o,a,""+u)}}function Ft(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ps(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function wa(i,o,a){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,_=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return y.call(this)},set:function(C){a=""+C,_.call(this,C)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(C){a=""+C},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function et(i){if(!i._valueTracker){var o=ps(i)?"checked":"value";i._valueTracker=wa(i,o,""+i[o])}}function vo(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var a=o.getValue(),u="";return i&&(u=ps(i)?i.checked?"true":"false":i.value),i=u,i!==a?(o.setValue(i),!0):!1}function Si(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var To=/[\n"\\]/g;function fn(i){return i.replace(To,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function or(i,o,a,u,y,_,C,w){i.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.type=C:i.removeAttribute("type"),o!=null?C==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Ft(o)):i.value!==""+Ft(o)&&(i.value=""+Ft(o)):C!=="submit"&&C!=="reset"||i.removeAttribute("value"),o!=null?ba(i,C,Ft(o)):a!=null?ba(i,C,Ft(a)):u!=null&&i.removeAttribute("value"),y==null&&_!=null&&(i.defaultChecked=!!_),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.name=""+Ft(w):i.removeAttribute("name")}function fu(i,o,a,u,y,_,C,w){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),o!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){et(i);return}a=a!=null?""+Ft(a):"",o=o!=null?""+Ft(o):a,w||o===i.value||(i.value=o),i.defaultValue=o}u=u??y,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=w?i.checked:!!u,i.defaultChecked=!!u,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.name=C),et(i)}function ba(i,o,a){o==="number"&&Si(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function gs(i,o,a,u){if(i=i.options,o){o={};for(var y=0;y<a.length;y++)o["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=o.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&u&&(i[a].defaultSelected=!0)}else{for(a=""+Ft(a),o=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,u&&(i[y].defaultSelected=!0);return}o!==null||i[y].disabled||(o=i[y])}o!==null&&(o.selected=!0)}}function du(i,o,a){if(o!=null&&(o=""+Ft(o),o!==i.value&&(i.value=o),a==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=a!=null?""+Ft(a):""}function ys(i,o,a,u){if(o==null){if(u!=null){if(a!=null)throw Error(s(92));if(_e(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),o=a}a=Ft(o),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u),et(i)}function dn(i,o){if(o){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=o;return}}i.textContent=o}var hu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Na(i,o,a){var u=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":u?i.setProperty(o,a):typeof a!="number"||a===0||hu.has(o)?o==="float"?i.cssFloat=a:i[o]=(""+a).trim():i[o]=a+"px"}function Ma(i,o,a){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var y in o)u=o[y],o.hasOwnProperty(y)&&a[y]!==u&&Na(i,y,u)}else for(var _ in o)o.hasOwnProperty(_)&&Na(i,_,o[_])}function rr(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_s=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ar(i){return _s.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Wn(){}var Da=null;function Dn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var vs=null,Ai=null;function Eo(i){var o=Mn(i);if(o&&(i=o.stateNode)){var a=i[Bt]||null;e:switch(i=o.stateNode,o.type){case"input":if(or(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+fn(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var u=a[o];if(u!==i&&u.form===i.form){var y=u[Bt]||null;if(!y)throw Error(s(90));or(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<a.length;o++)u=a[o],u.form===i.form&&vo(u)}break e;case"textarea":du(i,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&gs(i,!!a.multiple,o,!1)}}}var lr=!1;function Ts(i,o,a){if(lr)return i(o,a);lr=!0;try{var u=i(o);return u}finally{if(lr=!1,(vs!==null||Ai!==null)&&(ac(),vs&&(o=vs,i=Ai,Ai=vs=null,Eo(o),i)))for(o=0;o<i.length;o++)Eo(i[o])}}function Zn(i,o){var a=i.stateNode;if(a===null)return null;var u=a[Bt]||null;if(u===null)return null;a=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,o,typeof a));return a}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),So=!1;if(Pn)try{var it={};Object.defineProperty(it,"passive",{get:function(){So=!0}}),window.addEventListener("test",it,it),window.removeEventListener("test",it,it)}catch{So=!1}var Ci=null,Pa=null,Ao=null;function Va(){if(Ao)return Ao;var i,o=Pa,a=o.length,u,y="value"in Ci?Ci.value:Ci.textContent,_=y.length;for(i=0;i<a&&o[i]===y[i];i++);var C=a-i;for(u=1;u<=C&&o[a-u]===y[_-u];u++);return Ao=y.slice(i,1<u?1-u:void 0)}function Co(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function zi(){return!0}function jn(){return!1}function Jt(i){function o(a,u,y,_,C){this._reactName=a,this._targetInst=y,this.type=u,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var w in i)i.hasOwnProperty(w)&&(a=i[w],this[w]=a?a(_):_[w]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?zi:jn,this.isPropagationStopped=jn,this}return T(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),o}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xi=Jt(Bi),Es=T({},Bi,{view:0,detail:0}),Ua=Jt(Es),Ss,ur,Ri,cr=T({},Es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:As,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ri&&(Ri&&i.type==="mousemove"?(Ss=i.screenX-Ri.screenX,ur=i.screenY-Ri.screenY):ur=Ss=0,Ri=i),Ss)},movementY:function(i){return"movementY"in i?i.movementY:ur}}),ka=Jt(cr),xo=T({},cr,{dataTransfer:0}),pu=Jt(xo),gu=T({},Es,{relatedTarget:0}),Ro=Jt(gu),La=T({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),yu=Jt(La),fr=T({},Bi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),_u=Jt(fr),vu=T({},Bi,{data:0}),Ii=Jt(vu),Tu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Eu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Au(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Su[i])?!!o[i]:!1}function As(){return Au}var un=T({},Es,{key:function(i){if(i.key){var o=Tu[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Co(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Eu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:As,charCode:function(i){return i.type==="keypress"?Co(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Co(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Cu=Jt(un),xu=T({},cr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fi=Jt(xu),m=T({},Es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:As}),E=Jt(m),x=T({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=Jt(x),G=T({},cr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Jt(G),ue=T({},Bi,{newState:0,oldState:0}),Me=Jt(ue),Tt=[9,13,27,32],We=Pn&&"CompositionEvent"in window,mt=null;Pn&&"documentMode"in document&&(mt=document.documentMode);var Vn=Pn&&"TextEvent"in window&&!mt,wi=Pn&&(!We||mt&&8<mt&&11>=mt),ei=" ",ti=!1;function Io(i,o){switch(i){case"keyup":return Tt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dr(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var hr=!1;function cA(i,o){switch(i){case"compositionend":return dr(o);case"keypress":return o.which!==32?null:(ti=!0,ei);case"textInput":return i=o.data,i===ei&&ti?null:i;default:return null}}function fA(i,o){if(hr)return i==="compositionend"||!We&&Io(i,o)?(i=Va(),Ao=Pa=Ci=null,hr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return wi&&o.locale!=="ko"?null:o.data;default:return null}}var dA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _p(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!dA[i.type]:o==="textarea"}function vp(i,o,a,u){vs?Ai?Ai.push(u):Ai=[u]:vs=u,o=mc(o,"onChange"),0<o.length&&(a=new xi("onChange","change",null,a,u),i.push({event:a,listeners:o}))}var qa=null,Oa=null;function hA(i){t_(i,0)}function Ru(i){var o=Tn(i);if(vo(o))return i}function Tp(i,o){if(i==="change")return o}var Ep=!1;if(Pn){var kf;if(Pn){var Lf="oninput"in document;if(!Lf){var Sp=document.createElement("div");Sp.setAttribute("oninput","return;"),Lf=typeof Sp.oninput=="function"}kf=Lf}else kf=!1;Ep=kf&&(!document.documentMode||9<document.documentMode)}function Ap(){qa&&(qa.detachEvent("onpropertychange",Cp),Oa=qa=null)}function Cp(i){if(i.propertyName==="value"&&Ru(Oa)){var o=[];vp(o,Oa,i,Dn(i)),Ts(hA,o)}}function mA(i,o,a){i==="focusin"?(Ap(),qa=o,Oa=a,qa.attachEvent("onpropertychange",Cp)):i==="focusout"&&Ap()}function pA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ru(Oa)}function gA(i,o){if(i==="click")return Ru(o)}function yA(i,o){if(i==="input"||i==="change")return Ru(o)}function _A(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Sn=typeof Object.is=="function"?Object.is:_A;function za(i,o){if(Sn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var a=Object.keys(i),u=Object.keys(o);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var y=a[u];if(!xt.call(o,y)||!Sn(i[y],o[y]))return!1}return!0}function xp(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Rp(i,o){var a=xp(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=o&&u>=o)return{node:a,offset:o-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=xp(a)}}function Ip(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Ip(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function wp(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Si(i.document);o instanceof i.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)i=o.contentWindow;else break;o=Si(i.document)}return o}function qf(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var vA=Pn&&"documentMode"in document&&11>=document.documentMode,mr=null,Of=null,Ba=null,zf=!1;function bp(i,o,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;zf||mr==null||mr!==Si(u)||(u=mr,"selectionStart"in u&&qf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ba&&za(Ba,u)||(Ba=u,u=mc(Of,"onSelect"),0<u.length&&(o=new xi("onSelect","select",null,o,a),i.push({event:o,listeners:u}),o.target=mr)))}function wo(i,o){var a={};return a[i.toLowerCase()]=o.toLowerCase(),a["Webkit"+i]="webkit"+o,a["Moz"+i]="moz"+o,a}var pr={animationend:wo("Animation","AnimationEnd"),animationiteration:wo("Animation","AnimationIteration"),animationstart:wo("Animation","AnimationStart"),transitionrun:wo("Transition","TransitionRun"),transitionstart:wo("Transition","TransitionStart"),transitioncancel:wo("Transition","TransitionCancel"),transitionend:wo("Transition","TransitionEnd")},Bf={},Np={};Pn&&(Np=document.createElement("div").style,"AnimationEvent"in window||(delete pr.animationend.animation,delete pr.animationiteration.animation,delete pr.animationstart.animation),"TransitionEvent"in window||delete pr.transitionend.transition);function bo(i){if(Bf[i])return Bf[i];if(!pr[i])return i;var o=pr[i],a;for(a in o)if(o.hasOwnProperty(a)&&a in Np)return Bf[i]=o[a];return i}var Mp=bo("animationend"),Dp=bo("animationiteration"),Pp=bo("animationstart"),TA=bo("transitionrun"),EA=bo("transitionstart"),SA=bo("transitioncancel"),Vp=bo("transitionend"),Up=new Map,Ff="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ff.push("scrollEnd");function ni(i,o){Up.set(i,o),Ti(o,[i])}var Iu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Un=[],gr=0,Hf=0;function wu(){for(var i=gr,o=Hf=gr=0;o<i;){var a=Un[o];Un[o++]=null;var u=Un[o];Un[o++]=null;var y=Un[o];Un[o++]=null;var _=Un[o];if(Un[o++]=null,u!==null&&y!==null){var C=u.pending;C===null?y.next=y:(y.next=C.next,C.next=y),u.pending=y}_!==0&&kp(a,y,_)}}function bu(i,o,a,u){Un[gr++]=i,Un[gr++]=o,Un[gr++]=a,Un[gr++]=u,Hf|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Gf(i,o,a,u){return bu(i,o,a,u),Nu(i)}function No(i,o){return bu(i,null,null,o),Nu(i)}function kp(i,o,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var y=!1,_=i.return;_!==null;)_.childLanes|=a,u=_.alternate,u!==null&&(u.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(y=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,y&&o!==null&&(y=31-vt(a),i=_.hiddenUpdates,u=i[y],u===null?i[y]=[o]:u.push(o),o.lane=a|536870912),_):null}function Nu(i){if(50<ul)throw ul=0,jd=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var yr={};function AA(i,o,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(i,o,a,u){return new AA(i,o,a,u)}function Yf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Hi(i,o){var a=i.alternate;return a===null?(a=An(i.tag,o,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=o,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,o=i.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Lp(i,o){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,o=a.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function Mu(i,o,a,u,y,_){var C=0;if(u=i,typeof i=="function")Yf(i)&&(C=1);else if(typeof i=="string")C=wC(i,a,ve.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case b:return i=An(31,a,o,y),i.elementType=b,i.lanes=_,i;case z:return Mo(a.children,y,_,o);case H:C=8,y|=24;break;case $:return i=An(12,a,o,y|2),i.elementType=$,i.lanes=_,i;case fe:return i=An(13,a,o,y),i.elementType=fe,i.lanes=_,i;case ae:return i=An(19,a,o,y),i.elementType=ae,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case j:C=10;break e;case te:C=9;break e;case le:C=11;break e;case P:C=14;break e;case R:C=16,u=null;break e}C=29,a=Error(s(130,i===null?"null":typeof i,"")),u=null}return o=An(C,a,o,y),o.elementType=i,o.type=u,o.lanes=_,o}function Mo(i,o,a,u){return i=An(7,i,u,o),i.lanes=a,i}function Jf(i,o,a){return i=An(6,i,null,o),i.lanes=a,i}function qp(i){var o=An(18,null,null,0);return o.stateNode=i,o}function Kf(i,o,a){return o=An(4,i.children!==null?i.children:[],i.key,o),o.lanes=a,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Op=new WeakMap;function kn(i,o){if(typeof i=="object"&&i!==null){var a=Op.get(i);return a!==void 0?a:(o={value:i,source:o,stack:_a(o)},Op.set(i,o),o)}return{value:i,source:o,stack:_a(o)}}var _r=[],vr=0,Du=null,Fa=0,Ln=[],qn=0,Cs=null,bi=1,Ni="";function Gi(i,o){_r[vr++]=Fa,_r[vr++]=Du,Du=i,Fa=o}function zp(i,o,a){Ln[qn++]=bi,Ln[qn++]=Ni,Ln[qn++]=Cs,Cs=i;var u=bi;i=Ni;var y=32-vt(u)-1;u&=~(1<<y),a+=1;var _=32-vt(o)+y;if(30<_){var C=y-y%5;_=(u&(1<<C)-1).toString(32),u>>=C,y-=C,bi=1<<32-vt(o)+y|a<<y|u,Ni=_+i}else bi=1<<_|a<<y|u,Ni=i}function Qf(i){i.return!==null&&(Gi(i,1),zp(i,1,0))}function $f(i){for(;i===Du;)Du=_r[--vr],_r[vr]=null,Fa=_r[--vr],_r[vr]=null;for(;i===Cs;)Cs=Ln[--qn],Ln[qn]=null,Ni=Ln[--qn],Ln[qn]=null,bi=Ln[--qn],Ln[qn]=null}function Bp(i,o){Ln[qn++]=bi,Ln[qn++]=Ni,Ln[qn++]=Cs,bi=o.id,Ni=o.overflow,Cs=i}var Kt=null,ct=null,Fe=!1,xs=null,On=!1,Xf=Error(s(519));function Rs(i){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ha(kn(o,i)),Xf}function Fp(i){var o=i.stateNode,a=i.type,u=i.memoizedProps;switch(o[It]=i,o[Bt]=u,a){case"dialog":Le("cancel",o),Le("close",o);break;case"iframe":case"object":case"embed":Le("load",o);break;case"video":case"audio":for(a=0;a<fl.length;a++)Le(fl[a],o);break;case"source":Le("error",o);break;case"img":case"image":case"link":Le("error",o),Le("load",o);break;case"details":Le("toggle",o);break;case"input":Le("invalid",o),fu(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Le("invalid",o);break;case"textarea":Le("invalid",o),ys(o,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||u.suppressHydrationWarning===!0||o_(o.textContent,a)?(u.popover!=null&&(Le("beforetoggle",o),Le("toggle",o)),u.onScroll!=null&&Le("scroll",o),u.onScrollEnd!=null&&Le("scrollend",o),u.onClick!=null&&(o.onclick=Wn),o=!0):o=!1,o||Rs(i,!0)}function Hp(i){for(Kt=i.return;Kt;)switch(Kt.tag){case 5:case 31:case 13:On=!1;return;case 27:case 3:On=!0;return;default:Kt=Kt.return}}function Tr(i){if(i!==Kt)return!1;if(!Fe)return Hp(i),Fe=!0,!1;var o=i.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||mh(i.type,i.memoizedProps)),a=!a),a&&ct&&Rs(i),Hp(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ct=m_(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ct=m_(i)}else o===27?(o=ct,zs(i.type)?(i=vh,vh=null,ct=i):ct=o):ct=Kt?Bn(i.stateNode.nextSibling):null;return!0}function Do(){ct=Kt=null,Fe=!1}function Wf(){var i=xs;return i!==null&&(gn===null?gn=i:gn.push.apply(gn,i),xs=null),i}function Ha(i){xs===null?xs=[i]:xs.push(i)}var Zf=O(null),Po=null,Yi=null;function Is(i,o,a){he(Zf,o._currentValue),o._currentValue=a}function Ji(i){i._currentValue=Zf.current,oe(Zf)}function jf(i,o,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),i===a)break;i=i.return}}function ed(i,o,a,u){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var _=y.dependencies;if(_!==null){var C=y.child;_=_.firstContext;e:for(;_!==null;){var w=_;_=y;for(var k=0;k<o.length;k++)if(w.context===o[k]){_.lanes|=a,w=_.alternate,w!==null&&(w.lanes|=a),jf(_.return,a,i),u||(C=null);break e}_=w.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(s(341));C.lanes|=a,_=C.alternate,_!==null&&(_.lanes|=a),jf(C,a,i),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===i){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function Er(i,o,a,u){i=null;for(var y=o,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(s(387));if(C=C.memoizedProps,C!==null){var w=y.type;Sn(y.pendingProps.value,C.value)||(i!==null?i.push(w):i=[w])}}else if(y===He.current){if(C=y.alternate,C===null)throw Error(s(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(gl):i=[gl])}y=y.return}i!==null&&ed(o,i,a,u),o.flags|=262144}function Pu(i){for(i=i.firstContext;i!==null;){if(!Sn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Vo(i){Po=i,Yi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Qt(i){return Gp(Po,i)}function Vu(i,o){return Po===null&&Vo(i),Gp(i,o)}function Gp(i,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},Yi===null){if(i===null)throw Error(s(308));Yi=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Yi=Yi.next=o;return a}var CA=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){o.aborted=!0,i.forEach(function(a){return a()})}},xA=n.unstable_scheduleCallback,RA=n.unstable_NormalPriority,Nt={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function td(){return{controller:new CA,data:new Map,refCount:0}}function Ga(i){i.refCount--,i.refCount===0&&xA(RA,function(){i.controller.abort()})}var Ya=null,nd=0,Sr=0,Ar=null;function IA(i,o){if(Ya===null){var a=Ya=[];nd=0,Sr=oh(),Ar={status:"pending",value:void 0,then:function(u){a.push(u)}}}return nd++,o.then(Yp,Yp),o}function Yp(){if(--nd===0&&Ya!==null){Ar!==null&&(Ar.status="fulfilled");var i=Ya;Ya=null,Sr=0,Ar=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function wA(i,o){var a=[],u={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){u.status="fulfilled",u.value=o;for(var y=0;y<a.length;y++)(0,a[y])(o)},function(y){for(u.status="rejected",u.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),u}var Jp=B.S;B.S=function(i,o){by=ln(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&IA(i,o),Jp!==null&&Jp(i,o)};var Uo=O(null);function id(){var i=Uo.current;return i!==null?i:at.pooledCache}function Uu(i,o){o===null?he(Uo,Uo.current):he(Uo,o.pool)}function Kp(){var i=id();return i===null?null:{parent:Nt._currentValue,pool:i}}var Cr=Error(s(460)),sd=Error(s(474)),ku=Error(s(542)),Lu={then:function(){}};function Qp(i){return i=i.status,i==="fulfilled"||i==="rejected"}function $p(i,o,a){switch(a=i[a],a===void 0?i.push(o):a!==o&&(o.then(Wn,Wn),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Wp(i),i;default:if(typeof o.status=="string")o.then(Wn,Wn);else{if(i=at,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(u){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=u}},function(u){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Wp(i),i}throw Lo=o,Cr}}function ko(i){try{var o=i._init;return o(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Lo=a,Cr):a}}var Lo=null;function Xp(){if(Lo===null)throw Error(s(459));var i=Lo;return Lo=null,i}function Wp(i){if(i===Cr||i===ku)throw Error(s(483))}var xr=null,Ja=0;function qu(i){var o=Ja;return Ja+=1,xr===null&&(xr=[]),$p(xr,i,o)}function Ka(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Ou(i,o){throw o.$$typeof===S?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Zp(i){function o(F,q){if(i){var Y=F.deletions;Y===null?(F.deletions=[q],F.flags|=16):Y.push(q)}}function a(F,q){if(!i)return null;for(;q!==null;)o(F,q),q=q.sibling;return null}function u(F){for(var q=new Map;F!==null;)F.key!==null?q.set(F.key,F):q.set(F.index,F),F=F.sibling;return q}function y(F,q){return F=Hi(F,q),F.index=0,F.sibling=null,F}function _(F,q,Y){return F.index=Y,i?(Y=F.alternate,Y!==null?(Y=Y.index,Y<q?(F.flags|=67108866,q):Y):(F.flags|=67108866,q)):(F.flags|=1048576,q)}function C(F){return i&&F.alternate===null&&(F.flags|=67108866),F}function w(F,q,Y,ee){return q===null||q.tag!==6?(q=Jf(Y,F.mode,ee),q.return=F,q):(q=y(q,Y),q.return=F,q)}function k(F,q,Y,ee){var Se=Y.type;return Se===z?W(F,q,Y.props.children,ee,Y.key):q!==null&&(q.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===R&&ko(Se)===q.type)?(q=y(q,Y.props),Ka(q,Y),q.return=F,q):(q=Mu(Y.type,Y.key,Y.props,null,F.mode,ee),Ka(q,Y),q.return=F,q)}function J(F,q,Y,ee){return q===null||q.tag!==4||q.stateNode.containerInfo!==Y.containerInfo||q.stateNode.implementation!==Y.implementation?(q=Kf(Y,F.mode,ee),q.return=F,q):(q=y(q,Y.children||[]),q.return=F,q)}function W(F,q,Y,ee,Se){return q===null||q.tag!==7?(q=Mo(Y,F.mode,ee,Se),q.return=F,q):(q=y(q,Y),q.return=F,q)}function ie(F,q,Y){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Jf(""+q,F.mode,Y),q.return=F,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case I:return Y=Mu(q.type,q.key,q.props,null,F.mode,Y),Ka(Y,q),Y.return=F,Y;case L:return q=Kf(q,F.mode,Y),q.return=F,q;case R:return q=ko(q),ie(F,q,Y)}if(_e(q)||U(q))return q=Mo(q,F.mode,Y,null),q.return=F,q;if(typeof q.then=="function")return ie(F,qu(q),Y);if(q.$$typeof===j)return ie(F,Vu(F,q),Y);Ou(F,q)}return null}function K(F,q,Y,ee){var Se=q!==null?q.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Se!==null?null:w(F,q,""+Y,ee);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case I:return Y.key===Se?k(F,q,Y,ee):null;case L:return Y.key===Se?J(F,q,Y,ee):null;case R:return Y=ko(Y),K(F,q,Y,ee)}if(_e(Y)||U(Y))return Se!==null?null:W(F,q,Y,ee,null);if(typeof Y.then=="function")return K(F,q,qu(Y),ee);if(Y.$$typeof===j)return K(F,q,Vu(F,Y),ee);Ou(F,Y)}return null}function X(F,q,Y,ee,Se){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return F=F.get(Y)||null,w(q,F,""+ee,Se);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case I:return F=F.get(ee.key===null?Y:ee.key)||null,k(q,F,ee,Se);case L:return F=F.get(ee.key===null?Y:ee.key)||null,J(q,F,ee,Se);case R:return ee=ko(ee),X(F,q,Y,ee,Se)}if(_e(ee)||U(ee))return F=F.get(Y)||null,W(q,F,ee,Se,null);if(typeof ee.then=="function")return X(F,q,Y,qu(ee),Se);if(ee.$$typeof===j)return X(F,q,Y,Vu(q,ee),Se);Ou(q,ee)}return null}function Te(F,q,Y,ee){for(var Se=null,Ke=null,Ee=q,Ve=q=0,Oe=null;Ee!==null&&Ve<Y.length;Ve++){Ee.index>Ve?(Oe=Ee,Ee=null):Oe=Ee.sibling;var Qe=K(F,Ee,Y[Ve],ee);if(Qe===null){Ee===null&&(Ee=Oe);break}i&&Ee&&Qe.alternate===null&&o(F,Ee),q=_(Qe,q,Ve),Ke===null?Se=Qe:Ke.sibling=Qe,Ke=Qe,Ee=Oe}if(Ve===Y.length)return a(F,Ee),Fe&&Gi(F,Ve),Se;if(Ee===null){for(;Ve<Y.length;Ve++)Ee=ie(F,Y[Ve],ee),Ee!==null&&(q=_(Ee,q,Ve),Ke===null?Se=Ee:Ke.sibling=Ee,Ke=Ee);return Fe&&Gi(F,Ve),Se}for(Ee=u(Ee);Ve<Y.length;Ve++)Oe=X(Ee,F,Ve,Y[Ve],ee),Oe!==null&&(i&&Oe.alternate!==null&&Ee.delete(Oe.key===null?Ve:Oe.key),q=_(Oe,q,Ve),Ke===null?Se=Oe:Ke.sibling=Oe,Ke=Oe);return i&&Ee.forEach(function(Ys){return o(F,Ys)}),Fe&&Gi(F,Ve),Se}function Ce(F,q,Y,ee){if(Y==null)throw Error(s(151));for(var Se=null,Ke=null,Ee=q,Ve=q=0,Oe=null,Qe=Y.next();Ee!==null&&!Qe.done;Ve++,Qe=Y.next()){Ee.index>Ve?(Oe=Ee,Ee=null):Oe=Ee.sibling;var Ys=K(F,Ee,Qe.value,ee);if(Ys===null){Ee===null&&(Ee=Oe);break}i&&Ee&&Ys.alternate===null&&o(F,Ee),q=_(Ys,q,Ve),Ke===null?Se=Ys:Ke.sibling=Ys,Ke=Ys,Ee=Oe}if(Qe.done)return a(F,Ee),Fe&&Gi(F,Ve),Se;if(Ee===null){for(;!Qe.done;Ve++,Qe=Y.next())Qe=ie(F,Qe.value,ee),Qe!==null&&(q=_(Qe,q,Ve),Ke===null?Se=Qe:Ke.sibling=Qe,Ke=Qe);return Fe&&Gi(F,Ve),Se}for(Ee=u(Ee);!Qe.done;Ve++,Qe=Y.next())Qe=X(Ee,F,Ve,Qe.value,ee),Qe!==null&&(i&&Qe.alternate!==null&&Ee.delete(Qe.key===null?Ve:Qe.key),q=_(Qe,q,Ve),Ke===null?Se=Qe:Ke.sibling=Qe,Ke=Qe);return i&&Ee.forEach(function(OC){return o(F,OC)}),Fe&&Gi(F,Ve),Se}function rt(F,q,Y,ee){if(typeof Y=="object"&&Y!==null&&Y.type===z&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case I:e:{for(var Se=Y.key;q!==null;){if(q.key===Se){if(Se=Y.type,Se===z){if(q.tag===7){a(F,q.sibling),ee=y(q,Y.props.children),ee.return=F,F=ee;break e}}else if(q.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===R&&ko(Se)===q.type){a(F,q.sibling),ee=y(q,Y.props),Ka(ee,Y),ee.return=F,F=ee;break e}a(F,q);break}else o(F,q);q=q.sibling}Y.type===z?(ee=Mo(Y.props.children,F.mode,ee,Y.key),ee.return=F,F=ee):(ee=Mu(Y.type,Y.key,Y.props,null,F.mode,ee),Ka(ee,Y),ee.return=F,F=ee)}return C(F);case L:e:{for(Se=Y.key;q!==null;){if(q.key===Se)if(q.tag===4&&q.stateNode.containerInfo===Y.containerInfo&&q.stateNode.implementation===Y.implementation){a(F,q.sibling),ee=y(q,Y.children||[]),ee.return=F,F=ee;break e}else{a(F,q);break}else o(F,q);q=q.sibling}ee=Kf(Y,F.mode,ee),ee.return=F,F=ee}return C(F);case R:return Y=ko(Y),rt(F,q,Y,ee)}if(_e(Y))return Te(F,q,Y,ee);if(U(Y)){if(Se=U(Y),typeof Se!="function")throw Error(s(150));return Y=Se.call(Y),Ce(F,q,Y,ee)}if(typeof Y.then=="function")return rt(F,q,qu(Y),ee);if(Y.$$typeof===j)return rt(F,q,Vu(F,Y),ee);Ou(F,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,q!==null&&q.tag===6?(a(F,q.sibling),ee=y(q,Y),ee.return=F,F=ee):(a(F,q),ee=Jf(Y,F.mode,ee),ee.return=F,F=ee),C(F)):a(F,q)}return function(F,q,Y,ee){try{Ja=0;var Se=rt(F,q,Y,ee);return xr=null,Se}catch(Ee){if(Ee===Cr||Ee===ku)throw Ee;var Ke=An(29,Ee,null,F.mode);return Ke.lanes=ee,Ke.return=F,Ke}finally{}}}var qo=Zp(!0),jp=Zp(!1),ws=!1;function od(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rd(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function bs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ns(i,o,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Ze&2)!==0){var y=u.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),u.pending=o,o=Nu(i),kp(i,null,a),o}return bu(i,u,o,a),Nu(i)}function Qa(i,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var u=o.lanes;u&=i.pendingLanes,a|=u,o.lanes=a,Ea(i,a)}}function ad(i,o){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var y=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var C={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?y=_=C:_=_.next=C,a=a.next}while(a!==null);_===null?y=_=o:_=_.next=o}else y=_=o;a={baseState:u.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=o:i.next=o,a.lastBaseUpdate=o}var ld=!1;function $a(){if(ld){var i=Ar;if(i!==null)throw i}}function Xa(i,o,a,u){ld=!1;var y=i.updateQueue;ws=!1;var _=y.firstBaseUpdate,C=y.lastBaseUpdate,w=y.shared.pending;if(w!==null){y.shared.pending=null;var k=w,J=k.next;k.next=null,C===null?_=J:C.next=J,C=k;var W=i.alternate;W!==null&&(W=W.updateQueue,w=W.lastBaseUpdate,w!==C&&(w===null?W.firstBaseUpdate=J:w.next=J,W.lastBaseUpdate=k))}if(_!==null){var ie=y.baseState;C=0,W=J=k=null,w=_;do{var K=w.lane&-536870913,X=K!==w.lane;if(X?(qe&K)===K:(u&K)===K){K!==0&&K===Sr&&(ld=!0),W!==null&&(W=W.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Te=i,Ce=w;K=o;var rt=a;switch(Ce.tag){case 1:if(Te=Ce.payload,typeof Te=="function"){ie=Te.call(rt,ie,K);break e}ie=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ce.payload,K=typeof Te=="function"?Te.call(rt,ie,K):Te,K==null)break e;ie=T({},ie,K);break e;case 2:ws=!0}}K=w.callback,K!==null&&(i.flags|=64,X&&(i.flags|=8192),X=y.callbacks,X===null?y.callbacks=[K]:X.push(K))}else X={lane:K,tag:w.tag,payload:w.payload,callback:w.callback,next:null},W===null?(J=W=X,k=ie):W=W.next=X,C|=K;if(w=w.next,w===null){if(w=y.shared.pending,w===null)break;X=w,w=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);W===null&&(k=ie),y.baseState=k,y.firstBaseUpdate=J,y.lastBaseUpdate=W,_===null&&(y.shared.lanes=0),Us|=C,i.lanes=C,i.memoizedState=ie}}function eg(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function tg(i,o){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)eg(a[i],o)}var Rr=O(null),zu=O(0);function ng(i,o){i=ts,he(zu,i),he(Rr,o),ts=i|o.baseLanes}function ud(){he(zu,ts),he(Rr,Rr.current)}function cd(){ts=zu.current,oe(Rr),oe(zu)}var Cn=O(null),zn=null;function Ms(i){var o=i.alternate;he(Et,Et.current&1),he(Cn,i),zn===null&&(o===null||Rr.current!==null||o.memoizedState!==null)&&(zn=i)}function fd(i){he(Et,Et.current),he(Cn,i),zn===null&&(zn=i)}function ig(i){i.tag===22?(he(Et,Et.current),he(Cn,i),zn===null&&(zn=i)):Ds()}function Ds(){he(Et,Et.current),he(Cn,Cn.current)}function xn(i){oe(Cn),zn===i&&(zn=null),oe(Et)}var Et=O(0);function Bu(i){for(var o=i;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||yh(a)||_h(a)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ki=0,De=null,st=null,Mt=null,Fu=!1,Ir=!1,Oo=!1,Hu=0,Wa=0,wr=null,bA=0;function yt(){throw Error(s(321))}function dd(i,o){if(o===null)return!1;for(var a=0;a<o.length&&a<i.length;a++)if(!Sn(i[a],o[a]))return!1;return!0}function hd(i,o,a,u,y,_){return Ki=_,De=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,B.H=i===null||i.memoizedState===null?zg:wd,Oo=!1,_=a(u,y),Oo=!1,Ir&&(_=og(o,a,u,y)),sg(i),_}function sg(i){B.H=el;var o=st!==null&&st.next!==null;if(Ki=0,Mt=st=De=null,Fu=!1,Wa=0,wr=null,o)throw Error(s(300));i===null||Dt||(i=i.dependencies,i!==null&&Pu(i)&&(Dt=!0))}function og(i,o,a,u){De=i;var y=0;do{if(Ir&&(wr=null),Wa=0,Ir=!1,25<=y)throw Error(s(301));if(y+=1,Mt=st=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}B.H=Bg,_=o(a,u)}while(Ir);return _}function NA(){var i=B.H,o=i.useState()[0];return o=typeof o.then=="function"?Za(o):o,i=i.useState()[0],(st!==null?st.memoizedState:null)!==i&&(De.flags|=1024),o}function md(){var i=Hu!==0;return Hu=0,i}function pd(i,o,a){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~a}function gd(i){if(Fu){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Fu=!1}Ki=0,Mt=st=De=null,Ir=!1,Wa=Hu=0,wr=null}function cn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?De.memoizedState=Mt=i:Mt=Mt.next=i,Mt}function St(){if(st===null){var i=De.alternate;i=i!==null?i.memoizedState:null}else i=st.next;var o=Mt===null?De.memoizedState:Mt.next;if(o!==null)Mt=o,st=i;else{if(i===null)throw De.alternate===null?Error(s(467)):Error(s(310));st=i,i={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Mt===null?De.memoizedState=Mt=i:Mt=Mt.next=i}return Mt}function Gu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Za(i){var o=Wa;return Wa+=1,wr===null&&(wr=[]),i=$p(wr,i,o),o=De,(Mt===null?o.memoizedState:Mt.next)===null&&(o=o.alternate,B.H=o===null||o.memoizedState===null?zg:wd),i}function Yu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Za(i);if(i.$$typeof===j)return Qt(i)}throw Error(s(438,String(i)))}function yd(i){var o=null,a=De.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var u=De.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=Gu(),De.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(i),u=0;u<i;u++)a[u]=M;return o.index++,a}function Qi(i,o){return typeof o=="function"?o(i):o}function Ju(i){var o=St();return _d(o,st,i)}function _d(i,o,a){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var y=i.baseQueue,_=u.pending;if(_!==null){if(y!==null){var C=y.next;y.next=_.next,_.next=C}o.baseQueue=y=_,u.pending=null}if(_=i.baseState,y===null)i.memoizedState=_;else{o=y.next;var w=C=null,k=null,J=o,W=!1;do{var ie=J.lane&-536870913;if(ie!==J.lane?(qe&ie)===ie:(Ki&ie)===ie){var K=J.revertLane;if(K===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ie===Sr&&(W=!0);else if((Ki&K)===K){J=J.next,K===Sr&&(W=!0);continue}else ie={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},k===null?(w=k=ie,C=_):k=k.next=ie,De.lanes|=K,Us|=K;ie=J.action,Oo&&a(_,ie),_=J.hasEagerState?J.eagerState:a(_,ie)}else K={lane:ie,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},k===null?(w=k=K,C=_):k=k.next=K,De.lanes|=ie,Us|=ie;J=J.next}while(J!==null&&J!==o);if(k===null?C=_:k.next=w,!Sn(_,i.memoizedState)&&(Dt=!0,W&&(a=Ar,a!==null)))throw a;i.memoizedState=_,i.baseState=C,i.baseQueue=k,u.lastRenderedState=_}return y===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function vd(i){var o=St(),a=o.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var u=a.dispatch,y=a.pending,_=o.memoizedState;if(y!==null){a.pending=null;var C=y=y.next;do _=i(_,C.action),C=C.next;while(C!==y);Sn(_,o.memoizedState)||(Dt=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),a.lastRenderedState=_}return[_,u]}function rg(i,o,a){var u=De,y=St(),_=Fe;if(_){if(a===void 0)throw Error(s(407));a=a()}else a=o();var C=!Sn((st||y).memoizedState,a);if(C&&(y.memoizedState=a,Dt=!0),y=y.queue,Sd(ug.bind(null,u,y,i),[i]),y.getSnapshot!==o||C||Mt!==null&&Mt.memoizedState.tag&1){if(u.flags|=2048,br(9,{destroy:void 0},lg.bind(null,u,y,a,o),null),at===null)throw Error(s(349));_||(Ki&127)!==0||ag(u,o,a)}return a}function ag(i,o,a){i.flags|=16384,i={getSnapshot:o,value:a},o=De.updateQueue,o===null?(o=Gu(),De.updateQueue=o,o.stores=[i]):(a=o.stores,a===null?o.stores=[i]:a.push(i))}function lg(i,o,a,u){o.value=a,o.getSnapshot=u,cg(o)&&fg(i)}function ug(i,o,a){return a(function(){cg(o)&&fg(i)})}function cg(i){var o=i.getSnapshot;i=i.value;try{var a=o();return!Sn(i,a)}catch{return!0}}function fg(i){var o=No(i,2);o!==null&&yn(o,i,2)}function Td(i){var o=cn();if(typeof i=="function"){var a=i;if(i=a(),Oo){Nn(!0);try{a()}finally{Nn(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:i},o}function dg(i,o,a,u){return i.baseState=a,_d(i,st,typeof u=="function"?u:Qi)}function MA(i,o,a,u,y){if($u(i))throw Error(s(485));if(i=o.action,i!==null){var _={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){_.listeners.push(C)}};B.T!==null?a(!0):_.isTransition=!1,u(_),a=o.pending,a===null?(_.next=o.pending=_,hg(o,_)):(_.next=a.next,o.pending=a.next=_)}}function hg(i,o){var a=o.action,u=o.payload,y=i.state;if(o.isTransition){var _=B.T,C={};B.T=C;try{var w=a(y,u),k=B.S;k!==null&&k(C,w),mg(i,o,w)}catch(J){Ed(i,o,J)}finally{_!==null&&C.types!==null&&(_.types=C.types),B.T=_}}else try{_=a(y,u),mg(i,o,_)}catch(J){Ed(i,o,J)}}function mg(i,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){pg(i,o,u)},function(u){return Ed(i,o,u)}):pg(i,o,a)}function pg(i,o,a){o.status="fulfilled",o.value=a,gg(o),i.state=a,o=i.pending,o!==null&&(a=o.next,a===o?i.pending=null:(a=a.next,o.next=a,hg(i,a)))}function Ed(i,o,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=a,gg(o),o=o.next;while(o!==u)}i.action=null}function gg(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function yg(i,o){return o}function _g(i,o){if(Fe){var a=at.formState;if(a!==null){e:{var u=De;if(Fe){if(ct){t:{for(var y=ct,_=On;y.nodeType!==8;){if(!_){y=null;break t}if(y=Bn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){ct=Bn(y.nextSibling),u=y.data==="F!";break e}}Rs(u)}u=!1}u&&(o=a[0])}}return a=cn(),a.memoizedState=a.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yg,lastRenderedState:o},a.queue=u,a=Lg.bind(null,De,u),u.dispatch=a,u=Td(!1),_=Id.bind(null,De,!1,u.queue),u=cn(),y={state:o,dispatch:null,action:i,pending:null},u.queue=y,a=MA.bind(null,De,y,_,a),y.dispatch=a,u.memoizedState=i,[o,a,!1]}function vg(i){var o=St();return Tg(o,st,i)}function Tg(i,o,a){if(o=_d(i,o,yg)[0],i=Ju(Qi)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=Za(o)}catch(C){throw C===Cr?ku:C}else u=o;o=St();var y=o.queue,_=y.dispatch;return a!==o.memoizedState&&(De.flags|=2048,br(9,{destroy:void 0},DA.bind(null,y,a),null)),[u,_,i]}function DA(i,o){i.action=o}function Eg(i){var o=St(),a=st;if(a!==null)return Tg(o,a,i);St(),o=o.memoizedState,a=St();var u=a.queue.dispatch;return a.memoizedState=i,[o,u,!1]}function br(i,o,a,u){return i={tag:i,create:a,deps:u,inst:o,next:null},o=De.updateQueue,o===null&&(o=Gu(),De.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,o.lastEffect=i),i}function Sg(){return St().memoizedState}function Ku(i,o,a,u){var y=cn();De.flags|=i,y.memoizedState=br(1|o,{destroy:void 0},a,u===void 0?null:u)}function Qu(i,o,a,u){var y=St();u=u===void 0?null:u;var _=y.memoizedState.inst;st!==null&&u!==null&&dd(u,st.memoizedState.deps)?y.memoizedState=br(o,_,a,u):(De.flags|=i,y.memoizedState=br(1|o,_,a,u))}function Ag(i,o){Ku(8390656,8,i,o)}function Sd(i,o){Qu(2048,8,i,o)}function PA(i){De.flags|=4;var o=De.updateQueue;if(o===null)o=Gu(),De.updateQueue=o,o.events=[i];else{var a=o.events;a===null?o.events=[i]:a.push(i)}}function Cg(i){var o=St().memoizedState;return PA({ref:o,nextImpl:i}),function(){if((Ze&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function xg(i,o){return Qu(4,2,i,o)}function Rg(i,o){return Qu(4,4,i,o)}function Ig(i,o){if(typeof o=="function"){i=i();var a=o(i);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function wg(i,o,a){a=a!=null?a.concat([i]):null,Qu(4,4,Ig.bind(null,o,i),a)}function Ad(){}function bg(i,o){var a=St();o=o===void 0?null:o;var u=a.memoizedState;return o!==null&&dd(o,u[1])?u[0]:(a.memoizedState=[i,o],i)}function Ng(i,o){var a=St();o=o===void 0?null:o;var u=a.memoizedState;if(o!==null&&dd(o,u[1]))return u[0];if(u=i(),Oo){Nn(!0);try{i()}finally{Nn(!1)}}return a.memoizedState=[u,o],u}function Cd(i,o,a){return a===void 0||(Ki&1073741824)!==0&&(qe&261930)===0?i.memoizedState=o:(i.memoizedState=a,i=My(),De.lanes|=i,Us|=i,a)}function Mg(i,o,a,u){return Sn(a,o)?a:Rr.current!==null?(i=Cd(i,a,u),Sn(i,o)||(Dt=!0),i):(Ki&42)===0||(Ki&1073741824)!==0&&(qe&261930)===0?(Dt=!0,i.memoizedState=a):(i=My(),De.lanes|=i,Us|=i,o)}function Dg(i,o,a,u,y){var _=Z.p;Z.p=_!==0&&8>_?_:8;var C=B.T,w={};B.T=w,Id(i,!1,o,a);try{var k=y(),J=B.S;if(J!==null&&J(w,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var W=wA(k,u);ja(i,o,W,wn(i))}else ja(i,o,u,wn(i))}catch(ie){ja(i,o,{then:function(){},status:"rejected",reason:ie},wn())}finally{Z.p=_,C!==null&&w.types!==null&&(C.types=w.types),B.T=C}}function VA(){}function xd(i,o,a,u){if(i.tag!==5)throw Error(s(476));var y=Pg(i).queue;Dg(i,y,o,ce,a===null?VA:function(){return Vg(i),a(u)})}function Pg(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:ce},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:a},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function Vg(i){var o=Pg(i);o.next===null&&(o=i.alternate.memoizedState),ja(i,o.next.queue,{},wn())}function Rd(){return Qt(gl)}function Ug(){return St().memoizedState}function kg(){return St().memoizedState}function UA(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var a=wn();i=bs(a);var u=Ns(o,i,a);u!==null&&(yn(u,o,a),Qa(u,o,a)),o={cache:td()},i.payload=o;return}o=o.return}}function kA(i,o,a){var u=wn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},$u(i)?qg(o,a):(a=Gf(i,o,a,u),a!==null&&(yn(a,i,u),Og(a,o,u)))}function Lg(i,o,a){var u=wn();ja(i,o,a,u)}function ja(i,o,a,u){var y={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if($u(i))qg(o,y);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var C=o.lastRenderedState,w=_(C,a);if(y.hasEagerState=!0,y.eagerState=w,Sn(w,C))return bu(i,o,y,0),at===null&&wu(),!1}catch{}finally{}if(a=Gf(i,o,y,u),a!==null)return yn(a,i,u),Og(a,o,u),!0}return!1}function Id(i,o,a,u){if(u={lane:2,revertLane:oh(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},$u(i)){if(o)throw Error(s(479))}else o=Gf(i,a,u,2),o!==null&&yn(o,i,2)}function $u(i){var o=i.alternate;return i===De||o!==null&&o===De}function qg(i,o){Ir=Fu=!0;var a=i.pending;a===null?o.next=o:(o.next=a.next,a.next=o),i.pending=o}function Og(i,o,a){if((a&4194048)!==0){var u=o.lanes;u&=i.pendingLanes,a|=u,o.lanes=a,Ea(i,a)}}var el={readContext:Qt,use:Yu,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};el.useEffectEvent=yt;var zg={readContext:Qt,use:Yu,useCallback:function(i,o){return cn().memoizedState=[i,o===void 0?null:o],i},useContext:Qt,useEffect:Ag,useImperativeHandle:function(i,o,a){a=a!=null?a.concat([i]):null,Ku(4194308,4,Ig.bind(null,o,i),a)},useLayoutEffect:function(i,o){return Ku(4194308,4,i,o)},useInsertionEffect:function(i,o){Ku(4,2,i,o)},useMemo:function(i,o){var a=cn();o=o===void 0?null:o;var u=i();if(Oo){Nn(!0);try{i()}finally{Nn(!1)}}return a.memoizedState=[u,o],u},useReducer:function(i,o,a){var u=cn();if(a!==void 0){var y=a(o);if(Oo){Nn(!0);try{a(o)}finally{Nn(!1)}}}else y=o;return u.memoizedState=u.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},u.queue=i,i=i.dispatch=kA.bind(null,De,i),[u.memoizedState,i]},useRef:function(i){var o=cn();return i={current:i},o.memoizedState=i},useState:function(i){i=Td(i);var o=i.queue,a=Lg.bind(null,De,o);return o.dispatch=a,[i.memoizedState,a]},useDebugValue:Ad,useDeferredValue:function(i,o){var a=cn();return Cd(a,i,o)},useTransition:function(){var i=Td(!1);return i=Dg.bind(null,De,i.queue,!0,!1),cn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,a){var u=De,y=cn();if(Fe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=o(),at===null)throw Error(s(349));(qe&127)!==0||ag(u,o,a)}y.memoizedState=a;var _={value:a,getSnapshot:o};return y.queue=_,Ag(ug.bind(null,u,_,i),[i]),u.flags|=2048,br(9,{destroy:void 0},lg.bind(null,u,_,a,o),null),a},useId:function(){var i=cn(),o=at.identifierPrefix;if(Fe){var a=Ni,u=bi;a=(u&~(1<<32-vt(u)-1)).toString(32)+a,o="_"+o+"R_"+a,a=Hu++,0<a&&(o+="H"+a.toString(32)),o+="_"}else a=bA++,o="_"+o+"r_"+a.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:Rd,useFormState:_g,useActionState:_g,useOptimistic:function(i){var o=cn();o.memoizedState=o.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=Id.bind(null,De,!0,a),a.dispatch=o,[i,o]},useMemoCache:yd,useCacheRefresh:function(){return cn().memoizedState=UA.bind(null,De)},useEffectEvent:function(i){var o=cn(),a={impl:i};return o.memoizedState=a,function(){if((Ze&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},wd={readContext:Qt,use:Yu,useCallback:bg,useContext:Qt,useEffect:Sd,useImperativeHandle:wg,useInsertionEffect:xg,useLayoutEffect:Rg,useMemo:Ng,useReducer:Ju,useRef:Sg,useState:function(){return Ju(Qi)},useDebugValue:Ad,useDeferredValue:function(i,o){var a=St();return Mg(a,st.memoizedState,i,o)},useTransition:function(){var i=Ju(Qi)[0],o=St().memoizedState;return[typeof i=="boolean"?i:Za(i),o]},useSyncExternalStore:rg,useId:Ug,useHostTransitionStatus:Rd,useFormState:vg,useActionState:vg,useOptimistic:function(i,o){var a=St();return dg(a,st,i,o)},useMemoCache:yd,useCacheRefresh:kg};wd.useEffectEvent=Cg;var Bg={readContext:Qt,use:Yu,useCallback:bg,useContext:Qt,useEffect:Sd,useImperativeHandle:wg,useInsertionEffect:xg,useLayoutEffect:Rg,useMemo:Ng,useReducer:vd,useRef:Sg,useState:function(){return vd(Qi)},useDebugValue:Ad,useDeferredValue:function(i,o){var a=St();return st===null?Cd(a,i,o):Mg(a,st.memoizedState,i,o)},useTransition:function(){var i=vd(Qi)[0],o=St().memoizedState;return[typeof i=="boolean"?i:Za(i),o]},useSyncExternalStore:rg,useId:Ug,useHostTransitionStatus:Rd,useFormState:Eg,useActionState:Eg,useOptimistic:function(i,o){var a=St();return st!==null?dg(a,st,i,o):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:yd,useCacheRefresh:kg};Bg.useEffectEvent=Cg;function bd(i,o,a,u){o=i.memoizedState,a=a(u,o),a=a==null?o:T({},o,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Nd={enqueueSetState:function(i,o,a){i=i._reactInternals;var u=wn(),y=bs(u);y.payload=o,a!=null&&(y.callback=a),o=Ns(i,y,u),o!==null&&(yn(o,i,u),Qa(o,i,u))},enqueueReplaceState:function(i,o,a){i=i._reactInternals;var u=wn(),y=bs(u);y.tag=1,y.payload=o,a!=null&&(y.callback=a),o=Ns(i,y,u),o!==null&&(yn(o,i,u),Qa(o,i,u))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var a=wn(),u=bs(a);u.tag=2,o!=null&&(u.callback=o),o=Ns(i,u,a),o!==null&&(yn(o,i,a),Qa(o,i,a))}};function Fg(i,o,a,u,y,_,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,_,C):o.prototype&&o.prototype.isPureReactComponent?!za(a,u)||!za(y,_):!0}function Hg(i,o,a,u){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,u),o.state!==i&&Nd.enqueueReplaceState(o,o.state,null)}function zo(i,o){var a=o;if("ref"in o){a={};for(var u in o)u!=="ref"&&(a[u]=o[u])}if(i=i.defaultProps){a===o&&(a=T({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function Gg(i){Iu(i)}function Yg(i){console.error(i)}function Jg(i){Iu(i)}function Xu(i,o){try{var a=i.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function Kg(i,o,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Md(i,o,a){return a=bs(a),a.tag=3,a.payload={element:null},a.callback=function(){Xu(i,o)},a}function Qg(i){return i=bs(i),i.tag=3,i}function $g(i,o,a,u){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var _=u.value;i.payload=function(){return y(_)},i.callback=function(){Kg(o,a,u)}}var C=a.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(i.callback=function(){Kg(o,a,u),typeof y!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var w=u.stack;this.componentDidCatch(u.value,{componentStack:w!==null?w:""})})}function LA(i,o,a,u,y){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=a.alternate,o!==null&&Er(o,a,y,!0),a=Cn.current,a!==null){switch(a.tag){case 31:case 13:return zn===null?lc():a.alternate===null&&_t===0&&(_t=3),a.flags&=-257,a.flags|=65536,a.lanes=y,u===Lu?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([u]):o.add(u),nh(i,u,y)),!1;case 22:return a.flags|=65536,u===Lu?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([u]):a.add(u)),nh(i,u,y)),!1}throw Error(s(435,a.tag))}return nh(i,u,y),lc(),!1}if(Fe)return o=Cn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,u!==Xf&&(i=Error(s(422),{cause:u}),Ha(kn(i,a)))):(u!==Xf&&(o=Error(s(423),{cause:u}),Ha(kn(o,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,u=kn(u,a),y=Md(i.stateNode,u,y),ad(i,y),_t!==4&&(_t=2)),!1;var _=Error(s(520),{cause:u});if(_=kn(_,a),ll===null?ll=[_]:ll.push(_),_t!==4&&(_t=2),o===null)return!0;u=kn(u,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=Md(a.stateNode,u,i),ad(a,i),!1;case 1:if(o=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ks===null||!ks.has(_))))return a.flags|=65536,y&=-y,a.lanes|=y,y=Qg(y),$g(y,i,a,u),ad(a,y),!1}a=a.return}while(a!==null);return!1}var Dd=Error(s(461)),Dt=!1;function $t(i,o,a,u){o.child=i===null?jp(o,null,a,u):qo(o,i.child,a,u)}function Xg(i,o,a,u,y){a=a.render;var _=o.ref;if("ref"in u){var C={};for(var w in u)w!=="ref"&&(C[w]=u[w])}else C=u;return Vo(o),u=hd(i,o,a,C,_,y),w=md(),i!==null&&!Dt?(pd(i,o,y),$i(i,o,y)):(Fe&&w&&Qf(o),o.flags|=1,$t(i,o,u,y),o.child)}function Wg(i,o,a,u,y){if(i===null){var _=a.type;return typeof _=="function"&&!Yf(_)&&_.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=_,Zg(i,o,_,u,y)):(i=Mu(a.type,null,u,o,o.mode,y),i.ref=o.ref,i.return=o,o.child=i)}if(_=i.child,!zd(i,y)){var C=_.memoizedProps;if(a=a.compare,a=a!==null?a:za,a(C,u)&&i.ref===o.ref)return $i(i,o,y)}return o.flags|=1,i=Hi(_,u),i.ref=o.ref,i.return=o,o.child=i}function Zg(i,o,a,u,y){if(i!==null){var _=i.memoizedProps;if(za(_,u)&&i.ref===o.ref)if(Dt=!1,o.pendingProps=u=_,zd(i,y))(i.flags&131072)!==0&&(Dt=!0);else return o.lanes=i.lanes,$i(i,o,y)}return Pd(i,o,a,u,y)}function jg(i,o,a,u){var y=u.children,_=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(u=o.child=i.child,y=0;u!==null;)y=y|u.lanes|u.childLanes,u=u.sibling;u=y&~_}else u=0,o.child=null;return ey(i,o,_,a,u)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Uu(o,_!==null?_.cachePool:null),_!==null?ng(o,_):ud(),ig(o);else return u=o.lanes=536870912,ey(i,o,_!==null?_.baseLanes|a:a,a,u)}else _!==null?(Uu(o,_.cachePool),ng(o,_),Ds(),o.memoizedState=null):(i!==null&&Uu(o,null),ud(),Ds());return $t(i,o,y,a),o.child}function tl(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function ey(i,o,a,u,y){var _=id();return _=_===null?null:{parent:Nt._currentValue,pool:_},o.memoizedState={baseLanes:a,cachePool:_},i!==null&&Uu(o,null),ud(),ig(o),i!==null&&Er(i,o,u,!0),o.childLanes=y,null}function Wu(i,o){return o=ju({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function ty(i,o,a){return qo(o,i.child,null,a),i=Wu(o,o.pendingProps),i.flags|=2,xn(o),o.memoizedState=null,i}function qA(i,o,a){var u=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(Fe){if(u.mode==="hidden")return i=Wu(o,u),o.lanes=536870912,tl(null,i);if(fd(o),(i=ct)?(i=h_(i,On),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Cs!==null?{id:bi,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},a=qp(i),a.return=o,o.child=a,Kt=o,ct=null)):i=null,i===null)throw Rs(o);return o.lanes=536870912,null}return Wu(o,u)}var _=i.memoizedState;if(_!==null){var C=_.dehydrated;if(fd(o),y)if(o.flags&256)o.flags&=-257,o=ty(i,o,a);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(s(558));else if(Dt||Er(i,o,a,!1),y=(a&i.childLanes)!==0,Dt||y){if(u=at,u!==null&&(C=Sa(u,a),C!==0&&C!==_.retryLane))throw _.retryLane=C,No(i,C),yn(u,i,C),Dd;lc(),o=ty(i,o,a)}else i=_.treeContext,ct=Bn(C.nextSibling),Kt=o,Fe=!0,xs=null,On=!1,i!==null&&Bp(o,i),o=Wu(o,u),o.flags|=4096;return o}return i=Hi(i.child,{mode:u.mode,children:u.children}),i.ref=o.ref,o.child=i,i.return=o,i}function Zu(i,o){var a=o.ref;if(a===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(o.flags|=4194816)}}function Pd(i,o,a,u,y){return Vo(o),a=hd(i,o,a,u,void 0,y),u=md(),i!==null&&!Dt?(pd(i,o,y),$i(i,o,y)):(Fe&&u&&Qf(o),o.flags|=1,$t(i,o,a,y),o.child)}function ny(i,o,a,u,y,_){return Vo(o),o.updateQueue=null,a=og(o,u,a,y),sg(i),u=md(),i!==null&&!Dt?(pd(i,o,_),$i(i,o,_)):(Fe&&u&&Qf(o),o.flags|=1,$t(i,o,a,_),o.child)}function iy(i,o,a,u,y){if(Vo(o),o.stateNode===null){var _=yr,C=a.contextType;typeof C=="object"&&C!==null&&(_=Qt(C)),_=new a(u,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Nd,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=u,_.state=o.memoizedState,_.refs={},od(o),C=a.contextType,_.context=typeof C=="object"&&C!==null?Qt(C):yr,_.state=o.memoizedState,C=a.getDerivedStateFromProps,typeof C=="function"&&(bd(o,a,C,u),_.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(C=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),C!==_.state&&Nd.enqueueReplaceState(_,_.state,null),Xa(o,u,_,y),$a(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(i===null){_=o.stateNode;var w=o.memoizedProps,k=zo(a,w);_.props=k;var J=_.context,W=a.contextType;C=yr,typeof W=="object"&&W!==null&&(C=Qt(W));var ie=a.getDerivedStateFromProps;W=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function",w=o.pendingProps!==w,W||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w||J!==C)&&Hg(o,_,u,C),ws=!1;var K=o.memoizedState;_.state=K,Xa(o,u,_,y),$a(),J=o.memoizedState,w||K!==J||ws?(typeof ie=="function"&&(bd(o,a,ie,u),J=o.memoizedState),(k=ws||Fg(o,a,k,u,K,J,C))?(W||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=J),_.props=u,_.state=J,_.context=C,u=k):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{_=o.stateNode,rd(i,o),C=o.memoizedProps,W=zo(a,C),_.props=W,ie=o.pendingProps,K=_.context,J=a.contextType,k=yr,typeof J=="object"&&J!==null&&(k=Qt(J)),w=a.getDerivedStateFromProps,(J=typeof w=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==ie||K!==k)&&Hg(o,_,u,k),ws=!1,K=o.memoizedState,_.state=K,Xa(o,u,_,y),$a();var X=o.memoizedState;C!==ie||K!==X||ws||i!==null&&i.dependencies!==null&&Pu(i.dependencies)?(typeof w=="function"&&(bd(o,a,w,u),X=o.memoizedState),(W=ws||Fg(o,a,W,u,K,X,k)||i!==null&&i.dependencies!==null&&Pu(i.dependencies))?(J||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,X,k),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,X,k)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||C===i.memoizedProps&&K===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&K===i.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=X),_.props=u,_.state=X,_.context=k,u=W):(typeof _.componentDidUpdate!="function"||C===i.memoizedProps&&K===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&K===i.memoizedState||(o.flags|=1024),u=!1)}return _=u,Zu(i,o),u=(o.flags&128)!==0,_||u?(_=o.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,i!==null&&u?(o.child=qo(o,i.child,null,y),o.child=qo(o,null,a,y)):$t(i,o,a,y),o.memoizedState=_.state,i=o.child):i=$i(i,o,y),i}function sy(i,o,a,u){return Do(),o.flags|=256,$t(i,o,a,u),o.child}var Vd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ud(i){return{baseLanes:i,cachePool:Kp()}}function kd(i,o,a){return i=i!==null?i.childLanes&~a:0,o&&(i|=In),i}function oy(i,o,a){var u=o.pendingProps,y=!1,_=(o.flags&128)!==0,C;if((C=_)||(C=i!==null&&i.memoizedState===null?!1:(Et.current&2)!==0),C&&(y=!0,o.flags&=-129),C=(o.flags&32)!==0,o.flags&=-33,i===null){if(Fe){if(y?Ms(o):Ds(),(i=ct)?(i=h_(i,On),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Cs!==null?{id:bi,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},a=qp(i),a.return=o,o.child=a,Kt=o,ct=null)):i=null,i===null)throw Rs(o);return _h(i)?o.lanes=32:o.lanes=536870912,null}var w=u.children;return u=u.fallback,y?(Ds(),y=o.mode,w=ju({mode:"hidden",children:w},y),u=Mo(u,y,a,null),w.return=o,u.return=o,w.sibling=u,o.child=w,u=o.child,u.memoizedState=Ud(a),u.childLanes=kd(i,C,a),o.memoizedState=Vd,tl(null,u)):(Ms(o),Ld(o,w))}var k=i.memoizedState;if(k!==null&&(w=k.dehydrated,w!==null)){if(_)o.flags&256?(Ms(o),o.flags&=-257,o=qd(i,o,a)):o.memoizedState!==null?(Ds(),o.child=i.child,o.flags|=128,o=null):(Ds(),w=u.fallback,y=o.mode,u=ju({mode:"visible",children:u.children},y),w=Mo(w,y,a,null),w.flags|=2,u.return=o,w.return=o,u.sibling=w,o.child=u,qo(o,i.child,null,a),u=o.child,u.memoizedState=Ud(a),u.childLanes=kd(i,C,a),o.memoizedState=Vd,o=tl(null,u));else if(Ms(o),_h(w)){if(C=w.nextSibling&&w.nextSibling.dataset,C)var J=C.dgst;C=J,u=Error(s(419)),u.stack="",u.digest=C,Ha({value:u,source:null,stack:null}),o=qd(i,o,a)}else if(Dt||Er(i,o,a,!1),C=(a&i.childLanes)!==0,Dt||C){if(C=at,C!==null&&(u=Sa(C,a),u!==0&&u!==k.retryLane))throw k.retryLane=u,No(i,u),yn(C,i,u),Dd;yh(w)||lc(),o=qd(i,o,a)}else yh(w)?(o.flags|=192,o.child=i.child,o=null):(i=k.treeContext,ct=Bn(w.nextSibling),Kt=o,Fe=!0,xs=null,On=!1,i!==null&&Bp(o,i),o=Ld(o,u.children),o.flags|=4096);return o}return y?(Ds(),w=u.fallback,y=o.mode,k=i.child,J=k.sibling,u=Hi(k,{mode:"hidden",children:u.children}),u.subtreeFlags=k.subtreeFlags&65011712,J!==null?w=Hi(J,w):(w=Mo(w,y,a,null),w.flags|=2),w.return=o,u.return=o,u.sibling=w,o.child=u,tl(null,u),u=o.child,w=i.child.memoizedState,w===null?w=Ud(a):(y=w.cachePool,y!==null?(k=Nt._currentValue,y=y.parent!==k?{parent:k,pool:k}:y):y=Kp(),w={baseLanes:w.baseLanes|a,cachePool:y}),u.memoizedState=w,u.childLanes=kd(i,C,a),o.memoizedState=Vd,tl(i.child,u)):(Ms(o),a=i.child,i=a.sibling,a=Hi(a,{mode:"visible",children:u.children}),a.return=o,a.sibling=null,i!==null&&(C=o.deletions,C===null?(o.deletions=[i],o.flags|=16):C.push(i)),o.child=a,o.memoizedState=null,a)}function Ld(i,o){return o=ju({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function ju(i,o){return i=An(22,i,null,o),i.lanes=0,i}function qd(i,o,a){return qo(o,i.child,null,a),i=Ld(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function ry(i,o,a){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o),jf(i.return,o,a)}function Od(i,o,a,u,y,_){var C=i.memoizedState;C===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:y,treeForkCount:_}:(C.isBackwards=o,C.rendering=null,C.renderingStartTime=0,C.last=u,C.tail=a,C.tailMode=y,C.treeForkCount=_)}function ay(i,o,a){var u=o.pendingProps,y=u.revealOrder,_=u.tail;u=u.children;var C=Et.current,w=(C&2)!==0;if(w?(C=C&1|2,o.flags|=128):C&=1,he(Et,C),$t(i,o,u,a),u=Fe?Fa:0,!w&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ry(i,a,o);else if(i.tag===19)ry(i,a,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=o.child,y=null;a!==null;)i=a.alternate,i!==null&&Bu(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=o.child,o.child=null):(y=a.sibling,a.sibling=null),Od(o,!1,y,a,_,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=o.child,o.child=null;y!==null;){if(i=y.alternate,i!==null&&Bu(i)===null){o.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}Od(o,!0,a,null,_,u);break;case"together":Od(o,!1,null,null,void 0,u);break;default:o.memoizedState=null}return o.child}function $i(i,o,a){if(i!==null&&(o.dependencies=i.dependencies),Us|=o.lanes,(a&o.childLanes)===0)if(i!==null){if(Er(i,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,a=Hi(i,i.pendingProps),o.child=a,a.return=o;i.sibling!==null;)i=i.sibling,a=a.sibling=Hi(i,i.pendingProps),a.return=o;a.sibling=null}return o.child}function zd(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Pu(i)))}function OA(i,o,a){switch(o.tag){case 3:Lt(o,o.stateNode.containerInfo),Is(o,Nt,i.memoizedState.cache),Do();break;case 27:case 5:fo(o);break;case 4:Lt(o,o.stateNode.containerInfo);break;case 10:Is(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,fd(o),null;break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(Ms(o),o.flags|=128,null):(a&o.child.childLanes)!==0?oy(i,o,a):(Ms(o),i=$i(i,o,a),i!==null?i.sibling:null);Ms(o);break;case 19:var y=(i.flags&128)!==0;if(u=(a&o.childLanes)!==0,u||(Er(i,o,a,!1),u=(a&o.childLanes)!==0),y){if(u)return ay(i,o,a);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),he(Et,Et.current),u)break;return null;case 22:return o.lanes=0,jg(i,o,a,o.pendingProps);case 24:Is(o,Nt,i.memoizedState.cache)}return $i(i,o,a)}function ly(i,o,a){if(i!==null)if(i.memoizedProps!==o.pendingProps)Dt=!0;else{if(!zd(i,a)&&(o.flags&128)===0)return Dt=!1,OA(i,o,a);Dt=(i.flags&131072)!==0}else Dt=!1,Fe&&(o.flags&1048576)!==0&&zp(o,Fa,o.index);switch(o.lanes=0,o.tag){case 16:e:{var u=o.pendingProps;if(i=ko(o.elementType),o.type=i,typeof i=="function")Yf(i)?(u=zo(i,u),o.tag=1,o=iy(null,o,i,u,a)):(o.tag=0,o=Pd(null,o,i,u,a));else{if(i!=null){var y=i.$$typeof;if(y===le){o.tag=11,o=Xg(null,o,i,u,a);break e}else if(y===P){o.tag=14,o=Wg(null,o,i,u,a);break e}}throw o=ne(i)||i,Error(s(306,o,""))}}return o;case 0:return Pd(i,o,o.type,o.pendingProps,a);case 1:return u=o.type,y=zo(u,o.pendingProps),iy(i,o,u,y,a);case 3:e:{if(Lt(o,o.stateNode.containerInfo),i===null)throw Error(s(387));u=o.pendingProps;var _=o.memoizedState;y=_.element,rd(i,o),Xa(o,u,null,a);var C=o.memoizedState;if(u=C.cache,Is(o,Nt,u),u!==_.cache&&ed(o,[Nt],a,!0),$a(),u=C.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:C.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=sy(i,o,u,a);break e}else if(u!==y){y=kn(Error(s(424)),o),Ha(y),o=sy(i,o,u,a);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ct=Bn(i.firstChild),Kt=o,Fe=!0,xs=null,On=!0,a=jp(o,null,u,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Do(),u===y){o=$i(i,o,a);break e}$t(i,o,u,a)}o=o.child}return o;case 26:return Zu(i,o),i===null?(a=v_(o.type,null,o.pendingProps,null))?o.memoizedState=a:Fe||(a=o.type,i=o.pendingProps,u=pc(Pe.current).createElement(a),u[It]=o,u[Bt]=i,Xt(u,a,i),wt(u),o.stateNode=u):o.memoizedState=v_(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return fo(o),i===null&&Fe&&(u=o.stateNode=g_(o.type,o.pendingProps,Pe.current),Kt=o,On=!0,y=ct,zs(o.type)?(vh=y,ct=Bn(u.firstChild)):ct=y),$t(i,o,o.pendingProps.children,a),Zu(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&Fe&&((y=u=ct)&&(u=pC(u,o.type,o.pendingProps,On),u!==null?(o.stateNode=u,Kt=o,ct=Bn(u.firstChild),On=!1,y=!0):y=!1),y||Rs(o)),fo(o),y=o.type,_=o.pendingProps,C=i!==null?i.memoizedProps:null,u=_.children,mh(y,_)?u=null:C!==null&&mh(y,C)&&(o.flags|=32),o.memoizedState!==null&&(y=hd(i,o,NA,null,null,a),gl._currentValue=y),Zu(i,o),$t(i,o,u,a),o.child;case 6:return i===null&&Fe&&((i=a=ct)&&(a=gC(a,o.pendingProps,On),a!==null?(o.stateNode=a,Kt=o,ct=null,i=!0):i=!1),i||Rs(o)),null;case 13:return oy(i,o,a);case 4:return Lt(o,o.stateNode.containerInfo),u=o.pendingProps,i===null?o.child=qo(o,null,u,a):$t(i,o,u,a),o.child;case 11:return Xg(i,o,o.type,o.pendingProps,a);case 7:return $t(i,o,o.pendingProps,a),o.child;case 8:return $t(i,o,o.pendingProps.children,a),o.child;case 12:return $t(i,o,o.pendingProps.children,a),o.child;case 10:return u=o.pendingProps,Is(o,o.type,u.value),$t(i,o,u.children,a),o.child;case 9:return y=o.type._context,u=o.pendingProps.children,Vo(o),y=Qt(y),u=u(y),o.flags|=1,$t(i,o,u,a),o.child;case 14:return Wg(i,o,o.type,o.pendingProps,a);case 15:return Zg(i,o,o.type,o.pendingProps,a);case 19:return ay(i,o,a);case 31:return qA(i,o,a);case 22:return jg(i,o,a,o.pendingProps);case 24:return Vo(o),u=Qt(Nt),i===null?(y=id(),y===null&&(y=at,_=td(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=a),y=_),o.memoizedState={parent:u,cache:y},od(o),Is(o,Nt,y)):((i.lanes&a)!==0&&(rd(i,o),Xa(o,null,null,a),$a()),y=i.memoizedState,_=o.memoizedState,y.parent!==u?(y={parent:u,cache:u},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),Is(o,Nt,u)):(u=_.cache,Is(o,Nt,u),u!==y.cache&&ed(o,[Nt],a,!0))),$t(i,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function Xi(i){i.flags|=4}function Bd(i,o,a,u,y){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(Uy())i.flags|=8192;else throw Lo=Lu,sd}else i.flags&=-16777217}function uy(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!C_(o))if(Uy())i.flags|=8192;else throw Lo=Lu,sd}function ec(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?ru():536870912,i.lanes|=o,Pr|=o)}function nl(i,o){if(!Fe)switch(i.tailMode){case"hidden":o=i.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function ft(i){var o=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(o)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,u|=y.subtreeFlags&65011712,u|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,u|=y.subtreeFlags,u|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=u,i.childLanes=a,o}function zA(i,o,a){var u=o.pendingProps;switch($f(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(o),null;case 1:return ft(o),null;case 3:return a=o.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Ji(Nt),ht(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Tr(o)?Xi(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Wf())),ft(o),null;case 26:var y=o.type,_=o.memoizedState;return i===null?(Xi(o),_!==null?(ft(o),uy(o,_)):(ft(o),Bd(o,y,null,u,a))):_?_!==i.memoizedState?(Xi(o),ft(o),uy(o,_)):(ft(o),o.flags&=-16777217):(i=i.memoizedProps,i!==u&&Xi(o),ft(o),Bd(o,y,i,u,a)),null;case 27:if(Zo(o),a=Pe.current,y=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==u&&Xi(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return ft(o),null}i=ve.current,Tr(o)?Fp(o):(i=g_(y,u,a),o.stateNode=i,Xi(o))}return ft(o),null;case 5:if(Zo(o),y=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==u&&Xi(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return ft(o),null}if(_=ve.current,Tr(o))Fp(o);else{var C=pc(Pe.current);switch(_){case 1:_=C.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=C.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=C.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?C.createElement("select",{is:u.is}):C.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?C.createElement(y,{is:u.is}):C.createElement(y)}}_[It]=o,_[Bt]=u;e:for(C=o.child;C!==null;){if(C.tag===5||C.tag===6)_.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===o)break e;for(;C.sibling===null;){if(C.return===null||C.return===o)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}o.stateNode=_;e:switch(Xt(_,y,u),y){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Xi(o)}}return ft(o),Bd(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,a),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==u&&Xi(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(s(166));if(i=Pe.current,Tr(o)){if(i=o.stateNode,a=o.memoizedProps,u=null,y=Kt,y!==null)switch(y.tag){case 27:case 5:u=y.memoizedProps}i[It]=o,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||o_(i.nodeValue,a)),i||Rs(o,!0)}else i=pc(i).createTextNode(u),i[It]=o,o.stateNode=i}return ft(o),null;case 31:if(a=o.memoizedState,i===null||i.memoizedState!==null){if(u=Tr(o),a!==null){if(i===null){if(!u)throw Error(s(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[It]=o}else Do(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ft(o),i=!1}else a=Wf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return o.flags&256?(xn(o),o):(xn(o),null);if((o.flags&128)!==0)throw Error(s(558))}return ft(o),null;case 13:if(u=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=Tr(o),u!==null&&u.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[It]=o}else Do(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ft(o),y=!1}else y=Wf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(xn(o),o):(xn(o),null)}return xn(o),(o.flags&128)!==0?(o.lanes=a,o):(a=u!==null,i=i!==null&&i.memoizedState!==null,a&&(u=o.child,y=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(y=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==y&&(u.flags|=2048)),a!==i&&a&&(o.child.flags|=8192),ec(o,o.updateQueue),ft(o),null);case 4:return ht(),i===null&&uh(o.stateNode.containerInfo),ft(o),null;case 10:return Ji(o.type),ft(o),null;case 19:if(oe(Et),u=o.memoizedState,u===null)return ft(o),null;if(y=(o.flags&128)!==0,_=u.rendering,_===null)if(y)nl(u,!1);else{if(_t!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(_=Bu(i),_!==null){for(o.flags|=128,nl(u,!1),i=_.updateQueue,o.updateQueue=i,ec(o,i),o.subtreeFlags=0,i=a,a=o.child;a!==null;)Lp(a,i),a=a.sibling;return he(Et,Et.current&1|2),Fe&&Gi(o,u.treeForkCount),o.child}i=i.sibling}u.tail!==null&&ln()>oc&&(o.flags|=128,y=!0,nl(u,!1),o.lanes=4194304)}else{if(!y)if(i=Bu(_),i!==null){if(o.flags|=128,y=!0,i=i.updateQueue,o.updateQueue=i,ec(o,i),nl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!Fe)return ft(o),null}else 2*ln()-u.renderingStartTime>oc&&a!==536870912&&(o.flags|=128,y=!0,nl(u,!1),o.lanes=4194304);u.isBackwards?(_.sibling=o.child,o.child=_):(i=u.last,i!==null?i.sibling=_:o.child=_,u.last=_)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=ln(),i.sibling=null,a=Et.current,he(Et,y?a&1|2:a&1),Fe&&Gi(o,u.treeForkCount),i):(ft(o),null);case 22:case 23:return xn(o),cd(),u=o.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(a&536870912)!==0&&(o.flags&128)===0&&(ft(o),o.subtreeFlags&6&&(o.flags|=8192)):ft(o),a=o.updateQueue,a!==null&&ec(o,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==a&&(o.flags|=2048),i!==null&&oe(Uo),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),Ji(Nt),ft(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function BA(i,o){switch($f(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Ji(Nt),ht(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return Zo(o),null;case 31:if(o.memoizedState!==null){if(xn(o),o.alternate===null)throw Error(s(340));Do()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(xn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Do()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return oe(Et),null;case 4:return ht(),null;case 10:return Ji(o.type),null;case 22:case 23:return xn(o),cd(),i!==null&&oe(Uo),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Ji(Nt),null;case 25:return null;default:return null}}function cy(i,o){switch($f(o),o.tag){case 3:Ji(Nt),ht();break;case 26:case 27:case 5:Zo(o);break;case 4:ht();break;case 31:o.memoizedState!==null&&xn(o);break;case 13:xn(o);break;case 19:oe(Et);break;case 10:Ji(o.type);break;case 22:case 23:xn(o),cd(),i!==null&&oe(Uo);break;case 24:Ji(Nt)}}function il(i,o){try{var a=o.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var y=u.next;a=y;do{if((a.tag&i)===i){u=void 0;var _=a.create,C=a.inst;u=_(),C.destroy=u}a=a.next}while(a!==y)}}catch(w){nt(o,o.return,w)}}function Ps(i,o,a){try{var u=o.updateQueue,y=u!==null?u.lastEffect:null;if(y!==null){var _=y.next;u=_;do{if((u.tag&i)===i){var C=u.inst,w=C.destroy;if(w!==void 0){C.destroy=void 0,y=o;var k=a,J=w;try{J()}catch(W){nt(y,k,W)}}}u=u.next}while(u!==_)}}catch(W){nt(o,o.return,W)}}function fy(i){var o=i.updateQueue;if(o!==null){var a=i.stateNode;try{tg(o,a)}catch(u){nt(i,i.return,u)}}}function dy(i,o,a){a.props=zo(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){nt(i,o,u)}}function sl(i,o){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(y){nt(i,o,y)}}function Mi(i,o){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(y){nt(i,o,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){nt(i,o,y)}else a.current=null}function hy(i){var o=i.type,a=i.memoizedProps,u=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(y){nt(i,i.return,y)}}function Fd(i,o,a){try{var u=i.stateNode;uC(u,i.type,a,o),u[Bt]=o}catch(y){nt(i,i.return,y)}}function my(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&zs(i.type)||i.tag===4}function Hd(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||my(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&zs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Gd(i,o,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(i),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=Wn));else if(u!==4&&(u===27&&zs(i.type)&&(a=i.stateNode,o=null),i=i.child,i!==null))for(Gd(i,o,a),i=i.sibling;i!==null;)Gd(i,o,a),i=i.sibling}function tc(i,o,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,o?a.insertBefore(i,o):a.appendChild(i);else if(u!==4&&(u===27&&zs(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(tc(i,o,a),i=i.sibling;i!==null;)tc(i,o,a),i=i.sibling}function py(i){var o=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);Xt(o,u,a),o[It]=i,o[Bt]=a}catch(_){nt(i,i.return,_)}}var Wi=!1,Pt=!1,Yd=!1,gy=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function FA(i,o){if(i=i.containerInfo,dh=Sc,i=wp(i),qf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var y=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var C=0,w=-1,k=-1,J=0,W=0,ie=i,K=null;t:for(;;){for(var X;ie!==a||y!==0&&ie.nodeType!==3||(w=C+y),ie!==_||u!==0&&ie.nodeType!==3||(k=C+u),ie.nodeType===3&&(C+=ie.nodeValue.length),(X=ie.firstChild)!==null;)K=ie,ie=X;for(;;){if(ie===i)break t;if(K===a&&++J===y&&(w=C),K===_&&++W===u&&(k=C),(X=ie.nextSibling)!==null)break;ie=K,K=ie.parentNode}ie=X}a=w===-1||k===-1?null:{start:w,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(hh={focusedElem:i,selectionRange:a},Sc=!1,Ht=o;Ht!==null;)if(o=Ht,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Ht=i;else for(;Ht!==null;){switch(o=Ht,_=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=o,y=_.memoizedProps,_=_.memoizedState,u=a.stateNode;try{var Te=zo(a.type,y);i=u.getSnapshotBeforeUpdate(Te,_),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ce){nt(a,a.return,Ce)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,a=i.nodeType,a===9)gh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":gh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,Ht=i;break}Ht=o.return}}function yy(i,o,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:ji(i,a),u&4&&il(5,a);break;case 1:if(ji(i,a),u&4)if(i=a.stateNode,o===null)try{i.componentDidMount()}catch(C){nt(a,a.return,C)}else{var y=zo(a.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(y,o,i.__reactInternalSnapshotBeforeUpdate)}catch(C){nt(a,a.return,C)}}u&64&&fy(a),u&512&&sl(a,a.return);break;case 3:if(ji(i,a),u&64&&(i=a.updateQueue,i!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{tg(i,o)}catch(C){nt(a,a.return,C)}}break;case 27:o===null&&u&4&&py(a);case 26:case 5:ji(i,a),o===null&&u&4&&hy(a),u&512&&sl(a,a.return);break;case 12:ji(i,a);break;case 31:ji(i,a),u&4&&Ty(i,a);break;case 13:ji(i,a),u&4&&Ey(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=WA.bind(null,a),yC(i,a))));break;case 22:if(u=a.memoizedState!==null||Wi,!u){o=o!==null&&o.memoizedState!==null||Pt,y=Wi;var _=Pt;Wi=u,(Pt=o)&&!_?es(i,a,(a.subtreeFlags&8772)!==0):ji(i,a),Wi=y,Pt=_}break;case 30:break;default:ji(i,a)}}function _y(i){var o=i.alternate;o!==null&&(i.alternate=null,_y(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&ir(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var pt=null,hn=!1;function Zi(i,o,a){for(a=a.child;a!==null;)vy(i,o,a),a=a.sibling}function vy(i,o,a){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(Kn,a)}catch{}switch(a.tag){case 26:Pt||Mi(a,o),Zi(i,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Pt||Mi(a,o);var u=pt,y=hn;zs(a.type)&&(pt=a.stateNode,hn=!1),Zi(i,o,a),hl(a.stateNode),pt=u,hn=y;break;case 5:Pt||Mi(a,o);case 6:if(u=pt,y=hn,pt=null,Zi(i,o,a),pt=u,hn=y,pt!==null)if(hn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(a.stateNode)}catch(_){nt(a,o,_)}else try{pt.removeChild(a.stateNode)}catch(_){nt(a,o,_)}break;case 18:pt!==null&&(hn?(i=pt,f_(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Br(i)):f_(pt,a.stateNode));break;case 4:u=pt,y=hn,pt=a.stateNode.containerInfo,hn=!0,Zi(i,o,a),pt=u,hn=y;break;case 0:case 11:case 14:case 15:Ps(2,a,o),Pt||Ps(4,a,o),Zi(i,o,a);break;case 1:Pt||(Mi(a,o),u=a.stateNode,typeof u.componentWillUnmount=="function"&&dy(a,o,u)),Zi(i,o,a);break;case 21:Zi(i,o,a);break;case 22:Pt=(u=Pt)||a.memoizedState!==null,Zi(i,o,a),Pt=u;break;default:Zi(i,o,a)}}function Ty(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Br(i)}catch(a){nt(o,o.return,a)}}}function Ey(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Br(i)}catch(a){nt(o,o.return,a)}}function HA(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new gy),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new gy),o;default:throw Error(s(435,i.tag))}}function nc(i,o){var a=HA(i);o.forEach(function(u){if(!a.has(u)){a.add(u);var y=ZA.bind(null,i,u);u.then(y,y)}})}function mn(i,o){var a=o.deletions;if(a!==null)for(var u=0;u<a.length;u++){var y=a[u],_=i,C=o,w=C;e:for(;w!==null;){switch(w.tag){case 27:if(zs(w.type)){pt=w.stateNode,hn=!1;break e}break;case 5:pt=w.stateNode,hn=!1;break e;case 3:case 4:pt=w.stateNode.containerInfo,hn=!0;break e}w=w.return}if(pt===null)throw Error(s(160));vy(_,C,y),pt=null,hn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Sy(o,i),o=o.sibling}var ii=null;function Sy(i,o){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:mn(o,i),pn(i),u&4&&(Ps(3,i,i.return),il(3,i),Ps(5,i,i.return));break;case 1:mn(o,i),pn(i),u&512&&(Pt||a===null||Mi(a,a.return)),u&64&&Wi&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var y=ii;if(mn(o,i),pn(i),u&512&&(Pt||a===null||Mi(a,a.return)),u&4){var _=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){e:{u=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(u){case"title":_=y.getElementsByTagName("title")[0],(!_||_[yi]||_[It]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(u),y.head.insertBefore(_,y.querySelector("head > title"))),Xt(_,u,a),_[It]=i,wt(_),u=_;break e;case"link":var C=S_("link","href",y).get(u+(a.href||""));if(C){for(var w=0;w<C.length;w++)if(_=C[w],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){C.splice(w,1);break t}}_=y.createElement(u),Xt(_,u,a),y.head.appendChild(_);break;case"meta":if(C=S_("meta","content",y).get(u+(a.content||""))){for(w=0;w<C.length;w++)if(_=C[w],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){C.splice(w,1);break t}}_=y.createElement(u),Xt(_,u,a),y.head.appendChild(_);break;default:throw Error(s(468,u))}_[It]=i,wt(_),u=_}i.stateNode=u}else A_(y,i.type,i.stateNode);else i.stateNode=E_(y,u,i.memoizedProps);else _!==u?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,u===null?A_(y,i.type,i.stateNode):E_(y,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Fd(i,i.memoizedProps,a.memoizedProps)}break;case 27:mn(o,i),pn(i),u&512&&(Pt||a===null||Mi(a,a.return)),a!==null&&u&4&&Fd(i,i.memoizedProps,a.memoizedProps);break;case 5:if(mn(o,i),pn(i),u&512&&(Pt||a===null||Mi(a,a.return)),i.flags&32){y=i.stateNode;try{dn(y,"")}catch(Te){nt(i,i.return,Te)}}u&4&&i.stateNode!=null&&(y=i.memoizedProps,Fd(i,y,a!==null?a.memoizedProps:y)),u&1024&&(Yd=!0);break;case 6:if(mn(o,i),pn(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(Te){nt(i,i.return,Te)}}break;case 3:if(_c=null,y=ii,ii=gc(o.containerInfo),mn(o,i),ii=y,pn(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Br(o.containerInfo)}catch(Te){nt(i,i.return,Te)}Yd&&(Yd=!1,Ay(i));break;case 4:u=ii,ii=gc(i.stateNode.containerInfo),mn(o,i),pn(i),ii=u;break;case 12:mn(o,i),pn(i);break;case 31:mn(o,i),pn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,nc(i,u)));break;case 13:mn(o,i),pn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(sc=ln()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,nc(i,u)));break;case 22:y=i.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,J=Wi,W=Pt;if(Wi=J||y,Pt=W||k,mn(o,i),Pt=W,Wi=J,pn(i),u&8192)e:for(o=i.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(a===null||k||Wi||Pt||Bo(i)),a=null,o=i;;){if(o.tag===5||o.tag===26){if(a===null){k=a=o;try{if(_=k.stateNode,y)C=_.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{w=k.stateNode;var ie=k.memoizedProps.style,K=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;w.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Te){nt(k,k.return,Te)}}}else if(o.tag===6){if(a===null){k=o;try{k.stateNode.nodeValue=y?"":k.memoizedProps}catch(Te){nt(k,k.return,Te)}}}else if(o.tag===18){if(a===null){k=o;try{var X=k.stateNode;y?d_(X,!0):d_(k.stateNode,!1)}catch(Te){nt(k,k.return,Te)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,nc(i,a))));break;case 19:mn(o,i),pn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,nc(i,u)));break;case 30:break;case 21:break;default:mn(o,i),pn(i)}}function pn(i){var o=i.flags;if(o&2){try{for(var a,u=i.return;u!==null;){if(my(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var y=a.stateNode,_=Hd(i);tc(i,_,y);break;case 5:var C=a.stateNode;a.flags&32&&(dn(C,""),a.flags&=-33);var w=Hd(i);tc(i,w,C);break;case 3:case 4:var k=a.stateNode.containerInfo,J=Hd(i);Gd(i,J,k);break;default:throw Error(s(161))}}catch(W){nt(i,i.return,W)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Ay(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;Ay(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function ji(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)yy(i,o.alternate,o),o=o.sibling}function Bo(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Ps(4,o,o.return),Bo(o);break;case 1:Mi(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&dy(o,o.return,a),Bo(o);break;case 27:hl(o.stateNode);case 26:case 5:Mi(o,o.return),Bo(o);break;case 22:o.memoizedState===null&&Bo(o);break;case 30:Bo(o);break;default:Bo(o)}i=i.sibling}}function es(i,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,y=i,_=o,C=_.flags;switch(_.tag){case 0:case 11:case 15:es(y,_,a),il(4,_);break;case 1:if(es(y,_,a),u=_,y=u.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){nt(u,u.return,J)}if(u=_,y=u.updateQueue,y!==null){var w=u.stateNode;try{var k=y.shared.hiddenCallbacks;if(k!==null)for(y.shared.hiddenCallbacks=null,y=0;y<k.length;y++)eg(k[y],w)}catch(J){nt(u,u.return,J)}}a&&C&64&&fy(_),sl(_,_.return);break;case 27:py(_);case 26:case 5:es(y,_,a),a&&u===null&&C&4&&hy(_),sl(_,_.return);break;case 12:es(y,_,a);break;case 31:es(y,_,a),a&&C&4&&Ty(y,_);break;case 13:es(y,_,a),a&&C&4&&Ey(y,_);break;case 22:_.memoizedState===null&&es(y,_,a),sl(_,_.return);break;case 30:break;default:es(y,_,a)}o=o.sibling}}function Jd(i,o){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&Ga(a))}function Kd(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Ga(i))}function si(i,o,a,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Cy(i,o,a,u),o=o.sibling}function Cy(i,o,a,u){var y=o.flags;switch(o.tag){case 0:case 11:case 15:si(i,o,a,u),y&2048&&il(9,o);break;case 1:si(i,o,a,u);break;case 3:si(i,o,a,u),y&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Ga(i)));break;case 12:if(y&2048){si(i,o,a,u),i=o.stateNode;try{var _=o.memoizedProps,C=_.id,w=_.onPostCommit;typeof w=="function"&&w(C,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(k){nt(o,o.return,k)}}else si(i,o,a,u);break;case 31:si(i,o,a,u);break;case 13:si(i,o,a,u);break;case 23:break;case 22:_=o.stateNode,C=o.alternate,o.memoizedState!==null?_._visibility&2?si(i,o,a,u):ol(i,o):_._visibility&2?si(i,o,a,u):(_._visibility|=2,Nr(i,o,a,u,(o.subtreeFlags&10256)!==0||!1)),y&2048&&Jd(C,o);break;case 24:si(i,o,a,u),y&2048&&Kd(o.alternate,o);break;default:si(i,o,a,u)}}function Nr(i,o,a,u,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=i,C=o,w=a,k=u,J=C.flags;switch(C.tag){case 0:case 11:case 15:Nr(_,C,w,k,y),il(8,C);break;case 23:break;case 22:var W=C.stateNode;C.memoizedState!==null?W._visibility&2?Nr(_,C,w,k,y):ol(_,C):(W._visibility|=2,Nr(_,C,w,k,y)),y&&J&2048&&Jd(C.alternate,C);break;case 24:Nr(_,C,w,k,y),y&&J&2048&&Kd(C.alternate,C);break;default:Nr(_,C,w,k,y)}o=o.sibling}}function ol(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=i,u=o,y=u.flags;switch(u.tag){case 22:ol(a,u),y&2048&&Jd(u.alternate,u);break;case 24:ol(a,u),y&2048&&Kd(u.alternate,u);break;default:ol(a,u)}o=o.sibling}}var rl=8192;function Mr(i,o,a){if(i.subtreeFlags&rl)for(i=i.child;i!==null;)xy(i,o,a),i=i.sibling}function xy(i,o,a){switch(i.tag){case 26:Mr(i,o,a),i.flags&rl&&i.memoizedState!==null&&bC(a,ii,i.memoizedState,i.memoizedProps);break;case 5:Mr(i,o,a);break;case 3:case 4:var u=ii;ii=gc(i.stateNode.containerInfo),Mr(i,o,a),ii=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=rl,rl=16777216,Mr(i,o,a),rl=u):Mr(i,o,a));break;default:Mr(i,o,a)}}function Ry(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function al(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];Ht=u,wy(u,i)}Ry(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Iy(i),i=i.sibling}function Iy(i){switch(i.tag){case 0:case 11:case 15:al(i),i.flags&2048&&Ps(9,i,i.return);break;case 3:al(i);break;case 12:al(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,ic(i)):al(i);break;default:al(i)}}function ic(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];Ht=u,wy(u,i)}Ry(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Ps(8,o,o.return),ic(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,ic(o));break;default:ic(o)}i=i.sibling}}function wy(i,o){for(;Ht!==null;){var a=Ht;switch(a.tag){case 0:case 11:case 15:Ps(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ga(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Ht=u;else e:for(a=i;Ht!==null;){u=Ht;var y=u.sibling,_=u.return;if(_y(u),u===a){Ht=null;break e}if(y!==null){y.return=_,Ht=y;break e}Ht=_}}}var GA={getCacheForType:function(i){var o=Qt(Nt),a=o.data.get(i);return a===void 0&&(a=i(),o.data.set(i,a)),a},cacheSignal:function(){return Qt(Nt).controller.signal}},YA=typeof WeakMap=="function"?WeakMap:Map,Ze=0,at=null,ke=null,qe=0,tt=0,Rn=null,Vs=!1,Dr=!1,Qd=!1,ts=0,_t=0,Us=0,Fo=0,$d=0,In=0,Pr=0,ll=null,gn=null,Xd=!1,sc=0,by=0,oc=1/0,rc=null,ks=null,Ot=0,Ls=null,Vr=null,ns=0,Wd=0,Zd=null,Ny=null,ul=0,jd=null;function wn(){return(Ze&2)!==0&&qe!==0?qe&-qe:B.T!==null?oh():au()}function My(){if(In===0)if((qe&536870912)===0||Fe){var i=po;po<<=1,(po&3932160)===0&&(po=262144),In=i}else In=536870912;return i=Cn.current,i!==null&&(i.flags|=32),In}function yn(i,o,a){(i===at&&(tt===2||tt===9)||i.cancelPendingCommit!==null)&&(Ur(i,0),qs(i,qe,In,!1)),go(i,a),((Ze&2)===0||i!==at)&&(i===at&&((Ze&2)===0&&(Fo|=a),_t===4&&qs(i,qe,In,!1)),Di(i))}function Dy(i,o,a){if((Ze&6)!==0)throw Error(s(327));var u=!a&&(o&127)===0&&(o&i.expiredLanes)===0||Qn(i,o),y=u?QA(i,o):th(i,o,!0),_=u;do{if(y===0){Dr&&!u&&qs(i,o,0,!1);break}else{if(a=i.current.alternate,_&&!JA(a)){y=th(i,o,!1),_=!1;continue}if(y===2){if(_=o,i.errorRecoveryDisabledLanes&_)var C=0;else C=i.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){o=C;e:{var w=i;y=ll;var k=w.current.memoizedState.isDehydrated;if(k&&(Ur(w,C).flags|=256),C=th(w,C,!1),C!==2){if(Qd&&!k){w.errorRecoveryDisabledLanes|=_,Fo|=_,y=4;break e}_=gn,gn=y,_!==null&&(gn===null?gn=_:gn.push.apply(gn,_))}y=C}if(_=!1,y!==2)continue}}if(y===1){Ur(i,0),qs(i,o,0,!0);break}e:{switch(u=i,_=y,_){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:qs(u,o,In,!Vs);break e;case 2:gn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(y=sc+300-ln(),10<y)){if(qs(u,o,In,!Vs),mi(u,0,!0)!==0)break e;ns=o,u.timeoutHandle=u_(Py.bind(null,u,a,gn,rc,Xd,o,In,Fo,Pr,Vs,_,"Throttled",-0,0),y);break e}Py(u,a,gn,rc,Xd,o,In,Fo,Pr,Vs,_,null,-0,0)}}break}while(!0);Di(i)}function Py(i,o,a,u,y,_,C,w,k,J,W,ie,K,X){if(i.timeoutHandle=-1,ie=o.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wn},xy(o,_,ie);var Te=(_&62914560)===_?sc-ln():(_&4194048)===_?by-ln():0;if(Te=NC(ie,Te),Te!==null){ns=_,i.cancelPendingCommit=Te(By.bind(null,i,o,_,a,u,y,C,w,k,W,ie,null,K,X)),qs(i,_,C,!J);return}}By(i,o,_,a,u,y,C,w,k)}function JA(i){for(var o=i;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var y=a[u],_=y.getSnapshot;y=y.value;try{if(!Sn(_(),y))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function qs(i,o,a,u){o&=~$d,o&=~Fo,i.suspendedLanes|=o,i.pingedLanes&=~o,u&&(i.warmLanes|=o),u=i.expirationTimes;for(var y=o;0<y;){var _=31-vt(y),C=1<<_;u[_]=-1,y&=~C}a!==0&&yo(i,a,o)}function ac(){return(Ze&6)===0?(cl(0),!1):!0}function eh(){if(ke!==null){if(tt===0)var i=ke.return;else i=ke,Yi=Po=null,gd(i),xr=null,Ja=0,i=ke;for(;i!==null;)cy(i.alternate,i),i=i.return;ke=null}}function Ur(i,o){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,dC(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),ns=0,eh(),at=i,ke=a=Hi(i.current,null),qe=o,tt=0,Rn=null,Vs=!1,Dr=Qn(i,o),Qd=!1,Pr=In=$d=Fo=Us=_t=0,gn=ll=null,Xd=!1,(o&8)!==0&&(o|=o&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=o;0<u;){var y=31-vt(u),_=1<<y;o|=i[y],u&=~_}return ts=o,wu(),a}function Vy(i,o){De=null,B.H=el,o===Cr||o===ku?(o=Xp(),tt=3):o===sd?(o=Xp(),tt=4):tt=o===Dd?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Rn=o,ke===null&&(_t=1,Xu(i,kn(o,i.current)))}function Uy(){var i=Cn.current;return i===null?!0:(qe&4194048)===qe?zn===null:(qe&62914560)===qe||(qe&536870912)!==0?i===zn:!1}function ky(){var i=B.H;return B.H=el,i===null?el:i}function Ly(){var i=B.A;return B.A=GA,i}function lc(){_t=4,Vs||(qe&4194048)!==qe&&Cn.current!==null||(Dr=!0),(Us&134217727)===0&&(Fo&134217727)===0||at===null||qs(at,qe,In,!1)}function th(i,o,a){var u=Ze;Ze|=2;var y=ky(),_=Ly();(at!==i||qe!==o)&&(rc=null,Ur(i,o)),o=!1;var C=_t;e:do try{if(tt!==0&&ke!==null){var w=ke,k=Rn;switch(tt){case 8:eh(),C=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(o=!0);var J=tt;if(tt=0,Rn=null,kr(i,w,k,J),a&&Dr){C=0;break e}break;default:J=tt,tt=0,Rn=null,kr(i,w,k,J)}}KA(),C=_t;break}catch(W){Vy(i,W)}while(!0);return o&&i.shellSuspendCounter++,Yi=Po=null,Ze=u,B.H=y,B.A=_,ke===null&&(at=null,qe=0,wu()),C}function KA(){for(;ke!==null;)qy(ke)}function QA(i,o){var a=Ze;Ze|=2;var u=ky(),y=Ly();at!==i||qe!==o?(rc=null,oc=ln()+500,Ur(i,o)):Dr=Qn(i,o);e:do try{if(tt!==0&&ke!==null){o=ke;var _=Rn;t:switch(tt){case 1:tt=0,Rn=null,kr(i,o,_,1);break;case 2:case 9:if(Qp(_)){tt=0,Rn=null,Oy(o);break}o=function(){tt!==2&&tt!==9||at!==i||(tt=7),Di(i)},_.then(o,o);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:Qp(_)?(tt=0,Rn=null,Oy(o)):(tt=0,Rn=null,kr(i,o,_,7));break;case 5:var C=null;switch(ke.tag){case 26:C=ke.memoizedState;case 5:case 27:var w=ke;if(C?C_(C):w.stateNode.complete){tt=0,Rn=null;var k=w.sibling;if(k!==null)ke=k;else{var J=w.return;J!==null?(ke=J,uc(J)):ke=null}break t}}tt=0,Rn=null,kr(i,o,_,5);break;case 6:tt=0,Rn=null,kr(i,o,_,6);break;case 8:eh(),_t=6;break e;default:throw Error(s(462))}}$A();break}catch(W){Vy(i,W)}while(!0);return Yi=Po=null,B.H=u,B.A=y,Ze=a,ke!==null?0:(at=null,qe=0,wu(),_t)}function $A(){for(;ke!==null&&!Mf();)qy(ke)}function qy(i){var o=ly(i.alternate,i,ts);i.memoizedProps=i.pendingProps,o===null?uc(i):ke=o}function Oy(i){var o=i,a=o.alternate;switch(o.tag){case 15:case 0:o=ny(a,o,o.pendingProps,o.type,void 0,qe);break;case 11:o=ny(a,o,o.pendingProps,o.type.render,o.ref,qe);break;case 5:gd(o);default:cy(a,o),o=ke=Lp(o,ts),o=ly(a,o,ts)}i.memoizedProps=i.pendingProps,o===null?uc(i):ke=o}function kr(i,o,a,u){Yi=Po=null,gd(o),xr=null,Ja=0;var y=o.return;try{if(LA(i,y,o,a,qe)){_t=1,Xu(i,kn(a,i.current)),ke=null;return}}catch(_){if(y!==null)throw ke=y,_;_t=1,Xu(i,kn(a,i.current)),ke=null;return}o.flags&32768?(Fe||u===1?i=!0:Dr||(qe&536870912)!==0?i=!1:(Vs=i=!0,(u===2||u===9||u===3||u===6)&&(u=Cn.current,u!==null&&u.tag===13&&(u.flags|=16384))),zy(o,i)):uc(o)}function uc(i){var o=i;do{if((o.flags&32768)!==0){zy(o,Vs);return}i=o.return;var a=zA(o.alternate,o,ts);if(a!==null){ke=a;return}if(o=o.sibling,o!==null){ke=o;return}ke=o=i}while(o!==null);_t===0&&(_t=5)}function zy(i,o){do{var a=BA(i.alternate,i);if(a!==null){a.flags&=32767,ke=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(i=i.sibling,i!==null)){ke=i;return}ke=i=a}while(i!==null);_t=6,ke=null}function By(i,o,a,u,y,_,C,w,k){i.cancelPendingCommit=null;do cc();while(Ot!==0);if((Ze&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(_=o.lanes|o.childLanes,_|=Hf,Vf(i,a,_,C,w,k),i===at&&(ke=at=null,qe=0),Vr=o,Ls=i,ns=a,Wd=_,Zd=y,Ny=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,jA(ms,function(){return Jy(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=B.T,B.T=null,y=Z.p,Z.p=2,C=Ze,Ze|=4;try{FA(i,o,a)}finally{Ze=C,Z.p=y,B.T=u}}Ot=1,Fy(),Hy(),Gy()}}function Fy(){if(Ot===1){Ot=0;var i=Ls,o=Vr,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=B.T,B.T=null;var u=Z.p;Z.p=2;var y=Ze;Ze|=4;try{Sy(o,i);var _=hh,C=wp(i.containerInfo),w=_.focusedElem,k=_.selectionRange;if(C!==w&&w&&w.ownerDocument&&Ip(w.ownerDocument.documentElement,w)){if(k!==null&&qf(w)){var J=k.start,W=k.end;if(W===void 0&&(W=J),"selectionStart"in w)w.selectionStart=J,w.selectionEnd=Math.min(W,w.value.length);else{var ie=w.ownerDocument||document,K=ie&&ie.defaultView||window;if(K.getSelection){var X=K.getSelection(),Te=w.textContent.length,Ce=Math.min(k.start,Te),rt=k.end===void 0?Ce:Math.min(k.end,Te);!X.extend&&Ce>rt&&(C=rt,rt=Ce,Ce=C);var F=Rp(w,Ce),q=Rp(w,rt);if(F&&q&&(X.rangeCount!==1||X.anchorNode!==F.node||X.anchorOffset!==F.offset||X.focusNode!==q.node||X.focusOffset!==q.offset)){var Y=ie.createRange();Y.setStart(F.node,F.offset),X.removeAllRanges(),Ce>rt?(X.addRange(Y),X.extend(q.node,q.offset)):(Y.setEnd(q.node,q.offset),X.addRange(Y))}}}}for(ie=[],X=w;X=X.parentNode;)X.nodeType===1&&ie.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ie.length;w++){var ee=ie[w];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Sc=!!dh,hh=dh=null}finally{Ze=y,Z.p=u,B.T=a}}i.current=o,Ot=2}}function Hy(){if(Ot===2){Ot=0;var i=Ls,o=Vr,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=B.T,B.T=null;var u=Z.p;Z.p=2;var y=Ze;Ze|=4;try{yy(i,o.alternate,o)}finally{Ze=y,Z.p=u,B.T=a}}Ot=3}}function Gy(){if(Ot===4||Ot===3){Ot=0,eu();var i=Ls,o=Vr,a=ns,u=Ny;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ot=5:(Ot=0,Vr=Ls=null,Yy(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(ks=null),Oi(a),o=o.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(Kn,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=B.T,y=Z.p,Z.p=2,B.T=null;try{for(var _=i.onRecoverableError,C=0;C<u.length;C++){var w=u[C];_(w.value,{componentStack:w.stack})}}finally{B.T=o,Z.p=y}}(ns&3)!==0&&cc(),Di(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===jd?ul++:(ul=0,jd=i):ul=0,cl(0)}}function Yy(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Ga(o)))}function cc(){return Fy(),Hy(),Gy(),Jy()}function Jy(){if(Ot!==5)return!1;var i=Ls,o=Wd;Wd=0;var a=Oi(ns),u=B.T,y=Z.p;try{Z.p=32>a?32:a,B.T=null,a=Zd,Zd=null;var _=Ls,C=ns;if(Ot=0,Vr=Ls=null,ns=0,(Ze&6)!==0)throw Error(s(331));var w=Ze;if(Ze|=4,Iy(_.current),Cy(_,_.current,C,a),Ze=w,cl(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(Kn,_)}catch{}return!0}finally{Z.p=y,B.T=u,Yy(i,o)}}function Ky(i,o,a){o=kn(a,o),o=Md(i.stateNode,o,2),i=Ns(i,o,2),i!==null&&(go(i,2),Di(i))}function nt(i,o,a){if(i.tag===3)Ky(i,i,a);else for(;o!==null;){if(o.tag===3){Ky(o,i,a);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ks===null||!ks.has(u))){i=kn(a,i),a=Qg(2),u=Ns(o,a,2),u!==null&&($g(a,u,o,i),go(u,2),Di(u));break}}o=o.return}}function nh(i,o,a){var u=i.pingCache;if(u===null){u=i.pingCache=new YA;var y=new Set;u.set(o,y)}else y=u.get(o),y===void 0&&(y=new Set,u.set(o,y));y.has(a)||(Qd=!0,y.add(a),i=XA.bind(null,i,o,a),o.then(i,i))}function XA(i,o,a){var u=i.pingCache;u!==null&&u.delete(o),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,at===i&&(qe&a)===a&&(_t===4||_t===3&&(qe&62914560)===qe&&300>ln()-sc?(Ze&2)===0&&Ur(i,0):$d|=a,Pr===qe&&(Pr=0)),Di(i)}function Qy(i,o){o===0&&(o=ru()),i=No(i,o),i!==null&&(go(i,o),Di(i))}function WA(i){var o=i.memoizedState,a=0;o!==null&&(a=o.retryLane),Qy(i,a)}function ZA(i,o){var a=0;switch(i.tag){case 31:case 13:var u=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(o),Qy(i,a)}function jA(i,o){return qt(i,o)}var fc=null,Lr=null,ih=!1,dc=!1,sh=!1,Os=0;function Di(i){i!==Lr&&i.next===null&&(Lr===null?fc=Lr=i:Lr=Lr.next=i),dc=!0,ih||(ih=!0,tC())}function cl(i,o){if(!sh&&dc){sh=!0;do for(var a=!1,u=fc;u!==null;){if(i!==0){var y=u.pendingLanes;if(y===0)var _=0;else{var C=u.suspendedLanes,w=u.pingedLanes;_=(1<<31-vt(42|i)+1)-1,_&=y&~(C&~w),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,Zy(u,_))}else _=qe,_=mi(u,u===at?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||Qn(u,_)||(a=!0,Zy(u,_));u=u.next}while(a);sh=!1}}function eC(){$y()}function $y(){dc=ih=!1;var i=0;Os!==0&&fC()&&(i=Os);for(var o=ln(),a=null,u=fc;u!==null;){var y=u.next,_=Xy(u,o);_===0?(u.next=null,a===null?fc=y:a.next=y,y===null&&(Lr=a)):(a=u,(i!==0||(_&3)!==0)&&(dc=!0)),u=y}Ot!==0&&Ot!==5||cl(i),Os!==0&&(Os=0)}function Xy(i,o){for(var a=i.suspendedLanes,u=i.pingedLanes,y=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var C=31-vt(_),w=1<<C,k=y[C];k===-1?((w&a)===0||(w&u)!==0)&&(y[C]=Pf(w,o)):k<=o&&(i.expiredLanes|=w),_&=~w}if(o=at,a=qe,a=mi(i,i===o?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===o&&(tt===2||tt===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&hs(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Qn(i,a)){if(o=a&-a,o===i.callbackPriority)return o;switch(u!==null&&hs(u),Oi(a)){case 2:case 8:a=Ta;break;case 32:a=ms;break;case 268435456:a=tu;break;default:a=ms}return u=Wy.bind(null,i),a=qt(a,u),i.callbackPriority=o,i.callbackNode=a,o}return u!==null&&u!==null&&hs(u),i.callbackPriority=2,i.callbackNode=null,2}function Wy(i,o){if(Ot!==0&&Ot!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(cc()&&i.callbackNode!==a)return null;var u=qe;return u=mi(i,i===at?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(Dy(i,u,o),Xy(i,ln()),i.callbackNode!=null&&i.callbackNode===a?Wy.bind(null,i):null)}function Zy(i,o){if(cc())return null;Dy(i,o,!0)}function tC(){hC(function(){(Ze&6)!==0?qt(va,eC):$y()})}function oh(){if(Os===0){var i=Sr;i===0&&(i=di,di<<=1,(di&261888)===0&&(di=256)),Os=i}return Os}function jy(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ar(""+i)}function e_(i,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,i.id&&a.setAttribute("form",i.id),o.parentNode.insertBefore(a,o),i=new FormData(i),a.parentNode.removeChild(a),i}function nC(i,o,a,u,y){if(o==="submit"&&a&&a.stateNode===y){var _=jy((y[Bt]||null).action),C=u.submitter;C&&(o=(o=C[Bt]||null)?jy(o.formAction):C.getAttribute("formAction"),o!==null&&(_=o,C=null));var w=new xi("action","action",null,u,y);i.push({event:w,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Os!==0){var k=C?e_(y,C):new FormData(y);xd(a,{pending:!0,data:k,method:y.method,action:_},null,k)}}else typeof _=="function"&&(w.preventDefault(),k=C?e_(y,C):new FormData(y),xd(a,{pending:!0,data:k,method:y.method,action:_},_,k))},currentTarget:y}]})}}for(var rh=0;rh<Ff.length;rh++){var ah=Ff[rh],iC=ah.toLowerCase(),sC=ah[0].toUpperCase()+ah.slice(1);ni(iC,"on"+sC)}ni(Mp,"onAnimationEnd"),ni(Dp,"onAnimationIteration"),ni(Pp,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(TA,"onTransitionRun"),ni(EA,"onTransitionStart"),ni(SA,"onTransitionCancel"),ni(Vp,"onTransitionEnd"),Ei("onMouseEnter",["mouseout","mouseover"]),Ei("onMouseLeave",["mouseout","mouseover"]),Ei("onPointerEnter",["pointerout","pointerover"]),Ei("onPointerLeave",["pointerout","pointerover"]),Ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ti("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fl));function t_(i,o){o=(o&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],y=u.event;u=u.listeners;e:{var _=void 0;if(o)for(var C=u.length-1;0<=C;C--){var w=u[C],k=w.instance,J=w.currentTarget;if(w=w.listener,k!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=J;try{_(y)}catch(W){Iu(W)}y.currentTarget=null,_=k}else for(C=0;C<u.length;C++){if(w=u[C],k=w.instance,J=w.currentTarget,w=w.listener,k!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=J;try{_(y)}catch(W){Iu(W)}y.currentTarget=null,_=k}}}}function Le(i,o){var a=o[nr];a===void 0&&(a=o[nr]=new Set);var u=i+"__bubble";a.has(u)||(n_(o,i,2,!1),a.add(u))}function lh(i,o,a){var u=0;o&&(u|=4),n_(a,i,u,o)}var hc="_reactListening"+Math.random().toString(36).slice(2);function uh(i){if(!i[hc]){i[hc]=!0,Aa.forEach(function(a){a!=="selectionchange"&&(oC.has(a)||lh(a,!1,i),lh(a,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[hc]||(o[hc]=!0,lh("selectionchange",!1,o))}}function n_(i,o,a,u){switch(M_(o)){case 2:var y=PC;break;case 8:y=VC;break;default:y=Ch}a=y.bind(null,o,a,i),y=void 0,!So||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),u?y!==void 0?i.addEventListener(o,a,{capture:!0,passive:y}):i.addEventListener(o,a,!0):y!==void 0?i.addEventListener(o,a,{passive:y}):i.addEventListener(o,a,!1)}function ch(i,o,a,u,y){var _=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var C=u.tag;if(C===3||C===4){var w=u.stateNode.containerInfo;if(w===y)break;if(C===4)for(C=u.return;C!==null;){var k=C.tag;if((k===3||k===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;w!==null;){if(C=_i(w),C===null)return;if(k=C.tag,k===5||k===6||k===26||k===27){u=_=C;continue e}w=w.parentNode}}u=u.return}Ts(function(){var J=_,W=Dn(a),ie=[];e:{var K=Up.get(i);if(K!==void 0){var X=xi,Te=i;switch(i){case"keypress":if(Co(a)===0)break e;case"keydown":case"keyup":X=Cu;break;case"focusin":Te="focus",X=Ro;break;case"focusout":Te="blur",X=Ro;break;case"beforeblur":case"afterblur":X=Ro;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=ka;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=pu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=E;break;case Mp:case Dp:case Pp:X=yu;break;case Vp:X=N;break;case"scroll":case"scrollend":X=Ua;break;case"wheel":X=Q;break;case"copy":case"cut":case"paste":X=_u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Fi;break;case"toggle":case"beforetoggle":X=Me}var Ce=(o&4)!==0,rt=!Ce&&(i==="scroll"||i==="scrollend"),F=Ce?K!==null?K+"Capture":null:K;Ce=[];for(var q=J,Y;q!==null;){var ee=q;if(Y=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||Y===null||F===null||(ee=Zn(q,F),ee!=null&&Ce.push(dl(q,ee,Y))),rt)break;q=q.return}0<Ce.length&&(K=new X(K,Te,null,a,W),ie.push({event:K,listeners:Ce}))}}if((o&7)===0){e:{if(K=i==="mouseover"||i==="pointerover",X=i==="mouseout"||i==="pointerout",K&&a!==Da&&(Te=a.relatedTarget||a.fromElement)&&(_i(Te)||Te[gi]))break e;if((X||K)&&(K=W.window===W?W:(K=W.ownerDocument)?K.defaultView||K.parentWindow:window,X?(Te=a.relatedTarget||a.toElement,X=J,Te=Te?_i(Te):null,Te!==null&&(rt=l(Te),Ce=Te.tag,Te!==rt||Ce!==5&&Ce!==27&&Ce!==6)&&(Te=null)):(X=null,Te=J),X!==Te)){if(Ce=ka,ee="onMouseLeave",F="onMouseEnter",q="mouse",(i==="pointerout"||i==="pointerover")&&(Ce=Fi,ee="onPointerLeave",F="onPointerEnter",q="pointer"),rt=X==null?K:Tn(X),Y=Te==null?K:Tn(Te),K=new Ce(ee,q+"leave",X,a,W),K.target=rt,K.relatedTarget=Y,ee=null,_i(W)===J&&(Ce=new Ce(F,q+"enter",Te,a,W),Ce.target=Y,Ce.relatedTarget=rt,ee=Ce),rt=ee,X&&Te)t:{for(Ce=rC,F=X,q=Te,Y=0,ee=F;ee;ee=Ce(ee))Y++;ee=0;for(var Se=q;Se;Se=Ce(Se))ee++;for(;0<Y-ee;)F=Ce(F),Y--;for(;0<ee-Y;)q=Ce(q),ee--;for(;Y--;){if(F===q||q!==null&&F===q.alternate){Ce=F;break t}F=Ce(F),q=Ce(q)}Ce=null}else Ce=null;X!==null&&i_(ie,K,X,Ce,!1),Te!==null&&rt!==null&&i_(ie,rt,Te,Ce,!0)}}e:{if(K=J?Tn(J):window,X=K.nodeName&&K.nodeName.toLowerCase(),X==="select"||X==="input"&&K.type==="file")var Ke=Tp;else if(_p(K))if(Ep)Ke=yA;else{Ke=pA;var Ee=mA}else X=K.nodeName,!X||X.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?J&&rr(J.elementType)&&(Ke=Tp):Ke=gA;if(Ke&&(Ke=Ke(i,J))){vp(ie,Ke,a,W);break e}Ee&&Ee(i,K,J),i==="focusout"&&J&&K.type==="number"&&J.memoizedProps.value!=null&&ba(K,"number",K.value)}switch(Ee=J?Tn(J):window,i){case"focusin":(_p(Ee)||Ee.contentEditable==="true")&&(mr=Ee,Of=J,Ba=null);break;case"focusout":Ba=Of=mr=null;break;case"mousedown":zf=!0;break;case"contextmenu":case"mouseup":case"dragend":zf=!1,bp(ie,a,W);break;case"selectionchange":if(vA)break;case"keydown":case"keyup":bp(ie,a,W)}var Ve;if(We)e:{switch(i){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else hr?Io(i,a)&&(Oe="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Oe="onCompositionStart");Oe&&(wi&&a.locale!=="ko"&&(hr||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&hr&&(Ve=Va()):(Ci=W,Pa="value"in Ci?Ci.value:Ci.textContent,hr=!0)),Ee=mc(J,Oe),0<Ee.length&&(Oe=new Ii(Oe,i,null,a,W),ie.push({event:Oe,listeners:Ee}),Ve?Oe.data=Ve:(Ve=dr(a),Ve!==null&&(Oe.data=Ve)))),(Ve=Vn?cA(i,a):fA(i,a))&&(Oe=mc(J,"onBeforeInput"),0<Oe.length&&(Ee=new Ii("onBeforeInput","beforeinput",null,a,W),ie.push({event:Ee,listeners:Oe}),Ee.data=Ve)),nC(ie,i,J,a,W)}t_(ie,o)})}function dl(i,o,a){return{instance:i,listener:o,currentTarget:a}}function mc(i,o){for(var a=o+"Capture",u=[];i!==null;){var y=i,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=Zn(i,a),y!=null&&u.unshift(dl(i,y,_)),y=Zn(i,o),y!=null&&u.push(dl(i,y,_))),i.tag===3)return u;i=i.return}return[]}function rC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function i_(i,o,a,u,y){for(var _=o._reactName,C=[];a!==null&&a!==u;){var w=a,k=w.alternate,J=w.stateNode;if(w=w.tag,k!==null&&k===u)break;w!==5&&w!==26&&w!==27||J===null||(k=J,y?(J=Zn(a,_),J!=null&&C.unshift(dl(a,J,k))):y||(J=Zn(a,_),J!=null&&C.push(dl(a,J,k)))),a=a.return}C.length!==0&&i.push({event:o,listeners:C})}var aC=/\r\n?/g,lC=/\u0000|\uFFFD/g;function s_(i){return(typeof i=="string"?i:""+i).replace(aC,`
`).replace(lC,"")}function o_(i,o){return o=s_(o),s_(i)===o}function ot(i,o,a,u,y,_){switch(a){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||dn(i,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&dn(i,""+u);break;case"className":En(i,"class",u);break;case"tabIndex":En(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":En(i,a,u);break;case"style":Ma(i,u,_);break;case"data":if(o!=="object"){En(i,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=ar(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(o!=="input"&&ot(i,o,"name",y.name,y,null),ot(i,o,"formEncType",y.formEncType,y,null),ot(i,o,"formMethod",y.formMethod,y,null),ot(i,o,"formTarget",y.formTarget,y,null)):(ot(i,o,"encType",y.encType,y,null),ot(i,o,"method",y.method,y,null),ot(i,o,"target",y.target,y,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=ar(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=Wn);break;case"onScroll":u!=null&&Le("scroll",i);break;case"onScrollEnd":u!=null&&Le("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=ar(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":Le("beforetoggle",i),Le("toggle",i),sr(i,"popover",u);break;case"xlinkActuate":bt(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":bt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":bt(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":bt(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":bt(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":bt(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":bt(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":bt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":bt(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":sr(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=mu.get(a)||a,sr(i,a,u))}}function fh(i,o,a,u,y,_){switch(a){case"style":Ma(i,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof u=="string"?dn(i,u):(typeof u=="number"||typeof u=="bigint")&&dn(i,""+u);break;case"onScroll":u!=null&&Le("scroll",i);break;case"onScrollEnd":u!=null&&Le("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ca.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),o=a.slice(2,y?a.length-7:void 0),_=i[Bt]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(o,_,y),typeof u=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(o,u,y);break e}a in i?i[a]=u:u===!0?i.setAttribute(a,""):sr(i,a,u)}}}function Xt(i,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",i),Le("load",i);var u=!1,y=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var C=a[_];if(C!=null)switch(_){case"src":u=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:ot(i,o,_,C,a,null)}}y&&ot(i,o,"srcSet",a.srcSet,a,null),u&&ot(i,o,"src",a.src,a,null);return;case"input":Le("invalid",i);var w=_=C=y=null,k=null,J=null;for(u in a)if(a.hasOwnProperty(u)){var W=a[u];if(W!=null)switch(u){case"name":y=W;break;case"type":C=W;break;case"checked":k=W;break;case"defaultChecked":J=W;break;case"value":_=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,o));break;default:ot(i,o,u,W,a,null)}}fu(i,_,w,k,J,C,y,!1);return;case"select":Le("invalid",i),u=C=_=null;for(y in a)if(a.hasOwnProperty(y)&&(w=a[y],w!=null))switch(y){case"value":_=w;break;case"defaultValue":C=w;break;case"multiple":u=w;default:ot(i,o,y,w,a,null)}o=_,a=C,i.multiple=!!u,o!=null?gs(i,!!u,o,!1):a!=null&&gs(i,!!u,a,!0);return;case"textarea":Le("invalid",i),_=y=u=null;for(C in a)if(a.hasOwnProperty(C)&&(w=a[C],w!=null))switch(C){case"value":u=w;break;case"defaultValue":y=w;break;case"children":_=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:ot(i,o,C,w,a,null)}ys(i,u,y,_);return;case"option":for(k in a)if(a.hasOwnProperty(k)&&(u=a[k],u!=null))switch(k){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ot(i,o,k,u,a,null)}return;case"dialog":Le("beforetoggle",i),Le("toggle",i),Le("cancel",i),Le("close",i);break;case"iframe":case"object":Le("load",i);break;case"video":case"audio":for(u=0;u<fl.length;u++)Le(fl[u],i);break;case"image":Le("error",i),Le("load",i);break;case"details":Le("toggle",i);break;case"embed":case"source":case"link":Le("error",i),Le("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in a)if(a.hasOwnProperty(J)&&(u=a[J],u!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:ot(i,o,J,u,a,null)}return;default:if(rr(o)){for(W in a)a.hasOwnProperty(W)&&(u=a[W],u!==void 0&&fh(i,o,W,u,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(u=a[w],u!=null&&ot(i,o,w,u,a,null))}function uC(i,o,a,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,C=null,w=null,k=null,J=null,W=null;for(X in a){var ie=a[X];if(a.hasOwnProperty(X)&&ie!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":k=ie;default:u.hasOwnProperty(X)||ot(i,o,X,null,u,ie)}}for(var K in u){var X=u[K];if(ie=a[K],u.hasOwnProperty(K)&&(X!=null||ie!=null))switch(K){case"type":_=X;break;case"name":y=X;break;case"checked":J=X;break;case"defaultChecked":W=X;break;case"value":C=X;break;case"defaultValue":w=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,o));break;default:X!==ie&&ot(i,o,K,X,u,ie)}}or(i,C,w,k,J,W,_,y);return;case"select":X=C=w=K=null;for(_ in a)if(k=a[_],a.hasOwnProperty(_)&&k!=null)switch(_){case"value":break;case"multiple":X=k;default:u.hasOwnProperty(_)||ot(i,o,_,null,u,k)}for(y in u)if(_=u[y],k=a[y],u.hasOwnProperty(y)&&(_!=null||k!=null))switch(y){case"value":K=_;break;case"defaultValue":w=_;break;case"multiple":C=_;default:_!==k&&ot(i,o,y,_,u,k)}o=w,a=C,u=X,K!=null?gs(i,!!a,K,!1):!!u!=!!a&&(o!=null?gs(i,!!a,o,!0):gs(i,!!a,a?[]:"",!1));return;case"textarea":X=K=null;for(w in a)if(y=a[w],a.hasOwnProperty(w)&&y!=null&&!u.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:ot(i,o,w,null,u,y)}for(C in u)if(y=u[C],_=a[C],u.hasOwnProperty(C)&&(y!=null||_!=null))switch(C){case"value":K=y;break;case"defaultValue":X=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==_&&ot(i,o,C,y,u,_)}du(i,K,X);return;case"option":for(var Te in a)if(K=a[Te],a.hasOwnProperty(Te)&&K!=null&&!u.hasOwnProperty(Te))switch(Te){case"selected":i.selected=!1;break;default:ot(i,o,Te,null,u,K)}for(k in u)if(K=u[k],X=a[k],u.hasOwnProperty(k)&&K!==X&&(K!=null||X!=null))switch(k){case"selected":i.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:ot(i,o,k,K,u,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in a)K=a[Ce],a.hasOwnProperty(Ce)&&K!=null&&!u.hasOwnProperty(Ce)&&ot(i,o,Ce,null,u,K);for(J in u)if(K=u[J],X=a[J],u.hasOwnProperty(J)&&K!==X&&(K!=null||X!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,o));break;default:ot(i,o,J,K,u,X)}return;default:if(rr(o)){for(var rt in a)K=a[rt],a.hasOwnProperty(rt)&&K!==void 0&&!u.hasOwnProperty(rt)&&fh(i,o,rt,void 0,u,K);for(W in u)K=u[W],X=a[W],!u.hasOwnProperty(W)||K===X||K===void 0&&X===void 0||fh(i,o,W,K,u,X);return}}for(var F in a)K=a[F],a.hasOwnProperty(F)&&K!=null&&!u.hasOwnProperty(F)&&ot(i,o,F,null,u,K);for(ie in u)K=u[ie],X=a[ie],!u.hasOwnProperty(ie)||K===X||K==null&&X==null||ot(i,o,ie,K,u,X)}function r_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cC(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var y=a[u],_=y.transferSize,C=y.initiatorType,w=y.duration;if(_&&w&&r_(C)){for(C=0,w=y.responseEnd,u+=1;u<a.length;u++){var k=a[u],J=k.startTime;if(J>w)break;var W=k.transferSize,ie=k.initiatorType;W&&r_(ie)&&(k=k.responseEnd,C+=W*(k<w?1:(w-J)/(k-J)))}if(--u,o+=8*(_+C)/(y.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var dh=null,hh=null;function pc(i){return i.nodeType===9?i:i.ownerDocument}function a_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function l_(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function mh(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ph=null;function fC(){var i=window.event;return i&&i.type==="popstate"?i===ph?!1:(ph=i,!0):(ph=null,!1)}var u_=typeof setTimeout=="function"?setTimeout:void 0,dC=typeof clearTimeout=="function"?clearTimeout:void 0,c_=typeof Promise=="function"?Promise:void 0,hC=typeof queueMicrotask=="function"?queueMicrotask:typeof c_<"u"?function(i){return c_.resolve(null).then(i).catch(mC)}:u_;function mC(i){setTimeout(function(){throw i})}function zs(i){return i==="head"}function f_(i,o){var a=o,u=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(u===0){i.removeChild(y),Br(o);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")hl(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,hl(a);for(var _=a.firstChild;_;){var C=_.nextSibling,w=_.nodeName;_[yi]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=C}}else a==="body"&&hl(i.ownerDocument.body);a=y}while(a);Br(o)}function d_(i,o){var a=i;i=0;do{var u=a.nextSibling;if(a.nodeType===1?o?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(o?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=u}while(a)}function gh(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":gh(a),ir(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function pC(i,o,a,u){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[yi])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Bn(i.nextSibling),i===null)break}return null}function gC(i,o,a){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Bn(i.nextSibling),i===null))return null;return i}function h_(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Bn(i.nextSibling),i===null))return null;return i}function yh(i){return i.data==="$?"||i.data==="$~"}function _h(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function yC(i,o){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||a.readyState!=="loading")o();else{var u=function(){o(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Bn(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var vh=null;function m_(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(o===0)return Bn(i.nextSibling);o--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||o++}i=i.nextSibling}return null}function p_(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(o===0)return i;o--}else a!=="/$"&&a!=="/&"||o++}i=i.previousSibling}return null}function g_(i,o,a){switch(o=pc(a),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function hl(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);ir(i)}var Fn=new Map,y_=new Set;function gc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var is=Z.d;Z.d={f:_C,r:vC,D:TC,C:EC,L:SC,m:AC,X:xC,S:CC,M:RC};function _C(){var i=is.f(),o=ac();return i||o}function vC(i){var o=Mn(i);o!==null&&o.tag===5&&o.type==="form"?Vg(o):is.r(i)}var qr=typeof document>"u"?null:document;function __(i,o,a){var u=qr;if(u&&typeof o=="string"&&o){var y=fn(o);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),y_.has(y)||(y_.add(y),i={rel:i,crossOrigin:a,href:o},u.querySelector(y)===null&&(o=u.createElement("link"),Xt(o,"link",i),wt(o),u.head.appendChild(o)))}}function TC(i){is.D(i),__("dns-prefetch",i,null)}function EC(i,o){is.C(i,o),__("preconnect",i,o)}function SC(i,o,a){is.L(i,o,a);var u=qr;if(u&&i&&o){var y='link[rel="preload"][as="'+fn(o)+'"]';o==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+fn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+fn(a.imageSizes)+'"]')):y+='[href="'+fn(i)+'"]';var _=y;switch(o){case"style":_=Or(i);break;case"script":_=zr(i)}Fn.has(_)||(i=T({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:i,as:o},a),Fn.set(_,i),u.querySelector(y)!==null||o==="style"&&u.querySelector(ml(_))||o==="script"&&u.querySelector(pl(_))||(o=u.createElement("link"),Xt(o,"link",i),wt(o),u.head.appendChild(o)))}}function AC(i,o){is.m(i,o);var a=qr;if(a&&i){var u=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+fn(u)+'"][href="'+fn(i)+'"]',_=y;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=zr(i)}if(!Fn.has(_)&&(i=T({rel:"modulepreload",href:i},o),Fn.set(_,i),a.querySelector(y)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(pl(_)))return}u=a.createElement("link"),Xt(u,"link",i),wt(u),a.head.appendChild(u)}}}function CC(i,o,a){is.S(i,o,a);var u=qr;if(u&&i){var y=vi(u).hoistableStyles,_=Or(i);o=o||"default";var C=y.get(_);if(!C){var w={loading:0,preload:null};if(C=u.querySelector(ml(_)))w.loading=5;else{i=T({rel:"stylesheet",href:i,"data-precedence":o},a),(a=Fn.get(_))&&Th(i,a);var k=C=u.createElement("link");wt(k),Xt(k,"link",i),k._p=new Promise(function(J,W){k.onload=J,k.onerror=W}),k.addEventListener("load",function(){w.loading|=1}),k.addEventListener("error",function(){w.loading|=2}),w.loading|=4,yc(C,o,u)}C={type:"stylesheet",instance:C,count:1,state:w},y.set(_,C)}}}function xC(i,o){is.X(i,o);var a=qr;if(a&&i){var u=vi(a).hoistableScripts,y=zr(i),_=u.get(y);_||(_=a.querySelector(pl(y)),_||(i=T({src:i,async:!0},o),(o=Fn.get(y))&&Eh(i,o),_=a.createElement("script"),wt(_),Xt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(y,_))}}function RC(i,o){is.M(i,o);var a=qr;if(a&&i){var u=vi(a).hoistableScripts,y=zr(i),_=u.get(y);_||(_=a.querySelector(pl(y)),_||(i=T({src:i,async:!0,type:"module"},o),(o=Fn.get(y))&&Eh(i,o),_=a.createElement("script"),wt(_),Xt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(y,_))}}function v_(i,o,a,u){var y=(y=Pe.current)?gc(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=Or(a.href),a=vi(y).hoistableStyles,u=a.get(o),u||(u={type:"style",instance:null,count:0,state:null},a.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Or(a.href);var _=vi(y).hoistableStyles,C=_.get(i);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,C),(_=y.querySelector(ml(i)))&&!_._p&&(C.instance=_,C.state.loading=5),Fn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Fn.set(i,a),_||IC(y,i,a,C.state))),o&&u===null)throw Error(s(528,""));return C}if(o&&u!==null)throw Error(s(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=zr(a),a=vi(y).hoistableScripts,u=a.get(o),u||(u={type:"script",instance:null,count:0,state:null},a.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Or(i){return'href="'+fn(i)+'"'}function ml(i){return'link[rel="stylesheet"]['+i+"]"}function T_(i){return T({},i,{"data-precedence":i.precedence,precedence:null})}function IC(i,o,a,u){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=i.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),Xt(o,"link",a),wt(o),i.head.appendChild(o))}function zr(i){return'[src="'+fn(i)+'"]'}function pl(i){return"script[async]"+i}function E_(i,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var u=i.querySelector('style[data-href~="'+fn(a.href)+'"]');if(u)return o.instance=u,wt(u),u;var y=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),wt(u),Xt(u,"style",y),yc(u,a.precedence,i),o.instance=u;case"stylesheet":y=Or(a.href);var _=i.querySelector(ml(y));if(_)return o.state.loading|=4,o.instance=_,wt(_),_;u=T_(a),(y=Fn.get(y))&&Th(u,y),_=(i.ownerDocument||i).createElement("link"),wt(_);var C=_;return C._p=new Promise(function(w,k){C.onload=w,C.onerror=k}),Xt(_,"link",u),o.state.loading|=4,yc(_,a.precedence,i),o.instance=_;case"script":return _=zr(a.src),(y=i.querySelector(pl(_)))?(o.instance=y,wt(y),y):(u=a,(y=Fn.get(_))&&(u=T({},a),Eh(u,y)),i=i.ownerDocument||i,y=i.createElement("script"),wt(y),Xt(y,"link",u),i.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,yc(u,a.precedence,i));return o.instance}function yc(i,o,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=u.length?u[u.length-1]:null,_=y,C=0;C<u.length;C++){var w=u[C];if(w.dataset.precedence===o)_=w;else if(_!==y)break}_?_.parentNode.insertBefore(i,_.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(i,o.firstChild))}function Th(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Eh(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var _c=null;function S_(i,o,a){if(_c===null){var u=new Map,y=_c=new Map;y.set(a,u)}else y=_c,u=y.get(a),u||(u=new Map,y.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var _=a[y];if(!(_[yi]||_[It]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var C=_.getAttribute(o)||"";C=i+C;var w=u.get(C);w?w.push(_):u.set(C,[_])}}return u}function A_(i,o,a){i=i.ownerDocument||i,i.head.insertBefore(a,o==="title"?i.querySelector("head > title"):null)}function wC(i,o,a){if(a===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function C_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function bC(i,o,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=Or(u.href),_=o.querySelector(ml(y));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=vc.bind(i),o.then(i,i)),a.state.loading|=4,a.instance=_,wt(_);return}_=o.ownerDocument||o,u=T_(u),(y=Fn.get(y))&&Th(u,y),_=_.createElement("link"),wt(_);var C=_;C._p=new Promise(function(w,k){C.onload=w,C.onerror=k}),Xt(_,"link",u),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,o),(o=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=vc.bind(i),o.addEventListener("load",a),o.addEventListener("error",a))}}var Sh=0;function NC(i,o){return i.stylesheets&&i.count===0&&Ec(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var u=setTimeout(function(){if(i.stylesheets&&Ec(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+o);0<i.imgBytes&&Sh===0&&(Sh=62500*cC());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Ec(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>Sh?50:800)+o);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(y)}}:null}function vc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ec(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Tc=null;function Ec(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Tc=new Map,o.forEach(MC,i),Tc=null,vc.call(i))}function MC(i,o){if(!(o.state.loading&4)){var a=Tc.get(i);if(a)var u=a.get(null);else{a=new Map,Tc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var C=y[_];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(a.set(C.dataset.precedence,C),u=C)}u&&a.set(null,u)}y=o.instance,C=y.getAttribute("data-precedence"),_=a.get(C)||u,_===u&&a.set(null,y),a.set(C,y),this.count++,u=vc.bind(this),y.addEventListener("load",u),y.addEventListener("error",u),_?_.parentNode.insertBefore(y,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),o.state.loading|=4}}var gl={$$typeof:j,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function DC(i,o,a,u,y,_,C,w,k){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pi(0),this.hiddenUpdates=pi(null),this.identifierPrefix=u,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function x_(i,o,a,u,y,_,C,w,k,J,W,ie){return i=new DC(i,o,a,C,k,J,W,ie,w),o=1,_===!0&&(o|=24),_=An(3,null,null,o),i.current=_,_.stateNode=i,o=td(),o.refCount++,i.pooledCache=o,o.refCount++,_.memoizedState={element:u,isDehydrated:a,cache:o},od(_),i}function R_(i){return i?(i=yr,i):yr}function I_(i,o,a,u,y,_){y=R_(y),u.context===null?u.context=y:u.pendingContext=y,u=bs(o),u.payload={element:a},_=_===void 0?null:_,_!==null&&(u.callback=_),a=Ns(i,u,o),a!==null&&(yn(a,i,o),Qa(a,i,o))}function w_(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<o?a:o}}function Ah(i,o){w_(i,o),(i=i.alternate)&&w_(i,o)}function b_(i){if(i.tag===13||i.tag===31){var o=No(i,67108864);o!==null&&yn(o,i,67108864),Ah(i,67108864)}}function N_(i){if(i.tag===13||i.tag===31){var o=wn();o=_o(o);var a=No(i,o);a!==null&&yn(a,i,o),Ah(i,o)}}var Sc=!0;function PC(i,o,a,u){var y=B.T;B.T=null;var _=Z.p;try{Z.p=2,Ch(i,o,a,u)}finally{Z.p=_,B.T=y}}function VC(i,o,a,u){var y=B.T;B.T=null;var _=Z.p;try{Z.p=8,Ch(i,o,a,u)}finally{Z.p=_,B.T=y}}function Ch(i,o,a,u){if(Sc){var y=xh(u);if(y===null)ch(i,o,u,Ac,a),D_(i,u);else if(kC(y,i,o,a,u))u.stopPropagation();else if(D_(i,u),o&4&&-1<UC.indexOf(i)){for(;y!==null;){var _=Mn(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var C=hi(_.pendingLanes);if(C!==0){var w=_;for(w.pendingLanes|=2,w.entangledLanes|=2;C;){var k=1<<31-vt(C);w.entanglements[1]|=k,C&=~k}Di(_),(Ze&6)===0&&(oc=ln()+500,cl(0))}}break;case 31:case 13:w=No(_,2),w!==null&&yn(w,_,2),ac(),Ah(_,2)}if(_=xh(u),_===null&&ch(i,o,u,Ac,a),_===y)break;y=_}y!==null&&u.stopPropagation()}else ch(i,o,u,null,a)}}function xh(i){return i=Dn(i),Rh(i)}var Ac=null;function Rh(i){if(Ac=null,i=_i(i),i!==null){var o=l(i);if(o===null)i=null;else{var a=o.tag;if(a===13){if(i=c(o),i!==null)return i;i=null}else if(a===31){if(i=d(o),i!==null)return i;i=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Ac=i,null}function M_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mo()){case va:return 2;case Ta:return 8;case ms:case Df:return 32;case tu:return 268435456;default:return 32}default:return 32}}var Ih=!1,Bs=null,Fs=null,Hs=null,yl=new Map,_l=new Map,Gs=[],UC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function D_(i,o){switch(i){case"focusin":case"focusout":Bs=null;break;case"dragenter":case"dragleave":Fs=null;break;case"mouseover":case"mouseout":Hs=null;break;case"pointerover":case"pointerout":yl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":_l.delete(o.pointerId)}}function vl(i,o,a,u,y,_){return i===null||i.nativeEvent!==_?(i={blockedOn:o,domEventName:a,eventSystemFlags:u,nativeEvent:_,targetContainers:[y]},o!==null&&(o=Mn(o),o!==null&&b_(o)),i):(i.eventSystemFlags|=u,o=i.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),i)}function kC(i,o,a,u,y){switch(o){case"focusin":return Bs=vl(Bs,i,o,a,u,y),!0;case"dragenter":return Fs=vl(Fs,i,o,a,u,y),!0;case"mouseover":return Hs=vl(Hs,i,o,a,u,y),!0;case"pointerover":var _=y.pointerId;return yl.set(_,vl(yl.get(_)||null,i,o,a,u,y)),!0;case"gotpointercapture":return _=y.pointerId,_l.set(_,vl(_l.get(_)||null,i,o,a,u,y)),!0}return!1}function P_(i){var o=_i(i.target);if(o!==null){var a=l(o);if(a!==null){if(o=a.tag,o===13){if(o=c(a),o!==null){i.blockedOn=o,$n(i.priority,function(){N_(a)});return}}else if(o===31){if(o=d(a),o!==null){i.blockedOn=o,$n(i.priority,function(){N_(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Cc(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var a=xh(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);Da=u,a.target.dispatchEvent(u),Da=null}else return o=Mn(a),o!==null&&b_(o),i.blockedOn=a,!1;o.shift()}return!0}function V_(i,o,a){Cc(i)&&a.delete(o)}function LC(){Ih=!1,Bs!==null&&Cc(Bs)&&(Bs=null),Fs!==null&&Cc(Fs)&&(Fs=null),Hs!==null&&Cc(Hs)&&(Hs=null),yl.forEach(V_),_l.forEach(V_)}function xc(i,o){i.blockedOn===o&&(i.blockedOn=null,Ih||(Ih=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,LC)))}var Rc=null;function U_(i){Rc!==i&&(Rc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Rc===i&&(Rc=null);for(var o=0;o<i.length;o+=3){var a=i[o],u=i[o+1],y=i[o+2];if(typeof u!="function"){if(Rh(u||a)===null)continue;break}var _=Mn(a);_!==null&&(i.splice(o,3),o-=3,xd(_,{pending:!0,data:y,method:a.method,action:u},u,y))}}))}function Br(i){function o(k){return xc(k,i)}Bs!==null&&xc(Bs,i),Fs!==null&&xc(Fs,i),Hs!==null&&xc(Hs,i),yl.forEach(o),_l.forEach(o);for(var a=0;a<Gs.length;a++){var u=Gs[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Gs.length&&(a=Gs[0],a.blockedOn===null);)P_(a),a.blockedOn===null&&Gs.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var y=a[u],_=a[u+1],C=y[Bt]||null;if(typeof _=="function")C||U_(a);else if(C){var w=null;if(_&&_.hasAttribute("formAction")){if(y=_,C=_[Bt]||null)w=C.formAction;else if(Rh(y)!==null)continue}else w=C.action;typeof w=="function"?a[u+1]=w:(a.splice(u,3),u-=3),U_(a)}}}function k_(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(C){return y=C})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function wh(i){this._internalRoot=i}Ic.prototype.render=wh.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var a=o.current,u=wn();I_(a,u,i,o,null,null)},Ic.prototype.unmount=wh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;I_(i.current,2,null,i,null,null),ac(),o[gi]=null}};function Ic(i){this._internalRoot=i}Ic.prototype.unstable_scheduleHydration=function(i){if(i){var o=au();i={blockedOn:null,target:i,priority:o};for(var a=0;a<Gs.length&&o!==0&&o<Gs[a].priority;a++);Gs.splice(a,0,i),a===0&&P_(i)}};var L_=e.version;if(L_!=="19.2.1")throw Error(s(527,L_,"19.2.1"));Z.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=p(o),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var qC={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wc.isDisabled&&wc.supportsFiber)try{Kn=wc.inject(qC),Yt=wc}catch{}}return El.createRoot=function(i,o){if(!r(i))throw Error(s(299));var a=!1,u="",y=Gg,_=Yg,C=Jg;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError)),o=x_(i,1,!1,null,null,a,u,null,y,_,C,k_),i[gi]=o.current,uh(i),new wh(o)},El.hydrateRoot=function(i,o,a){if(!r(i))throw Error(s(299));var u=!1,y="",_=Gg,C=Yg,w=Jg,k=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(C=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),o=x_(i,1,!0,o,a??null,u,y,k,_,C,w,k_),o.context=R_(null),a=o.current,u=wn(),u=_o(u),y=bs(u),y.callback=null,Ns(a,y,u),a=u,o.current.lanes=a,go(o,a),Di(o),i[gi]=o.current,uh(i),new Ic(o)},El.version="19.2.1",El}var K_;function QC(){if(K_)return Mh.exports;K_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Mh.exports=KC(),Mh.exports}var $C=QC();const XC=UT($C);var Hn=(n=>(n.Food="Food",n.Travel="Travel",n.Fashion="Fashion",n.Technology="Technology",n.Lifestyle="Lifestyle",n.Journal="Journal",n))(Hn||{}),Je=(n=>(n.Paragraph="paragraph",n.Heading1="h1",n.Heading2="h2",n.Heading3="h3",n.Image="image",n.Video="video",n.Quote="quote",n.List="list",n.OrderedList="ordered-list",n.Code="code",n.Divider="divider",n))(Je||{});/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ZC=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Q_=n=>{const e=ZC(n);return e.charAt(0).toUpperCase()+e.slice(1)},LT=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),jC=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var e1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=me.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:r="",children:l,iconNode:c,...d},g)=>me.createElement("svg",{ref:g,...e1,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:LT("lucide",r),...!l&&!jC(d)&&{"aria-hidden":"true"},...d},[...c.map(([p,v])=>me.createElement(p,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=(n,e)=>{const t=me.forwardRef(({className:s,...r},l)=>me.createElement(t1,{ref:l,iconNode:e,className:LT(`lucide-${WC(Q_(n))}`,`lucide-${n}`,s),...r}));return t.displayName=Q_(n),t};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],i1=Ue("bold",n1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],o1=Ue("calendar",s1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],a1=Ue("camera",r1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],u1=Ue("check",l1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],f1=Ue("chevron-left",c1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],h1=Ue("code",d1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],p1=Ue("coffee",m1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],y1=Ue("ellipsis",g1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],v1=Ue("eye",_1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],E1=Ue("file-text",T1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],A1=Ue("globe",S1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],x1=Ue("hash",C1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],I1=Ue("heart",R1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],b1=Ue("image",w1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],M1=Ue("italic",N1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],P1=Ue("link",D1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],U1=Ue("list-ordered",V1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],L1=Ue("list",k1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],O1=Ue("menu",q1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],B1=Ue("message-circle",z1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=[["path",{d:"M5 12h14",key:"1ays0h"}]],H1=Ue("minus",F1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],Y1=Ue("move",G1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],K1=Ue("palette",J1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],$1=Ue("panels-top-left",Q1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],W1=Ue("pen-tool",X1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],j1=Ue("plane",Z1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],tx=Ue("plus",ex);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],ix=Ue("quote",nx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ox=Ue("search",sx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ax=Ue("send",rx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],ux=Ue("smartphone",lx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],fx=Ue("sparkles",cx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],hx=Ue("text-align-center",dx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],px=Ue("text-align-end",mx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],yx=Ue("text-align-start",gx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],vx=Ue("trash-2",_x);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Ex=Ue("type",Tx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],Ax=Ue("underline",Sx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],xx=Ue("video",Cx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ix=Ue("x",Rx),de={PenTool:W1,Layout:$1,Image:b1,Type:Ex,Quote:ix,List:L1,MoreHorizontal:y1,ChevronLeft:f1,Plus:tx,Trash2:vx,Send:ax,Eye:v1,Calendar:o1,Search:ox,Sparkles:fx,Move:Y1,X:Ix,Check:u1,Camera:a1,Plane:j1,Coffee:p1,Smartphone:ux,Globe:A1,FileText:E1,Menu:O1,Bold:i1,Italic:M1,Underline:Ax,Link:P1,AlignLeft:yx,AlignCenter:hx,AlignRight:px,Video:xx,Code:h1,ListOrdered:U1,Minus:H1,Hash:x1,Palette:K1,Heart:I1,MessageCircle:B1};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let wx,bx;function Nx(){return{geminiUrl:wx,vertexUrl:bx}}function Mx(n,e,t,s){var r,l;if(!(n!=null&&n.baseUrl)){const c=Nx();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:t:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fs{}function pe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function h(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[d])){const g=n[d];if(Array.isArray(t))for(let p=0;p<g.length;p++){const v=g[p];h(v,e.slice(l+1),t[p])}else for(const p of g)h(p,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in n||(n[d]=[{}]);const g=n[d];h(g[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],r=n[s];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const r=e[s];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(d=>f(d,e.slice(s+1),t)):t}else return t}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function Dx(n,e){for(const[t,s]of Object.entries(e)){const r=t.split("."),l=s.split("."),c=new Set;let d=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){d=g;break}if(d!==-1&&l.length>d)for(let g=d;g<l.length;g++){const p=l[g];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&c.add(p)}Gh(n,r,l,0,c)}}function Gh(n,e,t,s,r){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const c=l.slice(0,-2),d=n;if(c in d&&Array.isArray(d[c]))for(const g of d[c])Gh(g,e,t,s+1,r)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,d=Object.keys(c).filter(p=>!p.startsWith("_")&&!r.has(p)),g={};for(const p of d)g[p]=c[p];for(const[p,v]of Object.entries(g)){const T=[];for(const S of t.slice(s))S==="*"?T.push(p):T.push(S);h(c,T,v)}for(const p of d)delete c[p]}}else{const c=n;l in c&&Gh(c[l],e,t,s+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Am(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Px(n){const e={},t=f(n,["operationName"]);t!=null&&h(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&h(e,["_url","resourceName"],s),e}function Vx(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],kx(c)),e}function Ux(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],Lx(c)),e}function kx(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>qx(c))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function Lx(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>Ox(c))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function qx(n){const e={},t=f(n,["video"]);return t!=null&&h(e,["video"],Yx(t)),e}function Ox(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],Jx(t)),e}function zx(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function Bx(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function Fx(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],Hx(c)),e}function Hx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&h(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function qT(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],Gx(c)),e}function Gx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&h(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function Yx(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&h(e,["videoBytes"],Am(s));const r=f(n,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function Jx(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],Am(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})($_||($_={}));var X_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(X_||(X_={}));var W_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(W_||(W_={}));var Qs;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Qs||(Qs={}));var Z_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Z_||(Z_={}));var j_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(j_||(j_={}));var ev;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(ev||(ev={}));var tv;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(tv||(tv={}));var nv;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(nv||(nv={}));var iv;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(iv||(iv={}));var sv;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(sv||(sv={}));var ov;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(ov||(ov={}));var rv;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(rv||(rv={}));var av;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(av||(av={}));var lv;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(lv||(lv={}));var uv;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(uv||(uv={}));var cv;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(cv||(cv={}));var fv;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(fv||(fv={}));var dv;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(dv||(dv={}));var Fc;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Fc||(Fc={}));var hv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(hv||(hv={}));var mv;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(mv||(mv={}));var pv;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(pv||(pv={}));var Yh;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Yh||(Yh={}));var gv;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(gv||(gv={}));var yv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(yv||(yv={}));var _v;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(_v||(_v={}));var vv;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(vv||(vv={}));var Tv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Tv||(Tv={}));var Ev;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Ev||(Ev={}));var Sv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Sv||(Sv={}));var Av;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Av||(Av={}));var Cv;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Cv||(Cv={}));var xv;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(xv||(xv={}));var Rv;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Rv||(Rv={}));var Iv;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Iv||(Iv={}));var wv;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(wv||(wv={}));var bv;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(bv||(bv={}));var Nv;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Nv||(Nv={}));var Mv;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(Mv||(Mv={}));var Dv;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Dv||(Dv={}));var Pv;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Pv||(Pv={}));var Vv;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Vv||(Vv={}));var Uv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(Uv||(Uv={}));var kv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(kv||(kv={}));var Lv;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Lv||(Lv={}));var qv;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(qv||(qv={}));var Ov;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Ov||(Ov={}));var zv;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(zv||(zv={}));var Bv;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Bv||(Bv={}));var Fv;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Fv||(Fv={}));var Hv;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Hv||(Hv={}));var Gv;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Gv||(Gv={}));var Yv;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Yv||(Yv={}));var Kr;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Kr||(Kr={}));class Jh{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Sl{get text(){var e,t,s,r,l,c,d,g;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const T=[];for(const S of(g=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[I,L]of Object.entries(S))I!=="text"&&I!=="thought"&&I!=="thoughtSignature"&&(L!==null||L!==void 0)&&T.push(I);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,p+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,t,s,r,l,c,d,g;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const T of(g=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[S,I]of Object.entries(T))S!=="inlineData"&&(I!==null||I!==void 0)&&v.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(p+=atob(T.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,s,r,l,c,d,g;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,t,s,r,l,c,d,g,p;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,s,r,l,c,d,g,p;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class Jv{}class Kv{}class Kx{}class Qx{}class $x{}class Xx{}class Qv{}class $v{}class Xv{}class Wx{}class Hc{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Hc;let r;const l=e;return t?r=Ux(l):r=Vx(l),Object.assign(s,r),s}}class Wv{}class Zv{}class jv{}class e0{}class Zx{}class jx{}class eR{}class Cm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Cm,l=Fx(e);return Object.assign(s,l),s}}class tR{}class nR{}class iR{}class t0{}class sR{get text(){var e,t,s;let r="",l=!1;const c=[];for(const d of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[g,p]of Object.entries(d))g!=="text"&&g!=="thought"&&p!==null&&c.push(g);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,r+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,s;let r="";const l=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[d,g]of Object.entries(c))d!=="inlineData"&&g!==null&&l.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class oR{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class xm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new xm,l=qT(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $e(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function OT(n,e){const t=$e(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function zT(n){return Array.isArray(n)?n.map(e=>Gc(e)):[Gc(n)]}function Gc(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function BT(n){const e=Gc(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function FT(n){const e=Gc(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function n0(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function HT(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>n0(e)):[n0(n)]}function Kh(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function i0(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function s0(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function on(n){if(n==null)throw new Error("ContentUnion is required");return Kh(n)?n:{role:"user",parts:HT(n)}}function Rm(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=on(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=on(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>on(t)):[on(e)]}function Yn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(i0(n)||s0(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[on(n)]}const e=[],t=[],s=Kh(n[0]);for(const r of n){const l=Kh(r);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(i0(r)||s0(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return s||e.push({role:"user",parts:HT(t)}),e}function rR(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(Qs).includes(t[0].toUpperCase())?t[0].toUpperCase():Qs.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(Qs).includes(s.toUpperCase())?s.toUpperCase():Qs.TYPE_UNSPECIFIED})}}function Qr(n){const e={},t=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&rR(n.type,e);for(const[c,d]of Object.entries(n))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Qs).includes(d.toUpperCase())?d.toUpperCase():Qs.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=Qr(d);else if(s.includes(c)){const g=[];for(const p of d){if(p.type=="null"){e.nullable=!0;continue}g.push(Qr(p))}e[c]=g}else if(r.includes(c)){const g={};for(const[p,v]of Object.entries(d))g[p]=Qr(v);e[c]=g}else{if(c==="additionalProperties")continue;e[c]=d}return e}function Im(n){return Qr(n)}function wm(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function bm(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ra(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Qr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Qr(e.response));return n}function aa(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function aR(n,e,t,s=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function ds(n,e){if(typeof e!="string")throw new Error("name must be a string");return aR(n,e,"cachedContents")}function GT(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function ao(n){return Am(n)}function lR(n){return n!=null&&typeof n=="object"&&"name"in n}function uR(n){return n!=null&&typeof n=="object"&&"video"in n}function cR(n){return n!=null&&typeof n=="object"&&"uri"in n}function YT(n){var e;let t;if(lR(n)&&(t=n.name),!(cR(n)&&(t=n.uri,t===void 0))&&!(uR(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function JT(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function KT(n){for(const e of["models","tunedModels","publisherModels"])if(fR(n,e))return n[e];return[]}function fR(n,e){return n!==null&&typeof n=="object"&&e in n}function dR(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function hR(n,e={}){const t=[],s=new Set;for(const r of n){const l=r.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=dR(r,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function QT(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function mR(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function $T(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const g=c.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function la(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function XT(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pR(n){const e={},t=f(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>$R(c))),h(e,["inlinedResponses"],l)}const r=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["inlinedEmbedContentResponses"],l)}return e}function gR(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&h(e,["gcsUri"],s);const r=f(n,["bigqueryDestination","outputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function yR(n){const e={},t=f(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&h(e,["gcsDestination","outputUriPrefix"],s);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigqueryDestination","outputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Vc(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&h(e,["displayName"],s);const r=f(n,["metadata","state"]);r!=null&&h(e,["state"],XT(r));const l=f(n,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const c=f(n,["metadata","endTime"]);c!=null&&h(e,["endTime"],c);const d=f(n,["metadata","updateTime"]);d!=null&&h(e,["updateTime"],d);const g=f(n,["metadata","model"]);g!=null&&h(e,["model"],g);const p=f(n,["metadata","output"]);return p!=null&&h(e,["dest"],pR($T(p))),e}function Qh(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const r=f(n,["state"]);r!=null&&h(e,["state"],XT(r));const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["createTime"]);c!=null&&h(e,["createTime"],c);const d=f(n,["startTime"]);d!=null&&h(e,["startTime"],d);const g=f(n,["endTime"]);g!=null&&h(e,["endTime"],g);const p=f(n,["updateTime"]);p!=null&&h(e,["updateTime"],p);const v=f(n,["model"]);v!=null&&h(e,["model"],v);const T=f(n,["inputConfig"]);T!=null&&h(e,["src"],_R(T));const S=f(n,["outputConfig"]);S!=null&&h(e,["dest"],gR($T(S)));const I=f(n,["completionStats"]);return I!=null&&h(e,["completionStats"],I),e}function _R(n){const e={},t=f(n,["instancesFormat"]);t!=null&&h(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&h(e,["gcsUri"],s);const r=f(n,["bigquerySource","inputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function vR(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&h(t,["fileName"],s);const r=f(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>QR(n,c))),h(t,["requests","requests"],l)}return t}function TR(n){const e={},t=f(n,["format"]);t!=null&&h(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&h(e,["gcsSource","uris"],s);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigquerySource","inputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function ER(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function SR(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],la(n,s)),t}function AR(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],la(n,s)),t}function CR(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],xR(s));const r=f(n,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=f(n,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);const d=f(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const g=f(n,["index"]);g!=null&&h(e,["index"],g);const p=f(n,["logprobsResult"]);p!=null&&h(e,["logprobsResult"],p);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(I=>I)),h(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&h(e,["urlContextMetadata"],T),e}function xR(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),h(e,["citations"],s)}return e}function WT(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>nI(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function RR(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&h(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function IR(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const r=f(n,["dest"]);return e!==void 0&&r!=null&&h(e,["outputConfig"],yR(mR(r))),t}function o0(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],vR(n,QT(n,r)));const l=f(e,["config"]);return l!=null&&RR(l,t),t}function wR(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],$e(n,s));const r=f(e,["src"]);r!=null&&h(t,["inputConfig"],TR(QT(n,r)));const l=f(e,["config"]);return l!=null&&IR(l,t),t}function bR(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&h(e,["batch","displayName"],s),t}function NR(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],LR(n,r));const l=f(e,["config"]);return l!=null&&bR(l,t),t}function MR(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],la(n,s)),t}function DR(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],la(n,s)),t}function PR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function VR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function UR(n,e){const t={},s=f(e,["contents"]);if(s!=null){let l=Rm(n,s);Array.isArray(l)&&(l=l.map(c=>c)),h(t,["requests[]","request","content"],l)}const r=f(e,["config"]);return r!=null&&(h(t,["_self"],kR(r,t)),Dx(t,{"requests[].*":"requests[].request.*"})),t}function kR(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function LR(n,e){const t={},s=f(e,["fileName"]);s!=null&&h(t,["file_name"],s);const r=f(e,["inlinedRequests"]);return r!=null&&h(t,["requests"],UR(n,r)),t}function qR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function OR(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function zR(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function BR(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],WT(on(r)));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&h(s,["topP"],c);const d=f(e,["topK"]);d!=null&&h(s,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(s,["candidateCount"],g);const p=f(e,["maxOutputTokens"]);p!=null&&h(s,["maxOutputTokens"],p);const v=f(e,["stopSequences"]);v!=null&&h(s,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&h(s,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const I=f(e,["presencePenalty"]);I!=null&&h(s,["presencePenalty"],I);const L=f(e,["frequencyPenalty"]);L!=null&&h(s,["frequencyPenalty"],L);const z=f(e,["seed"]);z!=null&&h(s,["seed"],z);const H=f(e,["responseMimeType"]);H!=null&&h(s,["responseMimeType"],H);const $=f(e,["responseSchema"]);$!=null&&h(s,["responseSchema"],Im($));const te=f(e,["responseJsonSchema"]);if(te!=null&&h(s,["responseJsonSchema"],te),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=f(e,["safetySettings"]);if(t!==void 0&&j!=null){let U=j;Array.isArray(U)&&(U=U.map(V=>iI(V))),h(t,["safetySettings"],U)}const le=f(e,["tools"]);if(t!==void 0&&le!=null){let U=aa(le);Array.isArray(U)&&(U=U.map(V=>oI(ra(V)))),h(t,["tools"],U)}const fe=f(e,["toolConfig"]);if(t!==void 0&&fe!=null&&h(t,["toolConfig"],sI(fe)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ae=f(e,["cachedContent"]);t!==void 0&&ae!=null&&h(t,["cachedContent"],ds(n,ae));const P=f(e,["responseModalities"]);P!=null&&h(s,["responseModalities"],P);const R=f(e,["mediaResolution"]);R!=null&&h(s,["mediaResolution"],R);const b=f(e,["speechConfig"]);if(b!=null&&h(s,["speechConfig"],wm(b)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=f(e,["thinkingConfig"]);M!=null&&h(s,["thinkingConfig"],M);const D=f(e,["imageConfig"]);return D!=null&&h(s,["imageConfig"],KR(D)),s}function FR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(p=>CR(p))),h(e,["candidates"],g)}const r=f(n,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&h(e,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function HR(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],la(n,s)),t}function GR(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],la(n,s)),t}function YR(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function JR(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function KR(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function QR(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["request","model"],$e(n,s));const r=f(e,["contents"]);if(r!=null){let d=Yn(r);Array.isArray(d)&&(d=d.map(g=>WT(g))),h(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&h(t,["metadata"],l);const c=f(e,["config"]);return c!=null&&h(t,["request","generationConfig"],BR(n,c,f(t,["request"],{}))),t}function $R(n){const e={},t=f(n,["response"]);t!=null&&h(e,["response"],FR(t));const s=f(n,["error"]);return s!=null&&h(e,["error"],s),e}function XR(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);if(e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function WR(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const l=f(n,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),t}function ZR(n){const e={},t=f(n,["config"]);return t!=null&&XR(t,e),e}function jR(n){const e={},t=f(n,["config"]);return t!=null&&WR(t,e),e}function eI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Vc(c))),h(e,["batchJobs"],l)}return e}function tI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Qh(c))),h(e,["batchJobs"],l)}return e}function nI(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],qR(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],OR(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],ER(g));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function iI(n){const e={},t=f(n,["category"]);if(t!=null&&h(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function sI(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],zR(t));const s=f(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function oI(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],YR(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],JR(g));const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var os;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(os||(os={}));class Qo{constructor(e,t,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,r)}init(e,t,s){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rI extends fs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Qo(os.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=o0(this.apiClient,e),s=t._url,r=pe("{model}:batchGenerateContent",s),d=t.batch.inputConfig.requests,g=d.requests,p=[];for(const v of g){const T=Object.assign({},v);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const I=T.request;I.systemInstruction=S,T.request=I}p.push(T)}return d.requests=p,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${r}`;else if(c)s.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=wR(this.apiClient,e);return d=pe("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Qh(v))}else{const p=o0(this.apiClient,e);return d=pe("{model}:batchGenerateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Vc(v))}}async createEmbeddingsInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=NR(this.apiClient,e);return l=pe("{model}:asyncBatchEmbedContent",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>Vc(g))}}async get(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=GR(this.apiClient,e);return d=pe("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Qh(v))}else{const p=HR(this.apiClient,e);return d=pe("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Vc(v))}}async cancel(e){var t,s,r,l;let c="",d={};if(this.apiClient.isVertexAI()){const g=AR(this.apiClient,e);c=pe("batchPredictionJobs/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const g=SR(this.apiClient,e);c=pe("batches/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=jR(e);return d=pe("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=tI(v),S=new t0;return Object.assign(S,T),S})}else{const p=ZR(e);return d=pe("batches",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=eI(v),S=new t0;return Object.assign(S,T),S})}}async delete(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=DR(this.apiClient,e);return d=pe("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>VR(v))}else{const p=MR(this.apiClient,e);return d=pe("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>PR(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aI(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function r0(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>NI(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function lI(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let v=Yn(c);Array.isArray(v)&&(v=v.map(T=>r0(T))),h(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],r0(on(d)));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(T=>DI(T))),h(e,["tools"],v)}const p=f(n,["toolConfig"]);if(e!==void 0&&p!=null&&h(e,["toolConfig"],MI(p)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function uI(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let T=Yn(c);Array.isArray(T)&&(T=T.map(S=>S)),h(e,["contents"],T)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],on(d));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let T=g;Array.isArray(T)&&(T=T.map(S=>PI(S))),h(e,["tools"],T)}const p=f(n,["toolConfig"]);e!==void 0&&p!=null&&h(e,["toolConfig"],p);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&h(e,["encryption_spec","kmsKeyName"],v),t}function cI(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],OT(n,s));const r=f(e,["config"]);return r!=null&&lI(r,t),t}function fI(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],OT(n,s));const r=f(e,["config"]);return r!=null&&uI(r,t),t}function dI(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],ds(n,s)),t}function hI(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],ds(n,s)),t}function mI(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function pI(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function gI(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function yI(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _I(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function vI(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&h(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function TI(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],ds(n,s)),t}function EI(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],ds(n,s)),t}function SI(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function AI(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function CI(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function xI(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function RI(n){const e={},t=f(n,["config"]);return t!=null&&CI(t,e),e}function II(n){const e={},t=f(n,["config"]);return t!=null&&xI(t,e),e}function wI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function bI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function NI(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],gI(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],yI(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],aI(g));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function MI(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],_I(t));const s=f(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function DI(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],SI(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],AI(g));const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function PI(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>vI(S))),h(e,["functionDeclarations"],T)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const r=f(n,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const l=f(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(n,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const d=f(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const g=f(n,["googleMaps"]);g!=null&&h(e,["googleMaps"],g);const p=f(n,["googleSearch"]);p!=null&&h(e,["googleSearch"],p);const v=f(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function VI(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function UI(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function kI(n,e){const t={},s=f(e,["name"]);s!=null&&h(t,["_url","name"],ds(n,s));const r=f(e,["config"]);return r!=null&&VI(r,t),t}function LI(n,e){const t={},s=f(e,["name"]);s!=null&&h(t,["_url","name"],ds(n,s));const r=f(e,["config"]);return r!=null&&UI(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qI extends fs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Qo(os.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=fI(this.apiClient,e);return d=pe("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=cI(this.apiClient,e);return d=pe("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=EI(this.apiClient,e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=TI(this.apiClient,e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=hI(this.apiClient,e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=pI(v),S=new jv;return Object.assign(S,T),S})}else{const p=dI(this.apiClient,e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=mI(v),S=new jv;return Object.assign(S,T),S})}}async update(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=LI(this.apiClient,e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=kI(this.apiClient,e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=II(e);return d=pe("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=bI(v),S=new e0;return Object.assign(S,T),S})}else{const p=RI(e);return d=pe("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=wI(v),S=new e0;return Object.assign(S,T),S})}}}function a0(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function dt(n){return this instanceof dt?(this.v=n,this):new dt(n)}function $r(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(I){return function(L){return Promise.resolve(L).then(I,T)}}function d(I,L){s[I]&&(r[I]=function(z){return new Promise(function(H,$){l.push([I,z,H,$])>1||g(I,z)})},L&&(r[I]=L(r[I])))}function g(I,L){try{p(s[I](L))}catch(z){S(l[0][3],z)}}function p(I){I.value instanceof dt?Promise.resolve(I.value.v).then(v,T):S(l[0][2],I)}function v(I){g("next",I)}function T(I){g("throw",I)}function S(I,L){I(L),l.shift(),l.length&&g(l[0][0],l[0][1])}}function Nl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof a0=="function"?a0(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(c){return new Promise(function(d,g){c=n[l](c),r(d,g,c.done,c.value)})}}function r(l,c,d,g){Promise.resolve(g).then(function(p){l({value:p,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OI(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:ZT(t)}function ZT(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function zI(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function l0(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const r=[];let l=!0;for(;s<t&&n[s].role==="model";)r.push(n[s]),l&&!ZT(n[s])&&(l=!1),s++;l?e.push(...r):e.pop()}return e}class BI{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new FI(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class FI{constructor(e,t,s,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),zI(l)}async sendMessage(e){var t;await this.sendPromise;const s=on(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,d;const g=await r,p=(c=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=g.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];v!=null&&(S=(d=v.slice(T))!==null&&d!==void 0?d:[]);const I=p?[p]:[];this.recordHistory(s,I,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const s=on(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?l0(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,r;return $r(this,arguments,function*(){var c,d,g,p;const v=[];try{for(var T=!0,S=Nl(e),I;I=yield dt(S.next()),c=I.done,!c;T=!0){p=I.value,T=!1;const L=p;if(OI(L)){const z=(r=(s=L.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content;z!==void 0&&v.push(z)}yield yield dt(L)}}catch(L){d={error:L}}finally{try{!T&&!c&&(g=S.return)&&(yield dt(g.call(S)))}finally{if(d)throw d.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...l0(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class af extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,af.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HI(n){const e={},t=f(n,["file"]);return t!=null&&h(e,["file"],t),e}function GI(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function YI(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],YT(t)),e}function JI(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function KI(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],YT(t)),e}function QI(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function $I(n){const e={},t=f(n,["config"]);return t!=null&&QI(t,e),e}function XI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WI extends fs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Qo(os.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=$I(e);return l=pe("files",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const p=XI(g),v=new tR;return Object.assign(v,p),v})}}async createInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=HI(e);return l=pe("upload/v1beta/files",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=GI(g),v=new nR;return Object.assign(v,p),v})}}async get(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=KI(e);return l=pe("files/{file}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=YI(e);return l=pe("files/{file}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const p=JI(g),v=new iR;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uc(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function ZI(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>mw(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function jI(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function ew(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function tw(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&h(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function nw(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const r=f(n,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const c=f(n,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);const d=f(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const g=f(n,["logprobs"]);g!=null&&h(e,["logprobs"],g);const p=f(n,["maxOutputTokens"]);p!=null&&h(e,["maxOutputTokens"],p);const v=f(n,["mediaResolution"]);v!=null&&h(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&h(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const I=f(n,["responseMimeType"]);I!=null&&h(e,["responseMimeType"],I);const L=f(n,["responseModalities"]);L!=null&&h(e,["responseModalities"],L);const z=f(n,["responseSchema"]);z!=null&&h(e,["responseSchema"],z);const H=f(n,["routingConfig"]);H!=null&&h(e,["routingConfig"],H);const $=f(n,["seed"]);$!=null&&h(e,["seed"],$);const te=f(n,["speechConfig"]);te!=null&&h(e,["speechConfig"],jT(te));const j=f(n,["stopSequences"]);j!=null&&h(e,["stopSequences"],j);const le=f(n,["temperature"]);le!=null&&h(e,["temperature"],le);const fe=f(n,["thinkingConfig"]);fe!=null&&h(e,["thinkingConfig"],fe);const ae=f(n,["topK"]);ae!=null&&h(e,["topK"],ae);const P=f(n,["topP"]);if(P!=null&&h(e,["topP"],P),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function iw(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function sw(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function ow(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],bm(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],I);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&h(e,["setup","systemInstruction"],ZI(on(L)));const z=f(n,["tools"]);if(e!==void 0&&z!=null){let ae=aa(z);Array.isArray(ae)&&(ae=ae.map(P=>gw(ra(P)))),h(e,["setup","tools"],ae)}const H=f(n,["sessionResumption"]);e!==void 0&&H!=null&&h(e,["setup","sessionResumption"],pw(H));const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&h(e,["setup","outputAudioTranscription"],te);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&h(e,["setup","realtimeInputConfig"],j);const le=f(n,["contextWindowCompression"]);e!==void 0&&le!=null&&h(e,["setup","contextWindowCompression"],le);const fe=f(n,["proactivity"]);return e!==void 0&&fe!=null&&h(e,["setup","proactivity"],fe),t}function rw(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],nw(s));const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],jT(bm(T)));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],I);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&h(e,["setup","systemInstruction"],on(L));const z=f(n,["tools"]);if(e!==void 0&&z!=null){let ae=aa(z);Array.isArray(ae)&&(ae=ae.map(P=>yw(ra(P)))),h(e,["setup","tools"],ae)}const H=f(n,["sessionResumption"]);e!==void 0&&H!=null&&h(e,["setup","sessionResumption"],H);const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&h(e,["setup","outputAudioTranscription"],te);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&h(e,["setup","realtimeInputConfig"],j);const le=f(n,["contextWindowCompression"]);e!==void 0&&le!=null&&h(e,["setup","contextWindowCompression"],le);const fe=f(n,["proactivity"]);return e!==void 0&&fe!=null&&h(e,["setup","proactivity"],fe),t}function aw(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],$e(n,s));const r=f(e,["config"]);return r!=null&&h(t,["config"],ow(r,t)),t}function lw(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],$e(n,s));const r=f(e,["config"]);return r!=null&&h(t,["config"],rw(r,t)),t}function uw(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],t),e}function cw(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),h(e,["weightedPrompts"],s)}return e}function fw(n){const e={},t=f(n,["media"]);if(t!=null){let p=zT(t);Array.isArray(p)&&(p=p.map(v=>Uc(v))),h(e,["mediaChunks"],p)}const s=f(n,["audio"]);s!=null&&h(e,["audio"],Uc(FT(s)));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&h(e,["video"],Uc(BT(l)));const c=f(n,["text"]);c!=null&&h(e,["text"],c);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function dw(n){const e={},t=f(n,["media"]);if(t!=null){let p=zT(t);Array.isArray(p)&&(p=p.map(v=>v)),h(e,["mediaChunks"],p)}const s=f(n,["audio"]);s!=null&&h(e,["audio"],FT(s));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&h(e,["video"],BT(l));const c=f(n,["text"]);c!=null&&h(e,["text"],c);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function hw(n){const e={},t=f(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&h(e,["serverContent"],s);const r=f(n,["toolCall"]);r!=null&&h(e,["toolCall"],r);const l=f(n,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const c=f(n,["usageMetadata"]);c!=null&&h(e,["usageMetadata"],_w(c));const d=f(n,["goAway"]);d!=null&&h(e,["goAway"],d);const g=f(n,["sessionResumptionUpdate"]);return g!=null&&h(e,["sessionResumptionUpdate"],g),e}function mw(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],jI(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],ew(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],Uc(g));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function pw(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function jT(n){const e={},t=f(n,["languageCode"]);t!=null&&h(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&h(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function gw(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],iw(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],sw(g));const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function yw(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>tw(S))),h(e,["functionDeclarations"],T)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const r=f(n,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const l=f(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(n,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const d=f(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const g=f(n,["googleMaps"]);g!=null&&h(e,["googleMaps"],g);const p=f(n,["googleSearch"]);p!=null&&h(e,["googleSearch"],p);const v=f(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function _w(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&h(e,["cachedContentTokenCount"],s);const r=f(n,["candidatesTokenCount"]);r!=null&&h(e,["responseTokenCount"],r);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const c=f(n,["thoughtsTokenCount"]);c!=null&&h(e,["thoughtsTokenCount"],c);const d=f(n,["totalTokenCount"]);d!=null&&h(e,["totalTokenCount"],d);const g=f(n,["promptTokensDetails"]);if(g!=null){let I=g;Array.isArray(I)&&(I=I.map(L=>L)),h(e,["promptTokensDetails"],I)}const p=f(n,["cacheTokensDetails"]);if(p!=null){let I=p;Array.isArray(I)&&(I=I.map(L=>L)),h(e,["cacheTokensDetails"],I)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let I=v;Array.isArray(I)&&(I=I.map(L=>L)),h(e,["responseTokensDetails"],I)}const T=f(n,["toolUsePromptTokensDetails"]);if(T!=null){let I=T;Array.isArray(I)&&(I=I.map(L=>L)),h(e,["toolUsePromptTokensDetails"],I)}const S=f(n,["trafficType"]);return S!=null&&h(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vw(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function Tw(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],Ew(s));const r=f(n,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=f(n,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);const d=f(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const g=f(n,["index"]);g!=null&&h(e,["index"],g);const p=f(n,["logprobsResult"]);p!=null&&h(e,["logprobsResult"],p);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(I=>I)),h(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&h(e,["urlContextMetadata"],T),e}function Ew(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),h(e,["citations"],s)}return e}function Sw(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["contents"]);if(r!=null){let l=Yn(r);Array.isArray(l)&&(l=l.map(c=>c)),h(t,["contents"],l)}return t}function Aw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),h(e,["tokensInfo"],r)}return e}function Cw(n){const e={},t=f(n,["values"]);t!=null&&h(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&h(e,["statistics"],xw(s)),e}function xw(n){const e={},t=f(n,["truncated"]);t!=null&&h(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&h(e,["tokenCount"],s),e}function lf(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Vb(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function Rw(n){const e={},t=f(n,["controlType"]);t!=null&&h(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&h(e,["computeControl"],s),e}function Iw(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function ww(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&h(e,["systemInstruction"],on(s));const r=f(n,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>sE(d))),h(e,["tools"],c)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&h(e,["generationConfig"],vb(l)),t}function bw(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["contents"]);if(r!=null){let c=Yn(r);Array.isArray(c)&&(c=c.map(d=>lf(d))),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&Iw(l),t}function Nw(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["contents"]);if(r!=null){let c=Yn(r);Array.isArray(c)&&(c=c.map(d=>d)),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&ww(l,t),t}function Mw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&h(e,["totalTokens"],s);const r=f(n,["cachedContentTokenCount"]);return r!=null&&h(e,["cachedContentTokenCount"],r),e}function Dw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&h(e,["totalTokens"],s),e}function Pw(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],$e(n,s)),t}function Vw(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],$e(n,s)),t}function Uw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function kw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function Lw(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const g=f(n,["seed"]);e!==void 0&&g!=null&&h(e,["parameters","seed"],g);const p=f(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&h(e,["parameters","safetySetting"],p);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&h(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&h(e,["parameters","includeRaiReason"],S);const I=f(n,["language"]);e!==void 0&&I!=null&&h(e,["parameters","language"],I);const L=f(n,["outputMimeType"]);e!==void 0&&L!=null&&h(e,["parameters","outputOptions","mimeType"],L);const z=f(n,["outputCompressionQuality"]);e!==void 0&&z!=null&&h(e,["parameters","outputOptions","compressionQuality"],z);const H=f(n,["addWatermark"]);e!==void 0&&H!=null&&h(e,["parameters","addWatermark"],H);const $=f(n,["labels"]);e!==void 0&&$!=null&&h(e,["labels"],$);const te=f(n,["editMode"]);e!==void 0&&te!=null&&h(e,["parameters","editMode"],te);const j=f(n,["baseSteps"]);return e!==void 0&&j!=null&&h(e,["parameters","editConfig","baseSteps"],j),t}function qw(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>zb(g))),h(t,["instances[0]","referenceImages"],d)}const c=f(e,["config"]);return c!=null&&Lw(c,t),t}function Ow(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>uf(l))),h(e,["generatedImages"],r)}return e}function zw(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Bw(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["instances[]","task_type"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["instances[]","title"],r);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&h(e,["parameters","outputDimensionality"],l);const c=f(n,["mimeType"]);e!==void 0&&c!=null&&h(e,["instances[]","mimeType"],c);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&h(e,["parameters","autoTruncate"],d),t}function Fw(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["contents"]);if(r!=null){let d=Rm(n,r);Array.isArray(d)&&(d=d.map(g=>g)),h(t,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&zw(l,t);const c=f(e,["model"]);return c!==void 0&&h(t,["requests[]","model"],$e(n,c)),t}function Hw(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["contents"]);if(r!=null){let c=Rm(n,r);Array.isArray(c)&&(c=c.map(d=>d)),h(t,["instances[]","content"],c)}const l=f(e,["config"]);return l!=null&&Bw(l,t),t}function Gw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&h(e,["metadata"],r),e}function Yw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Cw(c))),h(e,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&h(e,["metadata"],r),e}function Jw(n){const e={},t=f(n,["endpoint"]);t!=null&&h(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&h(e,["deployedModelId"],s),e}function Kw(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function Qw(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $w(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Xw(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&h(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function Ww(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],lf(on(r)));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&h(s,["topP"],c);const d=f(e,["topK"]);d!=null&&h(s,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(s,["candidateCount"],g);const p=f(e,["maxOutputTokens"]);p!=null&&h(s,["maxOutputTokens"],p);const v=f(e,["stopSequences"]);v!=null&&h(s,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&h(s,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const I=f(e,["presencePenalty"]);I!=null&&h(s,["presencePenalty"],I);const L=f(e,["frequencyPenalty"]);L!=null&&h(s,["frequencyPenalty"],L);const z=f(e,["seed"]);z!=null&&h(s,["seed"],z);const H=f(e,["responseMimeType"]);H!=null&&h(s,["responseMimeType"],H);const $=f(e,["responseSchema"]);$!=null&&h(s,["responseSchema"],Im($));const te=f(e,["responseJsonSchema"]);if(te!=null&&h(s,["responseJsonSchema"],te),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=f(e,["safetySettings"]);if(t!==void 0&&j!=null){let U=j;Array.isArray(U)&&(U=U.map(V=>Bb(V))),h(t,["safetySettings"],U)}const le=f(e,["tools"]);if(t!==void 0&&le!=null){let U=aa(le);Array.isArray(U)&&(U=U.map(V=>Qb(ra(V)))),h(t,["tools"],U)}const fe=f(e,["toolConfig"]);if(t!==void 0&&fe!=null&&h(t,["toolConfig"],Kb(fe)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ae=f(e,["cachedContent"]);t!==void 0&&ae!=null&&h(t,["cachedContent"],ds(n,ae));const P=f(e,["responseModalities"]);P!=null&&h(s,["responseModalities"],P);const R=f(e,["mediaResolution"]);R!=null&&h(s,["mediaResolution"],R);const b=f(e,["speechConfig"]);if(b!=null&&h(s,["speechConfig"],wm(b)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=f(e,["thinkingConfig"]);M!=null&&h(s,["thinkingConfig"],M);const D=f(e,["imageConfig"]);return D!=null&&h(s,["imageConfig"],Cb(D)),s}function Zw(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],on(r));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&h(s,["topP"],c);const d=f(e,["topK"]);d!=null&&h(s,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(s,["candidateCount"],g);const p=f(e,["maxOutputTokens"]);p!=null&&h(s,["maxOutputTokens"],p);const v=f(e,["stopSequences"]);v!=null&&h(s,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&h(s,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const I=f(e,["presencePenalty"]);I!=null&&h(s,["presencePenalty"],I);const L=f(e,["frequencyPenalty"]);L!=null&&h(s,["frequencyPenalty"],L);const z=f(e,["seed"]);z!=null&&h(s,["seed"],z);const H=f(e,["responseMimeType"]);H!=null&&h(s,["responseMimeType"],H);const $=f(e,["responseSchema"]);$!=null&&h(s,["responseSchema"],Im($));const te=f(e,["responseJsonSchema"]);te!=null&&h(s,["responseJsonSchema"],te);const j=f(e,["routingConfig"]);j!=null&&h(s,["routingConfig"],j);const le=f(e,["modelSelectionConfig"]);le!=null&&h(s,["modelConfig"],le);const fe=f(e,["safetySettings"]);if(t!==void 0&&fe!=null){let B=fe;Array.isArray(B)&&(B=B.map(Z=>Z)),h(t,["safetySettings"],B)}const ae=f(e,["tools"]);if(t!==void 0&&ae!=null){let B=aa(ae);Array.isArray(B)&&(B=B.map(Z=>sE(ra(Z)))),h(t,["tools"],B)}const P=f(e,["toolConfig"]);t!==void 0&&P!=null&&h(t,["toolConfig"],P);const R=f(e,["labels"]);t!==void 0&&R!=null&&h(t,["labels"],R);const b=f(e,["cachedContent"]);t!==void 0&&b!=null&&h(t,["cachedContent"],ds(n,b));const M=f(e,["responseModalities"]);M!=null&&h(s,["responseModalities"],M);const D=f(e,["mediaResolution"]);D!=null&&h(s,["mediaResolution"],D);const U=f(e,["speechConfig"]);U!=null&&h(s,["speechConfig"],iE(wm(U)));const V=f(e,["audioTimestamp"]);V!=null&&h(s,["audioTimestamp"],V);const ne=f(e,["thinkingConfig"]);ne!=null&&h(s,["thinkingConfig"],ne);const _e=f(e,["imageConfig"]);return _e!=null&&h(s,["imageConfig"],xb(_e)),s}function u0(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["contents"]);if(r!=null){let c=Yn(r);Array.isArray(c)&&(c=c.map(d=>lf(d))),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&h(t,["generationConfig"],Ww(n,l,t)),t}function c0(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["contents"]);if(r!=null){let c=Yn(r);Array.isArray(c)&&(c=c.map(d=>d)),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&h(t,["generationConfig"],Zw(n,l,t)),t}function f0(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(p=>Tw(p))),h(e,["candidates"],g)}const r=f(n,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&h(e,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function d0(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(v=>v)),h(e,["candidates"],p)}const r=f(n,["createTime"]);r!=null&&h(e,["createTime"],r);const l=f(n,["modelVersion"]);l!=null&&h(e,["modelVersion"],l);const c=f(n,["promptFeedback"]);c!=null&&h(e,["promptFeedback"],c);const d=f(n,["responseId"]);d!=null&&h(e,["responseId"],d);const g=f(n,["usageMetadata"]);return g!=null&&h(e,["usageMetadata"],g),e}function jw(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const r=f(n,["aspectRatio"]);e!==void 0&&r!=null&&h(e,["parameters","aspectRatio"],r);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&h(e,["parameters","safetySetting"],c);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d);const g=f(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&h(e,["parameters","includeSafetyAttributes"],g);const p=f(n,["includeRaiReason"]);e!==void 0&&p!=null&&h(e,["parameters","includeRaiReason"],p);const v=f(n,["language"]);e!==void 0&&v!=null&&h(e,["parameters","language"],v);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","mimeType"],T);const S=f(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&h(e,["parameters","outputOptions","compressionQuality"],S),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=f(n,["imageSize"]);if(e!==void 0&&I!=null&&h(e,["parameters","sampleImageSize"],I),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function eb(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const g=f(n,["seed"]);e!==void 0&&g!=null&&h(e,["parameters","seed"],g);const p=f(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&h(e,["parameters","safetySetting"],p);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&h(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&h(e,["parameters","includeRaiReason"],S);const I=f(n,["language"]);e!==void 0&&I!=null&&h(e,["parameters","language"],I);const L=f(n,["outputMimeType"]);e!==void 0&&L!=null&&h(e,["parameters","outputOptions","mimeType"],L);const z=f(n,["outputCompressionQuality"]);e!==void 0&&z!=null&&h(e,["parameters","outputOptions","compressionQuality"],z);const H=f(n,["addWatermark"]);e!==void 0&&H!=null&&h(e,["parameters","addWatermark"],H);const $=f(n,["labels"]);e!==void 0&&$!=null&&h(e,["labels"],$);const te=f(n,["imageSize"]);e!==void 0&&te!=null&&h(e,["parameters","sampleImageSize"],te);const j=f(n,["enhancePrompt"]);return e!==void 0&&j!=null&&h(e,["parameters","enhancePrompt"],j),t}function tb(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&jw(l,t),t}function nb(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&eb(l,t),t}function ib(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>pb(c))),h(e,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&h(e,["positivePromptSafetyAttributes"],tE(r)),e}function sb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>uf(c))),h(e,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&h(e,["positivePromptSafetyAttributes"],nE(r)),e}function ob(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=f(n,["durationSeconds"]);if(e!==void 0&&r!=null&&h(e,["parameters","durationSeconds"],r),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const c=f(n,["resolution"]);e!==void 0&&c!=null&&h(e,["parameters","resolution"],c);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=f(n,["negativePrompt"]);e!==void 0&&g!=null&&h(e,["parameters","negativePrompt"],g);const p=f(n,["enhancePrompt"]);if(e!==void 0&&p!=null&&h(e,["parameters","enhancePrompt"],p),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&h(e,["instances[0]","lastFrame"],cf(v));const T=f(n,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(I=>aN(I))),h(e,["instances[0]","referenceImages"],S)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function rb(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=f(n,["fps"]);e!==void 0&&l!=null&&h(e,["parameters","fps"],l);const c=f(n,["durationSeconds"]);e!==void 0&&c!=null&&h(e,["parameters","durationSeconds"],c);const d=f(n,["seed"]);e!==void 0&&d!=null&&h(e,["parameters","seed"],d);const g=f(n,["aspectRatio"]);e!==void 0&&g!=null&&h(e,["parameters","aspectRatio"],g);const p=f(n,["resolution"]);e!==void 0&&p!=null&&h(e,["parameters","resolution"],p);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const T=f(n,["pubsubTopic"]);e!==void 0&&T!=null&&h(e,["parameters","pubsubTopic"],T);const S=f(n,["negativePrompt"]);e!==void 0&&S!=null&&h(e,["parameters","negativePrompt"],S);const I=f(n,["enhancePrompt"]);e!==void 0&&I!=null&&h(e,["parameters","enhancePrompt"],I);const L=f(n,["generateAudio"]);e!==void 0&&L!=null&&h(e,["parameters","generateAudio"],L);const z=f(n,["lastFrame"]);e!==void 0&&z!=null&&h(e,["instances[0]","lastFrame"],ci(z));const H=f(n,["referenceImages"]);if(e!==void 0&&H!=null){let j=H;Array.isArray(j)&&(j=j.map(le=>lN(le))),h(e,["instances[0]","referenceImages"],j)}const $=f(n,["mask"]);e!==void 0&&$!=null&&h(e,["instances[0]","mask"],rN($));const te=f(n,["compressionQuality"]);return e!==void 0&&te!=null&&h(e,["parameters","compressionQuality"],te),t}function ab(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],fb(c)),e}function lb(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],db(c)),e}function ub(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&h(t,["instances[0]","image"],cf(l));const c=f(e,["video"]);c!=null&&h(t,["instances[0]","video"],oE(c));const d=f(e,["source"]);d!=null&&hb(d,t);const g=f(e,["config"]);return g!=null&&ob(g,t),t}function cb(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&h(t,["instances[0]","image"],ci(l));const c=f(e,["video"]);c!=null&&h(t,["instances[0]","video"],rE(c));const d=f(e,["source"]);d!=null&&mb(d,t);const g=f(e,["config"]);return g!=null&&rb(g,t),t}function fb(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>yb(c))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function db(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>_b(c))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function hb(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],cf(r));const l=f(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],oE(l)),t}function mb(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],ci(r));const l=f(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],rE(l)),t}function pb(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["image"],Rb(t));const s=f(n,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const r=f(n,["_self"]);return r!=null&&h(e,["safetyAttributes"],tE(r)),e}function uf(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["image"],eE(t));const s=f(n,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const r=f(n,["_self"]);r!=null&&h(e,["safetyAttributes"],nE(r));const l=f(n,["prompt"]);return l!=null&&h(e,["enhancedPrompt"],l),e}function gb(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["mask"],eE(t));const s=f(n,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),h(e,["labels"],r)}return e}function yb(n){const e={},t=f(n,["video"]);return t!=null&&h(e,["video"],sN(t)),e}function _b(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],oN(t)),e}function vb(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const r=f(n,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const c=f(n,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);const d=f(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const g=f(n,["logprobs"]);g!=null&&h(e,["logprobs"],g);const p=f(n,["maxOutputTokens"]);p!=null&&h(e,["maxOutputTokens"],p);const v=f(n,["mediaResolution"]);v!=null&&h(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&h(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const I=f(n,["responseMimeType"]);I!=null&&h(e,["responseMimeType"],I);const L=f(n,["responseModalities"]);L!=null&&h(e,["responseModalities"],L);const z=f(n,["responseSchema"]);z!=null&&h(e,["responseSchema"],z);const H=f(n,["routingConfig"]);H!=null&&h(e,["routingConfig"],H);const $=f(n,["seed"]);$!=null&&h(e,["seed"],$);const te=f(n,["speechConfig"]);te!=null&&h(e,["speechConfig"],iE(te));const j=f(n,["stopSequences"]);j!=null&&h(e,["stopSequences"],j);const le=f(n,["temperature"]);le!=null&&h(e,["temperature"],le);const fe=f(n,["thinkingConfig"]);fe!=null&&h(e,["thinkingConfig"],fe);const ae=f(n,["topK"]);ae!=null&&h(e,["topK"],ae);const P=f(n,["topP"]);if(P!=null&&h(e,["topP"],P),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Tb(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],$e(n,s)),t}function Eb(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],$e(n,s)),t}function Sb(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function Ab(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function Cb(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function xb(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=f(n,["imageSize"]);s!=null&&h(e,["imageSize"],s);const r=f(n,["outputMimeType"]);r!=null&&h(e,["imageOutputOptions","mimeType"],r);const l=f(n,["outputCompressionQuality"]);return l!=null&&h(e,["imageOutputOptions","compressionQuality"],l),e}function Rb(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&h(e,["imageBytes"],ao(t));const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function eE(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["imageBytes"],ao(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function cf(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&h(e,["bytesBase64Encoded"],ao(t));const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function ci(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&h(e,["bytesBase64Encoded"],ao(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Ib(n,e,t){const s={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&h(t,["_query","pageSize"],r);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&h(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&h(t,["_url","models_url"],JT(n,d)),s}function wb(n,e,t){const s={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&h(t,["_query","pageSize"],r);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&h(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&h(t,["_url","models_url"],JT(n,d)),s}function bb(n,e){const t={},s=f(e,["config"]);return s!=null&&Ib(n,s,t),t}function Nb(n,e){const t={},s=f(e,["config"]);return s!=null&&wb(n,s,t),t}function Mb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["_self"]);if(r!=null){let l=KT(r);Array.isArray(l)&&(l=l.map(c=>$h(c))),h(e,["models"],l)}return e}function Db(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["_self"]);if(r!=null){let l=KT(r);Array.isArray(l)&&(l=l.map(c=>Xh(c))),h(e,["models"],l)}return e}function Pb(n){const e={},t=f(n,["maskMode"]);t!=null&&h(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&h(e,["maskClasses"],s);const r=f(n,["maskDilation"]);return r!=null&&h(e,["dilation"],r),e}function $h(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const r=f(n,["description"]);r!=null&&h(e,["description"],r);const l=f(n,["version"]);l!=null&&h(e,["version"],l);const c=f(n,["_self"]);c!=null&&h(e,["tunedModelInfo"],$b(c));const d=f(n,["inputTokenLimit"]);d!=null&&h(e,["inputTokenLimit"],d);const g=f(n,["outputTokenLimit"]);g!=null&&h(e,["outputTokenLimit"],g);const p=f(n,["supportedGenerationMethods"]);p!=null&&h(e,["supportedActions"],p);const v=f(n,["temperature"]);v!=null&&h(e,["temperature"],v);const T=f(n,["maxTemperature"]);T!=null&&h(e,["maxTemperature"],T);const S=f(n,["topP"]);S!=null&&h(e,["topP"],S);const I=f(n,["topK"]);I!=null&&h(e,["topK"],I);const L=f(n,["thinking"]);return L!=null&&h(e,["thinking"],L),e}function Xh(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const r=f(n,["description"]);r!=null&&h(e,["description"],r);const l=f(n,["versionId"]);l!=null&&h(e,["version"],l);const c=f(n,["deployedModels"]);if(c!=null){let T=c;Array.isArray(T)&&(T=T.map(S=>Jw(S))),h(e,["endpoints"],T)}const d=f(n,["labels"]);d!=null&&h(e,["labels"],d);const g=f(n,["_self"]);g!=null&&h(e,["tunedModelInfo"],Xb(g));const p=f(n,["defaultCheckpointId"]);p!=null&&h(e,["defaultCheckpointId"],p);const v=f(n,["checkpoints"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(S=>S)),h(e,["checkpoints"],T)}return e}function Vb(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],Kw(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],Qw(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],vw(g));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function Ub(n){const e={},t=f(n,["productImage"]);return t!=null&&h(e,["image"],ci(t)),e}function kb(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const r=f(n,["baseSteps"]);e!==void 0&&r!=null&&h(e,["parameters","baseSteps"],r);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const c=f(n,["seed"]);e!==void 0&&c!=null&&h(e,["parameters","seed"],c);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const g=f(n,["personGeneration"]);e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g);const p=f(n,["addWatermark"]);e!==void 0&&p!=null&&h(e,["parameters","addWatermark"],p);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&h(e,["parameters","outputOptions","mimeType"],v);const T=f(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","compressionQuality"],T);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&h(e,["parameters","enhancePrompt"],S);const I=f(n,["labels"]);return e!==void 0&&I!=null&&h(e,["labels"],I),t}function Lb(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["source"]);r!=null&&Ob(r,t);const l=f(e,["config"]);return l!=null&&kb(l,t),t}function qb(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>uf(r))),h(e,["generatedImages"],s)}return e}function Ob(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=f(n,["personImage"]);e!==void 0&&r!=null&&h(e,["instances[0]","personImage","image"],ci(r));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>Ub(d))),h(e,["instances[0]","productImages"],c)}return t}function zb(n){const e={},t=f(n,["referenceImage"]);t!=null&&h(e,["referenceImage"],ci(t));const s=f(n,["referenceId"]);s!=null&&h(e,["referenceId"],s);const r=f(n,["referenceType"]);r!=null&&h(e,["referenceType"],r);const l=f(n,["maskImageConfig"]);l!=null&&h(e,["maskImageConfig"],Pb(l));const c=f(n,["controlImageConfig"]);c!=null&&h(e,["controlImageConfig"],Rw(c));const d=f(n,["styleImageConfig"]);d!=null&&h(e,["styleImageConfig"],d);const g=f(n,["subjectImageConfig"]);return g!=null&&h(e,["subjectImageConfig"],g),e}function tE(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const r=f(n,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function nE(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const r=f(n,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function Bb(n){const e={},t=f(n,["category"]);if(t!=null&&h(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function Fb(n){const e={},t=f(n,["image"]);return t!=null&&h(e,["image"],ci(t)),e}function Hb(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&h(e,["parameters","mode"],s);const r=f(n,["maxPredictions"]);e!==void 0&&r!=null&&h(e,["parameters","maxPredictions"],r);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&h(e,["parameters","confidenceThreshold"],l);const c=f(n,["maskDilation"]);e!==void 0&&c!=null&&h(e,["parameters","maskDilation"],c);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&h(e,["parameters","binaryColorThreshold"],d);const g=f(n,["labels"]);return e!==void 0&&g!=null&&h(e,["labels"],g),t}function Gb(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["source"]);r!=null&&Jb(r,t);const l=f(e,["config"]);return l!=null&&Hb(l,t),t}function Yb(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>gb(r))),h(e,["generatedMasks"],s)}return e}function Jb(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],ci(r));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&h(e,["instances[0]","scribble"],Fb(l)),t}function iE(n){const e={},t=f(n,["languageCode"]);t!=null&&h(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&h(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Kb(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],$w(t));const s=f(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function Qb(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],Sb(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],Ab(g));const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function sE(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>Xw(S))),h(e,["functionDeclarations"],T)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const r=f(n,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const l=f(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(n,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const d=f(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const g=f(n,["googleMaps"]);g!=null&&h(e,["googleMaps"],g);const p=f(n,["googleSearch"]);p!=null&&h(e,["googleSearch"],p);const v=f(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function $b(n){const e={},t=f(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&h(e,["createTime"],s);const r=f(n,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function Xb(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&h(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&h(e,["createTime"],s);const r=f(n,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function Wb(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const r=f(n,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function Zb(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const r=f(n,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function jb(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","name"],$e(n,s));const r=f(e,["config"]);return r!=null&&Wb(r,t),t}function eN(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["config"]);return r!=null&&Zb(r,t),t}function tN(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const r=f(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&h(e,["parameters","safetySetting"],r);const l=f(n,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const c=f(n,["includeRaiReason"]);e!==void 0&&c!=null&&h(e,["parameters","includeRaiReason"],c);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&h(e,["parameters","outputOptions","mimeType"],d);const g=f(n,["outputCompressionQuality"]);e!==void 0&&g!=null&&h(e,["parameters","outputOptions","compressionQuality"],g);const p=f(n,["enhanceInputImage"]);e!==void 0&&p!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],p);const v=f(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const T=f(n,["labels"]);e!==void 0&&T!=null&&h(e,["labels"],T);const S=f(n,["numberOfImages"]);e!==void 0&&S!=null&&h(e,["parameters","sampleCount"],S);const I=f(n,["mode"]);return e!==void 0&&I!=null&&h(e,["parameters","mode"],I),t}function nN(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const r=f(e,["image"]);r!=null&&h(t,["instances[0]","image"],ci(r));const l=f(e,["upscaleFactor"]);l!=null&&h(t,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(e,["config"]);return c!=null&&tN(c,t),t}function iN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>uf(l))),h(e,["generatedImages"],r)}return e}function sN(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&h(e,["videoBytes"],ao(s));const r=f(n,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function oN(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],ao(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function rN(n){const e={},t=f(n,["image"]);t!=null&&h(e,["_self"],ci(t));const s=f(n,["maskMode"]);return s!=null&&h(e,["maskMode"],s),e}function aN(n){const e={},t=f(n,["image"]);t!=null&&h(e,["image"],cf(t));const s=f(n,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function lN(n){const e={},t=f(n,["image"]);t!=null&&h(e,["image"],ci(t));const s=f(n,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function oE(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const s=f(n,["videoBytes"]);s!=null&&h(e,["encodedVideo"],ao(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["encoding"],r),e}function rE(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&h(e,["bytesBase64Encoded"],ao(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uN(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&h(e,["displayName"],s),t}function cN(n){const e={},t=f(n,["config"]);return t!=null&&uN(t,e),e}function fN(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),t}function dN(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&fN(s,e),e}function hN(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function mN(n,e){const t={},s=f(n,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["customMetadata"],l)}const r=f(n,["chunkingConfig"]);return e!==void 0&&r!=null&&h(e,["chunkingConfig"],r),t}function pN(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],yN(c)),e}function gN(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const s=f(n,["fileName"]);s!=null&&h(e,["fileName"],s);const r=f(n,["config"]);return r!=null&&mN(r,e),e}function yN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&h(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function _N(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function vN(n){const e={},t=f(n,["config"]);return t!=null&&_N(t,e),e}function TN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["fileSearchStores"],l)}return e}function aE(n,e){const t={},s=f(n,["mimeType"]);e!==void 0&&s!=null&&h(e,["mimeType"],s);const r=f(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=f(n,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>g)),h(e,["customMetadata"],d)}const c=f(n,["chunkingConfig"]);return e!==void 0&&c!=null&&h(e,["chunkingConfig"],c),t}function EN(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const s=f(n,["config"]);return s!=null&&aE(s,e),e}function SN(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AN="Content-Type",CN="X-Server-Timeout",xN="User-Agent",Wh="x-goog-api-client",RN="1.31.0",IN=`google-genai-sdk/${RN}`,wN="v1beta1",bN="v1beta",h0=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class NN{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:wN,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:bN,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const r=[this.getRequestUrlInternal(t)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))r.searchParams.append(c,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?s[r]=Object.assign(Object.assign({},s[r]),l):l!==void 0&&(s[r]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,r){if(t&&t.timeout||r){const l=new AbortController,c=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>l.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=c}return t&&t.extraBody!==null&&MN(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await m0(r),new Jh(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await m0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return $r(this,arguments,function*(){const r=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";for(;;){const{done:d,value:g}=yield dt(r.read());if(d){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=l.decode(g,{stream:!0});try{const T=JSON.parse(p);if("error"in T){const S=JSON.parse(JSON.stringify(T.error)),I=S.status,L=S.code,z=`got status: ${I}. ${JSON.stringify(T)}`;if(L>=400&&L<600)throw new af({message:z,status:L})}}catch(T){if(T.name==="ApiError")throw T}c+=p;let v=c.match(h0);for(;v;){const T=v[1];try{const S=new Response(T,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield dt(new Jh(S)),c=c.slice(v[0].length),v=c.match(h0)}catch(S){throw new Error(`exception parsing stream chunk ${T}. ${S}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=IN+" "+this.clientOptions.userAgentExtra;return e[xN]=t,e[Wh]=t,e[AN]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))s.append(r,l);e.timeout&&e.timeout>0&&s.append(CN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);r.sizeBytes=String(c.size);const d=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const g={file:r},p=this.getFileName(e),v=pe("upload/v1beta/files",g._url),T=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,p,g,t==null?void 0:t.httpOptions);return l.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,s){var r;const l=this.clientOptions.uploader,c=await l.stat(t),d=String(c.size),g=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:c.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),T={};s!=null&&aE(s,T);const S=await this.fetchUploadUrl(p,d,g,v,T,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,r,l,c){var d;let g={};c?g=c:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const p=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=p==null?void 0:p.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function m0(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(s);throw t>=400&&t<600?new af({message:r,status:t}):new Error(r)}}function MN(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const d=Object.assign({},l);for(const g in c)if(Object.prototype.hasOwnProperty.call(c,g)){const p=c[g],v=d[g];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?d[g]=s(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),d[g]=p)}return d}const r=s(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DN="mcp_used/unknown";let PN=!1;function lE(n){for(const e of n)if(VN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return PN}function uE(n){var e;const t=(e=n[Wh])!==null&&e!==void 0?e:"";n[Wh]=(t+` ${DN}`).trimStart()}function VN(n){return n!==null&&typeof n=="object"&&n instanceof Nm}function UN(n,e=100){return $r(this,arguments,function*(){let s,r=0;for(;r<e;){const l=yield dt(n.listTools({cursor:s}));for(const c of l.tools)yield yield dt(c),r++;if(!l.nextCursor)break;s=l.nextCursor}})}class Nm{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Nm(e,t)}async initialize(){var e,t,s,r;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var d=!0,g=(t=void 0,Nl(UN(v))),p;p=await g.next(),e=p.done,!e;d=!0){r=p.value,d=!1;const T=r;c.push(T);const S=T.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=v}}catch(T){t={error:T}}finally{try{!d&&!e&&(s=g.return)&&await s.call(g)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),hR(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await r.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function kN(n,e,t){const s=new oR;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(s,r),e(s)}class LN{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=zN(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let p=()=>{};const v=new Promise(j=>{p=j}),T=e.callbacks,S=function(){p({})},I=this.apiClient,L={onopen:S,onmessage:j=>{kN(I,T.onmessage,j)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(j){},onclose:(s=T==null?void 0:T.onclose)!==null&&s!==void 0?s:function(j){}},z=this.webSocketFactory.create(g,ON(c),L);z.connect(),await v;const te={setup:{model:$e(this.apiClient,e.model)}};return z.send(JSON.stringify(te)),new qN(z,this.apiClient)}}class qN{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=cw(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=uw(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Kr.PLAY)}pause(){this.sendPlaybackControl(Kr.PAUSE)}stop(){this.sendPlaybackControl(Kr.STOP)}resetContext(){this.sendPlaybackControl(Kr.RESET_CONTEXT)}close(){this.conn.close()}}function ON(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function zN(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function FN(n,e,t){const s=new sR;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const c=hw(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class HN{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new LN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,r,l,c,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&lE(e.config.tools)&&uE(T);const S=KN(T);if(this.apiClient.isVertexAI())v=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const b=this.apiClient.getApiKey();let M="BidiGenerateContent",D="key";b!=null&&b.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),M="BidiGenerateContentConstrained",D="access_token"),v=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${M}?${D}=${b}`}let I=()=>{};const L=new Promise(b=>{I=b}),z=e.callbacks,H=function(){var b;(b=z==null?void 0:z.onopen)===null||b===void 0||b.call(z),I({})},$=this.apiClient,te={onopen:H,onmessage:b=>{FN($,z.onmessage,b)},onerror:(t=z==null?void 0:z.onerror)!==null&&t!==void 0?t:function(b){},onclose:(s=z==null?void 0:z.onclose)!==null&&s!==void 0?s:function(b){}},j=this.webSocketFactory.create(v,JN(S),te);j.connect(),await L;let le=$e(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&le.startsWith("publishers/")){const b=this.apiClient.getProject(),M=this.apiClient.getLocation();le=`projects/${b}/locations/${M}/`+le}let fe={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Fc.AUDIO]}:e.config.responseModalities=[Fc.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ae=(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],P=[];for(const b of ae)if(this.isCallableTool(b)){const M=b;P.push(await M.tool())}else P.push(b);P.length>0&&(e.config.tools=P);const R={model:le,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?fe=lw(this.apiClient,R):fe=aw(this.apiClient,R),delete fe.config,j.send(JSON.stringify(fe)),new YN(j,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const GN={turnComplete:!0};class YN{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=Yn(t.turns),e.isVertexAI()||(s=s.map(r=>lf(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(BN)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},GN),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:dw(e)}:t={realtimeInput:fw(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function JN(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function KN(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const p0=10;function g0(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Xr(c)){r=!0;break}if(!r)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Xr(n){return"callTool"in n&&typeof n.callTool=="function"}function QN(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>Xr(r)))!==null&&s!==void 0?s:!1}function y0(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,r)=>{if(Xr(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(r)}),t}function _0(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $N extends fs{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,r,l,c,d;const g=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!QN(t)||g0(t.config))return await this.generateContentInternal(g);const p=y0(t);if(p.length>0){const z=p.map(H=>`tools[${H}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${z}.`)}let v,T;const S=Yn(g.contents),I=(l=(r=(s=g.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:p0;let L=0;for(;L<I&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const z=v.candidates[0].content,H=[];for(const $ of(d=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(Xr($)){const j=await $.callTool(v.functionCalls);H.push(...j)}L++,T={role:"user",parts:H},g.contents=Yn(g.contents),g.contents.push(z),g.contents.push(T),_0(g.config)&&(S.push(z),S.push(T))}return _0(g.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async t=>{var s,r,l,c,d;if(this.maybeMoveToResponseJsonSchem(t),g0(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const g=y0(t);if(g.length>0){const T=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(l=(r=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(d=(c=t==null?void 0:t.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(p&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var r;let l;const c=[];if(s!=null&&s.generatedImages)for(const g of s.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:c.push(g);let d;return l?d={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:d={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},d}),this.list=async t=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Qo(os.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var s,r,l,c,d,g;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(l=t.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((g=(d=t.source)===null||d===void 0?void 0:d.video)===null||g===void 0)&&g.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async g=>Xr(g)?await g.tool():g)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(d.config.tools=c,e.config&&e.config.tools&&lE(e.config.tools)){const g=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),uE(p),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return d}async initAfcToolsMap(e){var t,s,r;const l=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(Xr(c)){const d=c,g=await d.tool();for(const p of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,d)}}return l}async processAfcStream(e){var t,s,r;const l=(r=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:p0;let c=!1,d=0;const g=await this.initAfcToolsMap(e);return(function(p,v,T){var S,I;return $r(this,arguments,function*(){for(var L,z,H,$;d<l;){c&&(d++,c=!1);const fe=yield dt(p.processParamsMaybeAddMcpUsage(T)),ae=yield dt(p.generateContentStreamInternal(fe)),P=[],R=[];try{for(var te=!0,j=(z=void 0,Nl(ae)),le;le=yield dt(j.next()),L=le.done,!L;te=!0){$=le.value,te=!1;const b=$;if(yield yield dt(b),b.candidates&&(!((S=b.candidates[0])===null||S===void 0)&&S.content)){R.push(b.candidates[0].content);for(const M of(I=b.candidates[0].content.parts)!==null&&I!==void 0?I:[])if(d<l&&M.functionCall){if(!M.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(M.functionCall.name)){const D=yield dt(v.get(M.functionCall.name).callTool([M.functionCall]));P.push(...D)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${M.functionCall.name}`)}}}}catch(b){z={error:b}}finally{try{!te&&!L&&(H=j.return)&&(yield dt(H.call(j)))}finally{if(z)throw z.error}}if(P.length>0){c=!0;const b=new Sl;b.candidates=[{content:{role:"user",parts:P}}],yield yield dt(b);const M=[];M.push(...R),M.push({role:"user",parts:P});const D=Yn(T.contents).concat(M);T.contents=D}else break}})})(this,g,e)}async generateContentInternal(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=c0(this.apiClient,e);return d=pe("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=d0(v),S=new Sl;return Object.assign(S,T),S})}else{const p=u0(this.apiClient,e);return d=pe("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=f0(v),S=new Sl;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=c0(this.apiClient,e);return d=pe("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(T){return $r(this,arguments,function*(){var S,I,L,z;try{for(var H=!0,$=Nl(T),te;te=yield dt($.next()),S=te.done,!S;H=!0){z=te.value,H=!1;const j=z,le=d0(yield dt(j.json()));le.sdkHttpResponse={headers:j.headers};const fe=new Sl;Object.assign(fe,le),yield yield dt(fe)}}catch(j){I={error:j}}finally{try{!H&&!S&&(L=$.return)&&(yield dt(L.call($)))}finally{if(I)throw I.error}}})})}else{const p=u0(this.apiClient,e);return d=pe("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(T){return $r(this,arguments,function*(){var S,I,L,z;try{for(var H=!0,$=Nl(T),te;te=yield dt($.next()),S=te.done,!S;H=!0){z=te.value,H=!1;const j=z,le=f0(yield dt(j.json()));le.sdkHttpResponse={headers:j.headers};const fe=new Sl;Object.assign(fe,le),yield yield dt(fe)}}catch(j){I={error:j}}finally{try{!H&&!S&&(L=$.return)&&(yield dt(L.call($)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=Hw(this.apiClient,e);return d=pe("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=Yw(v),S=new Jv;return Object.assign(S,T),S})}else{const p=Fw(this.apiClient,e);return d=pe("{model}:batchEmbedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=Gw(v),S=new Jv;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=nb(this.apiClient,e);return d=pe("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=sb(v),S=new Kv;return Object.assign(S,T),S})}else{const p=tb(this.apiClient,e);return d=pe("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=ib(v),S=new Kv;return Object.assign(S,T),S})}}async editImageInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=qw(this.apiClient,e);return l=pe("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const p=Ow(g),v=new Kx;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=nN(this.apiClient,e);return l=pe("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const p=iN(g),v=new Qx;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=Lb(this.apiClient,e);return l=pe("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=qb(g),v=new $x;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=Gb(this.apiClient,e);return l=pe("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=Yb(g),v=new Xx;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=Eb(this.apiClient,e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Xh(v))}else{const p=Tb(this.apiClient,e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>$h(v))}}async listInternal(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=Nb(this.apiClient,e);return d=pe("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=Db(v),S=new Qv;return Object.assign(S,T),S})}else{const p=bb(this.apiClient,e);return d=pe("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=Mb(v),S=new Qv;return Object.assign(S,T),S})}}async update(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=eN(this.apiClient,e);return d=pe("{model}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Xh(v))}else{const p=jb(this.apiClient,e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>$h(v))}}async delete(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=Vw(this.apiClient,e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=kw(v),S=new $v;return Object.assign(S,T),S})}else{const p=Pw(this.apiClient,e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=Uw(v),S=new $v;return Object.assign(S,T),S})}}async countTokens(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=Nw(this.apiClient,e);return d=pe("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=Dw(v),S=new Xv;return Object.assign(S,T),S})}else{const p=bw(this.apiClient,e);return d=pe("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=Mw(v),S=new Xv;return Object.assign(S,T),S})}}async computeTokens(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=Sw(this.apiClient,e);return l=pe("{model}:computeTokens",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const p=Aw(g),v=new Wx;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=cb(this.apiClient,e);return d=pe("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const T=lb(v),S=new Hc;return Object.assign(S,T),S})}else{const p=ub(this.apiClient,e);return d=pe("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const T=ab(v),S=new Hc;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XN extends fs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=Bx(e);return d=pe("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c}else{const p=zx(e);return d=pe("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=Px(e);return l=pe("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WN(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function ZN(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>a2(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function jN(n,e,t){const s={},r=f(e,["expireTime"]);t!==void 0&&r!=null&&h(t,["expireTime"],r);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&h(t,["newSessionExpireTime"],l);const c=f(e,["uses"]);t!==void 0&&c!=null&&h(t,["uses"],c);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&h(t,["bidiGenerateContentSetup"],r2(n,d));const g=f(e,["lockAdditionalFields"]);return t!==void 0&&g!=null&&h(t,["fieldMask"],g),s}function e2(n,e){const t={},s=f(e,["config"]);return s!=null&&h(t,["config"],jN(n,s,t)),t}function t2(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function n2(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function i2(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function s2(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function o2(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],bm(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],I);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&h(e,["setup","systemInstruction"],ZN(on(L)));const z=f(n,["tools"]);if(e!==void 0&&z!=null){let ae=aa(z);Array.isArray(ae)&&(ae=ae.map(P=>u2(ra(P)))),h(e,["setup","tools"],ae)}const H=f(n,["sessionResumption"]);e!==void 0&&H!=null&&h(e,["setup","sessionResumption"],l2(H));const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&h(e,["setup","outputAudioTranscription"],te);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&h(e,["setup","realtimeInputConfig"],j);const le=f(n,["contextWindowCompression"]);e!==void 0&&le!=null&&h(e,["setup","contextWindowCompression"],le);const fe=f(n,["proactivity"]);return e!==void 0&&fe!=null&&h(e,["setup","proactivity"],fe),t}function r2(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],$e(n,s));const r=f(e,["config"]);return r!=null&&h(t,["config"],o2(r,t)),t}function a2(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],t2(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],n2(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],WN(g));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function l2(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function u2(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],i2(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],s2(g));const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c2(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function f2(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=c2(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(p=>c.includes(p)?`generationConfig.${p}`:p));const g=[];l&&g.push(l),d.length>0&&g.push(...d),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class d2 extends fs{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=e2(this.apiClient,e);l=pe("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const g=f2(d,e.config);return r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h2(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),t}function m2(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&h2(s,e),e}function p2(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function g2(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function y2(n){const e={},t=f(n,["parent"]);t!=null&&h(e,["_url","parent"],t);const s=f(n,["config"]);return s!=null&&g2(s,e),e}function _2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class v2 extends fs{constructor(e){super(),this.apiClient=e,this.list=async t=>new Qo(os.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=p2(e);return l=pe("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=m2(e);r=pe("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=y2(e);return l=pe("{parent}/documents",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=_2(g),v=new Zx;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T2 extends fs{constructor(e,t=new v2(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new Qo(os.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=cN(e);return l=pe("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=hN(e);return l=pe("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=dN(e);r=pe("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=vN(e);return l=pe("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=TN(g),v=new jx;return Object.assign(v,p),v})}}async uploadToFileSearchStoreInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=EN(e);return l=pe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=SN(g),v=new eR;return Object.assign(v,p),v})}}async importFile(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=gN(e);return l=pe("{file_search_store_name}:importFile",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=pN(g),v=new Cm;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E2(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function S2(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function A2(n,e){const t={},s=f(n,["sdkHttpResponse"]);return s!=null&&h(t,["sdkHttpResponse"],s),t}function C2(n,e){const t={},s=f(n,["sdkHttpResponse"]);return s!=null&&h(t,["sdkHttpResponse"],s),t}function x2(n,e,t){const s={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&h(e,["displayName"],r),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const c=f(n,["learningRateMultiplier"]);if(c!=null&&h(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&h(e,["tuningTask","hyperparameters","batchSize"],d);const g=f(n,["learningRate"]);if(e!==void 0&&g!=null&&h(e,["tuningTask","hyperparameters","learningRate"],g),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function R2(n,e,t){const s={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const I=f(n,["validationDataset"]);e!==void 0&&I!=null&&h(e,["supervisedTuningSpec"],v0(I))}else if(r==="PREFERENCE_TUNING"){const I=f(n,["validationDataset"]);e!==void 0&&I!=null&&h(e,["preferenceOptimizationSpec"],v0(I))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const c=f(n,["description"]);e!==void 0&&c!=null&&h(e,["description"],c);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const I=f(n,["epochCount"]);e!==void 0&&I!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],I)}else if(d==="PREFERENCE_TUNING"){const I=f(n,["epochCount"]);e!==void 0&&I!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],I)}let g=f(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const I=f(n,["learningRateMultiplier"]);e!==void 0&&I!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],I)}else if(g==="PREFERENCE_TUNING"){const I=f(n,["learningRateMultiplier"]);e!==void 0&&I!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],I)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const I=f(n,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],I)}else if(p==="PREFERENCE_TUNING"){const I=f(n,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],I)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const I=f(n,["adapterSize"]);e!==void 0&&I!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],I)}else if(v==="PREFERENCE_TUNING"){const I=f(n,["adapterSize"]);e!==void 0&&I!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],I)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=f(n,["labels"]);e!==void 0&&T!=null&&h(e,["labels"],T);const S=f(n,["beta"]);return e!==void 0&&S!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),s}function I2(n,e){const t={},s=f(n,["baseModel"]);s!=null&&h(t,["baseModel"],s);const r=f(n,["preTunedModel"]);r!=null&&h(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&q2(l);const c=f(n,["config"]);return c!=null&&x2(c,t),t}function w2(n,e){const t={},s=f(n,["baseModel"]);s!=null&&h(t,["baseModel"],s);const r=f(n,["preTunedModel"]);r!=null&&h(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&O2(l,t,e);const c=f(n,["config"]);return c!=null&&R2(c,t,e),t}function b2(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function N2(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function M2(n,e,t){const s={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=f(n,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),s}function D2(n,e,t){const s={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=f(n,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),s}function P2(n,e){const t={},s=f(n,["config"]);return s!=null&&M2(s,t),t}function V2(n,e){const t={},s=f(n,["config"]);return s!=null&&D2(s,t),t}function U2(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>cE(d))),h(t,["tuningJobs"],c)}return t}function k2(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>Zh(d))),h(t,["tuningJobs"],c)}return t}function L2(n,e){const t={},s=f(n,["name"]);s!=null&&h(t,["model"],s);const r=f(n,["name"]);return r!=null&&h(t,["endpoint"],r),t}function q2(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=f(n,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),h(t,["examples","examples"],r)}return t}function O2(n,e,t){const s={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=f(n,["gcsUri"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=f(n,["gcsUri"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=f(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=f(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function cE(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["state"]);l!=null&&h(t,["state"],GT(l));const c=f(n,["createTime"]);c!=null&&h(t,["createTime"],c);const d=f(n,["tuningTask","startTime"]);d!=null&&h(t,["startTime"],d);const g=f(n,["tuningTask","completeTime"]);g!=null&&h(t,["endTime"],g);const p=f(n,["updateTime"]);p!=null&&h(t,["updateTime"],p);const v=f(n,["description"]);v!=null&&h(t,["description"],v);const T=f(n,["baseModel"]);T!=null&&h(t,["baseModel"],T);const S=f(n,["_self"]);return S!=null&&h(t,["tunedModel"],L2(S)),t}function Zh(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["state"]);l!=null&&h(t,["state"],GT(l));const c=f(n,["createTime"]);c!=null&&h(t,["createTime"],c);const d=f(n,["startTime"]);d!=null&&h(t,["startTime"],d);const g=f(n,["endTime"]);g!=null&&h(t,["endTime"],g);const p=f(n,["updateTime"]);p!=null&&h(t,["updateTime"],p);const v=f(n,["error"]);v!=null&&h(t,["error"],v);const T=f(n,["description"]);T!=null&&h(t,["description"],T);const S=f(n,["baseModel"]);S!=null&&h(t,["baseModel"],S);const I=f(n,["tunedModel"]);I!=null&&h(t,["tunedModel"],I);const L=f(n,["preTunedModel"]);L!=null&&h(t,["preTunedModel"],L);const z=f(n,["supervisedTuningSpec"]);z!=null&&h(t,["supervisedTuningSpec"],z);const H=f(n,["preferenceOptimizationSpec"]);H!=null&&h(t,["preferenceOptimizationSpec"],H);const $=f(n,["tuningDataStats"]);$!=null&&h(t,["tuningDataStats"],$);const te=f(n,["encryptionSpec"]);te!=null&&h(t,["encryptionSpec"],te);const j=f(n,["partnerModelTuningSpec"]);j!=null&&h(t,["partnerModelTuningSpec"],j);const le=f(n,["customBaseModel"]);le!=null&&h(t,["customBaseModel"],le);const fe=f(n,["experiment"]);fe!=null&&h(t,["experiment"],fe);const ae=f(n,["labels"]);ae!=null&&h(t,["labels"],ae);const P=f(n,["outputUri"]);P!=null&&h(t,["outputUri"],P);const R=f(n,["pipelineJob"]);R!=null&&h(t,["pipelineJob"],R);const b=f(n,["serviceAccount"]);b!=null&&h(t,["serviceAccount"],b);const M=f(n,["tunedModelDisplayName"]);M!=null&&h(t,["tunedModelDisplayName"],M);const D=f(n,["veoTuningSpec"]);return D!=null&&h(t,["veoTuningSpec"],D),t}function z2(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["metadata"]);l!=null&&h(t,["metadata"],l);const c=f(n,["done"]);c!=null&&h(t,["done"],c);const d=f(n,["error"]);return d!=null&&h(t,["error"],d),t}function v0(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&h(t,["validationDatasetUri"],s);const r=f(n,["vertexDatasetResource"]);return r!=null&&h(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B2 extends fs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Qo(os.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),l=await this.tuneMldevInternal(r);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Yh.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=N2(e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>Zh(v))}else{const p=b2(e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>cE(v))}}async listInternal(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=V2(e);return d=pe("tuningJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=k2(v),S=new Wv;return Object.assign(S,T),S})}else{const p=P2(e);return d=pe("tunedModels",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=U2(v),S=new Wv;return Object.assign(S,T),S})}}async cancel(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=S2(e);return d=pe("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=C2(v),S=new Zv;return Object.assign(S,T),S})}else{const p=E2(e);return d=pe("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=A2(v),S=new Zv;return Object.assign(S,T),S})}}async tuneInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=w2(e,e);return l=pe("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>Zh(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=I2(e);return l=pe("tunedModels",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>z2(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class F2{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const H2=1024*1024*8,G2=3,Y2=1e3,J2=2,Yc="x-goog-upload-status";async function K2(n,e,t){var s;const r=await fE(n,e,t),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[Yc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function Q2(n,e,t){var s;const r=await fE(n,e,t),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[Yc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=qT(l),d=new xm;return Object.assign(d,c),d}async function fE(n,e,t){var s,r;let l=0,c=0,d=new Jh(new Response),g="upload";for(l=n.size;c<l;){const p=Math.min(H2,l-c),v=n.slice(c,c+p);c+p>=l&&(g+=", finalize");let T=0,S=Y2;for(;T<G2&&(d=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(c),"Content-Length":String(p)}}}),!(!((s=d==null?void 0:d.headers)===null||s===void 0)&&s[Yc]));)T++,await X2(S),S=S*J2;if(c+=p,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r[Yc])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function $2(n){return{size:n.size,type:n.type}}function X2(n){return new Promise(e=>setTimeout(e,n))}class W2{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await K2(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Q2(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $2(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Z2{create(e,t,s){return new j2(e,t,s)}}class j2{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const T0="x-goog-api-key";class eM{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(T0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(T0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tM="gl-node/";class nM{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=Mx(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new eM(this.apiKey);this.apiClient=new NN({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:tM+"web",uploader:new W2,downloader:new F2}),this.models=new $N(this.apiClient),this.live=new HN(this.apiClient,r,new Z2),this.batches=new rI(this.apiClient),this.chats=new BI(this.models,this.apiClient),this.caches=new qI(this.apiClient),this.files=new WI(this.apiClient),this.operations=new XN(this.apiClient),this.authTokens=new d2(this.apiClient),this.tunings=new B2(this.apiClient),this.fileSearchStores=new T2(this.apiClient)}}const dE=()=>{const n="PLACEHOLDER_API_KEY";return new nM({apiKey:n})},iM=async(n,e)=>{const t=dE();if(!t)return"Error: API Key missing.";try{const s=`
      You are a sophisticated, helpful writing assistant for a high-end lifestyle blog.
      
      Task: ${n}
      
      ${e?`Context from previous paragraphs: ${e}`:""}

      Keep the tone elegant, minimal, and engaging. Do not use markdown formatting like **bold** or # headers in the response unless explicitly asked, just return plain text or simple paragraphs.
    `;return(await t.models.generateContent({model:"gemini-2.5-flash",contents:s})).text||""}catch(s){return console.error("Gemini generation error:",s),"Failed to generate content. Please try again."}},sM=async n=>{var t;const e=dE();if(!e)return"";try{return((t=(await e.models.generateContent({model:"gemini-2.5-flash",contents:`Generate a catchy, elegant, short blog post title based on this summary: ${n}. Return ONLY the title text.`})).text)==null?void 0:t.trim())||""}catch{return""}},Js=({html:n,tagName:e,className:t,onChange:s,placeholder:r,onKeyDown:l,onPaste:c,readOnly:d,autoFocus:g,onFocus:p,style:v})=>{const T=me.useRef(null);me.useEffect(()=>{T.current&&n!==T.current.innerHTML&&document.activeElement!==T.current&&(T.current.innerHTML=n)},[n]),me.useEffect(()=>{T.current&&T.current.innerHTML!==n&&(T.current.innerHTML=n)},[]);const S=I=>{s(I.currentTarget.innerHTML)};return me.useEffect(()=>{if(g&&T.current){const I=document.createRange(),L=window.getSelection();I.selectNodeContents(T.current),I.collapse(!1),L&&(L.removeAllRanges(),L.addRange(I)),T.current.focus()}},[g]),kT.createElement(e,{ref:T,className:`${t} empty:before:content-[attr(data-placeholder)] empty:before:text-stone-300 cursor-text outline-none`,contentEditable:!d,suppressContentEditableWarning:!0,"data-placeholder":r,onInput:S,onBlur:S,onFocus:p,onKeyDown:l,onPaste:c,style:v})},oM=[{label:"Default",value:"#292524"},{label:"Rose",value:"#be185d"},{label:"Emerald",value:"#059669"},{label:"Blue",value:"#2563eb"},{label:"Amber",value:"#d97706"},{label:"Purple",value:"#7e22ce"},{label:"Gray",value:"#78716c"}],hE=({blocks:n,onChange:e,readOnly:t=!1})=>{const[s,r]=me.useState(null),[l,c]=me.useState(null),[d,g]=me.useState(null),[p,v]=me.useState(!1),[T,S]=me.useState(""),[I,L]=me.useState(null),[z,H]=me.useState(!1),[$,te]=me.useState({top:0,left:0}),[j,le]=me.useState(!1),fe=me.useRef(null);me.useEffect(()=>{const ne=_e=>{d&&!_e.target.closest(".block-menu-trigger")&&g(null),z&&fe.current&&!fe.current.contains(_e.target)&&(H(!1),le(!1))};return document.addEventListener("mousedown",ne),()=>document.removeEventListener("mousedown",ne)},[d,z]);const ae=(ne,_e)=>{if(t)return;const B=n.map(Z=>Z.id===ne?{...Z,..._e}:Z);e(B),g(null)},P=(ne,_e=Je.Paragraph)=>{if(t)return;const B={id:Math.random().toString(36).substr(2,9),type:_e,content:"",width:100,align:"left"},Z=n.findIndex(Re=>Re.id===ne),ce=[...n];ce.splice(Z+1,0,B),e(ce),setTimeout(()=>r(B.id),10)},R=ne=>{if(t||n.length<=1)return;const _e=n.findIndex(Z=>Z.id===ne),B=n.filter(Z=>Z.id!==ne);e(B),_e>0&&r(B[_e-1].id)},b=(ne,_e=null)=>{if(document.execCommand(ne,!1,_e),s){const B=document.getElementById(`block-${s}`);B&&ae(s,{content:B.innerHTML})}},M=()=>{var ce,Re;const ne=window.getSelection();if(!ne||ne.isCollapsed){H(!1),le(!1);return}const B=ne.getRangeAt(0).getBoundingClientRect(),Z=(ce=fe.current)==null?void 0:ce.getBoundingClientRect();Z&&((Re=fe.current)!=null&&Re.contains(ne.anchorNode))&&(te({top:B.top-Z.top-50,left:B.left-Z.left+B.width/2-140}),H(!0))};me.useEffect(()=>{if(!t)return document.addEventListener("selectionchange",M),()=>document.removeEventListener("selectionchange",M)},[t]);const D=(ne,_e)=>{const B=ne.clipboardData.items;for(let Z=0;Z<B.length;Z++)if(B[Z].type.indexOf("image")!==-1){ne.preventDefault();const ce=B[Z].getAsFile();if(ce){const Re=new FileReader;Re.onload=Xe=>{var O;ae(_e,{type:Je.Image,src:(O=Xe.target)==null?void 0:O.result,content:""})},Re.readAsDataURL(ce)}return}},U=async ne=>{if(!T.trim())return;v(!0);const _e=n.findIndex(Re=>Re.id===ne)-1,B=_e>=0?n[_e].content:"",ce=(await iM(T,B)).replace(/```html/g,"").replace(/```/g,"");ae(ne,{content:ce}),v(!1),L(null),S("")},V=ne=>{const _e=`w-full bg-transparent resize-none placeholder:text-stone-300 ${ne.align==="center"?"text-center":ne.align==="right"?"text-right":"text-left"}`,B=s===ne.id,Z={html:ne.content,onChange:ce=>ae(ne.id,{content:ce}),onFocus:()=>r(ne.id),onKeyDown:ce=>{ce.key==="Enter"&&!ce.shiftKey&&(ce.preventDefault(),P(ne.id,Je.Paragraph)),ce.key==="Backspace"&&!ne.content&&(ce.preventDefault(),R(ne.id))},onPaste:ce=>D(ce,ne.id),readOnly:t,className:_e,autoFocus:B};switch(ne.type){case Je.Heading1:return A.jsx(Js,{tagName:"h1",style:{fontSize:"3.75rem",lineHeight:"1.1",fontWeight:700},className:`font-serif mb-6 mt-10 text-stone-900 ${_e}`,placeholder:"Heading 1",...Z});case Je.Heading2:return A.jsx(Js,{tagName:"h2",style:{fontSize:"2.5rem",lineHeight:"1.2",fontWeight:700},className:`font-serif mb-4 mt-8 text-stone-800 ${_e}`,placeholder:"Heading 2",...Z});case Je.Heading3:return A.jsx(Js,{tagName:"h3",style:{fontSize:"1.75rem",lineHeight:"1.3",fontWeight:600},className:`font-serif mb-3 mt-6 text-stone-800 ${_e}`,placeholder:"Heading 3",...Z});case Je.Quote:return A.jsxs("div",{className:"flex gap-4 border-l-4 border-rose-300 pl-4 py-2 bg-stone-50/50 rounded-r-lg my-4",children:[A.jsx(de.Quote,{className:"text-stone-300 flex-shrink-0",size:24}),A.jsx(Js,{tagName:"div",className:`text-xl font-serif italic text-stone-700 ${_e}`,placeholder:"Empty quote...",...Z})]});case Je.Code:return A.jsxs("div",{className:"bg-stone-900 rounded-lg p-4 my-4 relative group",children:[A.jsx("div",{className:"absolute right-2 top-2 text-xs text-stone-500",children:ne.language||"Code"}),A.jsx(Js,{tagName:"pre",className:`font-mono text-sm text-stone-200 ${_e}`,placeholder:"Write code...",...Z})]});case Je.List:return A.jsxs("div",{className:"flex gap-3 items-start my-2",children:[A.jsx("div",{className:"mt-2.5 w-1.5 h-1.5 rounded-full bg-stone-800 flex-shrink-0"}),A.jsx(Js,{tagName:"div",className:`text-lg leading-relaxed ${_e}`,placeholder:"List item",...Z})]});case Je.OrderedList:return A.jsxs("div",{className:"flex gap-3 items-start my-2",children:[A.jsx("span",{className:"mt-1 font-bold text-stone-400 select-none",children:"1."}),A.jsx(Js,{tagName:"div",className:`text-lg leading-relaxed ${_e}`,placeholder:"List item",...Z})]});case Je.Image:return A.jsx(E0,{block:ne,updateBlock:ae,readOnly:t,isVideo:!1});case Je.Video:return A.jsx(E0,{block:ne,updateBlock:ae,readOnly:t,isVideo:!0});case Je.Divider:return A.jsx("hr",{className:"border-stone-200 my-8"});default:return A.jsx(Js,{tagName:"div",className:`text-lg leading-relaxed min-h-[1.5em] text-stone-700 ${_e}`,placeholder:"Type '/' for commands...",...Z})}};return A.jsxs("div",{className:"relative max-w-3xl mx-auto pb-32",ref:fe,children:[z&&!t&&A.jsxs("div",{className:"absolute z-50 bg-stone-900 text-white rounded-lg shadow-xl flex items-center p-1 gap-1 -translate-x-1/2 animate-fade-in",style:{top:$.top,left:"50%"},children:[A.jsx(Ks,{icon:de.Bold,onClick:()=>b("bold")}),A.jsx(Ks,{icon:de.Italic,onClick:()=>b("italic")}),A.jsx(Ks,{icon:de.Underline,onClick:()=>b("underline")}),A.jsx(Ks,{icon:de.Link,onClick:()=>{const ne=prompt("Enter link URL:");ne&&b("createLink",ne)}}),A.jsxs("div",{className:"relative",children:[A.jsx(Ks,{icon:de.Palette,onClick:()=>le(!j)}),j&&A.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 bg-white p-2 rounded-lg shadow-xl border border-stone-200 flex gap-2 z-50 animate-fade-in",children:oM.map(ne=>A.jsx("button",{className:"w-6 h-6 rounded-full border border-stone-200 hover:scale-110 transition-transform",style:{backgroundColor:ne.value},title:ne.label,onMouseDown:_e=>{_e.preventDefault(),b("foreColor",ne.value),le(!1)}},ne.value))})]}),A.jsx("div",{className:"w-px h-4 bg-stone-700 mx-1"}),A.jsx(Ks,{icon:de.AlignLeft,onClick:()=>b("justifyLeft")}),A.jsx(Ks,{icon:de.AlignCenter,onClick:()=>b("justifyCenter")}),A.jsx(Ks,{icon:de.AlignRight,onClick:()=>b("justifyRight")})]}),n.map(ne=>A.jsxs("div",{id:`block-${ne.id}`,className:"group relative flex items-start -ml-12 pl-12 mb-2",onMouseEnter:()=>!t&&c(ne.id),onMouseLeave:()=>!t&&c(null),children:[!t&&A.jsxs("div",{className:`absolute left-0 top-1.5 flex gap-1 transition-opacity duration-200 ${l===ne.id||d===ne.id?"opacity-100":"opacity-0"}`,children:[A.jsx("button",{onClick:()=>P(ne.id),className:"p-1 hover:bg-stone-100 rounded text-stone-400 hover:text-stone-600 transition-colors",children:A.jsx(de.Plus,{size:16})}),A.jsxs("div",{className:"relative",children:[A.jsx("button",{className:`p-1 rounded text-stone-400 hover:text-stone-600 cursor-pointer block-menu-trigger transition-colors ${d===ne.id?"bg-stone-100 text-stone-900":"hover:bg-stone-100"}`,onClick:_e=>{_e.stopPropagation(),g(d===ne.id?null:ne.id)},children:A.jsx(de.MoreHorizontal,{size:16})}),d===ne.id&&A.jsxs("div",{className:"absolute left-0 top-full mt-2 w-64 bg-white border border-stone-100 shadow-xl rounded-xl overflow-hidden z-20 py-1 animate-fade-in block-menu-trigger",children:[A.jsx("div",{className:"px-4 py-2 text-xs font-bold text-stone-400 uppercase tracking-wider bg-stone-50 border-b border-stone-50",children:"Turn into"}),A.jsx(oi,{label:"Text",icon:de.Type,onClick:()=>ae(ne.id,{type:Je.Paragraph})}),A.jsx(oi,{label:"Heading 1",icon:de.Type,style:{fontSize:"1.5rem",fontWeight:"bold"},onClick:()=>ae(ne.id,{type:Je.Heading1})}),A.jsx(oi,{label:"Heading 2",icon:de.Type,style:{fontSize:"1.25rem",fontWeight:"bold"},onClick:()=>ae(ne.id,{type:Je.Heading2})}),A.jsx(oi,{label:"Heading 3",icon:de.Type,style:{fontSize:"1.1rem",fontWeight:"bold"},onClick:()=>ae(ne.id,{type:Je.Heading3})}),A.jsx(oi,{label:"Bullet List",icon:de.List,onClick:()=>ae(ne.id,{type:Je.List})}),A.jsx(oi,{label:"Numbered List",icon:de.ListOrdered,onClick:()=>ae(ne.id,{type:Je.OrderedList})}),A.jsx(oi,{label:"Quote",icon:de.Quote,onClick:()=>ae(ne.id,{type:Je.Quote})}),A.jsx(oi,{label:"Code Block",icon:de.Code,onClick:()=>ae(ne.id,{type:Je.Code})}),A.jsx("div",{className:"px-4 py-2 text-xs font-bold text-stone-400 uppercase tracking-wider bg-stone-50 border-b border-stone-50 border-t mt-1",children:"Insert"}),A.jsx(oi,{label:"Image",icon:de.Image,onClick:()=>ae(ne.id,{type:Je.Image})}),A.jsx(oi,{label:"Video Embed",icon:de.Video,onClick:()=>ae(ne.id,{type:Je.Video})}),A.jsx(oi,{label:"Divider",icon:de.Minus,onClick:()=>ae(ne.id,{type:Je.Divider})}),A.jsx("div",{className:"h-px bg-stone-100 my-1"}),A.jsxs("button",{onClick:()=>R(ne.id),className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[A.jsx(de.Trash2,{size:14})," Delete Block"]})]})]})]}),A.jsxs("div",{className:"w-full relative",children:[s===ne.id&&ne.type===Je.Paragraph&&!ne.content&&!t&&A.jsxs("button",{onClick:()=>L(ne.id),className:"absolute -top-7 left-0 text-[10px] font-bold text-purple-600 bg-purple-50 px-2 py-1 rounded-full flex items-center gap-1 hover:bg-purple-100 transition-colors",children:[A.jsx(de.Sparkles,{size:10})," AI WRITER"]}),V(ne)]}),I===ne.id&&A.jsxs("div",{className:"absolute top-full left-0 mt-2 z-30 w-full max-w-md bg-white rounded-xl shadow-2xl border border-purple-100 p-4 animate-fade-in",children:[A.jsxs("div",{className:"flex justify-between items-center mb-2",children:[A.jsxs("span",{className:"text-xs font-bold text-purple-600 uppercase tracking-wider flex items-center gap-1",children:[A.jsx(de.Sparkles,{size:12})," Gemini Assistant"]}),A.jsx("button",{onClick:()=>L(null),children:A.jsx(de.X,{size:14,className:"text-stone-400"})})]}),A.jsx("input",{type:"text",value:T,onChange:_e=>S(_e.target.value),placeholder:"Ask Gemini to write...",className:"w-full text-sm border-b border-stone-200 pb-2 mb-3 outline-none focus:border-purple-300",autoFocus:!0,onKeyDown:_e=>_e.key==="Enter"&&U(ne.id)}),A.jsx("div",{className:"flex justify-end gap-2",children:A.jsx("button",{onClick:()=>U(ne.id),disabled:p||!T,className:"bg-purple-600 text-white px-3 py-1.5 rounded-lg text-xs font-medium hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2",children:p?"Thinking...":"Generate"})})]})]},ne.id)),!t&&A.jsxs("button",{onClick:()=>P(n[n.length-1].id,Je.Paragraph),className:"w-full py-4 text-stone-300 hover:text-stone-500 text-sm flex items-center justify-center gap-2 transition-colors border-t border-transparent hover:border-stone-100 mt-8",children:[A.jsx(de.Plus,{size:14})," Add block at end"]})]})},Ks=({icon:n,onClick:e})=>A.jsx("button",{onMouseDown:t=>{t.preventDefault(),e()},className:"p-1.5 hover:bg-stone-700 rounded text-stone-300 hover:text-white transition-colors",children:A.jsx(n,{size:14})}),oi=({label:n,icon:e,onClick:t,style:s})=>A.jsxs("button",{onClick:t,className:"w-full text-left px-4 py-2 text-sm hover:bg-stone-50 flex items-center gap-3 text-stone-700 transition-colors",children:[A.jsx(e,{size:14,className:"text-stone-400 flex-shrink-0"})," ",A.jsx("span",{style:s,children:n})]}),E0=({block:n,updateBlock:e,readOnly:t,isVideo:s})=>{const r=me.useRef(null),l=c=>{var S,I,L;if(t)return;const d=c.clientX,g=((S=r.current)==null?void 0:S.offsetWidth)||0,p=((L=(I=r.current)==null?void 0:I.parentElement)==null?void 0:L.offsetWidth)||1,v=z=>{const H=z.clientX-d,$=g+H,te=Math.min(100,Math.max(20,$/p*100));e(n.id,{width:te})},T=()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",T)};window.addEventListener("mousemove",v),window.addEventListener("mouseup",T)};return!n.src&&!n.content?A.jsxs("div",{className:"bg-stone-50 border-2 border-dashed border-stone-200 rounded-xl p-8 text-center hover:bg-stone-100 transition-colors",children:[s?A.jsx(de.Video,{className:"mx-auto text-stone-300 mb-2",size:32}):A.jsx(de.Image,{className:"mx-auto text-stone-300 mb-2",size:32}),A.jsx("p",{className:"text-stone-500 text-sm mb-4",children:s?"Embed Video":"Upload Image"}),s?A.jsx("input",{type:"text",placeholder:"Paste YouTube URL...",className:"w-full max-w-sm mx-auto px-4 py-2 border border-stone-300 rounded-lg text-sm",onBlur:c=>{let d=c.target.value;d.includes("youtube.com/watch?v=")?d=d.replace("watch?v=","embed/"):d.includes("youtu.be/")&&(d=d.replace("youtu.be/","youtube.com/embed/")),e(n.id,{src:d})}}):A.jsxs("label",{className:"cursor-pointer bg-white border border-stone-300 text-stone-600 px-4 py-2 rounded-lg hover:bg-stone-50 transition-colors text-sm font-medium inline-block",children:["Choose File",A.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:c=>{var g;const d=(g=c.target.files)==null?void 0:g[0];if(d){const p=new FileReader;p.onloadend=()=>e(n.id,{src:p.result}),p.readAsDataURL(d)}}})]})]}):A.jsx("div",{className:`relative group/media my-6 flex ${n.align==="center"?"justify-center":n.align==="right"?"justify-end":"justify-start"}`,children:A.jsxs("div",{ref:r,className:"relative rounded-lg overflow-hidden shadow-sm",style:{width:`${n.width||100}%`},children:[s?A.jsx("iframe",{src:n.src,className:"w-full aspect-video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):A.jsx("img",{src:n.src,alt:"Block media",className:"w-full h-auto"}),!t&&A.jsx("div",{onMouseDown:l,className:"absolute right-2 bottom-2 w-6 h-6 bg-white rounded-full shadow cursor-ew-resize flex items-center justify-center opacity-0 group-hover/media:opacity-100 transition-opacity z-10",children:A.jsx(de.Move,{size:12})}),!t&&A.jsxs("div",{className:"absolute top-2 right-2 bg-white/90 backdrop-blur rounded-lg p-1 flex gap-1 opacity-0 group-hover/media:opacity-100 transition-opacity",children:[A.jsx("button",{onClick:()=>e(n.id,{align:"left"}),className:"p-1 hover:bg-stone-100 rounded",children:A.jsx(de.AlignLeft,{size:12})}),A.jsx("button",{onClick:()=>e(n.id,{align:"center"}),className:"p-1 hover:bg-stone-100 rounded",children:A.jsx(de.AlignCenter,{size:12})}),A.jsx("button",{onClick:()=>e(n.id,{align:"right"}),className:"p-1 hover:bg-stone-100 rounded",children:A.jsx(de.AlignRight,{size:12})})]})]})})},rM=()=>{};var S0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},aM=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const r=n[t++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const l=n[t++];e[s++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=n[t++],c=n[t++],d=n[t++],g=((r&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((r&15)<<12|(l&63)<<6|c&63)}}return e.join("")},pE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const l=n[r],c=r+1<n.length,d=c?n[r+1]:0,g=r+2<n.length,p=g?n[r+2]:0,v=l>>2,T=(l&3)<<4|d>>4;let S=(d&15)<<2|p>>6,I=p&63;g||(I=64,c||(S=64)),s.push(t[v],t[T],t[S],t[I])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(mE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):aM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const l=t[n.charAt(r++)],d=r<n.length?t[n.charAt(r)]:0;++r;const p=r<n.length?t[n.charAt(r)]:64;++r;const T=r<n.length?t[n.charAt(r)]:64;if(++r,l==null||d==null||p==null||T==null)throw new lM;const S=l<<2|d>>4;if(s.push(S),p!==64){const I=d<<4&240|p>>2;if(s.push(I),T!==64){const L=p<<6&192|T;s.push(L)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class lM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uM=function(n){const e=mE(n);return pE.encodeByteArray(e,!0)},Jc=function(n){return uM(n).replace(/\./g,"")},cM=function(n){try{return pE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=()=>fM().__FIREBASE_DEFAULTS__,hM=()=>{if(typeof process>"u"||typeof S0>"u")return;const n=S0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},mM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&cM(n[1]);return e&&JSON.parse(e)},Mm=()=>{try{return rM()||dM()||hM()||mM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},pM=n=>{var e,t;return(t=(e=Mm())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},gM=n=>{const e=pM(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},gE=()=>{var n;return(n=Mm())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _M(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",r=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Jc(JSON.stringify(t)),Jc(JSON.stringify(c)),""].join(".")}const Ml={};function TM(){const n={prod:[],emulator:[]};for(const e of Object.keys(Ml))Ml[e]?n.emulator.push(e):n.prod.push(e);return n}function EM(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let A0=!1;function SM(n,e){if(typeof window>"u"||typeof document>"u"||!Dm(window.location.host)||Ml[n]===e||Ml[n]||A0)return;Ml[n]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",l=TM().prod.length>0;function c(){const S=document.getElementById(s);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,I){S.setAttribute("width","24"),S.setAttribute("id",I),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{A0=!0,c()},S}function v(S,I){S.setAttribute("id",I),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=EM(s),I=t("text"),L=document.getElementById(I)||document.createElement("span"),z=t("learnmore"),H=document.getElementById(z)||document.createElement("a"),$=t("preprendIcon"),te=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const j=S.element;d(j),v(H,z);const le=p();g(te,$),j.append(te,L,H,le),document.body.appendChild(j)}l?(L.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AM(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CM(){var e;const n=(e=Mm())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xM(){return!CM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RM(){try{return typeof indexedDB=="object"}catch{return!1}}function IM(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var l;e(((l=r.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM="FirebaseError";class ua extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=wM,Object.setPrototypeOf(this,ua.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yE.prototype.create)}}class yE{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},r=`${this.service}/${e}`,l=this.errors[e],c=l?bM(l,s):"Error",d=`${this.serviceName}: ${c} (${r}).`;return new ua(r,d,s)}}function bM(n,e){return n.replace(NM,(t,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const NM=/\{\$([^}]+)}/g;function Kc(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const r of t){if(!s.includes(r))return!1;const l=n[r],c=e[r];if(C0(l)&&C0(c)){if(!Kc(l,c))return!1}else if(l!==c)return!1}for(const r of s)if(!t.includes(r))return!1;return!0}function C0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(n){return n&&n._delegate?n._delegate:n}class kl{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new yM;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PM(e))try{this.getOrInitializeService({instanceIdentifier:Ho})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:r});s.resolve(l)}catch{}}}}clearInstance(e=Ho){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ho){return this.instances.has(e)}getOptions(e=Ho){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&c.resolve(r)}return r}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const l=this.instances.get(s);return l&&e(l,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const r of s)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:DM(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ho){return this.component?this.component.multipleInstances?e:Ho:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DM(n){return n===Ho?void 0:n}function PM(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new MM(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ye||(Ye={}));const UM={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},kM=Ye.INFO,LM={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},qM=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),r=LM[e];if(r)console[r](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _E{constructor(e){this.name=e,this._logLevel=kM,this._logHandler=qM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const OM=(n,e)=>e.some(t=>n instanceof t);let x0,R0;function zM(){return x0||(x0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BM(){return R0||(R0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vE=new WeakMap,jh=new WeakMap,TE=new WeakMap,Uh=new WeakMap,Pm=new WeakMap;function FM(n){const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Ws(n.result)),r()},c=()=>{s(n.error),r()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&vE.set(t,n)}).catch(()=>{}),Pm.set(e,n),e}function HM(n){if(jh.has(n))return;const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),r()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});jh.set(n,e)}let em={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return jh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||TE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ws(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function GM(n){em=n(em)}function YM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(kh(this),e,...t);return TE.set(s,e.sort?e.sort():[e]),Ws(s)}:BM().includes(n)?function(...e){return n.apply(kh(this),e),Ws(vE.get(this))}:function(...e){return Ws(n.apply(kh(this),e))}}function JM(n){return typeof n=="function"?YM(n):(n instanceof IDBTransaction&&HM(n),OM(n,zM())?new Proxy(n,em):n)}function Ws(n){if(n instanceof IDBRequest)return FM(n);if(Uh.has(n))return Uh.get(n);const e=JM(n);return e!==n&&(Uh.set(n,e),Pm.set(e,n)),e}const kh=n=>Pm.get(n);function KM(n,e,{blocked:t,upgrade:s,blocking:r,terminated:l}={}){const c=indexedDB.open(n,e),d=Ws(c);return s&&c.addEventListener("upgradeneeded",g=>{s(Ws(c.result),g.oldVersion,g.newVersion,Ws(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),r&&g.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const QM=["get","getKey","getAll","getAllKeys","count"],$M=["put","add","delete","clear"],Lh=new Map;function I0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Lh.get(e))return Lh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,r=$M.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(r||QM.includes(t)))return;const l=async function(c,...d){const g=this.transaction(c,r?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),r&&g.done]))[0]};return Lh.set(e,l),l}GM(n=>({...n,get:(e,t,s)=>I0(e,t)||n.get(e,t,s),has:(e,t)=>!!I0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(WM(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function WM(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const tm="@firebase/app",w0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new _E("@firebase/app"),ZM="@firebase/app-compat",jM="@firebase/analytics-compat",eD="@firebase/analytics",tD="@firebase/app-check-compat",nD="@firebase/app-check",iD="@firebase/auth",sD="@firebase/auth-compat",oD="@firebase/database",rD="@firebase/data-connect",aD="@firebase/database-compat",lD="@firebase/functions",uD="@firebase/functions-compat",cD="@firebase/installations",fD="@firebase/installations-compat",dD="@firebase/messaging",hD="@firebase/messaging-compat",mD="@firebase/performance",pD="@firebase/performance-compat",gD="@firebase/remote-config",yD="@firebase/remote-config-compat",_D="@firebase/storage",vD="@firebase/storage-compat",TD="@firebase/firestore",ED="@firebase/ai",SD="@firebase/firestore-compat",AD="firebase",CD="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="[DEFAULT]",xD={[tm]:"fire-core",[ZM]:"fire-core-compat",[eD]:"fire-analytics",[jM]:"fire-analytics-compat",[nD]:"fire-app-check",[tD]:"fire-app-check-compat",[iD]:"fire-auth",[sD]:"fire-auth-compat",[oD]:"fire-rtdb",[rD]:"fire-data-connect",[aD]:"fire-rtdb-compat",[lD]:"fire-fn",[uD]:"fire-fn-compat",[cD]:"fire-iid",[fD]:"fire-iid-compat",[dD]:"fire-fcm",[hD]:"fire-fcm-compat",[mD]:"fire-perf",[pD]:"fire-perf-compat",[gD]:"fire-rc",[yD]:"fire-rc-compat",[_D]:"fire-gcs",[vD]:"fire-gcs-compat",[TD]:"fire-fst",[SD]:"fire-fst-compat",[ED]:"fire-vertex","fire-js":"fire-js",[AD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=new Map,RD=new Map,im=new Map;function b0(n,e){try{n.container.addComponent(e)}catch(t){as.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function $c(n){const e=n.name;if(im.has(e))return as.debug(`There were multiple attempts to register component ${e}.`),!1;im.set(e,n);for(const t of Qc.values())b0(t,n);for(const t of RD.values())b0(t,n);return!0}function ID(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function wD(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zs=new yE("app","Firebase",bD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new kl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=CD;function EE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:nm,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Zs.create("bad-app-name",{appName:String(r)});if(t||(t=gE()),!t)throw Zs.create("no-options");const l=Qc.get(r);if(l){if(Kc(t,l.options)&&Kc(s,l.config))return l;throw Zs.create("duplicate-app",{appName:r})}const c=new VM(r);for(const g of im.values())c.addComponent(g);const d=new ND(t,s,c);return Qc.set(r,d),d}function DD(n=nm){const e=Qc.get(n);if(!e&&n===nm&&gE())return EE();if(!e)throw Zs.create("no-app",{appName:n});return e}function Wr(n,e,t){let s=xD[n]??n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),l=e.match(/\s|\//);if(r||l){const c=[`Unable to register library "${s}" with version "${e}":`];r&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),as.warn(c.join(" "));return}$c(new kl(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD="firebase-heartbeat-database",VD=1,Ll="firebase-heartbeat-store";let qh=null;function SE(){return qh||(qh=KM(PD,VD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ll)}catch(t){console.warn(t)}}}}).catch(n=>{throw Zs.create("idb-open",{originalErrorMessage:n.message})})),qh}async function UD(n){try{const t=(await SE()).transaction(Ll),s=await t.objectStore(Ll).get(AE(n));return await t.done,s}catch(e){if(e instanceof ua)as.warn(e.message);else{const t=Zs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});as.warn(t.message)}}}async function N0(n,e){try{const s=(await SE()).transaction(Ll,"readwrite");await s.objectStore(Ll).put(e,AE(n)),await s.done}catch(t){if(t instanceof ua)as.warn(t.message);else{const s=Zs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});as.warn(s.message)}}}function AE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=1024,LD=30;class qD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new zD(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=M0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats.length>LD){const c=BD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){as.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=M0(),{heartbeatsToSend:s,unsentEntries:r}=OD(this._heartbeatsCache.heartbeats),l=Jc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return as.warn(t),""}}}function M0(){return new Date().toISOString().substring(0,10)}function OD(n,e=kD){const t=[];let s=n.slice();for(const r of n){const l=t.find(c=>c.agent===r.agent);if(l){if(l.dates.push(r.date),D0(t)>e){l.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),D0(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class zD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RM()?IM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await UD(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return N0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return N0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function D0(n){return Jc(JSON.stringify({version:2,heartbeats:n})).length}function BD(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(n){$c(new kl("platform-logger",e=>new XM(e),"PRIVATE")),$c(new kl("heartbeat",e=>new qD(e),"PRIVATE")),Wr(tm,w0,n),Wr(tm,w0,"esm2020"),Wr("fire-js","")}FD("");var HD="firebase",GD="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wr(HD,GD,"app");var P0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var js,CE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,R){function b(){}b.prototype=R.prototype,P.F=R.prototype,P.prototype=new b,P.prototype.constructor=P,P.D=function(M,D,U){for(var V=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)V[ne-2]=arguments[ne];return R.prototype[D].apply(M,V)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(P,R,b){b||(b=0);const M=Array(16);if(typeof R=="string")for(var D=0;D<16;++D)M[D]=R.charCodeAt(b++)|R.charCodeAt(b++)<<8|R.charCodeAt(b++)<<16|R.charCodeAt(b++)<<24;else for(D=0;D<16;++D)M[D]=R[b++]|R[b++]<<8|R[b++]<<16|R[b++]<<24;R=P.g[0],b=P.g[1],D=P.g[2];let U=P.g[3],V;V=R+(U^b&(D^U))+M[0]+3614090360&4294967295,R=b+(V<<7&4294967295|V>>>25),V=U+(D^R&(b^D))+M[1]+3905402710&4294967295,U=R+(V<<12&4294967295|V>>>20),V=D+(b^U&(R^b))+M[2]+606105819&4294967295,D=U+(V<<17&4294967295|V>>>15),V=b+(R^D&(U^R))+M[3]+3250441966&4294967295,b=D+(V<<22&4294967295|V>>>10),V=R+(U^b&(D^U))+M[4]+4118548399&4294967295,R=b+(V<<7&4294967295|V>>>25),V=U+(D^R&(b^D))+M[5]+1200080426&4294967295,U=R+(V<<12&4294967295|V>>>20),V=D+(b^U&(R^b))+M[6]+2821735955&4294967295,D=U+(V<<17&4294967295|V>>>15),V=b+(R^D&(U^R))+M[7]+4249261313&4294967295,b=D+(V<<22&4294967295|V>>>10),V=R+(U^b&(D^U))+M[8]+1770035416&4294967295,R=b+(V<<7&4294967295|V>>>25),V=U+(D^R&(b^D))+M[9]+2336552879&4294967295,U=R+(V<<12&4294967295|V>>>20),V=D+(b^U&(R^b))+M[10]+4294925233&4294967295,D=U+(V<<17&4294967295|V>>>15),V=b+(R^D&(U^R))+M[11]+2304563134&4294967295,b=D+(V<<22&4294967295|V>>>10),V=R+(U^b&(D^U))+M[12]+1804603682&4294967295,R=b+(V<<7&4294967295|V>>>25),V=U+(D^R&(b^D))+M[13]+4254626195&4294967295,U=R+(V<<12&4294967295|V>>>20),V=D+(b^U&(R^b))+M[14]+2792965006&4294967295,D=U+(V<<17&4294967295|V>>>15),V=b+(R^D&(U^R))+M[15]+1236535329&4294967295,b=D+(V<<22&4294967295|V>>>10),V=R+(D^U&(b^D))+M[1]+4129170786&4294967295,R=b+(V<<5&4294967295|V>>>27),V=U+(b^D&(R^b))+M[6]+3225465664&4294967295,U=R+(V<<9&4294967295|V>>>23),V=D+(R^b&(U^R))+M[11]+643717713&4294967295,D=U+(V<<14&4294967295|V>>>18),V=b+(U^R&(D^U))+M[0]+3921069994&4294967295,b=D+(V<<20&4294967295|V>>>12),V=R+(D^U&(b^D))+M[5]+3593408605&4294967295,R=b+(V<<5&4294967295|V>>>27),V=U+(b^D&(R^b))+M[10]+38016083&4294967295,U=R+(V<<9&4294967295|V>>>23),V=D+(R^b&(U^R))+M[15]+3634488961&4294967295,D=U+(V<<14&4294967295|V>>>18),V=b+(U^R&(D^U))+M[4]+3889429448&4294967295,b=D+(V<<20&4294967295|V>>>12),V=R+(D^U&(b^D))+M[9]+568446438&4294967295,R=b+(V<<5&4294967295|V>>>27),V=U+(b^D&(R^b))+M[14]+3275163606&4294967295,U=R+(V<<9&4294967295|V>>>23),V=D+(R^b&(U^R))+M[3]+4107603335&4294967295,D=U+(V<<14&4294967295|V>>>18),V=b+(U^R&(D^U))+M[8]+1163531501&4294967295,b=D+(V<<20&4294967295|V>>>12),V=R+(D^U&(b^D))+M[13]+2850285829&4294967295,R=b+(V<<5&4294967295|V>>>27),V=U+(b^D&(R^b))+M[2]+4243563512&4294967295,U=R+(V<<9&4294967295|V>>>23),V=D+(R^b&(U^R))+M[7]+1735328473&4294967295,D=U+(V<<14&4294967295|V>>>18),V=b+(U^R&(D^U))+M[12]+2368359562&4294967295,b=D+(V<<20&4294967295|V>>>12),V=R+(b^D^U)+M[5]+4294588738&4294967295,R=b+(V<<4&4294967295|V>>>28),V=U+(R^b^D)+M[8]+2272392833&4294967295,U=R+(V<<11&4294967295|V>>>21),V=D+(U^R^b)+M[11]+1839030562&4294967295,D=U+(V<<16&4294967295|V>>>16),V=b+(D^U^R)+M[14]+4259657740&4294967295,b=D+(V<<23&4294967295|V>>>9),V=R+(b^D^U)+M[1]+2763975236&4294967295,R=b+(V<<4&4294967295|V>>>28),V=U+(R^b^D)+M[4]+1272893353&4294967295,U=R+(V<<11&4294967295|V>>>21),V=D+(U^R^b)+M[7]+4139469664&4294967295,D=U+(V<<16&4294967295|V>>>16),V=b+(D^U^R)+M[10]+3200236656&4294967295,b=D+(V<<23&4294967295|V>>>9),V=R+(b^D^U)+M[13]+681279174&4294967295,R=b+(V<<4&4294967295|V>>>28),V=U+(R^b^D)+M[0]+3936430074&4294967295,U=R+(V<<11&4294967295|V>>>21),V=D+(U^R^b)+M[3]+3572445317&4294967295,D=U+(V<<16&4294967295|V>>>16),V=b+(D^U^R)+M[6]+76029189&4294967295,b=D+(V<<23&4294967295|V>>>9),V=R+(b^D^U)+M[9]+3654602809&4294967295,R=b+(V<<4&4294967295|V>>>28),V=U+(R^b^D)+M[12]+3873151461&4294967295,U=R+(V<<11&4294967295|V>>>21),V=D+(U^R^b)+M[15]+530742520&4294967295,D=U+(V<<16&4294967295|V>>>16),V=b+(D^U^R)+M[2]+3299628645&4294967295,b=D+(V<<23&4294967295|V>>>9),V=R+(D^(b|~U))+M[0]+4096336452&4294967295,R=b+(V<<6&4294967295|V>>>26),V=U+(b^(R|~D))+M[7]+1126891415&4294967295,U=R+(V<<10&4294967295|V>>>22),V=D+(R^(U|~b))+M[14]+2878612391&4294967295,D=U+(V<<15&4294967295|V>>>17),V=b+(U^(D|~R))+M[5]+4237533241&4294967295,b=D+(V<<21&4294967295|V>>>11),V=R+(D^(b|~U))+M[12]+1700485571&4294967295,R=b+(V<<6&4294967295|V>>>26),V=U+(b^(R|~D))+M[3]+2399980690&4294967295,U=R+(V<<10&4294967295|V>>>22),V=D+(R^(U|~b))+M[10]+4293915773&4294967295,D=U+(V<<15&4294967295|V>>>17),V=b+(U^(D|~R))+M[1]+2240044497&4294967295,b=D+(V<<21&4294967295|V>>>11),V=R+(D^(b|~U))+M[8]+1873313359&4294967295,R=b+(V<<6&4294967295|V>>>26),V=U+(b^(R|~D))+M[15]+4264355552&4294967295,U=R+(V<<10&4294967295|V>>>22),V=D+(R^(U|~b))+M[6]+2734768916&4294967295,D=U+(V<<15&4294967295|V>>>17),V=b+(U^(D|~R))+M[13]+1309151649&4294967295,b=D+(V<<21&4294967295|V>>>11),V=R+(D^(b|~U))+M[4]+4149444226&4294967295,R=b+(V<<6&4294967295|V>>>26),V=U+(b^(R|~D))+M[11]+3174756917&4294967295,U=R+(V<<10&4294967295|V>>>22),V=D+(R^(U|~b))+M[2]+718787259&4294967295,D=U+(V<<15&4294967295|V>>>17),V=b+(U^(D|~R))+M[9]+3951481745&4294967295,P.g[0]=P.g[0]+R&4294967295,P.g[1]=P.g[1]+(D+(V<<21&4294967295|V>>>11))&4294967295,P.g[2]=P.g[2]+D&4294967295,P.g[3]=P.g[3]+U&4294967295}s.prototype.v=function(P,R){R===void 0&&(R=P.length);const b=R-this.blockSize,M=this.C;let D=this.h,U=0;for(;U<R;){if(D==0)for(;U<=b;)r(this,P,U),U+=this.blockSize;if(typeof P=="string"){for(;U<R;)if(M[D++]=P.charCodeAt(U++),D==this.blockSize){r(this,M),D=0;break}}else for(;U<R;)if(M[D++]=P[U++],D==this.blockSize){r(this,M),D=0;break}}this.h=D,this.o+=R},s.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var R=1;R<P.length-8;++R)P[R]=0;R=this.o*8;for(var b=P.length-8;b<P.length;++b)P[b]=R&255,R/=256;for(this.v(P),P=Array(16),R=0,b=0;b<4;++b)for(let M=0;M<32;M+=8)P[R++]=this.g[b]>>>M&255;return P};function l(P,R){var b=d;return Object.prototype.hasOwnProperty.call(b,P)?b[P]:b[P]=R(P)}function c(P,R){this.h=R;const b=[];let M=!0;for(let D=P.length-1;D>=0;D--){const U=P[D]|0;M&&U==R||(b[D]=U,M=!1)}this.g=b}var d={};function g(P){return-128<=P&&P<128?l(P,function(R){return new c([R|0],R<0?-1:0)}):new c([P|0],P<0?-1:0)}function p(P){if(isNaN(P)||!isFinite(P))return T;if(P<0)return H(p(-P));const R=[];let b=1;for(let M=0;P>=b;M++)R[M]=P/b|0,b*=4294967296;return new c(R,0)}function v(P,R){if(P.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(P.charAt(0)=="-")return H(v(P.substring(1),R));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=p(Math.pow(R,8));let M=T;for(let U=0;U<P.length;U+=8){var D=Math.min(8,P.length-U);const V=parseInt(P.substring(U,U+D),R);D<8?(D=p(Math.pow(R,D)),M=M.j(D).add(p(V))):(M=M.j(b),M=M.add(p(V)))}return M}var T=g(0),S=g(1),I=g(16777216);n=c.prototype,n.m=function(){if(z(this))return-H(this).m();let P=0,R=1;for(let b=0;b<this.g.length;b++){const M=this.i(b);P+=(M>=0?M:4294967296+M)*R,R*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(L(this))return"0";if(z(this))return"-"+H(this).toString(P);const R=p(Math.pow(P,6));var b=this;let M="";for(;;){const D=le(b,R).g;b=$(b,D.j(R));let U=((b.g.length>0?b.g[0]:b.h)>>>0).toString(P);if(b=D,L(b))return U+M;for(;U.length<6;)U="0"+U;M=U+M}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function L(P){if(P.h!=0)return!1;for(let R=0;R<P.g.length;R++)if(P.g[R]!=0)return!1;return!0}function z(P){return P.h==-1}n.l=function(P){return P=$(this,P),z(P)?-1:L(P)?0:1};function H(P){const R=P.g.length,b=[];for(let M=0;M<R;M++)b[M]=~P.g[M];return new c(b,~P.h).add(S)}n.abs=function(){return z(this)?H(this):this},n.add=function(P){const R=Math.max(this.g.length,P.g.length),b=[];let M=0;for(let D=0;D<=R;D++){let U=M+(this.i(D)&65535)+(P.i(D)&65535),V=(U>>>16)+(this.i(D)>>>16)+(P.i(D)>>>16);M=V>>>16,U&=65535,V&=65535,b[D]=V<<16|U}return new c(b,b[b.length-1]&-2147483648?-1:0)};function $(P,R){return P.add(H(R))}n.j=function(P){if(L(this)||L(P))return T;if(z(this))return z(P)?H(this).j(H(P)):H(H(this).j(P));if(z(P))return H(this.j(H(P)));if(this.l(I)<0&&P.l(I)<0)return p(this.m()*P.m());const R=this.g.length+P.g.length,b=[];for(var M=0;M<2*R;M++)b[M]=0;for(M=0;M<this.g.length;M++)for(let D=0;D<P.g.length;D++){const U=this.i(M)>>>16,V=this.i(M)&65535,ne=P.i(D)>>>16,_e=P.i(D)&65535;b[2*M+2*D]+=V*_e,te(b,2*M+2*D),b[2*M+2*D+1]+=U*_e,te(b,2*M+2*D+1),b[2*M+2*D+1]+=V*ne,te(b,2*M+2*D+1),b[2*M+2*D+2]+=U*ne,te(b,2*M+2*D+2)}for(P=0;P<R;P++)b[P]=b[2*P+1]<<16|b[2*P];for(P=R;P<2*R;P++)b[P]=0;return new c(b,0)};function te(P,R){for(;(P[R]&65535)!=P[R];)P[R+1]+=P[R]>>>16,P[R]&=65535,R++}function j(P,R){this.g=P,this.h=R}function le(P,R){if(L(R))throw Error("division by zero");if(L(P))return new j(T,T);if(z(P))return R=le(H(P),R),new j(H(R.g),H(R.h));if(z(R))return R=le(P,H(R)),new j(H(R.g),R.h);if(P.g.length>30){if(z(P)||z(R))throw Error("slowDivide_ only works with positive integers.");for(var b=S,M=R;M.l(P)<=0;)b=fe(b),M=fe(M);var D=ae(b,1),U=ae(M,1);for(M=ae(M,2),b=ae(b,2);!L(M);){var V=U.add(M);V.l(P)<=0&&(D=D.add(b),U=V),M=ae(M,1),b=ae(b,1)}return R=$(P,D.j(R)),new j(D,R)}for(D=T;P.l(R)>=0;){for(b=Math.max(1,Math.floor(P.m()/R.m())),M=Math.ceil(Math.log(b)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),U=p(b),V=U.j(R);z(V)||V.l(P)>0;)b-=M,U=p(b),V=U.j(R);L(U)&&(U=S),D=D.add(U),P=$(P,V)}return new j(D,P)}n.B=function(P){return le(this,P).h},n.and=function(P){const R=Math.max(this.g.length,P.g.length),b=[];for(let M=0;M<R;M++)b[M]=this.i(M)&P.i(M);return new c(b,this.h&P.h)},n.or=function(P){const R=Math.max(this.g.length,P.g.length),b=[];for(let M=0;M<R;M++)b[M]=this.i(M)|P.i(M);return new c(b,this.h|P.h)},n.xor=function(P){const R=Math.max(this.g.length,P.g.length),b=[];for(let M=0;M<R;M++)b[M]=this.i(M)^P.i(M);return new c(b,this.h^P.h)};function fe(P){const R=P.g.length+1,b=[];for(let M=0;M<R;M++)b[M]=P.i(M)<<1|P.i(M-1)>>>31;return new c(b,P.h)}function ae(P,R){const b=R>>5;R%=32;const M=P.g.length-b,D=[];for(let U=0;U<M;U++)D[U]=R>0?P.i(U+b)>>>R|P.i(U+b+1)<<32-R:P.i(U+b);return new c(D,P.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,CE=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=v,js=c}).apply(typeof P0<"u"?P0:typeof self<"u"?self:typeof window<"u"?window:{});var bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xE,Rl,RE,kc,sm,IE,wE,bE;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof bc=="object"&&bc];for(var E=0;E<m.length;++E){var x=m[E];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var s=t(this);function r(m,E){if(E)e:{var x=s;m=m.split(".");for(var N=0;N<m.length-1;N++){var G=m[N];if(!(G in x))break e;x=x[G]}m=m[m.length-1],N=x[m],E=E(N),E!=N&&E!=null&&e(x,m,{configurable:!0,writable:!0,value:E})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(E){var x=[],N;for(N in E)Object.prototype.hasOwnProperty.call(E,N)&&x.push([N,E[N]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function g(m,E,x){return m.call.apply(m.bind,arguments)}function p(m,E,x){return p=g,p.apply(null,arguments)}function v(m,E){var x=Array.prototype.slice.call(arguments,1);return function(){var N=x.slice();return N.push.apply(N,arguments),m.apply(this,N)}}function T(m,E){function x(){}x.prototype=E.prototype,m.Z=E.prototype,m.prototype=new x,m.prototype.constructor=m,m.Ob=function(N,G,Q){for(var ue=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)ue[Me-2]=arguments[Me];return E.prototype[G].apply(N,ue)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function I(m){const E=m.length;if(E>0){const x=Array(E);for(let N=0;N<E;N++)x[N]=m[N];return x}return[]}function L(m,E){for(let N=1;N<arguments.length;N++){const G=arguments[N];var x=typeof G;if(x=x!="object"?x:G?Array.isArray(G)?"array":x:"null",x=="array"||x=="object"&&typeof G.length=="number"){x=m.length||0;const Q=G.length||0;m.length=x+Q;for(let ue=0;ue<Q;ue++)m[x+ue]=G[ue]}else m.push(G)}}class z{constructor(E,x){this.i=E,this.j=x,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function H(m){c.setTimeout(()=>{throw m},0)}function $(){var m=P;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class te{constructor(){this.h=this.g=null}add(E,x){const N=j.get();N.set(E,x),this.h?this.h.next=N:this.g=N,this.h=N}}var j=new z(()=>new le,m=>m.reset());class le{constructor(){this.next=this.g=this.h=null}set(E,x){this.h=E,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,ae=!1,P=new te,R=()=>{const m=Promise.resolve(void 0);fe=()=>{m.then(b)}};function b(){for(var m;m=$();){try{m.h.call(m.g)}catch(x){H(x)}var E=j;E.j(m),E.h<100&&(E.h++,m.next=E.g,E.g=m)}ae=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const x=()=>{};c.addEventListener("test",x,E),c.removeEventListener("test",x,E)}catch{}return m})();function V(m){return/^[\s\xa0]*$/.test(m)}function ne(m,E){D.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,E)}T(ne,D),ne.prototype.init=function(m,E){const x=this.type=m.type,N=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget,E||(x=="mouseover"?E=m.fromElement:x=="mouseout"&&(E=m.toElement)),this.relatedTarget=E,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&ne.Z.h.call(this)},ne.prototype.h=function(){ne.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var _e="closure_listenable_"+(Math.random()*1e6|0),B=0;function Z(m,E,x,N,G){this.listener=m,this.proxy=null,this.src=E,this.type=x,this.capture=!!N,this.ha=G,this.key=++B,this.da=this.fa=!1}function ce(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Re(m,E,x){for(const N in m)E.call(x,m[N],N,m)}function Xe(m,E){for(const x in m)E.call(void 0,m[x],x,m)}function O(m){const E={};for(const x in m)E[x]=m[x];return E}const oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(m,E){let x,N;for(let G=1;G<arguments.length;G++){N=arguments[G];for(x in N)m[x]=N[x];for(let Q=0;Q<oe.length;Q++)x=oe[Q],Object.prototype.hasOwnProperty.call(N,x)&&(m[x]=N[x])}}function ve(m){this.src=m,this.g={},this.h=0}ve.prototype.add=function(m,E,x,N,G){const Q=m.toString();m=this.g[Q],m||(m=this.g[Q]=[],this.h++);const ue=Pe(m,E,N,G);return ue>-1?(E=m[ue],x||(E.fa=!1)):(E=new Z(E,this.src,Q,!!N,G),E.fa=x,m.push(E)),E};function Ie(m,E){const x=E.type;if(x in m.g){var N=m.g[x],G=Array.prototype.indexOf.call(N,E,void 0),Q;(Q=G>=0)&&Array.prototype.splice.call(N,G,1),Q&&(ce(E),m.g[x].length==0&&(delete m.g[x],m.h--))}}function Pe(m,E,x,N){for(let G=0;G<m.length;++G){const Q=m[G];if(!Q.da&&Q.listener==E&&Q.capture==!!x&&Q.ha==N)return G}return-1}var He="closure_lm_"+(Math.random()*1e6|0),Lt={};function ht(m,E,x,N,G){if(Array.isArray(E)){for(let Q=0;Q<E.length;Q++)ht(m,E[Q],x,N,G);return null}return x=_a(x),m&&m[_e]?m.J(E,x,d(N)?!!N.capture:!1,G):fo(m,E,x,!1,N,G)}function fo(m,E,x,N,G,Q){if(!E)throw Error("Invalid event type");const ue=d(G)?!!G.capture:!!G;let Me=ho(m);if(Me||(m[He]=Me=new ve(m)),x=Me.add(E,x,N,ue,Q),x.proxy)return x;if(N=Zo(),x.proxy=N,N.src=m,N.listener=x,m.addEventListener)U||(G=ue),G===void 0&&(G=!1),m.addEventListener(E.toString(),N,G);else if(m.attachEvent)m.attachEvent(fi(E.toString()),N);else if(m.addListener&&m.removeListener)m.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Zo(){function m(x){return E.call(m.src,m.listener,x)}const E=ga;return m}function jo(m,E,x,N,G){if(Array.isArray(E))for(var Q=0;Q<E.length;Q++)jo(m,E[Q],x,N,G);else N=d(N)?!!N.capture:!!N,x=_a(x),m&&m[_e]?(m=m.i,Q=String(E).toString(),Q in m.g&&(E=m.g[Q],x=Pe(E,x,N,G),x>-1&&(ce(E[x]),Array.prototype.splice.call(E,x,1),E.length==0&&(delete m.g[Q],m.h--)))):m&&(m=ho(m))&&(E=m.g[E.toString()],m=-1,E&&(m=Pe(E,x,N,G)),(x=m>-1?E[m]:null)&&er(x))}function er(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[_e])Ie(E.i,m);else{var x=m.type,N=m.proxy;E.removeEventListener?E.removeEventListener(x,N,m.capture):E.detachEvent?E.detachEvent(fi(x),N):E.addListener&&E.removeListener&&E.removeListener(N),(x=ho(E))?(Ie(x,m),x.h==0&&(x.src=null,E[He]=null)):ce(m)}}}function fi(m){return m in Lt?Lt[m]:Lt[m]="on"+m}function ga(m,E){if(m.da)m=!0;else{E=new ne(E,this);const x=m.listener,N=m.ha||m.src;m.fa&&er(m),m=x.call(N,E)}return m}function ho(m){return m=m[He],m instanceof ve?m:null}var ya="__closure_events_fn_"+(Math.random()*1e9>>>0);function _a(m){return typeof m=="function"?m:(m[ya]||(m[ya]=function(E){return m.handleEvent(E)}),m[ya])}function xt(){M.call(this),this.i=new ve(this),this.M=this,this.G=null}T(xt,M),xt.prototype[_e]=!0,xt.prototype.removeEventListener=function(m,E,x,N){jo(this,m,E,x,N)};function qt(m,E){var x,N=m.G;if(N)for(x=[];N;N=N.G)x.push(N);if(m=m.M,N=E.type||E,typeof E=="string")E=new D(E,m);else if(E instanceof D)E.target=E.target||m;else{var G=E;E=new D(N,m),he(E,G)}G=!0;let Q,ue;if(x)for(ue=x.length-1;ue>=0;ue--)Q=E.g=x[ue],G=hs(Q,N,!0,E)&&G;if(Q=E.g=m,G=hs(Q,N,!0,E)&&G,G=hs(Q,N,!1,E)&&G,x)for(ue=0;ue<x.length;ue++)Q=E.g=x[ue],G=hs(Q,N,!1,E)&&G}xt.prototype.N=function(){if(xt.Z.N.call(this),this.i){var m=this.i;for(const E in m.g){const x=m.g[E];for(let N=0;N<x.length;N++)ce(x[N]);delete m.g[E],m.h--}}this.G=null},xt.prototype.J=function(m,E,x,N){return this.i.add(String(m),E,!1,x,N)},xt.prototype.K=function(m,E,x,N){return this.i.add(String(m),E,!0,x,N)};function hs(m,E,x,N){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();let G=!0;for(let Q=0;Q<E.length;++Q){const ue=E[Q];if(ue&&!ue.da&&ue.capture==x){const Me=ue.listener,Tt=ue.ha||ue.src;ue.fa&&Ie(m.i,ue),G=Me.call(Tt,N)!==!1&&G}}return G&&!N.defaultPrevented}function Mf(m,E){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=p(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:c.setTimeout(m,E||0)}function eu(m){m.g=Mf(()=>{m.g=null,m.i&&(m.i=!1,eu(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class ln extends M{constructor(E,x){super(),this.m=E,this.l=x,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:eu(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mo(m){M.call(this),this.h=m,this.g={}}T(mo,M);var va=[];function Ta(m){Re(m.g,function(E,x){this.g.hasOwnProperty(x)&&er(E)},m),m.g={}}mo.prototype.N=function(){mo.Z.N.call(this),Ta(this)},mo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ms=c.JSON.stringify,Df=c.JSON.parse,tu=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function nu(){}function iu(){}var Kn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yt(){D.call(this,"d")}T(Yt,D);function Nn(){D.call(this,"c")}T(Nn,D);var vt={},su=null;function tr(){return su=su||new xt}vt.Ia="serverreachability";function ou(m){D.call(this,vt.Ia,m)}T(ou,D);function di(m){const E=tr();qt(E,new ou(E))}vt.STAT_EVENT="statevent";function po(m,E){D.call(this,vt.STAT_EVENT,m),this.stat=E}T(po,D);function Rt(m){const E=tr();qt(E,new po(E,m))}vt.Ja="timingevent";function hi(m,E){D.call(this,vt.Ja,m),this.size=E}T(hi,D);function mi(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},E)}function Qn(){this.g=!0}Qn.prototype.ua=function(){this.g=!1};function Pf(m,E,x,N,G,Q){m.info(function(){if(m.g)if(Q){var ue="",Me=Q.split("&");for(let We=0;We<Me.length;We++){var Tt=Me[We].split("=");if(Tt.length>1){const mt=Tt[0];Tt=Tt[1];const Vn=mt.split("_");ue=Vn.length>=2&&Vn[1]=="type"?ue+(mt+"="+Tt+"&"):ue+(mt+"=redacted&")}}}else ue=null;else ue=Q;return"XMLHTTP REQ ("+N+") [attempt "+G+"]: "+E+`
`+x+`
`+ue})}function ru(m,E,x,N,G,Q,ue){m.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+G+"]: "+E+`
`+x+`
`+Q+" "+ue})}function pi(m,E,x,N){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+Vf(m,x)+(N?" "+N:"")})}function go(m,E){m.info(function(){return"TIMEOUT: "+E})}Qn.prototype.info=function(){};function Vf(m,E){if(!m.g)return E;if(!E)return null;try{const Q=JSON.parse(E);if(Q){for(m=0;m<Q.length;m++)if(Array.isArray(Q[m])){var x=Q[m];if(!(x.length<2)){var N=x[1];if(Array.isArray(N)&&!(N.length<1)){var G=N[0];if(G!="noop"&&G!="stop"&&G!="close")for(let ue=1;ue<N.length;ue++)N[ue]=""}}}}return ms(Q)}catch{return E}}var yo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ea={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Sa;function _o(){}T(_o,nu),_o.prototype.g=function(){return new XMLHttpRequest},Sa=new _o;function Oi(m){return encodeURIComponent(String(m))}function au(m){var E=1;m=m.split(":");const x=[];for(;E>0&&m.length;)x.push(m.shift()),E--;return m.length&&x.push(m.join(":")),x}function $n(m,E,x,N){this.j=m,this.i=E,this.l=x,this.S=N||1,this.V=new mo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Xn}function Xn(){this.i=null,this.g="",this.h=!1}var It={},Bt={};function gi(m,E,x){m.M=1,m.A=vo(bt(E)),m.u=x,m.R=!0,nr(m,null)}function nr(m,E){m.F=Date.now(),yi(m),m.B=bt(m.A);var x=m.B,N=m.S;Array.isArray(N)||(N=[String(N)]),rr(x.i,"t",N),m.C=0,x=m.j.L,m.h=new Xn,m.g=Su(m.j,x?E:null,!m.u),m.P>0&&(m.O=new ln(p(m.Y,m,m.g),m.P)),E=m.V,x=m.g,N=m.ba;var G="readystatechange";Array.isArray(G)||(G&&(va[0]=G.toString()),G=va);for(let Q=0;Q<G.length;Q++){const ue=ht(x,G[Q],N||E.handleEvent,!1,E.h||E);if(!ue)break;E.g[ue.key]=ue}E=m.J?O(m.J):{},m.u?(m.v||(m.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,E)):(m.v="GET",m.g.ea(m.B,m.v,null,E)),di(),Pf(m.i,m.v,m.B,m.l,m.S,m.u)}$n.prototype.ba=function(m){m=m.target;const E=this.O;E&&jn(m)==3?E.j():this.Y(m)},$n.prototype.Y=function(m){try{if(m==this.g)e:{const Me=jn(this.g),Tt=this.g.ya(),We=this.g.ca();if(!(Me<3)&&(Me!=3||this.g&&(this.h.h||this.g.la()||Jt(this.g)))){this.K||Me!=4||Tt==7||(Tt==8||We<=0?di(3):di(2)),_i(this);var E=this.g.ca();this.X=E;var x=Uf(this);if(this.o=E==200,ru(this.i,this.v,this.B,this.l,this.S,Me,E),this.o){if(this.U&&!this.L){t:{if(this.g){var N,G=this.g;if((N=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(N)){var Q=N;break t}}Q=null}if(m=Q)pi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,vi(this,m);else{this.o=!1,this.m=3,Rt(12),Tn(this),Mn(this);break e}}if(this.R){m=!0;let mt;for(;!this.K&&this.C<x.length;)if(mt=uu(this,x),mt==Bt){Me==4&&(this.m=4,Rt(14),m=!1),pi(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==It){this.m=4,Rt(15),pi(this.i,this.l,x,"[Invalid Chunk]"),m=!1;break}else pi(this.i,this.l,mt,null),vi(this,mt);if(lu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||x.length!=0||this.h.h||(this.m=1,Rt(16),m=!1),this.o=this.o&&m,!m)pi(this.i,this.l,x,"[Invalid Chunked Response]"),Tn(this),Mn(this);else if(x.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),La(ue),ue.P=!0,Rt(11))}}else pi(this.i,this.l,x,null),vi(this,x);Me==4&&Tn(this),this.o&&!this.K&&(Me==4?_u(this.j,this):(this.o=!1,yi(this)))}else Bi(this.g),E==400&&x.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),Tn(this),Mn(this)}}}catch{}finally{}};function Uf(m){if(!lu(m))return m.g.la();const E=Jt(m.g);if(E==="")return"";let x="";const N=E.length,G=jn(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Tn(m),Mn(m),"";m.h.i=new c.TextDecoder}for(let Q=0;Q<N;Q++)m.h.h=!0,x+=m.h.i.decode(E[Q],{stream:!(G&&Q==N-1)});return E.length=0,m.h.g+=x,m.C=0,m.h.g}function lu(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function uu(m,E){var x=m.C,N=E.indexOf(`
`,x);return N==-1?Bt:(x=Number(E.substring(x,N)),isNaN(x)?It:(N+=1,N+x>E.length?Bt:(E=E.slice(N,N+x),m.C=N+x,E)))}$n.prototype.cancel=function(){this.K=!0,Tn(this)};function yi(m){m.T=Date.now()+m.H,ir(m,m.H)}function ir(m,E){if(m.D!=null)throw Error("WatchDog timer not null");m.D=mi(p(m.aa,m),E)}function _i(m){m.D&&(c.clearTimeout(m.D),m.D=null)}$n.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(go(this.i,this.B),this.M!=2&&(di(),Rt(17)),Tn(this),this.m=2,Mn(this)):ir(this,this.T-m)};function Mn(m){m.j.I==0||m.K||_u(m.j,m)}function Tn(m){_i(m);var E=m.O;E&&typeof E.dispose=="function"&&E.dispose(),m.O=null,Ta(m.V),m.g&&(E=m.g,m.g=null,E.abort(),E.dispose())}function vi(m,E){try{var x=m.j;if(x.I!=0&&(x.g==m||Ei(x.h,m))){if(!m.L&&Ei(x.h,m)&&x.I==3){try{var N=x.Ba.g.parse(E)}catch{N=null}if(Array.isArray(N)&&N.length==3){var G=N;if(G[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<m.F)fr(x),Ss(x);else break e;Ro(x),Rt(18)}}else x.xa=G[1],0<x.xa-x.K&&G[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=mi(p(x.Va,x),6e3));Ti(x.h)<=1&&x.ta&&(x.ta=void 0)}else Ii(x,11)}else if((m.L||x.g==m)&&fr(x),!V(E))for(G=x.Ba.g.parse(E),E=0;E<G.length;E++){let We=G[E];const mt=We[0];if(!(mt<=x.K))if(x.K=mt,We=We[1],x.I==2)if(We[0]=="c"){x.M=We[1],x.ba=We[2];const Vn=We[3];Vn!=null&&(x.ka=Vn,x.j.info("VER="+x.ka));const wi=We[4];wi!=null&&(x.za=wi,x.j.info("SVER="+x.za));const ei=We[5];ei!=null&&typeof ei=="number"&&ei>0&&(N=1.5*ei,x.O=N,x.j.info("backChannelRequestTimeoutMs_="+N)),N=x;const ti=m.g;if(ti){const Io=ti.g?ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Io){var Q=N.h;Q.g||Io.indexOf("spdy")==-1&&Io.indexOf("quic")==-1&&Io.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(xa(Q,Q.h),Q.h=null))}if(N.G){const dr=ti.g?ti.g.getResponseHeader("X-HTTP-Session-Id"):null;dr&&(N.wa=dr,et(N.J,N.G,dr))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-m.F,x.j.info("Handshake RTT: "+x.T+"ms")),N=x;var ue=m;if(N.na=Eu(N,N.L?N.ba:null,N.W),ue.L){Ra(N.h,ue);var Me=ue,Tt=N.O;Tt&&(Me.H=Tt),Me.D&&(_i(Me),yi(Me)),N.g=ue}else gu(N);x.i.length>0&&Ri(x)}else We[0]!="stop"&&We[0]!="close"||Ii(x,7);else x.I==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?Ii(x,7):Ua(x):We[0]!="noop"&&x.l&&x.l.qa(We),x.A=0)}}di(4)}catch{}}var wt=class{constructor(m,E){this.g=m,this.map=E}};function Aa(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ca(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Ti(m){return m.h?1:m.g?m.g.size:0}function Ei(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function xa(m,E){m.g?m.g.add(E):m.h=E}function Ra(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}Aa.prototype.cancel=function(){if(this.i=Ia(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Ia(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const x of m.g.values())E=E.concat(x.G);return E}return I(m.i)}var cu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sr(m,E){if(m){m=m.split("&");for(let x=0;x<m.length;x++){const N=m[x].indexOf("=");let G,Q=null;N>=0?(G=m[x].substring(0,N),Q=m[x].substring(N+1)):G=m[x],E(G,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function En(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;m instanceof En?(this.l=m.l,Ft(this,m.j),this.o=m.o,this.g=m.g,ps(this,m.u),this.h=m.h,wa(this,mu(m.i)),this.m=m.m):m&&(E=String(m).match(cu))?(this.l=!1,Ft(this,E[1]||"",!0),this.o=Si(E[2]||""),this.g=Si(E[3]||"",!0),ps(this,E[4]),this.h=Si(E[5]||"",!0),wa(this,E[6]||"",!0),this.m=Si(E[7]||"")):(this.l=!1,this.i=new ys(null,this.l))}En.prototype.toString=function(){const m=[];var E=this.j;E&&m.push(To(E,or,!0),":");var x=this.g;return(x||E=="file")&&(m.push("//"),(E=this.o)&&m.push(To(E,or,!0),"@"),m.push(Oi(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&m.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&m.push("/"),m.push(To(x,x.charAt(0)=="/"?ba:fu,!0))),(x=this.i.toString())&&m.push("?",x),(x=this.m)&&m.push("#",To(x,du)),m.join("")},En.prototype.resolve=function(m){const E=bt(this);let x=!!m.j;x?Ft(E,m.j):x=!!m.o,x?E.o=m.o:x=!!m.g,x?E.g=m.g:x=m.u!=null;var N=m.h;if(x)ps(E,m.u);else if(x=!!m.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var G=E.h.lastIndexOf("/");G!=-1&&(N=E.h.slice(0,G+1)+N)}if(G=N,G==".."||G==".")N="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){N=G.lastIndexOf("/",0)==0,G=G.split("/");const Q=[];for(let ue=0;ue<G.length;){const Me=G[ue++];Me=="."?N&&ue==G.length&&Q.push(""):Me==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),N&&ue==G.length&&Q.push("")):(Q.push(Me),N=!0)}N=Q.join("/")}else N=G}return x?E.h=N:x=m.i.toString()!=="",x?wa(E,mu(m.i)):x=!!m.m,x&&(E.m=m.m),E};function bt(m){return new En(m)}function Ft(m,E,x){m.j=x?Si(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function ps(m,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);m.u=E}else m.u=null}function wa(m,E,x){E instanceof ys?(m.i=E,ar(m.i,m.l)):(x||(E=To(E,gs)),m.i=new ys(E,m.l))}function et(m,E,x){m.i.set(E,x)}function vo(m){return et(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Si(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function To(m,E,x){return typeof m=="string"?(m=encodeURI(m).replace(E,fn),x&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function fn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var or=/[#\/\?@]/g,fu=/[#\?:]/g,ba=/[#\?]/g,gs=/[#\?@]/g,du=/#/g;function ys(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function dn(m){m.g||(m.g=new Map,m.h=0,m.i&&sr(m.i,function(E,x){m.add(decodeURIComponent(E.replace(/\+/g," ")),x)}))}n=ys.prototype,n.add=function(m,E){dn(this),this.i=null,m=_s(this,m);let x=this.g.get(m);return x||this.g.set(m,x=[]),x.push(E),this.h+=1,this};function hu(m,E){dn(m),E=_s(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function Na(m,E){return dn(m),E=_s(m,E),m.g.has(E)}n.forEach=function(m,E){dn(this),this.g.forEach(function(x,N){x.forEach(function(G){m.call(E,G,N,this)},this)},this)};function Ma(m,E){dn(m);let x=[];if(typeof E=="string")Na(m,E)&&(x=x.concat(m.g.get(_s(m,E))));else for(m=Array.from(m.g.values()),E=0;E<m.length;E++)x=x.concat(m[E]);return x}n.set=function(m,E){return dn(this),this.i=null,m=_s(this,m),Na(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},n.get=function(m,E){return m?(m=Ma(this,m),m.length>0?String(m[0]):E):E};function rr(m,E,x){hu(m,E),x.length>0&&(m.i=null,m.g.set(_s(m,E),I(x)),m.h+=x.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(let N=0;N<E.length;N++){var x=E[N];const G=Oi(x);x=Ma(this,x);for(let Q=0;Q<x.length;Q++){let ue=G;x[Q]!==""&&(ue+="="+Oi(x[Q])),m.push(ue)}}return this.i=m.join("&")};function mu(m){const E=new ys;return E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),E}function _s(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function ar(m,E){E&&!m.j&&(dn(m),m.i=null,m.g.forEach(function(x,N){const G=N.toLowerCase();N!=G&&(hu(this,N),rr(this,G,x))},m)),m.j=E}function Wn(m,E){const x=new Qn;if(c.Image){const N=new Image;N.onload=v(Dn,x,"TestLoadImage: loaded",!0,E,N),N.onerror=v(Dn,x,"TestLoadImage: error",!1,E,N),N.onabort=v(Dn,x,"TestLoadImage: abort",!1,E,N),N.ontimeout=v(Dn,x,"TestLoadImage: timeout",!1,E,N),c.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=m}else E(!1)}function Da(m,E){const x=new Qn,N=new AbortController,G=setTimeout(()=>{N.abort(),Dn(x,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:N.signal}).then(Q=>{clearTimeout(G),Q.ok?Dn(x,"TestPingServer: ok",!0,E):Dn(x,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(G),Dn(x,"TestPingServer: error",!1,E)})}function Dn(m,E,x,N,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),N(x)}catch{}}function vs(){this.g=new tu}function Ai(m){this.i=m.Sb||null,this.h=m.ab||!1}T(Ai,nu),Ai.prototype.g=function(){return new Eo(this.i,this.h)};function Eo(m,E){xt.call(this),this.H=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Eo,xt),n=Eo.prototype,n.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=E,this.readyState=1,Zn(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(E.body=m),(this.H||c).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ts(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Zn(this)),this.g&&(this.readyState=3,Zn(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;lr(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function lr(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?Ts(this):Zn(this),this.readyState==3&&lr(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,Ts(this))},n.Na=function(m){this.g&&(this.response=m,Ts(this))},n.ga=function(){this.g&&Ts(this)};function Ts(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Zn(m)}n.setRequestHeader=function(m,E){this.A.append(m,E)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var x=E.next();!x.done;)x=x.value,m.push(x[0]+": "+x[1]),x=E.next();return m.join(`\r
`)};function Zn(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Eo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Pn(m){let E="";return Re(m,function(x,N){E+=N,E+=":",E+=x,E+=`\r
`}),E}function So(m,E,x){e:{for(N in x){var N=!1;break e}N=!0}N||(x=Pn(x),typeof m=="string"?x!=null&&Oi(x):et(m,E,x))}function it(m){xt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(it,xt);var Ci=/^https?$/i,Pa=["POST","PUT"];n=it.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,E,x,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Sa.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(Q){Ao(this,Q);return}if(m=x||"",x=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var G in N)x.set(G,N[G]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const Q of N.keys())x.set(Q,N.get(Q));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(x.keys()).find(Q=>Q.toLowerCase()=="content-type"),G=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(Pa,E,void 0)>=0)||N||G||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ue]of x)this.g.setRequestHeader(Q,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Q){Ao(this,Q)}};function Ao(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.o=5,Va(m),zi(m)}function Va(m){m.A||(m.A=!0,qt(m,"complete"),qt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,qt(this,"complete"),qt(this,"abort"),zi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zi(this,!0)),it.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Co(this):this.Xa())},n.Xa=function(){Co(this)};function Co(m){if(m.h&&typeof l<"u"){if(m.v&&jn(m)==4)setTimeout(m.Ca.bind(m),0);else if(qt(m,"readystatechange"),jn(m)==4){m.h=!1;try{const Q=m.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var x;if(!(x=E)){var N;if(N=Q===0){let ue=String(m.D).match(cu)[1]||null;!ue&&c.self&&c.self.location&&(ue=c.self.location.protocol.slice(0,-1)),N=!Ci.test(ue?ue.toLowerCase():"")}x=N}if(x)qt(m,"complete"),qt(m,"success");else{m.o=6;try{var G=jn(m)>2?m.g.statusText:""}catch{G=""}m.l=G+" ["+m.ca()+"]",Va(m)}}finally{zi(m)}}}}function zi(m,E){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const x=m.g;m.g=null,E||qt(m,"ready");try{x.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function jn(m){return m.g?m.g.readyState:0}n.ca=function(){try{return jn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),Df(E)}};function Jt(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Bi(m){const E={};m=(m.g&&jn(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<m.length;N++){if(V(m[N]))continue;var x=au(m[N]);const G=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const Q=E[G]||[];E[G]=Q,Q.push(x)}Xe(E,function(N){return N.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xi(m,E,x){return x&&x.internalChannelParams&&x.internalChannelParams[m]||E}function Es(m){this.za=0,this.i=[],this.j=new Qn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xi("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xi("baseRetryDelayMs",5e3,m),this.Za=xi("retryDelaySeedMs",1e4,m),this.Ta=xi("forwardChannelMaxRetries",2,m),this.va=xi("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Aa(m&&m.concurrentRequestLimit),this.Ba=new vs,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Es.prototype,n.ka=8,n.I=1,n.connect=function(m,E,x,N){Rt(0),this.W=m,this.H=E||{},x&&N!==void 0&&(this.H.OSID=x,this.H.OAID=N),this.F=this.X,this.J=Eu(this,null,this.W),Ri(this)};function Ua(m){if(ur(m),m.I==3){var E=m.V++,x=bt(m.J);if(et(x,"SID",m.M),et(x,"RID",E),et(x,"TYPE","terminate"),xo(m,x),E=new $n(m,m.j,E),E.M=2,E.A=vo(bt(x)),x=!1,c.navigator&&c.navigator.sendBeacon)try{x=c.navigator.sendBeacon(E.A.toString(),"")}catch{}!x&&c.Image&&(new Image().src=E.A,x=!0),x||(E.g=Su(E.j,null),E.g.ea(E.A)),E.F=Date.now(),yi(E)}Tu(m)}function Ss(m){m.g&&(La(m),m.g.cancel(),m.g=null)}function ur(m){Ss(m),m.v&&(c.clearTimeout(m.v),m.v=null),fr(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function Ri(m){if(!Ca(m.h)&&!m.m){m.m=!0;var E=m.Ea;fe||R(),ae||(fe(),ae=!0),P.add(E,m),m.D=0}}function cr(m,E){return Ti(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=E.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=mi(p(m.Ea,m,E),vu(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const G=new $n(this,this.j,m);let Q=this.o;if(this.U&&(Q?(Q=O(Q),he(Q,this.U)):Q=this.U),this.u!==null||this.R||(G.J=Q,Q=null),this.S)e:{for(var E=0,x=0;x<this.i.length;x++){t:{var N=this.i[x];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(E+=N,E>4096){E=x;break e}if(E===4096||x===this.i.length-1){E=x+1;break e}}E=1e3}else E=1e3;E=pu(this,G,E),x=bt(this.J),et(x,"RID",m),et(x,"CVER",22),this.G&&et(x,"X-HTTP-Session-Id",this.G),xo(this,x),Q&&(this.R?E="headers="+Oi(Pn(Q))+"&"+E:this.u&&So(x,this.u,Q)),xa(this.h,G),this.Ra&&et(x,"TYPE","init"),this.S?(et(x,"$req",E),et(x,"SID","null"),G.U=!0,gi(G,x,null)):gi(G,x,E),this.I=2}}else this.I==3&&(m?ka(this,m):this.i.length==0||Ca(this.h)||ka(this))};function ka(m,E){var x;E?x=E.l:x=m.V++;const N=bt(m.J);et(N,"SID",m.M),et(N,"RID",x),et(N,"AID",m.K),xo(m,N),m.u&&m.o&&So(N,m.u,m.o),x=new $n(m,m.j,x,m.D+1),m.u===null&&(x.J=m.o),E&&(m.i=E.G.concat(m.i)),E=pu(m,x,1e3),x.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),xa(m.h,x),gi(x,N,E)}function xo(m,E){m.H&&Re(m.H,function(x,N){et(E,N,x)}),m.l&&Re({},function(x,N){et(E,N,x)})}function pu(m,E,x){x=Math.min(m.i.length,x);const N=m.l?p(m.l.Ka,m.l,m):null;e:{var G=m.i;let Me=-1;for(;;){const Tt=["count="+x];Me==-1?x>0?(Me=G[0].g,Tt.push("ofs="+Me)):Me=0:Tt.push("ofs="+Me);let We=!0;for(let mt=0;mt<x;mt++){var Q=G[mt].g;const Vn=G[mt].map;if(Q-=Me,Q<0)Me=Math.max(0,G[mt].g-100),We=!1;else try{Q="req"+Q+"_"||"";try{var ue=Vn instanceof Map?Vn:Object.entries(Vn);for(const[wi,ei]of ue){let ti=ei;d(ei)&&(ti=ms(ei)),Tt.push(Q+wi+"="+encodeURIComponent(ti))}}catch(wi){throw Tt.push(Q+"type="+encodeURIComponent("_badmap")),wi}}catch{N&&N(Vn)}}if(We){ue=Tt.join("&");break e}}ue=void 0}return m=m.i.splice(0,x),E.G=m,ue}function gu(m){if(!m.g&&!m.v){m.Y=1;var E=m.Da;fe||R(),ae||(fe(),ae=!0),P.add(E,m),m.A=0}}function Ro(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=mi(p(m.Da,m),vu(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,yu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=mi(p(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),Ss(this),yu(this))};function La(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function yu(m){m.g=new $n(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var E=bt(m.na);et(E,"RID","rpc"),et(E,"SID",m.M),et(E,"AID",m.K),et(E,"CI",m.F?"0":"1"),!m.F&&m.ia&&et(E,"TO",m.ia),et(E,"TYPE","xmlhttp"),xo(m,E),m.u&&m.o&&So(E,m.u,m.o),m.O&&(m.g.H=m.O);var x=m.g;m=m.ba,x.M=1,x.A=vo(bt(E)),x.u=null,x.R=!0,nr(x,m)}n.Va=function(){this.C!=null&&(this.C=null,Ss(this),Ro(this),Rt(19))};function fr(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function _u(m,E){var x=null;if(m.g==E){fr(m),La(m),m.g=null;var N=2}else if(Ei(m.h,E))x=E.G,Ra(m.h,E),N=1;else return;if(m.I!=0){if(E.o)if(N==1){x=E.u?E.u.length:0,E=Date.now()-E.F;var G=m.D;N=tr(),qt(N,new hi(N,x)),Ri(m)}else gu(m);else if(G=E.m,G==3||G==0&&E.X>0||!(N==1&&cr(m,E)||N==2&&Ro(m)))switch(x&&x.length>0&&(E=m.h,E.i=E.i.concat(x)),G){case 1:Ii(m,5);break;case 4:Ii(m,10);break;case 3:Ii(m,6);break;default:Ii(m,2)}}}function vu(m,E){let x=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(x*=2),x*E}function Ii(m,E){if(m.j.info("Error code "+E),E==2){var x=p(m.bb,m),N=m.Ua;const G=!N;N=new En(N||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ft(N,"https"),vo(N),G?Wn(N.toString(),x):Da(N.toString(),x)}else Rt(2);m.I=0,m.l&&m.l.pa(E),Tu(m),ur(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function Tu(m){if(m.I=0,m.ja=[],m.l){const E=Ia(m.h);(E.length!=0||m.i.length!=0)&&(L(m.ja,E),L(m.ja,m.i),m.h.i.length=0,I(m.i),m.i.length=0),m.l.oa()}}function Eu(m,E,x){var N=x instanceof En?bt(x):new En(x);if(N.g!="")E&&(N.g=E+"."+N.g),ps(N,N.u);else{var G=c.location;N=G.protocol,E=E?E+"."+G.hostname:G.hostname,G=+G.port;const Q=new En(null);N&&Ft(Q,N),E&&(Q.g=E),G&&ps(Q,G),x&&(Q.h=x),N=Q}return x=m.G,E=m.wa,x&&E&&et(N,x,E),et(N,"VER",m.ka),xo(m,N),N}function Su(m,E,x){if(E&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Aa&&!m.ma?new it(new Ai({ab:x})):new it(m.ma),E.Fa(m.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Au(){}n=Au.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function As(){}As.prototype.g=function(m,E){return new un(m,E)};function un(m,E){xt.call(this),this.g=new Es(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(m?m["X-WebChannel-Client-Profile"]=E.sa:m={"X-WebChannel-Client-Profile":E.sa}),this.g.U=m,(m=E&&E.Qb)&&!V(m)&&(this.g.u=m),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!V(E)&&(this.g.G=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new Fi(this)}T(un,xt),un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){Ua(this.g)},un.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var x={};x.__data__=m,m=x}else this.v&&(x={},x.__data__=ms(m),m=x);E.i.push(new wt(E.Ya++,m)),E.I==3&&Ri(E)},un.prototype.N=function(){this.g.l=null,delete this.j,Ua(this.g),delete this.g,un.Z.N.call(this)};function Cu(m){Yt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const x in E){m=x;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}T(Cu,Yt);function xu(){Nn.call(this),this.status=1}T(xu,Nn);function Fi(m){this.g=m}T(Fi,Au),Fi.prototype.ra=function(){qt(this.g,"a")},Fi.prototype.qa=function(m){qt(this.g,new Cu(m))},Fi.prototype.pa=function(m){qt(this.g,new xu)},Fi.prototype.oa=function(){qt(this.g,"b")},As.prototype.createWebChannel=As.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,bE=function(){return new As},wE=function(){return tr()},IE=vt,sm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},yo.NO_ERROR=0,yo.TIMEOUT=8,yo.HTTP_ERROR=6,kc=yo,Ea.COMPLETE="complete",RE=Ea,iu.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",xt.prototype.listen=xt.prototype.J,Rl=iu,it.prototype.listenOnce=it.prototype.K,it.prototype.getLastError=it.prototype.Ha,it.prototype.getLastErrorCode=it.prototype.ya,it.prototype.getStatus=it.prototype.ca,it.prototype.getResponseJson=it.prototype.La,it.prototype.getResponseText=it.prototype.la,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Fa,xE=it}).apply(typeof bc<"u"?bc:typeof self<"u"?self:typeof window<"u"?window:{});const V0="@firebase/firestore",U0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ca="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=new _E("@firebase/firestore");function Fr(){return Jo.logLevel}function ye(n,...e){if(Jo.logLevel<=Ye.DEBUG){const t=e.map(Vm);Jo.debug(`Firestore (${ca}): ${n}`,...t)}}function ls(n,...e){if(Jo.logLevel<=Ye.ERROR){const t=e.map(Vm);Jo.error(`Firestore (${ca}): ${n}`,...t)}}function ea(n,...e){if(Jo.logLevel<=Ye.WARN){const t=e.map(Vm);Jo.warn(`Firestore (${ca}): ${n}`,...t)}}function Vm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,NE(n,s,t)}function NE(n,e,t){let s=`FIRESTORE (${ca}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ls(s),new Error(s)}function je(n,e,t,s){let r="Unexpected state";typeof t=="string"?r=t:s=t,n||NE(e,r,s)}function Ne(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends ua{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nn.UNAUTHENTICATED)))}shutdown(){}}class JD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class KD{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){je(this.o===void 0,42304);let s=this.i;const r=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new ss;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ss,e.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await r(this.currentUser)}))},d=g=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>d(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ss)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(je(typeof s.accessToken=="string",31837,{l:s}),new ME(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class QD{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $D{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new QD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class k0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wD(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){je(this.o===void 0,3512);const s=l=>{l.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ye("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const r=l=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new k0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new k0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=WD(40);for(let l=0;l<r.length;++l)s.length<20&&r[l]<t&&(s+=e.charAt(r[l]%62))}return s}}function ze(n,e){return n<e?-1:n>e?1:0}function om(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const r=n.charAt(s),l=e.charAt(s);if(r!==l)return Oh(r)===Oh(l)?ze(r,l):Oh(r)?1:-1}return ze(n.length,e.length)}const ZD=55296,jD=57343;function Oh(n){const e=n.charCodeAt(0);return e>=ZD&&e<=jD}function ta(n,e,t){return n.length===e.length&&n.every(((s,r)=>t(s,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="__name__";class Pi{constructor(e,t,s){t===void 0?t=0:t>e.length&&xe(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&xe(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Pi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let r=0;r<s;r++){const l=Pi.compareSegments(e.get(r),t.get(r));if(l!==0)return l}return ze(e.length,t.length)}static compareSegments(e,t){const s=Pi.isNumericId(e),r=Pi.isNumericId(t);return s&&!r?-1:!s&&r?1:s&&r?Pi.extractNumericId(e).compare(Pi.extractNumericId(t)):om(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return js.fromString(e.substring(4,e.length-2))}}class lt extends Pi{construct(e,t,s){return new lt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ge(se.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((r=>r.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const eP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends Pi{construct(e,t,s){return new Zt(e,t,s)}static isValidIdentifier(e){return eP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===L0}static keyField(){return new Zt([L0])}static fromServerFormat(e){const t=[];let s="",r=0;const l=()=>{if(s.length===0)throw new ge(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;r<e.length;){const d=e[r];if(d==="\\"){if(r+1===e.length)throw new ge(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[r+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ge(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,r+=2}else d==="`"?(c=!c,r++):d!=="."||c?(s+=d,r++):(l(),r++)}if(l(),c)throw new ge(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(t)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(lt.fromString(e))}static fromName(e){return new Ae(lt.fromString(e).popFirst(5))}static empty(){return new Ae(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(n,e,t){if(!t)throw new ge(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function tP(n,e,t,s){if(e===!0&&s===!0)throw new ge(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function q0(n){if(!Ae.isDocumentKey(n))throw new ge(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function O0(n){if(Ae.isDocumentKey(n))throw new ge(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function PE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ff(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":xe(12329,{type:typeof n})}function li(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ff(n);throw new ge(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Jl(n,e){if(!PE(n))throw new ge(se.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const r=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(r&&typeof c!==r){t=`JSON field '${s}' must be a ${r}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ge(se.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=-62135596800,B0=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*B0);return new ut(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<z0)throw new ge(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/B0}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Jl(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-z0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:kt("string",ut._jsonSchemaVersion),seconds:kt("number"),nanoseconds:kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new ut(0,0))}static max(){return new we(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=-1;function nP(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=we.fromTimestamp(s===1e9?new ut(t+1,0):new ut(t,s));return new to(r,Ae.empty(),e)}function iP(n){return new to(n.readTime,n.key,ql)}class to{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new to(we.min(),Ae.empty(),ql)}static max(){return new to(we.max(),Ae.empty(),ql)}}function sP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ae.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fa(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==oP)throw n;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((s,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,r)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,s)=>{t(e)}))}static reject(e){return new re(((t,s)=>{s(e)}))}static waitFor(e){return new re(((t,s)=>{let r=0,l=0,c=!1;e.forEach((d=>{++r,d.next((()=>{++l,c&&l===r&&t()}),(g=>s(g)))})),c=!0,l===r&&t()}))}static or(e){let t=re.resolve(!1);for(const s of e)t=t.next((r=>r?re.resolve(r):s()));return t}static forEach(e,t){const s=[];return e.forEach(((r,l)=>{s.push(t.call(this,r,l))})),this.waitFor(s)}static mapArray(e,t){return new re(((s,r)=>{const l=e.length,c=new Array(l);let d=0;for(let g=0;g<l;g++){const p=g;t(e[p]).next((v=>{c[p]=v,++d,d===l&&s(c)}),(v=>r(v)))}}))}static doWhile(e,t){return new re(((s,r)=>{const l=()=>{e()===!0?t().next((()=>{l()}),r):s()};l()}))}}function aP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function da(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}df.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km=-1;function hf(n){return n==null}function Xc(n){return n===0&&1/n==-1/0}function lP(n){return typeof n=="number"&&Number.isInteger(n)&&!Xc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="";function uP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=F0(e)),e=cP(n.get(t),e);return F0(e)}function cP(n,e){let t=e;const s=n.length;for(let r=0;r<s;r++){const l=n.charAt(r);switch(l){case"\0":t+="";break;case VE:t+="";break;default:t+=l}}return t}function F0(n){return n+VE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function lo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function UE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t){this.comparator=e,this.root=t||Wt.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return t+s.left.size;r<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nc(this.root,e,this.comparator,!0)}}class Nc{constructor(e,t,s,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,t,s,r,l){this.key=e,this.value=t,this.color=s??Wt.RED,this.left=r??Wt.EMPTY,this.right=l??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,r,l){return new Wt(e??this.key,t??this.value,s??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let r=this;const l=s(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,t,s),null):l===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Wt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,t,s,r,l){return this}insert(e,t,s){return new Wt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new G0(this.data.getIterator())}getIteratorFrom(e){return new G0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=s.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new zt(this.comparator);return t.data=e,t}}class G0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new bn([])}unionWith(e){let t=new zt(Zt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new bn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ta(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new kE("Invalid base64 string: "+l):l}})(e);return new jt(t)}static fromUint8Array(e){const t=(function(r){let l="";for(let c=0;c<r.length;++c)l+=String.fromCharCode(r[c]);return l})(e);return new jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const fP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function no(n){if(je(!!n,39018),typeof n=="string"){let e=0;const t=fP.exec(n);if(je(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function io(n){return typeof n=="string"?jt.fromBase64String(n):jt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="server_timestamp",qE="__type__",OE="__previous_value__",zE="__local_write_time__";function Lm(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[qE])==null?void 0:s.stringValue)===LE}function mf(n){const e=n.mapValue.fields[OE];return Lm(e)?mf(e):e}function Ol(n){const e=no(n.mapValue.fields[zE].timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,t,s,r,l,c,d,g,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=r,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=v}}const Wc="(default)";class zl{constructor(e,t){this.projectId=e,this.database=t||Wc}static empty(){return new zl("","")}get isDefaultDatabase(){return this.database===Wc}isEqual(e){return e instanceof zl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="__type__",hP="__max__",Mc={mapValue:{}},FE="__vector__",Zc="value";function so(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Lm(n)?4:pP(n)?9007199254740991:mP(n)?10:11:xe(28295,{value:n})}function qi(n,e){if(n===e)return!0;const t=so(n);if(t!==so(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ol(n).isEqual(Ol(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const c=no(r.timestampValue),d=no(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,l){return io(r.bytesValue).isEqual(io(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,l){return At(r.geoPointValue.latitude)===At(l.geoPointValue.latitude)&&At(r.geoPointValue.longitude)===At(l.geoPointValue.longitude)})(n,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return At(r.integerValue)===At(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const c=At(r.doubleValue),d=At(l.doubleValue);return c===d?Xc(c)===Xc(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return ta(n.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return(function(r,l){const c=r.mapValue.fields||{},d=l.mapValue.fields||{};if(H0(c)!==H0(d))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(d[g]===void 0||!qi(c[g],d[g])))return!1;return!0})(n,e);default:return xe(52216,{left:n})}}function Bl(n,e){return(n.values||[]).find((t=>qi(t,e)))!==void 0}function na(n,e){if(n===e)return 0;const t=so(n),s=so(e);if(t!==s)return ze(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=At(l.integerValue||l.doubleValue),g=At(c.integerValue||c.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1})(n,e);case 3:return Y0(n.timestampValue,e.timestampValue);case 4:return Y0(Ol(n),Ol(e));case 5:return om(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=io(l),g=io(c);return d.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),g=c.split("/");for(let p=0;p<d.length&&p<g.length;p++){const v=ze(d[p],g[p]);if(v!==0)return v}return ze(d.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=ze(At(l.latitude),At(c.latitude));return d!==0?d:ze(At(l.longitude),At(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return J0(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var S,I,L,z;const d=l.fields||{},g=c.fields||{},p=(S=d[Zc])==null?void 0:S.arrayValue,v=(I=g[Zc])==null?void 0:I.arrayValue,T=ze(((L=p==null?void 0:p.values)==null?void 0:L.length)||0,((z=v==null?void 0:v.values)==null?void 0:z.length)||0);return T!==0?T:J0(p,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Mc.mapValue&&c===Mc.mapValue)return 0;if(l===Mc.mapValue)return 1;if(c===Mc.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),p=c.fields||{},v=Object.keys(p);g.sort(),v.sort();for(let T=0;T<g.length&&T<v.length;++T){const S=om(g[T],v[T]);if(S!==0)return S;const I=na(d[g[T]],p[v[T]]);if(I!==0)return I}return ze(g.length,v.length)})(n.mapValue,e.mapValue);default:throw xe(23264,{he:t})}}function Y0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);const t=no(n),s=no(e),r=ze(t.seconds,s.seconds);return r!==0?r:ze(t.nanos,s.nanos)}function J0(n,e){const t=n.values||[],s=e.values||[];for(let r=0;r<t.length&&r<s.length;++r){const l=na(t[r],s[r]);if(l)return l}return ze(t.length,s.length)}function ia(n){return rm(n)}function rm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=no(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return io(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ae.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",r=!0;for(const l of t.values||[])r?r=!1:s+=",",s+=rm(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let r="{",l=!0;for(const c of s)l?l=!1:r+=",",r+=`${c}:${rm(t.fields[c])}`;return r+"}"})(n.mapValue):xe(61005,{value:n})}function Lc(n){switch(so(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mf(n);return e?16+Lc(e):16;case 5:return 2*n.stringValue.length;case 6:return io(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,l)=>r+Lc(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let r=0;return lo(s.fields,((l,c)=>{r+=l.length+Lc(c)})),r})(n.mapValue);default:throw xe(13486,{value:n})}}function K0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function am(n){return!!n&&"integerValue"in n}function qm(n){return!!n&&"arrayValue"in n}function Q0(n){return!!n&&"nullValue"in n}function $0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function qc(n){return!!n&&"mapValue"in n}function mP(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[BE])==null?void 0:s.stringValue)===FE}function Dl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return lo(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Dl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Dl(n.arrayValue.values[t]);return e}return{...n}}function pP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===hP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!qc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dl(t)}setAll(e){let t=Zt.emptyPath(),s={},r=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,s,r),s={},r=[],t=d.popLast()}c?s[d.lastSegment()]=Dl(c):r.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,r)}delete(e){const t=this.field(e.popLast());qc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=t.mapValue.fields[e.get(s)];qc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,s){lo(t,((r,l)=>e[r]=l));for(const r of s)delete e[r]}clone(){return new vn(Dl(this.value))}}function HE(n){const e=[];return lo(n.fields,((t,s)=>{const r=new Zt([t]);if(qc(s)){const l=HE(s.mapValue).fields;if(l.length===0)e.push(r);else for(const c of l)e.push(r.child(c))}else e.push(r)})),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,t,s,r,l,c,d){this.key=e,this.documentType=t,this.version=s,this.readTime=r,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new sn(e,0,we.min(),we.min(),we.min(),vn.empty(),0)}static newFoundDocument(e,t,s,r){return new sn(e,1,t,we.min(),s,r,0)}static newNoDocument(e,t){return new sn(e,2,t,we.min(),we.min(),vn.empty(),0)}static newUnknownDocument(e,t){return new sn(e,3,t,we.min(),we.min(),vn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t){this.position=e,this.inclusive=t}}function X0(n,e,t){let s=0;for(let r=0;r<n.position.length;r++){const l=e[r],c=n.position[r];if(l.field.isKeyField()?s=Ae.comparator(Ae.fromName(c.referenceValue),t.key):s=na(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function W0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,t="asc"){this.field=e,this.dir=t}}function gP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{}class Ut extends GE{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new _P(e,t,s):t==="array-contains"?new EP(e,s):t==="in"?new SP(e,s):t==="not-in"?new AP(e,s):t==="array-contains-any"?new CP(e,s):new Ut(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new vP(e,s):new TP(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(na(t,this.value)):t!==null&&so(this.value)===so(t)&&this.matchesComparison(na(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ui extends GE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ui(e,t)}matches(e){return YE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function YE(n){return n.op==="and"}function JE(n){return yP(n)&&YE(n)}function yP(n){for(const e of n.filters)if(e instanceof ui)return!1;return!0}function lm(n){if(n instanceof Ut)return n.field.canonicalString()+n.op.toString()+ia(n.value);if(JE(n))return n.filters.map((e=>lm(e))).join(",");{const e=n.filters.map((t=>lm(t))).join(",");return`${n.op}(${e})`}}function KE(n,e){return n instanceof Ut?(function(s,r){return r instanceof Ut&&s.op===r.op&&s.field.isEqual(r.field)&&qi(s.value,r.value)})(n,e):n instanceof ui?(function(s,r){return r instanceof ui&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((l,c,d)=>l&&KE(c,r.filters[d])),!0):!1})(n,e):void xe(19439)}function QE(n){return n instanceof Ut?(function(t){return`${t.field.canonicalString()} ${t.op} ${ia(t.value)}`})(n):n instanceof ui?(function(t){return t.op.toString()+" {"+t.getFilters().map(QE).join(" ,")+"}"})(n):"Filter"}class _P extends Ut{constructor(e,t,s){super(e,t,s),this.key=Ae.fromName(s.referenceValue)}matches(e){const t=Ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class vP extends Ut{constructor(e,t){super(e,"in",t),this.keys=$E("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class TP extends Ut{constructor(e,t){super(e,"not-in",t),this.keys=$E("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function $E(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Ae.fromName(s.referenceValue)))}class EP extends Ut{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qm(t)&&Bl(t.arrayValue,this.value)}}class SP extends Ut{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Bl(this.value.arrayValue,t)}}class AP extends Ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Bl(this.value.arrayValue,t)}}class CP extends Ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Bl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e,t=null,s=[],r=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=r,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function Z0(n,e=null,t=[],s=[],r=null,l=null,c=null){return new xP(n,e,t,s,r,l,c)}function Om(n){const e=Ne(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>lm(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),hf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>ia(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>ia(s))).join(",")),e.Te=t}return e.Te}function zm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!gP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!KE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!W0(n.startAt,e.startAt)&&W0(n.endAt,e.endAt)}function um(n){return Ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,t=null,s=[],r=[],l=null,c="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=r,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function RP(n,e,t,s,r,l,c,d){return new Kl(n,e,t,s,r,l,c,d)}function Bm(n){return new Kl(n)}function j0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function XE(n){return n.collectionGroup!==null}function Pl(n){const e=Ne(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new zt(Zt.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new ef(l,s))})),t.has(Zt.keyField().canonicalString())||e.Ie.push(new ef(Zt.keyField(),s))}return e.Ie}function Vi(n){const e=Ne(n);return e.Ee||(e.Ee=IP(e,Pl(n))),e.Ee}function IP(n,e){if(n.limitType==="F")return Z0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new ef(r.field,l)}));const t=n.endAt?new jc(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new jc(n.startAt.position,n.startAt.inclusive):null;return Z0(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function cm(n,e){const t=n.filters.concat([e]);return new Kl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function fm(n,e,t){return new Kl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pf(n,e){return zm(Vi(n),Vi(e))&&n.limitType===e.limitType}function WE(n){return`${Om(Vi(n))}|lt:${n.limitType}`}function Hr(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((r=>QE(r))).join(", ")}]`),hf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((r=>ia(r))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((r=>ia(r))).join(",")),`Target(${s})`})(Vi(n))}; limitType=${n.limitType})`}function gf(n,e){return e.isFoundDocument()&&(function(s,r){const l=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ae.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,r){for(const l of Pl(s))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,r){for(const l of s.filters)if(!l.matches(r))return!1;return!0})(n,e)&&(function(s,r){return!(s.startAt&&!(function(c,d,g){const p=X0(c,d,g);return c.inclusive?p<=0:p<0})(s.startAt,Pl(s),r)||s.endAt&&!(function(c,d,g){const p=X0(c,d,g);return c.inclusive?p>=0:p>0})(s.endAt,Pl(s),r))})(n,e)}function wP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ZE(n){return(e,t)=>{let s=!1;for(const r of Pl(n)){const l=bP(r,e,t);if(l!==0)return l;s=s||r.field.isKeyField()}return 0}}function bP(n,e,t){const s=n.field.isKeyField()?Ae.comparator(e.key,t.key):(function(l,c,d){const g=c.data.field(l),p=d.data.field(l);return g!==null&&p!==null?na(g,p):xe(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return xe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[r,l]of s)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[t]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,((t,s)=>{for(const[r,l]of s)e(r,l)}))}isEmpty(){return UE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP=new gt(Ae.comparator);function us(){return NP}const jE=new gt(Ae.comparator);function Il(...n){let e=jE;for(const t of n)e=e.insert(t.key,t);return e}function eS(n){let e=jE;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Go(){return Vl()}function tS(){return Vl()}function Vl(){return new $o((n=>n.toString()),((n,e)=>n.isEqual(e)))}const MP=new gt(Ae.comparator),DP=new zt(Ae.comparator);function Be(...n){let e=DP;for(const t of n)e=e.add(t);return e}const PP=new zt(ze);function VP(){return PP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xc(e)?"-0":e}}function nS(n){return{integerValue:""+n}}function iS(n,e){return lP(e)?nS(e):Fm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(){this._=void 0}}function UP(n,e,t){return n instanceof Fl?(function(r,l){const c={fields:{[qE]:{stringValue:LE},[zE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&Lm(l)&&(l=mf(l)),l&&(c.fields[OE]=l),{mapValue:c}})(t,e):n instanceof Hl?oS(n,e):n instanceof Gl?rS(n,e):(function(r,l){const c=sS(r,l),d=eT(c)+eT(r.Ae);return am(c)&&am(r.Ae)?nS(d):Fm(r.serializer,d)})(n,e)}function kP(n,e,t){return n instanceof Hl?oS(n,e):n instanceof Gl?rS(n,e):t}function sS(n,e){return n instanceof Yl?(function(s){return am(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Fl extends yf{}class Hl extends yf{constructor(e){super(),this.elements=e}}function oS(n,e){const t=aS(e);for(const s of n.elements)t.some((r=>qi(r,s)))||t.push(s);return{arrayValue:{values:t}}}class Gl extends yf{constructor(e){super(),this.elements=e}}function rS(n,e){let t=aS(e);for(const s of n.elements)t=t.filter((r=>!qi(r,s)));return{arrayValue:{values:t}}}class Yl extends yf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function eT(n){return At(n.integerValue||n.doubleValue)}function aS(n){return qm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,t){this.field=e,this.transform=t}}function LP(n,e){return n.field.isEqual(e.field)&&(function(s,r){return s instanceof Hl&&r instanceof Hl||s instanceof Gl&&r instanceof Gl?ta(s.elements,r.elements,qi):s instanceof Yl&&r instanceof Yl?qi(s.Ae,r.Ae):s instanceof Fl&&r instanceof Fl})(n.transform,e.transform)}class qP{constructor(e,t){this.version=e,this.transformResults=t}}class Jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class _f{}function uS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Hm(n.key,Jn.none()):new Ql(n.key,n.data,Jn.none());{const t=n.data,s=vn.empty();let r=new zt(Zt.comparator);for(let l of e.fields)if(!r.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),r=r.add(l)}return new uo(n.key,s,new bn(r.toArray()),Jn.none())}}function OP(n,e,t){n instanceof Ql?(function(r,l,c){const d=r.value.clone(),g=nT(r.fieldTransforms,l,c.transformResults);d.setAll(g),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof uo?(function(r,l,c){if(!Oc(r.precondition,l))return void l.convertToUnknownDocument(c.version);const d=nT(r.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(cS(r)),g.setAll(d),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(n,e,t):(function(r,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Ul(n,e,t,s){return n instanceof Ql?(function(l,c,d,g){if(!Oc(l.precondition,c))return d;const p=l.value.clone(),v=iT(l.fieldTransforms,g,c);return p.setAll(v),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(n,e,t,s):n instanceof uo?(function(l,c,d,g){if(!Oc(l.precondition,c))return d;const p=iT(l.fieldTransforms,g,c),v=c.data;return v.setAll(cS(l)),v.setAll(p),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,s):(function(l,c,d){return Oc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function zP(n,e){let t=null;for(const s of n.fieldTransforms){const r=e.data.field(s.field),l=sS(s.transform,r||null);l!=null&&(t===null&&(t=vn.empty()),t.set(s.field,l))}return t||null}function tT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&ta(s,r,((l,c)=>LP(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ql extends _f{constructor(e,t,s,r=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class uo extends _f{constructor(e,t,s,r,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function cS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function nT(n,e,t){const s=new Map;je(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const l=n[r],c=l.transform,d=e.data.field(l.field);s.set(l.field,kP(c,d,t[r]))}return s}function iT(n,e,t){const s=new Map;for(const r of n){const l=r.transform,c=t.data.field(r.field);s.set(r.field,UP(l,c,e))}return s}class Hm extends _f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BP extends _f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,t,s,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&OP(l,e,s[r])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Ul(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Ul(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=tS();return this.mutations.forEach((r=>{const l=e.get(r.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(r.key)?null:d;const g=uS(c,d);g!==null&&s.set(r.key,g),c.isValidDocument()||c.convertToNoDocument(we.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Be())}isEqual(e){return this.batchId===e.batchId&&ta(this.mutations,e.mutations,((t,s)=>tT(t,s)))&&ta(this.baseMutations,e.baseMutations,((t,s)=>tT(t,s)))}}class Gm{constructor(e,t,s,r){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=r}static from(e,t,s){je(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return MP})();const l=e.mutations;for(let c=0;c<l.length;c++)r=r.insert(l[c].key,s[c].version);return new Gm(e,t,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,Ge;function YP(n){switch(n){case se.OK:return xe(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return xe(15467,{code:n})}}function fS(n){if(n===void 0)return ls("GRPC error has no .code"),se.UNKNOWN;switch(n){case Vt.OK:return se.OK;case Vt.CANCELLED:return se.CANCELLED;case Vt.UNKNOWN:return se.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return se.INTERNAL;case Vt.UNAVAILABLE:return se.UNAVAILABLE;case Vt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Vt.NOT_FOUND:return se.NOT_FOUND;case Vt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Vt.ABORTED:return se.ABORTED;case Vt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Vt.DATA_LOSS:return se.DATA_LOSS;default:return xe(39323,{code:n})}}(Ge=Vt||(Vt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=new js([4294967295,4294967295],0);function sT(n){const e=JP().encode(n),t=new CE;return t.update(e),new Uint8Array(t.digest())}function oT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new js([t,s],0),new js([r,l],0)]}class Ym{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new wl(`Invalid padding: ${t}`);if(s<0)throw new wl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new wl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new wl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=js.fromNumber(this.ge)}ye(e,t,s){let r=e.add(t.multiply(js.fromNumber(s)));return r.compare(KP)===1&&(r=new js([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=sT(e),[s,r]=oT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,r,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Ym(l,r,t);return s.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=sT(e),[s,r]=oT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,r,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class wl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t,s,r,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const r=new Map;return r.set(e,$l.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new vf(we.min(),r,new gt(ze),us(),Be())}}class $l{constructor(e,t,s,r,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new $l(s,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,t,s,r){this.be=e,this.removedTargetIds=t,this.key=s,this.De=r}}class dS{constructor(e,t){this.targetId=e,this.Ce=t}}class hS{constructor(e,t,s=jt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=r}}class rT{constructor(){this.ve=0,this.Fe=aT(),this.Me=jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),t=Be(),s=Be();return this.Fe.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:s=s.add(r);break;default:xe(38017,{changeType:l})}})),new $l(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=aT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class QP{constructor(e){this.Ge=e,this.ze=new Map,this.je=us(),this.Je=Dc(),this.He=Dc(),this.Ye=new gt(ze)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,s=e.Ce.count,r=this.ot(t);if(r){const l=r.target;if(um(l))if(s===0){const c=new Ae(l.path);this.et(t,c,sn.newNoDocument(c,we.min()))}else je(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const d=this.ut(e),g=d?this.ct(d,e,c):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:l=0}=t;let c,d;try{c=io(s).toUint8Array()}catch(g){if(g instanceof kE)return ea("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new Ym(c,r,l)}catch(g){return ea(g instanceof wl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.ge===0?null:d}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let r=0;return s.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&um(d.target)){const g=new Ae(d.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,sn.newNoDocument(g,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=Be();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const r=new vf(e,t,this.Ye,this.je,s);return this.je=us(),this.Je=Dc(),this.He=Dc(),this.Ye=new gt(ze),r}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new rT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new zt(ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new zt(ze),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new rT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Dc(){return new gt(Ae.comparator)}function aT(){return new gt(Ae.comparator)}const $P={asc:"ASCENDING",desc:"DESCENDING"},XP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WP={and:"AND",or:"OR"};class ZP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function dm(n,e){return n.useProto3Json||hf(e)?e:{value:e}}function tf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function jP(n,e){return tf(n,e.toTimestamp())}function Ui(n){return je(!!n,49232),we.fromTimestamp((function(t){const s=no(t);return new ut(s.seconds,s.nanos)})(n))}function Jm(n,e){return hm(n,e).canonicalString()}function hm(n,e){const t=(function(r){return new lt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function pS(n){const e=lt.fromString(n);return je(TS(e),10190,{key:e.toString()}),e}function mm(n,e){return Jm(n.databaseId,e.path)}function zh(n,e){const t=pS(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ae(yS(t))}function gS(n,e){return Jm(n.databaseId,e)}function eV(n){const e=pS(n);return e.length===4?lt.emptyPath():yS(e)}function pm(n){return new lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yS(n){return je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function lT(n,e,t){return{name:mm(n,e),fields:t.value.mapValue.fields}}function tV(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:xe(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(p,v){return p.useProto3Json?(je(v===void 0||typeof v=="string",58123),jt.fromBase64String(v||"")):(je(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),jt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(p){const v=p.code===void 0?se.UNKNOWN:fS(p.code);return new ge(v,p.message||"")})(c);t=new hS(s,r,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=zh(n,s.document.name),l=Ui(s.document.updateTime),c=s.document.createTime?Ui(s.document.createTime):we.min(),d=new vn({mapValue:{fields:s.document.fields}}),g=sn.newFoundDocument(r,l,c,d),p=s.targetIds||[],v=s.removedTargetIds||[];t=new zc(p,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=zh(n,s.document),l=s.readTime?Ui(s.readTime):we.min(),c=sn.newNoDocument(r,l),d=s.removedTargetIds||[];t=new zc([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=zh(n,s.document),l=s.removedTargetIds||[];t=new zc([],l,r,null)}else{if(!("filter"in e))return xe(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:l}=s,c=new GP(r,l),d=s.targetId;t=new dS(d,c)}}return t}function nV(n,e){let t;if(e instanceof Ql)t={update:lT(n,e.key,e.value)};else if(e instanceof Hm)t={delete:mm(n,e.key)};else if(e instanceof uo)t={update:lT(n,e.key,e.data),updateMask:fV(e.fieldMask)};else{if(!(e instanceof BP))return xe(16599,{Vt:e.type});t={verify:mm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const d=c.transform;if(d instanceof Fl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Hl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Gl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Yl)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw xe(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:jP(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:xe(27497)})(n,e.precondition)),t}function iV(n,e){return n&&n.length>0?(je(e!==void 0,14353),n.map((t=>(function(r,l){let c=r.updateTime?Ui(r.updateTime):Ui(l);return c.isEqual(we.min())&&(c=Ui(l)),new qP(c,r.transformResults||[])})(t,e)))):[]}function sV(n,e){return{documents:[gS(n,e.path)]}}function oV(n,e){const t={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=gS(n,r);const l=(function(p){if(p.length!==0)return vS(ui.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((v=>(function(S){return{field:Gr(S.field),direction:lV(S.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=dm(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:r}}function rV(n){let e=eV(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let r=null;if(s>0){je(s===1,65062);const v=t.from[0];v.allDescendants?r=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(T){const S=_S(T);return S instanceof ui&&JE(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((S=>(function(L){return new ef(Yr(L.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let S;return S=typeof T=="object"?T.value:T,hf(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(T){const S=!!T.before,I=T.values||[];return new jc(I,S)})(t.startAt));let p=null;return t.endAt&&(p=(function(T){const S=!T.before,I=T.values||[];return new jc(I,S)})(t.endAt)),RP(e,r,c,l,d,"F",g,p)}function aV(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _S(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Yr(t.unaryFilter.field);return Ut.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Yr(t.unaryFilter.field);return Ut.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Yr(t.unaryFilter.field);return Ut.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Yr(t.unaryFilter.field);return Ut.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ut.create(Yr(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ui.create(t.compositeFilter.filters.map((s=>_S(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return xe(1026)}})(t.compositeFilter.op))})(n):xe(30097,{filter:n})}function lV(n){return $P[n]}function uV(n){return XP[n]}function cV(n){return WP[n]}function Gr(n){return{fieldPath:n.canonicalString()}}function Yr(n){return Zt.fromServerFormat(n.fieldPath)}function vS(n){return n instanceof Ut?(function(t){if(t.op==="=="){if($0(t.value))return{unaryFilter:{field:Gr(t.field),op:"IS_NAN"}};if(Q0(t.value))return{unaryFilter:{field:Gr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if($0(t.value))return{unaryFilter:{field:Gr(t.field),op:"IS_NOT_NAN"}};if(Q0(t.value))return{unaryFilter:{field:Gr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gr(t.field),op:uV(t.op),value:t.value}}})(n):n instanceof ui?(function(t){const s=t.getFilters().map((r=>vS(r)));return s.length===1?s[0]:{compositeFilter:{op:cV(t.op),filters:s}}})(n):xe(54877,{filter:n})}function fV(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function TS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,t,s,r,l=we.min(),c=we.min(),d=jt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(e){return new $s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e){this.yt=e}}function hV(n){const e=rV({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?fm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(){this.Cn=new pV}addToCollectionParentIndex(e,t){return this.Cn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(to.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(to.min())}updateCollectionGroup(e,t,s){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class pV{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t]||new zt(lt.comparator),l=!r.has(s);return this.index[t]=r.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t];return r&&r.has(s)}getEntries(e){return(this.index[e]||new zt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ES=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(ES,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new sa(0)}static cr(){return new sa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="LruGarbageCollector",gV=1048576;function fT([n,e],[t,s]){const r=ze(n,t);return r===0?ze(e,s):r}class yV{constructor(e){this.Ir=e,this.buffer=new zt(fT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();fT(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _V{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(cT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){da(t)?ye(cT,"Ignoring IndexedDB error during garbage collection: ",t):await fa(t)}await this.Vr(3e5)}))}}class vV{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return re.resolve(df.ce);const s=new yV(t);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(uT)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,r,l,c,d,g,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,c=Date.now(),this.nthSequenceNumber(e,r)))).next((T=>(s=T,d=Date.now(),this.removeTargets(e,s,t)))).next((T=>(l=T,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(p=Date.now(),Fr()<=Ye.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${r} in `+(d-c)+`ms
	Removed ${l} targets in `+(g-d)+`ms
	Removed ${T} documents in `+(p-g)+`ms
Total Duration: ${p-v}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:T}))))}}function TV(n,e){return new vV(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(){this.changes=new $o((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?re.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e,t,s,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(s!==null&&Ul(s.mutation,r,bn.empty(),ut.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Be()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Be()){const r=Go();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,s).next((l=>{let c=Il();return l.forEach(((d,g)=>{c=c.insert(d,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Go();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Be())))}populateOverlays(e,t,s){const r=[];return s.forEach((l=>{t.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,s,r){let l=us();const c=Vl(),d=(function(){return Vl()})();return t.forEach(((g,p)=>{const v=s.get(p.key);r.has(p.key)&&(v===void 0||v.mutation instanceof uo)?l=l.insert(p.key,p):v!==void 0?(c.set(p.key,v.mutation.getFieldMask()),Ul(v.mutation,p,v.mutation.getFieldMask(),ut.now())):c.set(p.key,bn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((p,v)=>c.set(p,v))),t.forEach(((p,v)=>d.set(p,new SV(v,c.get(p)??null)))),d)))}recalculateAndSaveOverlays(e,t){const s=Vl();let r=new gt(((c,d)=>c-d)),l=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let v=s.get(g)||bn.empty();v=d.applyToLocalView(p,v),s.set(g,v);const T=(r.get(d.batchId)||Be()).add(g);r=r.insert(d.batchId,T)}))})).next((()=>{const c=[],d=r.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),p=g.key,v=g.value,T=tS();v.forEach((S=>{if(!l.has(S)){const I=uS(t.get(S),s.get(S));I!==null&&T.set(S,I),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,T))}return re.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,r){return(function(c){return Ae.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):XE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,r):this.getDocumentsMatchingCollectionQuery(e,t,s,r)}getNextDocuments(e,t,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,r).next((l=>{const c=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,r-l.size):re.resolve(Go());let d=ql,g=l;return c.next((p=>re.forEach(p,((v,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(v)?re.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{g=g.insert(v,S)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,g,p,Be()))).next((v=>({batchId:d,changes:eS(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ae(t)).next((s=>{let r=Il();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,r){const l=t.collectionGroup;let c=Il();return this.indexManager.getCollectionParents(e,l).next((d=>re.forEach(d,(g=>{const p=(function(T,S){return new Kl(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,s,r).next((v=>{v.forEach(((T,S)=>{c=c.insert(T,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,r)))).next((c=>{l.forEach(((g,p)=>{const v=p.getKey();c.get(v)===null&&(c=c.insert(v,sn.newInvalidDocument(v)))}));let d=Il();return c.forEach(((g,p)=>{const v=l.get(g);v!==void 0&&Ul(v.mutation,p,bn.empty(),ut.now()),gf(t,p)&&(d=d.insert(g,p))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return re.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Ui(r.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:hV(r.bundledQuery),readTime:Ui(r.readTime)}})(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(){this.overlays=new gt(Ae.comparator),this.qr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Go();return re.forEach(t,(r=>this.getOverlay(e,r).next((l=>{l!==null&&s.set(r,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((r,l)=>{this.St(e,t,l)})),re.resolve()}removeOverlaysForBatchId(e,t,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),re.resolve()}getOverlaysForCollection(e,t,s){const r=Go(),l=t.length+1,c=new Ae(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const g=d.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&g.largestBatchId>s&&r.set(g.getKey(),g)}return re.resolve(r)}getOverlaysForCollectionGroup(e,t,s,r){let l=new gt(((p,v)=>p-v));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let v=l.get(p.largestBatchId);v===null&&(v=Go(),l=l.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const d=Go(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,v)=>d.set(p,v))),!(d.size()>=r)););return re.resolve(d)}St(e,t,s){const r=this.overlays.get(s.key);if(r!==null){const c=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new HP(t,s));let l=this.qr.get(t);l===void 0&&(l=Be(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(){this.Qr=new zt(Gt.$r),this.Ur=new zt(Gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Gt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Gt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ae(new lt([])),s=new Gt(t,e),r=new Gt(t,e+1),l=[];return this.Ur.forEachInRange([s,r],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ae(new lt([])),s=new Gt(t,e),r=new Gt(t,e+1);let l=Be();return this.Ur.forEachInRange([s,r],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Gt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Gt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ae.comparator(e.key,t.key)||ze(e.Yr,t.Yr)}static Kr(e,t){return ze(e.Yr,t.Yr)||Ae.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new zt(Gt.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,r){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new FP(l,t,s,r);this.mutationQueue.push(c);for(const d of r)this.Zr=this.Zr.add(new Gt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return re.resolve(c)}lookupMutationBatch(e,t){return re.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,r=this.ei(s),l=r<0?0:r;return re.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?km:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Gt(t,0),r=new Gt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,r],(c=>{const d=this.Xr(c.Yr);l.push(d)})),re.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new zt(ze);return t.forEach((r=>{const l=new Gt(r,0),c=new Gt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{s=s.add(d.Yr)}))})),re.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,r=s.length+1;let l=s;Ae.isDocumentKey(l)||(l=l.child(""));const c=new Gt(new Ae(l),0);let d=new zt(ze);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===r&&(d=d.add(g.Yr)),!0)}),c),re.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){je(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return re.forEach(t.mutations,(r=>{const l=new Gt(r.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Gt(t,0),r=this.Zr.firstAfterOrEqual(s);return re.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e){this.ri=e,this.docs=(function(){return new gt(Ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,r=this.docs.get(s),l=r?r.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return re.resolve(s?s.document.mutableCopy():sn.newInvalidDocument(t))}getEntries(e,t){let s=us();return t.forEach((r=>{const l=this.docs.get(r);s=s.insert(r,l?l.document.mutableCopy():sn.newInvalidDocument(r))})),re.resolve(s)}getDocumentsMatchingQuery(e,t,s,r){let l=us();const c=t.path,d=new Ae(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:p,value:{document:v}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||sP(iP(v),s)<=0||(r.has(v.key)||gf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return re.resolve(l)}getAllFromCollectionGroup(e,t,s,r){xe(9500)}ii(e,t){return re.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new bV(this)}getSize(e){return re.resolve(this.size)}}class bV extends EV{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),re.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e){this.persistence=e,this.si=new $o((t=>Om(t)),zm),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new Km,this.targetCount=0,this.ai=sa.ur()}forEachTarget(e,t){return this.si.forEach(((s,r)=>t(r))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),re.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new sa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Pr(t),re.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,s){let r=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)})),re.waitFor(l).next((()=>r))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return re.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),re.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const r=this.persistence.referenceDelegate,l=[];return r&&t.forEach((c=>{l.push(r.markPotentiallyOrphaned(e,c))})),re.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return re.resolve(s)}containsKey(e,t){return re.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,t){this.ui={},this.overlays={},this.ci=new df(0),this.li=!1,this.li=!0,this.hi=new RV,this.referenceDelegate=e(this),this.Pi=new NV(this),this.indexManager=new mV,this.remoteDocumentCache=(function(r){return new wV(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new dV(t),this.Ii=new CV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new IV(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ye("MemoryPersistence","Starting transaction:",e);const r=new MV(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((l=>this.referenceDelegate.di(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Ai(e,t){return re.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class MV extends rP{constructor(e){super(),this.currentSequenceNumber=e}}class Qm{constructor(e){this.persistence=e,this.Ri=new Km,this.Vi=null}static mi(e){return new Qm(e)}get fi(){if(this.Vi)return this.Vi;throw xe(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),re.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,(s=>{const r=Ae.fromPath(s);return this.gi(e,r).next((l=>{l||t.removeEntry(r,we.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return re.or([()=>re.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class nf{constructor(e,t){this.persistence=e,this.pi=new $o((s=>uP(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=TV(this,t)}static mi(e,t){return new nf(e,t)}Ei(){}di(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((r=>s+r))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return re.forEach(this.pi,((s,r)=>this.br(e,s,r).next((l=>l?re.resolve():t(r)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.ii(e,(c=>this.br(e,c,t).next((d=>{d||(s++,l.removeEntry(c,we.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Lc(e.data.value)),t}br(e,t,s){return re.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return re.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,t,s,r){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=r}static As(e,t){let s=Be(),r=Be();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new $m(e,t.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return xM()?8:aP(AM())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,r){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,r,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new DV;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,s,r){return s.documentReadCount<this.fs?(Fr()<=Ye.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Hr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(Fr()<=Ye.DEBUG&&ye("QueryEngine","Query:",Hr(t),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Fr()<=Ye.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Hr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vi(t))):re.resolve())}ys(e,t){if(j0(t))return re.resolve(null);let s=Vi(t);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=fm(t,null,"F"),s=Vi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=Be(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,s).next((g=>{const p=this.Ds(t,d);return this.Cs(t,p,c,g.readTime)?this.ys(e,fm(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,s,r){return j0(t)||r.isEqual(we.min())?re.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,r)?re.resolve(null):(Fr()<=Ye.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Hr(t)),this.vs(e,c,t,nP(r,ql)).next((d=>d)))}))}Ds(e,t){let s=new zt(ZE(e));return t.forEach(((r,l)=>{gf(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,r){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Ss(e,t,s){return Fr()<=Ye.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Hr(t)),this.ps.getDocumentsMatchingQuery(e,t,to.min(),s)}vs(e,t,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="LocalStore",VV=3e8;class UV{constructor(e,t,s,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new gt(ze),this.xs=new $o((l=>Om(l)),zm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function kV(n,e,t,s){return new UV(n,e,t,s)}async function AS(n,e){const t=Ne(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return t.mutationQueue.getAllMutationBatches(s).next((l=>(r=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],d=[];let g=Be();for(const p of r){c.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}for(const p of l){d.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:d})))}))}))}function LV(n,e){const t=Ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,g,p,v){const T=p.batch,S=T.keys();let I=re.resolve();return S.forEach((L=>{I=I.next((()=>v.getEntry(g,L))).next((z=>{const H=p.docVersions.get(L);je(H!==null,48541),z.version.compareTo(H)<0&&(T.applyToRemoteDocument(z,p),z.isValidDocument()&&(z.setReadTime(p.commitVersion),v.addEntry(z)))}))})),I.next((()=>d.mutationQueue.removeMutationBatch(g,T)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let g=Be();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(g=g.add(d.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,r)))}))}function CS(n){const e=Ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function qV(n,e){const t=Ne(n),s=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const d=[];e.targetChanges.forEach(((v,T)=>{const S=r.get(T);if(!S)return;d.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,T))));let I=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?I=I.withResumeToken(jt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,s)),r=r.insert(T,I),(function(z,H,$){return z.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=VV?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(S,I,v)&&d.push(t.Pi.updateTargetData(l,I))}));let g=us(),p=Be();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(OV(l,c,e.documentUpdates).next((v=>{g=v.ks,p=v.qs}))),!s.isEqual(we.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(v)}return re.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,p))).next((()=>g))})).then((l=>(t.Ms=r,l)))}function OV(n,e,t){let s=Be(),r=Be();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=us();return t.forEach(((d,g)=>{const p=l.get(d);g.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(d)),g.isNoDocument()&&g.version.isEqual(we.min())?(e.removeEntry(d,g.readTime),c=c.insert(d,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),c=c.insert(d,g)):ye(Xm,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:r}}))}function zV(n,e){const t=Ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=km),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function BV(n,e){const t=Ne(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return t.Pi.getTargetData(s,e).next((l=>l?(r=l,re.resolve(r)):t.Pi.allocateTargetId(s).next((c=>(r=new $s(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=t.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function gm(n,e,t){const s=Ne(n),r=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!da(c))throw c;ye(Xm,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function dT(n,e,t){const s=Ne(n);let r=we.min(),l=Be();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,v){const T=Ne(g),S=T.xs.get(v);return S!==void 0?re.resolve(T.Ms.get(S)):T.Pi.getTargetData(p,v)})(s,c,Vi(e)).next((d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,d.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?r:we.min(),t?l:Be()))).next((d=>(FV(s,wP(e),d),{documents:d,Qs:l})))))}function FV(n,e,t){let s=n.Os.get(e)||we.min();t.forEach(((r,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class hT{constructor(){this.activeTargetIds=VP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class HV{constructor(){this.Mo=new hT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new hT,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="ConnectivityMonitor";class pT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(mT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(mT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pc=null;function ym(){return Pc===null?Pc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Pc++,"0x"+Pc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh="RestConnection",YV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JV{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===Wc?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,t,s,r,l){const c=ym(),d=this.zo(e,t.toUriEncodedString());ye(Bh,`Sending RPC '${e}' ${c}:`,d,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,r,l);const{host:p}=new URL(d),v=Dm(p);return this.Jo(e,d,g,s,v).then((T=>(ye(Bh,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw ea(Bh,`RPC '${e}' ${c} failed with error: `,T,"url: ",d,"request:",s),T}))}Ho(e,t,s,r,l,c){return this.Go(e,t,s,r,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ca})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,l)=>e[l]=r)),s&&s.headers.forEach(((r,l)=>e[l]=r))}zo(e,t){const s=YV[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class QV extends JV{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,r,l){const c=ym();return new Promise(((d,g)=>{const p=new xE;p.setWithCredentials(!0),p.listenOnce(RE.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case kc.NO_ERROR:const T=p.getResponseJson();ye(tn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case kc.TIMEOUT:ye(tn,`RPC '${e}' ${c} timed out`),g(new ge(se.DEADLINE_EXCEEDED,"Request time out"));break;case kc.HTTP_ERROR:const S=p.getStatus();if(ye(tn,`RPC '${e}' ${c} failed with status:`,S,"response text:",p.getResponseText()),S>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const L=I==null?void 0:I.error;if(L&&L.status&&L.message){const z=(function($){const te=$.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(te)>=0?te:se.UNKNOWN})(L.status);g(new ge(z,L.message))}else g(new ge(se.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new ge(se.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ye(tn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(r);ye(tn,`RPC '${e}' ${c} sending request:`,r),p.send(t,"POST",v,s,15)}))}T_(e,t,s){const r=ym(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=bE(),d=wE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=l.join("");ye(tn,`Creating RPC '${e}' stream ${r}: ${v}`,g);const T=c.createWebChannel(v,g);this.I_(T);let S=!1,I=!1;const L=new KV({Yo:H=>{I?ye(tn,`Not sending because RPC '${e}' stream ${r} is closed:`,H):(S||(ye(tn,`Opening RPC '${e}' stream ${r} transport.`),T.open(),S=!0),ye(tn,`RPC '${e}' stream ${r} sending:`,H),T.send(H))},Zo:()=>T.close()}),z=(H,$,te)=>{H.listen($,(j=>{try{te(j)}catch(le){setTimeout((()=>{throw le}),0)}}))};return z(T,Rl.EventType.OPEN,(()=>{I||(ye(tn,`RPC '${e}' stream ${r} transport opened.`),L.o_())})),z(T,Rl.EventType.CLOSE,(()=>{I||(I=!0,ye(tn,`RPC '${e}' stream ${r} transport closed`),L.a_(),this.E_(T))})),z(T,Rl.EventType.ERROR,(H=>{I||(I=!0,ea(tn,`RPC '${e}' stream ${r} transport errored. Name:`,H.name,"Message:",H.message),L.a_(new ge(se.UNAVAILABLE,"The operation could not be completed")))})),z(T,Rl.EventType.MESSAGE,(H=>{var $;if(!I){const te=H.data[0];je(!!te,16349);const j=te,le=(j==null?void 0:j.error)||(($=j[0])==null?void 0:$.error);if(le){ye(tn,`RPC '${e}' stream ${r} received error:`,le);const fe=le.status;let ae=(function(b){const M=Vt[b];if(M!==void 0)return fS(M)})(fe),P=le.message;ae===void 0&&(ae=se.INTERNAL,P="Unknown error status: "+fe+" with message "+le.message),I=!0,L.a_(new ge(ae,P)),T.close()}else ye(tn,`RPC '${e}' stream ${r} received:`,te),L.u_(te)}})),z(d,IE.STAT_EVENT,(H=>{H.stat===sm.PROXY?ye(tn,`RPC '${e}' stream ${r} detected buffering proxy`):H.stat===sm.NOPROXY&&ye(tn,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Fh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(n){return new ZP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,t,s=1e3,r=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=r,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-s);r>0&&ye("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="PersistentStream";class RS{constructor(e,t,s,r,l,c,d,g){this.Mi=e,this.S_=s,this.b_=r,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new xS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(ls(t.toString()),ls("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===t&&this.G_(s,r)}),(s=>{e((()=>{const r=new ge(se.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(gT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ye(gT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class $V extends RS{constructor(e,t,s,r,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,r,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=tV(this.serializer,e),s=(function(l){if(!("targetChange"in l))return we.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?we.min():c.readTime?Ui(c.readTime):we.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=pm(this.serializer),t.addTarget=(function(l,c){let d;const g=c.target;if(d=um(g)?{documents:sV(l,g)}:{query:oV(l,g).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=mS(l,c.resumeToken);const p=dm(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(we.min())>0){d.readTime=tf(l,c.snapshotVersion.toTimestamp());const p=dm(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const s=aV(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=pm(this.serializer),t.removeTarget=e,this.q_(t)}}class XV extends RS{constructor(e,t,s,r,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,r,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=iV(e.writeResults,e.commitTime),s=Ui(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=pm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>nV(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{}class ZV extends WV{constructor(e,t,s,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ge(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,hm(t,s),r,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(se.UNKNOWN,l.toString())}))}Ho(e,t,s,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,hm(t,s),r,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(se.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class jV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ls(t),this.aa=!1):ye("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko="RemoteStore";class e4{constructor(e,t,s,r,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Xo(this)&&(ye(Ko,"Restarting streams for network reachability change."),await(async function(g){const p=Ne(g);p.Ea.add(4),await Xl(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Ef(p)})(this))}))})),this.Ra=new jV(s,r)}}async function Ef(n){if(Xo(n))for(const e of n.da)await e(!0)}async function Xl(n){for(const e of n.da)await e(!1)}function IS(n,e){const t=Ne(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ep(t)?jm(t):ha(t).O_()&&Zm(t,e))}function Wm(n,e){const t=Ne(n),s=ha(t);t.Ia.delete(e),s.O_()&&wS(t,e),t.Ia.size===0&&(s.O_()?s.L_():Xo(t)&&t.Ra.set("Unknown"))}function Zm(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ha(n).Y_(e)}function wS(n,e){n.Va.Ue(e),ha(n).Z_(e)}function jm(n){n.Va=new QP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ha(n).start(),n.Ra.ua()}function ep(n){return Xo(n)&&!ha(n).x_()&&n.Ia.size>0}function Xo(n){return Ne(n).Ea.size===0}function bS(n){n.Va=void 0}async function t4(n){n.Ra.set("Online")}async function n4(n){n.Ia.forEach(((e,t)=>{Zm(n,e)}))}async function i4(n,e){bS(n),ep(n)?(n.Ra.ha(e),jm(n)):n.Ra.set("Unknown")}async function s4(n,e,t){if(n.Ra.set("Online"),e instanceof hS&&e.state===2&&e.cause)try{await(async function(r,l){const c=l.cause;for(const d of l.targetIds)r.Ia.has(d)&&(await r.remoteSyncer.rejectListen(d,c),r.Ia.delete(d),r.Va.removeTarget(d))})(n,e)}catch(s){ye(Ko,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await sf(n,s)}else if(e instanceof zc?n.Va.Ze(e):e instanceof dS?n.Va.st(e):n.Va.tt(e),!t.isEqual(we.min()))try{const s=await CS(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(p);v&&l.Ia.set(p,v.withResumeToken(g.resumeToken,c))}})),d.targetMismatches.forEach(((g,p)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(jt.EMPTY_BYTE_STRING,v.snapshotVersion)),wS(l,g);const T=new $s(v.target,g,p,v.sequenceNumber);Zm(l,T)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(s){ye(Ko,"Failed to raise snapshot:",s),await sf(n,s)}}async function sf(n,e,t){if(!da(e))throw e;n.Ea.add(1),await Xl(n),n.Ra.set("Offline"),t||(t=()=>CS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ye(Ko,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Ef(n)}))}function NS(n,e){return e().catch((t=>sf(n,t,e)))}async function Sf(n){const e=Ne(n),t=oo(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:km;for(;o4(e);)try{const r=await zV(e.localStore,s);if(r===null){e.Ta.length===0&&t.L_();break}s=r.batchId,r4(e,r)}catch(r){await sf(e,r)}MS(e)&&DS(e)}function o4(n){return Xo(n)&&n.Ta.length<10}function r4(n,e){n.Ta.push(e);const t=oo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function MS(n){return Xo(n)&&!oo(n).x_()&&n.Ta.length>0}function DS(n){oo(n).start()}async function a4(n){oo(n).ra()}async function l4(n){const e=oo(n);for(const t of n.Ta)e.ea(t.mutations)}async function u4(n,e,t){const s=n.Ta.shift(),r=Gm.from(s,e,t);await NS(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await Sf(n)}async function c4(n,e){e&&oo(n).X_&&await(async function(s,r){if((function(c){return YP(c)&&c!==se.ABORTED})(r.code)){const l=s.Ta.shift();oo(s).B_(),await NS(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,r))),await Sf(s)}})(n,e),MS(n)&&DS(n)}async function yT(n,e){const t=Ne(n);t.asyncQueue.verifyOperationInProgress(),ye(Ko,"RemoteStore received new credentials");const s=Xo(t);t.Ea.add(3),await Xl(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ef(t)}async function f4(n,e){const t=Ne(n);e?(t.Ea.delete(2),await Ef(t)):e||(t.Ea.add(2),await Xl(t),t.Ra.set("Unknown"))}function ha(n){return n.ma||(n.ma=(function(t,s,r){const l=Ne(t);return l.sa(),new $V(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:t4.bind(null,n),t_:n4.bind(null,n),r_:i4.bind(null,n),H_:s4.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),ep(n)?jm(n):n.Ra.set("Unknown")):(await n.ma.stop(),bS(n))}))),n.ma}function oo(n){return n.fa||(n.fa=(function(t,s,r){const l=Ne(t);return l.sa(),new XV(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:a4.bind(null,n),r_:c4.bind(null,n),ta:l4.bind(null,n),na:u4.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Sf(n)):(await n.fa.stop(),n.Ta.length>0&&(ye(Ko,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,t,s,r,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=r,this.removalCallback=l,this.deferred=new ss,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,r,l){const c=Date.now()+s,d=new tp(e,t,c,r,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function np(n,e){if(ls("AsyncQueue",`${e}: ${n}`),da(n))return new ge(se.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{static emptySet(e){return new Zr(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ae.comparator(t.key,s.key):(t,s)=>Ae.comparator(t.key,s.key),this.keyedMap=Il(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zr)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=s.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Zr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(){this.ga=new gt(Ae.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):xe(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class oa{constructor(e,t,s,r,l,c,d,g,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,r,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new oa(e,t,Zr.emptySet(t),c,s,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==s[r].type||!t[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class h4{constructor(){this.queries=vT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const r=Ne(t),l=r.queries;r.queries=vT(),l.forEach(((c,d)=>{for(const g of d.Sa)g.onError(s)}))})(this,new ge(se.ABORTED,"Firestore shutting down"))}}function vT(){return new $o((n=>WE(n)),pf)}async function PS(n,e){const t=Ne(n);let s=3;const r=e.query;let l=t.queries.get(r);l?!l.ba()&&e.Da()&&(s=2):(l=new d4,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(r,!0);break;case 1:l.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(c){const d=np(c,`Initialization of query '${Hr(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&ip(t)}async function VS(n,e){const t=Ne(n),s=e.query;let r=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?r=e.Da()?0:1:!l.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function m4(n,e){const t=Ne(n);let s=!1;for(const r of e){const l=r.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(r)&&(s=!0);c.wa=r}}s&&ip(t)}function p4(n,e,t){const s=Ne(n),r=s.queries.get(e);if(r)for(const l of r.Sa)l.onError(t);s.queries.delete(e)}function ip(n){n.Ca.forEach((e=>{e.next()}))}var _m,TT;(TT=_m||(_m={})).Ma="default",TT.Cache="cache";class US{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new oa(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=oa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_m.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e){this.key=e}}class LS{constructor(e){this.key=e}}class g4{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Be(),this.mutatedKeys=Be(),this.eu=ZE(e),this.tu=new Zr(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new _T,r=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=r,d=!1;const g=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((v,T)=>{const S=r.get(v),I=gf(this.query,T)?T:null,L=!!S&&this.mutatedKeys.has(S.key),z=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let H=!1;S&&I?S.data.isEqual(I.data)?L!==z&&(s.track({type:3,doc:I}),H=!0):this.su(S,I)||(s.track({type:2,doc:I}),H=!0,(g&&this.eu(I,g)>0||p&&this.eu(I,p)<0)&&(d=!0)):!S&&I?(s.track({type:0,doc:I}),H=!0):S&&!I&&(s.track({type:1,doc:S}),H=!0,(g||p)&&(d=!0)),H&&(I?(c=c.add(I),l=z?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:c,iu:s,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,r){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,T)=>(function(I,L){const z=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Rt:H})}};return z(I)-z(L)})(v.type,T.type)||this.eu(v.doc,T.doc))),this.ou(s),r=r??!1;const d=t&&!r?this._u():[],g=this.Xa.size===0&&this.current&&!r?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new oa(this.query,e.tu,l,c,e.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new _T,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Be(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new LS(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new kS(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return oa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sp="SyncEngine";class y4{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class _4{constructor(e){this.key=e,this.hu=!1}}class v4{constructor(e,t,s,r,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new $o((d=>WE(d)),pf),this.Iu=new Map,this.Eu=new Set,this.du=new gt(Ae.comparator),this.Au=new Map,this.Ru=new Km,this.Vu={},this.mu=new Map,this.fu=sa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function T4(n,e,t=!0){const s=HS(n);let r;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.lu()):r=await qS(s,e,t,!0),r}async function E4(n,e){const t=HS(n);await qS(t,e,!0,!1)}async function qS(n,e,t,s){const r=await BV(n.localStore,Vi(e)),l=r.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await S4(n,e,l,c==="current",r.resumeToken)),n.isPrimaryClient&&t&&IS(n.remoteStore,r),d}async function S4(n,e,t,s,r){n.pu=(T,S,I)=>(async function(z,H,$,te){let j=H.view.ru($);j.Cs&&(j=await dT(z.localStore,H.query,!1).then((({documents:P})=>H.view.ru(P,j))));const le=te&&te.targetChanges.get(H.targetId),fe=te&&te.targetMismatches.get(H.targetId)!=null,ae=H.view.applyChanges(j,z.isPrimaryClient,le,fe);return ST(z,H.targetId,ae.au),ae.snapshot})(n,T,S,I);const l=await dT(n.localStore,e,!0),c=new g4(e,l.Qs),d=c.ru(l.documents),g=$l.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",r),p=c.applyChanges(d,n.isPrimaryClient,g);ST(n,t,p.au);const v=new y4(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function A4(n,e,t){const s=Ne(n),r=s.Tu.get(e),l=s.Iu.get(r.targetId);if(l.length>1)return s.Iu.set(r.targetId,l.filter((c=>!pf(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await gm(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),t&&Wm(s.remoteStore,r.targetId),vm(s,r.targetId)})).catch(fa)):(vm(s,r.targetId),await gm(s.localStore,r.targetId,!0))}async function C4(n,e){const t=Ne(n),s=t.Tu.get(e),r=t.Iu.get(s.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Wm(t.remoteStore,s.targetId))}async function x4(n,e,t){const s=D4(n);try{const r=await(function(c,d){const g=Ne(c),p=ut.now(),v=d.reduce(((I,L)=>I.add(L.key)),Be());let T,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let L=us(),z=Be();return g.Ns.getEntries(I,v).next((H=>{L=H,L.forEach((($,te)=>{te.isValidDocument()||(z=z.add($))}))})).next((()=>g.localDocuments.getOverlayedDocuments(I,L))).next((H=>{T=H;const $=[];for(const te of d){const j=zP(te,T.get(te.key).overlayedDocument);j!=null&&$.push(new uo(te.key,j,HE(j.value.mapValue),Jn.exists(!0)))}return g.mutationQueue.addMutationBatch(I,p,$,d)})).next((H=>{S=H;const $=H.applyToLocalDocumentSet(T,z);return g.documentOverlayCache.saveOverlays(I,H.batchId,$)}))})).then((()=>({batchId:S.batchId,changes:eS(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(c,d,g){let p=c.Vu[c.currentUser.toKey()];p||(p=new gt(ze)),p=p.insert(d,g),c.Vu[c.currentUser.toKey()]=p})(s,r.batchId,t),await Wl(s,r.changes),await Sf(s.remoteStore)}catch(r){const l=np(r,"Failed to persist write");t.reject(l)}}async function OS(n,e){const t=Ne(n);try{const s=await qV(t.localStore,e);e.targetChanges.forEach(((r,l)=>{const c=t.Au.get(l);c&&(je(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.hu=!0:r.modifiedDocuments.size>0?je(c.hu,14607):r.removedDocuments.size>0&&(je(c.hu,42227),c.hu=!1))})),await Wl(t,s,e)}catch(s){await fa(s)}}function ET(n,e,t){const s=Ne(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const r=[];s.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&r.push(d.snapshot)})),(function(c,d){const g=Ne(c);g.onlineState=d;let p=!1;g.queries.forEach(((v,T)=>{for(const S of T.Sa)S.va(d)&&(p=!0)})),p&&ip(g)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function R4(n,e,t){const s=Ne(n);s.sharedClientState.updateQueryState(e,"rejected",t);const r=s.Au.get(e),l=r&&r.key;if(l){let c=new gt(Ae.comparator);c=c.insert(l,sn.newNoDocument(l,we.min()));const d=Be().add(l),g=new vf(we.min(),new Map,new gt(ze),c,d);await OS(s,g),s.du=s.du.remove(l),s.Au.delete(e),op(s)}else await gm(s.localStore,e,!1).then((()=>vm(s,e,t))).catch(fa)}async function I4(n,e){const t=Ne(n),s=e.batch.batchId;try{const r=await LV(t.localStore,e);BS(t,s,null),zS(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Wl(t,r)}catch(r){await fa(r)}}async function w4(n,e,t){const s=Ne(n);try{const r=await(function(c,d){const g=Ne(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return g.mutationQueue.lookupMutationBatch(p,d).next((T=>(je(T!==null,37113),v=T.keys(),g.mutationQueue.removeMutationBatch(p,T)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,v,d))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>g.localDocuments.getDocuments(p,v)))}))})(s.localStore,e);BS(s,e,t),zS(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Wl(s,r)}catch(r){await fa(r)}}function zS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function BS(n,e,t){const s=Ne(n);let r=s.Vu[s.currentUser.toKey()];if(r){const l=r.get(e);l&&(t?l.reject(t):l.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function vm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||FS(n,s)}))}function FS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Wm(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),op(n))}function ST(n,e,t){for(const s of t)s instanceof kS?(n.Ru.addReference(s.key,e),b4(n,s)):s instanceof LS?(ye(sp,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||FS(n,s.key)):xe(19791,{wu:s})}function b4(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(ye(sp,"New document in limbo: "+t),n.Eu.add(s),op(n))}function op(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ae(lt.fromString(e)),s=n.fu.next();n.Au.set(s,new _4(t)),n.du=n.du.insert(t,s),IS(n.remoteStore,new $s(Vi(Bm(t.path)),s,"TargetPurposeLimboResolution",df.ce))}}async function Wl(n,e,t){const s=Ne(n),r=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((d,g)=>{c.push(s.pu(g,e,t).then((p=>{var v;if((p||t)&&s.isPrimaryClient){const T=p?!p.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(p){r.push(p);const T=$m.As(g.targetId,p);l.push(T)}})))})),await Promise.all(c),s.Pu.H_(r),await(async function(g,p){const v=Ne(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>re.forEach(p,(S=>re.forEach(S.Es,(I=>v.persistence.referenceDelegate.addReference(T,S.targetId,I))).next((()=>re.forEach(S.ds,(I=>v.persistence.referenceDelegate.removeReference(T,S.targetId,I)))))))))}catch(T){if(!da(T))throw T;ye(Xm,"Failed to update sequence numbers: "+T)}for(const T of p){const S=T.targetId;if(!T.fromCache){const I=v.Ms.get(S),L=I.snapshotVersion,z=I.withLastLimboFreeSnapshotVersion(L);v.Ms=v.Ms.insert(S,z)}}})(s.localStore,l))}async function N4(n,e){const t=Ne(n);if(!t.currentUser.isEqual(e)){ye(sp,"User change. New user:",e.toKey());const s=await AS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((g=>{g.reject(new ge(se.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Wl(t,s.Ls)}}function M4(n,e){const t=Ne(n),s=t.Au.get(e);if(s&&s.hu)return Be().add(s.key);{let r=Be();const l=t.Iu.get(e);if(!l)return r;for(const c of l){const d=t.Tu.get(c);r=r.unionWith(d.view.nu)}return r}}function HS(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=OS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=M4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R4.bind(null,e),e.Pu.H_=m4.bind(null,e.eventManager),e.Pu.yu=p4.bind(null,e.eventManager),e}function D4(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=w4.bind(null,e),e}class of{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return kV(this.persistence,new PV,e.initialUser,this.serializer)}Cu(e){return new SS(Qm.mi,this.serializer)}Du(e){return new HV}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}of.provider={build:()=>new of};class P4 extends of{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){je(this.persistence.referenceDelegate instanceof nf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new _V(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new SS((s=>nf.mi(s,t)),this.serializer)}}class Tm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>ET(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=N4.bind(null,this.syncEngine),await f4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new h4})()}createDatastore(e){const t=Tf(e.databaseInfo.databaseId),s=(function(l){return new QV(l)})(e.databaseInfo);return(function(l,c,d,g){return new ZV(l,c,d,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,r,l,c,d){return new e4(s,r,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>ET(this.syncEngine,t,0)),(function(){return pT.v()?new pT:new GV})())}createSyncEngine(e,t){return(function(r,l,c,d,g,p,v){const T=new v4(r,l,c,d,g,p);return v&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const l=Ne(r);ye(Ko,"RemoteStore shutting down."),l.Ea.add(5),await Xl(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Tm.provider={build:()=>new Tm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ls("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro="FirestoreClient";class V4{constructor(e,t,s,r,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=r,this.user=nn.UNAUTHENTICATED,this.clientId=Um.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{ye(ro,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(ye(ro,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ss;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=np(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Hh(n,e){n.asyncQueue.verifyOperationInProgress(),ye(ro,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async r=>{s.isEqual(r)||(await AS(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function AT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await U4(n);ye(ro,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>yT(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,r)=>yT(e.remoteStore,r))),n._onlineComponents=e}async function U4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye(ro,"Using user provided OfflineComponentProvider");try{await Hh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===se.FAILED_PRECONDITION||r.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;ea("Error using user provided cache. Falling back to memory cache: "+t),await Hh(n,new of)}}else ye(ro,"Using default OfflineComponentProvider"),await Hh(n,new P4(void 0));return n._offlineComponents}async function YS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye(ro,"Using user provided OnlineComponentProvider"),await AT(n,n._uninitializedComponentsProvider._online)):(ye(ro,"Using default OnlineComponentProvider"),await AT(n,new Tm))),n._onlineComponents}function k4(n){return YS(n).then((e=>e.syncEngine))}async function JS(n){const e=await YS(n),t=e.eventManager;return t.onListen=T4.bind(null,e.syncEngine),t.onUnlisten=A4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=E4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=C4.bind(null,e.syncEngine),t}function L4(n,e,t={}){const s=new ss;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,g,p){const v=new GS({next:S=>{v.Nu(),c.enqueueAndForget((()=>VS(l,T)));const I=S.docs.has(d);!I&&S.fromCache?p.reject(new ge(se.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&S.fromCache&&g&&g.source==="server"?p.reject(new ge(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),T=new US(Bm(d.path),v,{includeMetadataChanges:!0,qa:!0});return PS(l,T)})(await JS(n),n.asyncQueue,e,t,s))),s.promise}function q4(n,e,t={}){const s=new ss;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,g,p){const v=new GS({next:S=>{v.Nu(),c.enqueueAndForget((()=>VS(l,T))),S.fromCache&&g.source==="server"?p.reject(new ge(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),T=new US(d,v,{includeMetadataChanges:!0,qa:!0});return PS(l,T)})(await JS(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="firestore.googleapis.com",xT=!0;class RT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=QS,this.ssl=xT}else this.host=e.host,this.ssl=e.ssl??xT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ES;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gV)throw new ge(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KS(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ge(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ge(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ge(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Af{constructor(e,t,s,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new YD;switch(s.type){case"firstParty":return new $D(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ge(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=CT.get(t);s&&(ye("ComponentProvider","Removing Datastore"),CT.delete(t),s.terminate())})(this),Promise.resolve()}}function O4(n,e,t,s={}){var p;n=li(n,Af);const r=Dm(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;r&&(_M(`https://${d}`),SM("Firestore",!0)),l.host!==QS&&l.host!==d&&ea("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:d,ssl:r,emulatorOptions:s};if(!Kc(g,c)&&(n._setSettings(g),s.mockUserToken)){let v,T;if(typeof s.mockUserToken=="string")v=s.mockUserToken,T=nn.MOCK_USER;else{v=vM(s.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new ge(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new nn(S)}n._authCredentials=new JD(new ME(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ma(this.firestore,e,this._query)}}class Ct{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}toJSON(){return{type:Ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Jl(t,Ct._jsonSchema))return new Ct(e,s||null,new Ae(lt.fromString(t.referencePath)))}}Ct._jsonSchemaVersion="firestore/documentReference/1.0",Ct._jsonSchema={type:kt("string",Ct._jsonSchemaVersion),referencePath:kt("string")};class eo extends ma{constructor(e,t,s){super(e,t,Bm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new Ae(e))}withConverter(e){return new eo(this.firestore,e,this._path)}}function cs(n,e,...t){if(n=rs(n),DE("collection","path",e),n instanceof Af){const s=lt.fromString(e,...t);return O0(s),new eo(n,null,s)}{if(!(n instanceof Ct||n instanceof eo))throw new ge(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(lt.fromString(e,...t));return O0(s),new eo(n.firestore,null,s)}}function co(n,e,...t){if(n=rs(n),arguments.length===1&&(e=Um.newId()),DE("doc","path",e),n instanceof Af){const s=lt.fromString(e,...t);return q0(s),new Ct(n,null,new Ae(s))}{if(!(n instanceof Ct||n instanceof eo))throw new ge(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(lt.fromString(e,...t));return q0(s),new Ct(n.firestore,n instanceof eo?n.converter:null,new Ae(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="AsyncQueue";class wT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new xS(this,"async_queue_retry"),this._c=()=>{const s=Fh();s&&ye(IT,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Fh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Fh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ss;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!da(e))throw e;ye(IT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ls("INTERNAL UNHANDLED ERROR: ",bT(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=tp.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(r),r}uc(){this.nc&&xe(47125,{Pc:bT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function bT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Wo extends Af{constructor(e,t,s,r){super(e,t,s,r),this.type="firestore",this._queue=new wT,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wT(e),this._firestoreClient=void 0,await e}}}function z4(n,e){const t=typeof n=="object"?n:DD(),s=typeof n=="string"?n:Wc,r=ID(t,"firestore").getImmediate({identifier:s});if(!r._initialized){const l=gM("firestore");l&&O4(r,...l)}return r}function rp(n){if(n._terminated)throw new ge(se.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||B4(n),n._firestoreClient}function B4(n){var s,r,l;const e=n._freezeSettings(),t=(function(d,g,p,v){return new dP(d,g,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,KS(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new V4(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const g=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gn(jt.fromBase64String(e))}catch(t){throw new ge(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Gn(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Jl(e,Gn._jsonSchema))return Gn.fromBase64String(e.bytes)}}Gn._jsonSchemaVersion="firestore/bytes/1.0",Gn._jsonSchema={type:kt("string",Gn._jsonSchemaVersion),bytes:kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ki._jsonSchemaVersion}}static fromJSON(e){if(Jl(e,ki._jsonSchema))return new ki(e.latitude,e.longitude)}}ki._jsonSchemaVersion="firestore/geoPoint/1.0",ki._jsonSchema={type:kt("string",ki._jsonSchemaVersion),latitude:kt("number"),longitude:kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==r[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Jl(e,Li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Li(e.vectorValues);throw new ge(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Li._jsonSchemaVersion="firestore/vectorValue/1.0",Li._jsonSchema={type:kt("string",Li._jsonSchemaVersion),vectorValues:kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=/^__.*__$/;class H4{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new uo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ql(e,this.data,t,this.fieldTransforms)}}class $S{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new uo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function XS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ac:n})}}class ap{constructor(e,t,s,r,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=r,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ap({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return rf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(XS(this.Ac)&&F4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class G4{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Tf(e)}Cc(e,t,s,r=!1){return new ap({Ac:e,methodName:t,Dc:s,path:Zt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xf(n){const e=n._freezeSettings(),t=Tf(n._databaseId);return new G4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function WS(n,e,t,s,r,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,r);cp("Data must be an object, but it was:",c,s);const d=ZS(s,c);let g,p;if(l.merge)g=new bn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const T of l.mergeFields){const S=Em(e,T,t);if(!c.contains(S))throw new ge(se.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);eA(v,S)||v.push(S)}g=new bn(v),p=c.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,p=c.fieldTransforms;return new H4(new vn(d),g,p)}class Rf extends Zl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rf}}class lp extends Zl{_toFieldTransform(e){return new lS(e.path,new Fl)}isEqual(e){return e instanceof lp}}class up extends Zl{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Yl(e.serializer,iS(e.serializer,this.Fc));return new lS(e.path,t)}isEqual(e){return e instanceof up&&this.Fc===e.Fc}}function Y4(n,e,t,s){const r=n.Cc(1,e,t);cp("Data must be an object, but it was:",r,s);const l=[],c=vn.empty();lo(s,((g,p)=>{const v=fp(e,g,t);p=rs(p);const T=r.yc(v);if(p instanceof Rf)l.push(v);else{const S=jl(p,T);S!=null&&(l.push(v),c.set(v,S))}}));const d=new bn(l);return new $S(c,d,r.fieldTransforms)}function J4(n,e,t,s,r,l){const c=n.Cc(1,e,t),d=[Em(e,s,t)],g=[r];if(l.length%2!=0)throw new ge(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(Em(e,l[S])),g.push(l[S+1]);const p=[],v=vn.empty();for(let S=d.length-1;S>=0;--S)if(!eA(p,d[S])){const I=d[S];let L=g[S];L=rs(L);const z=c.yc(I);if(L instanceof Rf)p.push(I);else{const H=jl(L,z);H!=null&&(p.push(I),v.set(I,H))}}const T=new bn(p);return new $S(v,T,c.fieldTransforms)}function K4(n,e,t,s=!1){return jl(t,n.Cc(s?4:3,e))}function jl(n,e){if(jS(n=rs(n)))return cp("Unsupported field value:",e,n),ZS(n,e);if(n instanceof Zl)return(function(s,r){if(!XS(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const l=[];let c=0;for(const d of s){let g=jl(d,r.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,r){if((s=rs(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return iS(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=ut.fromDate(s);return{timestampValue:tf(r.serializer,l)}}if(s instanceof ut){const l=new ut(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:tf(r.serializer,l)}}if(s instanceof ki)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Gn)return{bytesValue:mS(r.serializer,s._byteString)};if(s instanceof Ct){const l=r.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw r.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Jm(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Li)return(function(c,d){return{mapValue:{fields:{[BE]:{stringValue:FE},[Zc]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw d.Sc("VectorValues must only contain numeric values.");return Fm(d.serializer,p)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${ff(s)}`)})(n,e)}function ZS(n,e){const t={};return UE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(n,((s,r)=>{const l=jl(r,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function jS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ut||n instanceof ki||n instanceof Gn||n instanceof Ct||n instanceof Zl||n instanceof Li)}function cp(n,e,t){if(!jS(t)||!PE(t)){const s=ff(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function Em(n,e,t){if((e=rs(e))instanceof Cf)return e._internalPath;if(typeof e=="string")return fp(n,e);throw rf("Field path arguments must be of type string or ",n,!1,void 0,t)}const Q4=new RegExp("[~\\*/\\[\\]]");function fp(n,e,t){if(e.search(Q4)>=0)throw rf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cf(...e.split("."))._internalPath}catch{throw rf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rf(n,e,t,s,r){const l=s&&!s.isEmpty(),c=r!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${s}`),c&&(g+=` in document ${r}`),g+=")"),new ge(se.INVALID_ARGUMENT,d+n+g)}function eA(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,t,s,r,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class $4 extends tA{data(){return super.data()}}function dp(n,e){return typeof e=="string"?fp(n,e):e instanceof Cf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hp{}class W4 extends hp{}function Xs(n,e,...t){let s=[];e instanceof hp&&s.push(e),s=s.concat(t),(function(l){const c=l.filter((g=>g instanceof mp)).length,d=l.filter((g=>g instanceof If)).length;if(c>1||c>0&&d>0)throw new ge(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const r of s)n=r._apply(n);return n}class If extends W4{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new If(e,t,s)}_apply(e){const t=this._parse(e);return nA(e._query,t),new ma(e.firestore,e.converter,cm(e._query,t))}_parse(e){const t=xf(e.firestore);return(function(l,c,d,g,p,v,T){let S;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ge(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){MT(T,v);const L=[];for(const z of T)L.push(NT(g,l,z));S={arrayValue:{values:L}}}else S=NT(g,l,T)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||MT(T,v),S=K4(d,c,T,v==="in"||v==="not-in");return Ut.create(p,v,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ri(n,e,t){const s=e,r=dp("where",n);return If._create(r,s,t)}class mp extends hp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new mp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:ui.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,l){let c=r;const d=l.getFlattenedFilters();for(const g of d)nA(c,g),c=cm(c,g)})(e._query,t),new ma(e.firestore,e.converter,cm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function NT(n,e,t){if(typeof(t=rs(t))=="string"){if(t==="")throw new ge(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XE(e)&&t.indexOf("/")!==-1)throw new ge(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(lt.fromString(t));if(!Ae.isDocumentKey(s))throw new ge(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return K0(n,new Ae(s))}if(t instanceof Ct)return K0(n,t._key);throw new ge(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ff(t)}.`)}function MT(n,e){if(!Array.isArray(n)||n.length===0)throw new ge(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nA(n,e){const t=(function(r,l){for(const c of r)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ge(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Z4{convertValue(e,t="none"){switch(so(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(io(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return lo(e,((r,l)=>{s[r]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,r,l;const t=(l=(r=(s=e.fields)==null?void 0:s[Zc].arrayValue)==null?void 0:r.values)==null?void 0:l.map((c=>At(c.doubleValue)));return new Li(t)}convertGeoPoint(e){return new ki(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=mf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Ol(e));default:return null}}convertTimestamp(e){const t=no(e);return new ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=lt.fromString(e);je(TS(s),9688,{name:e});const r=new zl(s.get(1),s.get(3)),l=new Ae(s.popFirst(5));return r.isEqual(t)||ls(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class bl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yo extends tA{constructor(e,t,s,r,l,c){super(e,t,s,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(dp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Yo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Yo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yo._jsonSchema={type:kt("string",Yo._jsonSchemaVersion),bundleSource:kt("string","DocumentSnapshot"),bundleName:kt("string"),bundle:kt("string")};class Bc extends Yo{data(e={}){return super.data(e)}}class jr{constructor(e,t,s,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new bl(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Bc(this._firestore,this._userDataWriter,s.key,s,new bl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((d=>{const g=new Bc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new bl(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const g=new Bc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new bl(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,v=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:j4(d.type),doc:g,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=jr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Um.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],r=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),r.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function j4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(n){n=li(n,Ct);const e=li(n.firestore,Wo);return L4(rp(e),n._key).then((t=>e6(e,n,t)))}jr._jsonSchemaVersion="firestore/querySnapshot/1.0",jr._jsonSchema={type:kt("string",jr._jsonSchemaVersion),bundleSource:kt("string","QuerySnapshot"),bundleName:kt("string"),bundle:kt("string")};class sA extends Z4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,t)}}function ai(n){n=li(n,ma);const e=li(n.firestore,Wo),t=rp(e),s=new sA(e);return X4(n._query),q4(t,n._query).then((r=>new jr(e,s,n,r)))}function pp(n,e,t){n=li(n,Ct);const s=li(n.firestore,Wo),r=iA(n.converter,e);return bf(s,[WS(xf(s),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Jn.none())])}function oA(n,e,t,...s){n=li(n,Ct);const r=li(n.firestore,Wo),l=xf(r);let c;return c=typeof(e=rs(e))=="string"||e instanceof Cf?J4(l,"updateDoc",n._key,e,t,s):Y4(l,"updateDoc",n._key,e),bf(r,[c.toMutation(n._key,Jn.exists(!0))])}function gp(n){return bf(li(n.firestore,Wo),[new Hm(n._key,Jn.none())])}function yp(n,e){const t=li(n.firestore,Wo),s=co(n),r=iA(n.converter,e);return bf(t,[WS(xf(n.firestore),"addDoc",s._key,r,n.converter!==null,{}).toMutation(s._key,Jn.exists(!1))]).then((()=>s))}function bf(n,e){return(function(s,r){const l=new ss;return s.asyncQueue.enqueueAndForget((async()=>x4(await k4(s),r,l))),l.promise})(rp(n),e)}function e6(n,e,t){const s=t.docs.get(e._key),r=new sA(n);return new Yo(n,r,e._key,s,new bl(t.hasPendingWrites,t.fromCache),e.converter)}function pa(){return new lp("serverTimestamp")}function t6(n){return new up("increment",n)}(function(e,t=!0){(function(r){ca=r})(MD),$c(new kl("firestore",((s,{instanceIdentifier:r,options:l})=>{const c=s.getProvider("app").getImmediate(),d=new Wo(new KD(s.getProvider("auth-internal")),new XD(c,s.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ge(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zl(p.options.projectId,v)})(c,r),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Wr(V0,U0,e),Wr(V0,U0,"esm2020")})();const n6={apiKey:"AIzaSyBUQ8ffhmUa22o0Udzx86PCh9K2-OwI7nQ",authDomain:"roshines-b2d35.firebaseapp.com",projectId:"roshines-b2d35",storageBucket:"roshines-b2d35.firebasestorage.app",messagingSenderId:"435883929042",appId:"1:435883929042:web:7bce7bbdb807681bd46c0b"},i6=EE(n6),rn=z4(i6),an={SUBSCRIBERS:"subscribers",COMMENTS:"comments",LIKES:"likes",POSTS:"posts",REACTIONS:"reactions"},s6=async n=>{try{const e=cs(rn,an.SUBSCRIBERS),t=Xs(e,ri("email","==",n));return(await ai(t)).empty?(await yp(e,{email:n,subscribedAt:pa()}),{isNewSubscriber:!0}):{isNewSubscriber:!1}}catch(e){throw console.error("Error subscribing user:",e),e}},DT=async()=>{try{const n=cs(rn,an.SUBSCRIBERS);return(await ai(n)).size}catch(n){return console.error("Error getting subscribers count:",n),0}},o6=async()=>{try{const n=cs(rn,an.SUBSCRIBERS);return(await ai(n)).docs.map(t=>t.data().email)}catch(n){return console.error("Error getting subscribers:",n),[]}},Al=async(n,e)=>{try{const t=cs(rn,an.COMMENTS),s=Xs(t,ri("postId","==",n)),r=await ai(s);if(r.empty)return[];let l={},c={};try{const v=cs(rn,an.REACTIONS),T=Xs(v,ri("postId","==",n)),S=await ai(T);console.log("Loading reactions for post:",n,"Found:",S.docs.length),S.docs.forEach(I=>{const L=I.data(),z=L.commentId,H=L.reactionType;if(console.log("Processing reaction:",{docId:I.id,commentId:z,reactionType:H,userId:L.userId}),!z||!H){console.warn("Skipping reaction with missing data:",{commentId:z,reactionType:H,data:L});return}l[z]||(l[z]={}),typeof l[z][H]!="number"&&(l[z][H]=0),l[z][H]++,e&&L.userId===e&&(c[z]||(c[z]=[]),c[z].includes(H)||c[z].push(H))}),console.log("Reactions map built:",l),console.log("User reactions map:",c)}catch(v){console.warn("Error loading reactions (continuing without reactions):",v)}const d=r.docs.map(v=>{const T=v.data();let S;return T.userAvatar&&typeof T.userAvatar=="string"&&T.userAvatar.trim()!==""&&(S=T.userAvatar),console.log("Loading comment:",{id:v.id,userName:T.userName,userAvatar:T.userAvatar,processedAvatar:S,hasAvatarField:T.hasOwnProperty("userAvatar"),avatarType:typeof T.userAvatar}),{id:v.id,postId:T.postId,userId:T.userId,userName:T.userName||"Anonymous",userAvatar:S,content:T.content||"",parentId:T.parentId||void 0,createdAt:T.createdAt instanceof ut?T.createdAt.toDate().toISOString():T.createdAt||new Date().toISOString(),reactions:l[v.id]||{},userReactions:c[v.id]||[],replies:[]}}),g=d.filter(v=>!v.parentId),p=d.filter(v=>v.parentId);return g.forEach(v=>{v.replies=p.filter(T=>T.parentId===v.id).sort((T,S)=>new Date(T.createdAt).getTime()-new Date(S.createdAt).getTime())}),g.sort((v,T)=>new Date(T.createdAt).getTime()-new Date(v.createdAt).getTime())}catch(t){return console.error("Error getting comments:",t),[]}},PT=async(n,e,t,s)=>{var r;try{const l=cs(rn,an.COMMENTS),c={postId:n,userId:e.id,userName:e.name,content:t,createdAt:pa()};c.userAvatar=e.avatar&&e.avatar.trim()!==""?e.avatar:null,s&&(c.parentId=s),console.log("Saving comment with data:",{...c,userAvatar:c.userAvatar,userAvatarLength:(r=c.userAvatar)==null?void 0:r.length});const d=await yp(l,c),g=await wf(d);return console.log("Comment saved, retrieved data:",g.data()),{id:d.id,postId:n,userId:e.id,userName:e.name,userAvatar:e.avatar||void 0,content:t,parentId:s,createdAt:new Date().toISOString(),reactions:{},userReactions:[],replies:[]}}catch(l){throw console.error("Error adding comment:",l),l}},r6=async(n,e,t,s)=>{try{if(!n||!e||!t||!s)throw new Error("Missing required parameters for toggleReaction");console.log("Toggle reaction:",{postId:n,commentId:e,userId:t,reactionType:s});const r=cs(rn,an.REACTIONS),l=Xs(r,ri("commentId","==",e),ri("userId","==",t)),c=await ai(l);console.log("User reactions query executed, found:",c.docs.length),c.docs.forEach(g=>{console.log("User reaction doc:",{id:g.id,data:g.data()})});const d=c.docs.find(g=>{const p=g.data();return console.log("Checking reaction:",{docId:g.id,reactionType:p.reactionType,match:p.reactionType===s}),p.reactionType===s});if(d){console.log("Removing existing reaction:",d.id),await gp(d.ref),await new Promise(v=>setTimeout(v,200));const g=Xs(r,ri("commentId","==",e),ri("reactionType","==",s)),p=await ai(g);return console.log("Reaction removed, new count:",p.size),{count:p.size,userHasReacted:!1}}else{console.log("Adding new reaction");const g={postId:n,commentId:e,userId:t,reactionType:s,createdAt:pa()};console.log("Reaction data to save:",g);const p=await yp(r,g);console.log("Reaction document created with ID:",p.id);const v=await wf(p);if(!v.exists())throw new Error("Failed to create reaction document - document does not exist after creation");console.log("Verified reaction document exists:",v.data()),await new Promise(z=>setTimeout(z,500));const T=Xs(r,ri("commentId","==",e),ri("reactionType","==",s)),S=await ai(T);console.log("Reaction added, count query result:",{count:S.size,docs:S.docs.map(z=>({id:z.id,data:z.data()}))});const I=Xs(r,ri("commentId","==",e)),L=await ai(I);return console.log("All reactions for comment:",L.docs.map(z=>({id:z.id,data:z.data()}))),{count:S.size,userHasReacted:!0}}}catch(r){throw console.error("Error toggling reaction:",r),console.error("Error details:",{message:r instanceof Error?r.message:String(r),stack:r instanceof Error?r.stack:void 0}),r}},a6=async(n,e)=>{try{const t=`${n}_${e}`,s=co(rn,an.LIKES,t),r=await wf(s);let l=!1;r.exists()?(await gp(s),l=!1):(await pp(s,{postId:n,userId:e,likedAt:pa()}),l=!0);const c=await rA(n);return await l6(n,c),{liked:l,count:c}}catch(t){throw console.error("Error toggling like:",t),t}},l6=async(n,e)=>{try{const t=co(rn,an.POSTS,n);await oA(t,{likesCount:e})}catch(t){console.error("Error syncing likes count:",t)}},rA=async n=>{try{const e=cs(rn,an.LIKES),t=Xs(e,ri("postId","==",n));return(await ai(t)).size}catch(e){return console.error("Error getting like count:",e),0}},u6=async(n,e)=>{try{const t=await rA(n);if(!e)return{liked:!1,count:t};const s=`${n}_${e}`,r=co(rn,an.LIKES,s);return{liked:(await wf(r)).exists(),count:t}}catch(t){return console.error("Error getting like status:",t),{liked:!1,count:0}}},c6=async n=>{try{for(const e of n){const t=co(rn,an.POSTS,e.id);await pp(t,{...e,updatedAt:pa()})}}catch(e){throw console.error("Error saving posts:",e),e}},f6=async()=>{try{const n=cs(rn,an.POSTS),e=await ai(n);return e.empty?null:e.docs.map(t=>{const s=t.data();return{id:t.id,title:s.title,excerpt:s.excerpt,coverImage:s.coverImage,category:s.category,tags:s.tags||[],blocks:s.blocks||[],author:s.author,publishedAt:s.publishedAt,scheduledAt:s.scheduledAt,status:s.status,views:s.views||0,likesCount:s.likesCount||0}})}catch(n){return console.error("Error getting posts:",n),null}},VT=async n=>{try{const e=co(rn,an.POSTS,n.id);await pp(e,{...n,updatedAt:pa()})}catch(e){throw console.error("Error saving post:",e),e}},d6=async n=>{try{const e=co(rn,an.POSTS,n);await gp(e)}catch(e){throw console.error("Error deleting post:",e),e}},h6=async n=>{try{const e=co(rn,an.POSTS,n);await oA(e,{views:t6(1)})}catch(e){console.error("Error incrementing views:",e)}};class Nf{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const m6=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},Jr={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:m6()},p6=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},g6=async(n,e,t={})=>{const s=await fetch(Jr.origin+n,{method:"POST",headers:t,body:e}),r=await s.text(),l=new Nf(s.status,r);if(s.ok)return l;throw l},y6=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},_6=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},v6=n=>n.webdriver||!n.languages||n.languages.length===0,T6=()=>new Nf(451,"Unavailable For Headless Browser"),E6=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},S6=n=>{var e;return!((e=n.list)!=null&&e.length)||!n.watchVariable},A6=(n,e)=>n instanceof FormData?n.get(e):n[e],C6=(n,e)=>{if(S6(n))return!1;E6(n.list,n.watchVariable);const t=A6(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},x6=()=>new Nf(403,"Forbidden"),R6=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},I6=async(n,e,t)=>{const s=Number(await t.get(n)||0);return e-Date.now()+s},w6=async(n,e,t)=>{if(!e.throttle||!t)return!1;R6(e.throttle,e.id);const s=e.id||n;return await I6(s,e.throttle,t)>0?!0:(await t.set(s,Date.now().toString()),!1)},b6=()=>new Nf(429,"Too Many Requests"),N6=async(n,e,t,s)=>{const r=p6(s),l=r.publicKey||Jr.publicKey,c=r.blockHeadless||Jr.blockHeadless,d=r.storageProvider||Jr.storageProvider,g={...Jr.blockList,...r.blockList},p={...Jr.limitRate,...r.limitRate};return c&&v6(navigator)?Promise.reject(T6()):(y6(l,n,e),_6(t),t&&C6(g,t)?Promise.reject(x6()):await w6(location.pathname,p,d)?Promise.reject(b6()):g6("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:l,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},M6={[Hn.Food]:{color:"bg-emerald-100 text-emerald-800",icon:de.Coffee},[Hn.Travel]:{color:"bg-sky-100 text-sky-800",icon:de.Plane},[Hn.Fashion]:{color:"bg-rose-100 text-rose-800",icon:de.Camera},[Hn.Technology]:{color:"bg-indigo-100 text-indigo-800",icon:de.Smartphone},[Hn.Lifestyle]:{color:"bg-orange-100 text-indigo-800",icon:de.Globe},[Hn.Journal]:{color:"bg-stone-200 text-stone-800",icon:de.FileText}},aA="https://images.unsplash.com/photo-1493770348161-369560ae357d?auto=format&fit=crop&q=80&w=1920",D6="/Roshines/profile.jpeg",P6="/Roshines/signature.png",Cl=[{id:"1",title:"The Art of Slow Living in Kyoto",excerpt:"Discovering peace in the ancient capital through tea ceremonies and hidden gardens.",coverImage:"https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?auto=format&fit=crop&q=80&w=800",category:Hn.Travel,tags:["Japan","Mindfulness","Travel"],author:"Roshni",publishedAt:new Date().toISOString(),status:"published",views:1240,blocks:[{id:"b1",type:Je.Heading1,content:"Arrival in Arashiyama",width:100},{id:"b2",type:Je.Paragraph,content:"The morning mist clung to the mountains as we stepped off the train. Kyoto feels differenttime moves slower here.",width:100},{id:"b3",type:Je.Image,content:"",src:"https://images.unsplash.com/photo-1624253321171-1be53e12f5f4?auto=format&fit=crop&q=80&w=800",width:100},{id:"b4",type:Je.Quote,content:"Beauty lies in the spaces between things.",width:100}]},{id:"2",title:"Minimalist Wardrobe Essentials",excerpt:"Building a capsule wardrobe that lasts a lifetime with just 20 items.",coverImage:"https://images.unsplash.com/photo-1483985988355-763728e1935b?auto=format&fit=crop&q=80&w=800",category:Hn.Fashion,tags:["Style","Sustainable","Minimalism"],author:"Roshni",publishedAt:new Date(Date.now()-864e5).toISOString(),status:"published",views:850,blocks:[{id:"b1",type:Je.Paragraph,content:"Fast fashion is out. Timeless pieces are in.",width:100}]}],V6=({message:n,onClose:e})=>(me.useEffect(()=>{if(n){const t=setTimeout(e,4e3);return()=>clearTimeout(t)}},[n,e]),n?A.jsxs("div",{className:"fixed bottom-6 right-6 z-[100] bg-stone-900 text-white px-6 py-4 rounded-xl shadow-2xl flex items-center gap-3 animate-slide-up",children:[A.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-500 flex items-center justify-center text-stone-900",children:A.jsx(de.Check,{size:16})}),A.jsx("p",{className:"font-medium text-sm",children:n}),A.jsx("button",{onClick:e,className:"ml-2 text-stone-500 hover:text-white",children:A.jsx(de.X,{size:14})})]}):null),U6=({view:n,setView:e,searchQuery:t,setSearchQuery:s,onOpenNewsletter:r,user:l,onLogout:c})=>{const[d,g]=me.useState(!1);return A.jsxs("header",{className:"sticky top-0 z-40 bg-white/80 backdrop-blur border-b border-stone-100 transition-all duration-300",children:[A.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-8",children:[A.jsx("button",{onClick:()=>e({type:"home"}),className:"text-2xl font-serif font-bold tracking-tighter hover:opacity-70 transition-opacity",children:"Ro-shines"}),A.jsxs("nav",{className:"hidden md:flex items-center gap-6 text-sm font-medium text-stone-500",children:[A.jsx("button",{onClick:()=>e({type:"home"}),className:`hover:text-stone-900 transition-colors ${n.type==="home"?"text-stone-900":""}`,children:"Stories"}),A.jsx("button",{onClick:()=>e({type:"about"}),className:`hover:text-stone-900 transition-colors ${n.type==="about"?"text-stone-900":""}`,children:"About"}),(l==null?void 0:l.isAdmin)&&A.jsx("button",{onClick:()=>e({type:"admin-dashboard"}),className:`hover:text-stone-900 transition-colors ${n.type.startsWith("admin")?"text-stone-900":""}`,children:"Dashboard"})]})]}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsxs("div",{className:"relative hidden md:block group",children:[A.jsx(de.Search,{className:"absolute left-3 top-2.5 text-stone-400 group-focus-within:text-stone-600 transition-colors",size:16}),A.jsx("input",{type:"text",placeholder:"Search stories...",value:t,onChange:p=>s(p.target.value),className:"pl-9 pr-4 py-2 bg-stone-100/50 hover:bg-stone-100 focus:bg-white border border-transparent focus:border-stone-200 rounded-full text-sm outline-none transition-all w-48 focus:w-64"})]}),l?A.jsxs("div",{className:"flex items-center gap-3 pl-4 border-l border-stone-200",children:[A.jsx("span",{className:"text-sm font-medium hidden md:block",children:l.name}),A.jsx("button",{onClick:c,className:"text-xs text-stone-500 hover:text-red-600 underline",children:"Logout"})]}):A.jsx("button",{onClick:()=>e({type:"login"}),className:"text-sm font-bold hover:text-stone-600 px-3 py-2",children:"Login"}),A.jsx("button",{onClick:r,className:"bg-stone-900 text-white px-5 py-2 rounded-full text-sm font-bold hover:bg-stone-700 transition-colors shadow-lg hover:shadow-xl hidden md:block",children:"Subscribe"}),A.jsx("button",{className:"md:hidden p-2",onClick:()=>g(!d),children:d?A.jsx(de.X,{}):A.jsx(de.Menu,{})})]})]}),d&&A.jsxs("div",{className:"md:hidden absolute top-full left-0 right-0 bg-white border-b border-stone-100 p-6 flex flex-col gap-4 shadow-xl animate-fade-in",children:[A.jsx("input",{type:"text",placeholder:"Search...",value:t,onChange:p=>s(p.target.value),className:"w-full p-3 bg-stone-50 rounded-xl text-sm mb-2"}),A.jsx("button",{onClick:()=>{e({type:"home"}),g(!1)},className:"text-left font-serif text-xl",children:"Stories"}),A.jsx("button",{onClick:()=>{e({type:"about"}),g(!1)},className:"text-left font-serif text-xl",children:"About"}),(l==null?void 0:l.isAdmin)&&A.jsx("button",{onClick:()=>{e({type:"admin-dashboard"}),g(!1)},className:"text-left font-serif text-xl",children:"Dashboard"}),A.jsx("hr",{className:"border-stone-100"}),A.jsx("button",{onClick:r,className:"w-full bg-stone-900 text-white py-3 rounded-xl font-bold",children:"Subscribe"})]})]})},k6=({onOpenNewsletter:n,onNavigate:e})=>A.jsx("footer",{className:"bg-stone-900 text-stone-400 py-16",children:A.jsxs("div",{className:"max-w-7xl mx-auto px-6 grid md:grid-cols-4 gap-12",children:[A.jsxs("div",{className:"col-span-1 md:col-span-2",children:[A.jsx("h3",{className:"text-2xl font-serif text-white mb-6",children:"Ro-shines"}),A.jsx("p",{className:"max-w-xs mb-8 leading-relaxed",children:"A digital sanctuary for thoughtful living, design, and culture. Crafted with intention."}),A.jsx("p",{className:"text-xs",children:" 2026 Ro-shines. All rights reserved."})]}),A.jsxs("div",{children:[A.jsx("h4",{className:"text-white font-bold mb-6 uppercase tracking-wider text-xs",children:"Explore"}),A.jsxs("ul",{className:"space-y-4 text-sm",children:[A.jsx("li",{children:A.jsx("button",{onClick:()=>e({type:"home"}),className:"hover:text-white cursor-pointer transition-colors text-left",children:"Home"})}),A.jsx("li",{children:A.jsx("button",{onClick:()=>e({type:"about"}),className:"hover:text-white cursor-pointer transition-colors text-left",children:"About"})})]})]}),A.jsxs("div",{children:[A.jsx("h4",{className:"text-white font-bold mb-6 uppercase tracking-wider text-xs",children:"Newsletter"}),A.jsx("p",{className:"text-sm mb-4",children:"Get the latest stories delivered to your inbox."}),A.jsx("button",{onClick:n,className:"text-white underline hover:text-stone-200",children:"Subscribe Now"})]})]})}),L6=({isOpen:n,onClose:e,onSubscribe:t,currentUser:s})=>{const[r,l]=me.useState(""),[c,d]=me.useState("idle"),g=me.useRef(null);if(me.useEffect(()=>{s!=null&&s.email&&l(s.email)},[s,n]),me.useEffect(()=>{n&&d("idle")},[n]),!n)return null;const p=T=>{if(typeof T=="string")return T;if(T!=null&&T.text)return T.text;if(T!=null&&T.message)return T.message;try{return JSON.stringify(T)}catch{return"Unknown error occurred"}},v=async T=>{if(T.preventDefault(),!!r){d("sending");try{(await s6(r)).isNewSubscriber?(await N6("service_gb35lgl","template_7522o7h",{email:r,to_name:"Subscriber",from_name:"Ro-shines",message:"Welcome to the Ro-shines community!"},{publicKey:"DlAJfvPA4KeZpbAB9"}),console.log("Email sent successfully via EmailJS"),t(r),d("success")):d("already_subscribed")}catch(S){console.error("EmailJS Failed:",S);const I=p(S);alert(`Oops! Failed to send confirmation email.
Reason: ${I}`),d("idle")}}};return A.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-stone-900/40 backdrop-blur-sm animate-fade-in",children:A.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full shadow-2xl relative overflow-hidden",children:[A.jsx("button",{onClick:e,className:"absolute right-4 top-4 text-stone-400 hover:text-stone-600",children:A.jsx(de.X,{size:20})}),c==="success"?A.jsxs("div",{className:"text-center animate-fade-in",children:[A.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-600",children:A.jsx(de.Check,{size:32})}),A.jsx("h3",{className:"text-2xl font-serif font-bold text-stone-900 mb-2",children:"Welcome Aboard!"}),A.jsxs("p",{className:"text-stone-500 mb-6",children:["We've sent a warm welcome letter to ",A.jsx("b",{children:r}),"."]})]}):c==="already_subscribed"?A.jsxs("div",{className:"text-center animate-fade-in",children:[A.jsx("div",{className:"w-16 h-16 bg-stone-100 rounded-full flex items-center justify-center mx-auto mb-4 text-stone-600",children:A.jsx(de.Check,{size:32})}),A.jsx("h3",{className:"text-2xl font-serif font-bold text-stone-900 mb-2",children:"Already Subscribed!"}),A.jsx("p",{className:"text-stone-500 mb-6",children:"You're already part of the Ro-shines community. Thank you for your continued support!"}),A.jsx("button",{onClick:e,className:"w-full bg-stone-900 text-white font-bold py-3 rounded-xl hover:bg-stone-800 transition-colors",children:"Close"})]}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"text-center mb-8",children:[A.jsx("div",{className:"w-16 h-16 bg-stone-100 rounded-full flex items-center justify-center mx-auto mb-4 text-stone-900",children:A.jsx(de.Send,{size:24})}),A.jsx("h3",{className:"text-2xl font-serif font-bold text-stone-900 mb-2",children:"Join the Community"}),A.jsx("p",{className:"text-stone-500",children:"Weekly stories, curated links, and design inspiration."})]}),A.jsxs("form",{ref:g,onSubmit:v,children:[A.jsx("input",{type:"email",name:"email",placeholder:"your@email.com",value:r,onChange:T=>l(T.target.value),className:"w-full bg-stone-50 border border-stone-200 rounded-xl px-4 py-3 mb-3 outline-none focus:border-stone-400 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",required:!0,disabled:c==="sending"||!!s}),A.jsx("button",{type:"submit",disabled:c==="sending",className:"w-full bg-stone-900 text-white font-bold py-3 rounded-xl hover:bg-stone-800 transition-transform active:scale-95 disabled:opacity-70 flex items-center justify-center gap-2",children:c==="sending"?A.jsx(A.Fragment,{children:"Processing..."}):"Subscribe"})]})]})]})})},q6="roshni.nekkanti@gmail.com",O6=n=>{try{const t=n.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(t).split("").map(r=>"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(s)}catch(e){return console.error("Failed to decode JWT:",e),null}},z6=({onLogin:n})=>{const[e,t]=me.useState(!1),[s,r]=me.useState(null),l=me.useRef(null),c=me.useRef(n);return me.useEffect(()=>{c.current=n},[n]),me.useEffect(()=>{let d=null,g=null,p=!0;const v=S=>{if(p)try{const I=O6(S.credential);if(!I||!I.email)return;const L=I.email,z=I.name||I.email.split("@")[0],H=I.picture||`https://ui-avatars.com/api/?name=${encodeURIComponent(z)}&background=random`,$=L===q6,te={id:"google-"+I.sub,name:z,email:L,avatar:H,isAdmin:$};c.current(te)}catch(I){console.error("Google Sign-In error:",I)}},T=()=>{p&&typeof window<"u"&&window.google&&(window.google.accounts.id.initialize({client_id:"1034688397355-ppjp8bk2r8lbj7npuati79oj1hfcllo3.apps.googleusercontent.com",callback:v,auto_select:!1,cancel_on_tap_outside:!0}),l.current&&window.google.accounts.id.renderButton(l.current,{type:"standard",theme:"filled_black",size:"large",text:"signin_with",shape:"pill",width:300}))};return window.google?T():(d=setInterval(()=>{window.google&&(d&&clearInterval(d),d=null,T())},100),g=setTimeout(()=>{d&&(clearInterval(d),d=null)},1e4)),()=>{p=!1,d&&clearInterval(d),g&&clearTimeout(g)}},[]),A.jsxs("div",{className:"min-h-[80vh] flex items-center justify-center p-4 relative overflow-hidden",children:[A.jsx("div",{className:"absolute inset-0 z-0",children:A.jsx("img",{src:aA,className:"w-full h-full object-cover opacity-10 blur-sm",alt:""})}),A.jsxs("div",{className:"relative z-10 max-w-sm w-full bg-white/90 backdrop-blur p-8 rounded-3xl shadow-2xl border border-white/50 text-center",children:[A.jsxs("div",{className:"mb-8",children:[A.jsx("h2",{className:"text-3xl font-serif font-bold text-stone-900 mb-2",children:"Welcome"}),A.jsx("p",{className:"text-stone-500",children:"Sign in with your Google account to continue."})]}),s&&A.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm",children:s}),e?A.jsxs("div",{className:"flex items-center justify-center py-4",children:[A.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-stone-900"}),A.jsx("span",{className:"ml-3 text-stone-600",children:"Signing in..."})]}):A.jsx("div",{className:"flex justify-center",children:A.jsx("div",{ref:l})}),A.jsx("p",{className:"mt-8 text-xs text-stone-400",children:"By continuing, you agree to our Terms of Service and Privacy Policy."})]})]})},B6=({aboutImage:n,signatureImage:e})=>A.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-16 animate-fade-in",children:[A.jsxs("div",{className:"flex flex-col md:flex-row gap-16 items-center mb-20",children:[A.jsxs("div",{className:"w-full md:w-1/2 relative group px-8 md:px-0",children:[A.jsx("div",{className:"aspect-[3/4] relative overflow-hidden rounded-t-full border-4 border-white shadow-2xl transition-all duration-500 z-10",children:A.jsx("img",{src:n,alt:"Roshni",className:"w-full h-full object-cover transition-all duration-700 grayscale group-hover:grayscale-0 group-hover:scale-110"})}),A.jsx("div",{className:"absolute -z-10 top-6 -right-4 md:-right-8 w-full h-full rounded-t-full border-2 border-stone-900 hidden md:block transition-transform duration-500 group-hover:translate-x-2 group-hover:-translate-y-2"})]}),A.jsxs("div",{className:"w-full md:w-1/2 md:pl-8 text-center md:text-left",children:[A.jsxs("div",{className:"mb-8",children:[A.jsx("span",{className:"font-serif italic text-2xl text-rose-800 mb-3 block",children:"The Face Behind Ro-shines"}),A.jsx("h1",{className:"text-5xl lg:text-6xl font-serif font-bold text-stone-900 mb-6 leading-tight",children:"Roshni Nekkanti"})]}),A.jsxs("div",{className:"space-y-6 text-lg text-stone-600 font-light leading-relaxed",children:[A.jsx("p",{children:"Welcome to my digital sanctuary. Ro-shines is born from a desire to slow down and document the beautiful details that often go unnoticed in our busy lives."}),A.jsx("p",{children:"By day, I am a Developer crafting elegant AI Agents in the urban hum, but my heart yearns for the stillness of the mountains. This blog is the bridge between those two worlds. When I'm not coding, I am an artist of the intentional life: practicing mindfulness among the butterflies in my garden, exploring nature's quiet pockets, and celebrating sustainable fashion."}),A.jsx("p",{children:"Dive into these pages for travel diaries and conscious living tips, a curated collection viewed with intentionality and balance. May these stories illuminate your path."})]}),A.jsx("div",{className:"mt-10",children:A.jsx("img",{src:e,alt:"Signature",className:"h-12 opacity-50 mx-auto md:mx-0"})})]})]}),A.jsxs("div",{className:"border-t border-stone-200 pt-16",children:[A.jsx("h2",{className:"text-3xl font-serif font-bold text-stone-900 mb-10 text-center md:text-left",children:"Let's Connect"}),A.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[A.jsxs("a",{href:"mailto:roshni.nekkanti@gmail.com",className:"group relative bg-white p-10 rounded-3xl border border-stone-100 shadow-sm hover:shadow-lg hover:border-rose-100 transition-all overflow-hidden text-center md:text-left",children:[A.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:A.jsx(de.Send,{size:80})}),A.jsxs("div",{className:"relative z-10",children:[A.jsx("div",{className:"w-14 h-14 bg-stone-50 rounded-full flex items-center justify-center text-stone-900 mb-6 group-hover:scale-110 transition-transform mx-auto md:mx-0",children:A.jsx(de.Send,{size:24})}),A.jsx("h3",{className:"font-bold text-xl text-stone-900 mb-2",children:"Email Me"}),A.jsx("p",{className:"text-stone-500 mb-6",children:"For collaborations, questions, or just to say hello."}),A.jsx("p",{className:"font-serif text-lg text-stone-900 border-b-2 border-rose-100 inline-block pb-1 group-hover:border-rose-300 transition-colors break-all",children:"roshni.nekkanti@gmail.com"})]})]}),A.jsxs("a",{href:"https://instagram.com/Roshni_Chowdary",target:"_blank",rel:"noopener noreferrer",className:"group relative bg-white p-10 rounded-3xl border border-stone-100 shadow-sm hover:shadow-lg hover:border-rose-100 transition-all overflow-hidden text-center md:text-left",children:[A.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:A.jsx(de.Camera,{size:80})}),A.jsxs("div",{className:"relative z-10",children:[A.jsx("div",{className:"w-14 h-14 bg-stone-50 rounded-full flex items-center justify-center text-stone-900 mb-6 group-hover:scale-110 transition-transform mx-auto md:mx-0",children:A.jsx(de.Camera,{size:24})}),A.jsx("h3",{className:"font-bold text-xl text-stone-900 mb-2",children:"Follow Along"}),A.jsx("p",{className:"text-stone-500 mb-6",children:"Daily inspiration and behind the scenes."}),A.jsx("p",{className:"font-serif text-lg text-stone-900 border-b-2 border-rose-100 inline-block pb-1 group-hover:border-rose-300 transition-colors",children:"@Roshni_Chowdary"})]})]})]})]})]}),F6=({settings:n,onSave:e,onCancel:t})=>{const[s,r]=me.useState(n),l=(c,d)=>{var p;const g=(p=c.target.files)==null?void 0:p[0];if(g){const v=new FileReader;v.onloadend=()=>{r({...s,[d]:v.result})},v.readAsDataURL(g)}};return A.jsxs("div",{className:"max-w-2xl mx-auto px-6 py-12 animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-serif font-bold text-stone-900 mb-8",children:"Site Settings"}),A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-bold text-stone-700 mb-2",children:"Site Name"}),A.jsx("input",{type:"text",value:s.siteName,onChange:c=>r({...s,siteName:c.target.value}),className:"w-full p-3 bg-white border border-stone-200 rounded-xl outline-none focus:border-stone-900"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-bold text-stone-700 mb-2",children:"Hero Image"}),A.jsxs("div",{className:"flex flex-col gap-2",children:[A.jsxs("label",{className:"cursor-pointer bg-white border border-stone-300 text-stone-600 px-4 py-2 rounded-lg hover:bg-stone-50 transition-colors text-sm font-medium w-fit flex items-center gap-2",children:[A.jsx(de.Camera,{size:16})," Upload Hero Image",A.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:c=>l(c,"heroImage")})]}),A.jsx("img",{src:s.heroImage,className:"w-full h-32 object-cover rounded-lg opacity-80 border border-stone-200"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-bold text-stone-700 mb-2",children:"About Page Image"}),A.jsxs("div",{className:"flex flex-col gap-2",children:[A.jsxs("label",{className:"cursor-pointer bg-white border border-stone-300 text-stone-600 px-4 py-2 rounded-lg hover:bg-stone-50 transition-colors text-sm font-medium w-fit flex items-center gap-2",children:[A.jsx(de.Camera,{size:16})," Upload About Image",A.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:c=>l(c,"aboutImage")})]}),A.jsx("img",{src:s.aboutImage,className:"w-full h-32 object-cover rounded-lg opacity-80 border border-stone-200"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-bold text-stone-700 mb-2",children:"Signature Image"}),A.jsxs("div",{className:"flex flex-col gap-2",children:[A.jsxs("label",{className:"cursor-pointer bg-white border border-stone-300 text-stone-600 px-4 py-2 rounded-lg hover:bg-stone-50 transition-colors text-sm font-medium w-fit flex items-center gap-2",children:[A.jsx(de.PenTool,{size:16})," Upload Signature Image",A.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:c=>l(c,"signatureImage")})]}),A.jsx("div",{className:"p-4 border border-stone-200 rounded-lg bg-white w-fit",children:A.jsx("img",{src:s.signatureImage,className:"h-12 opacity-80",alt:"Signature preview"})})]})]}),A.jsxs("div",{className:"flex gap-4 pt-4",children:[A.jsx("button",{onClick:t,className:"flex-1 py-3 text-stone-600 font-medium hover:bg-stone-100 rounded-xl transition-colors",children:"Cancel"}),A.jsx("button",{onClick:()=>e(s),className:"flex-1 py-3 bg-stone-900 text-white font-bold rounded-xl hover:bg-stone-800 transition-colors",children:"Save Changes"})]})]})]})},H6=({isOpen:n,onClose:e,onLogin:t})=>n?A.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-fade-in",children:A.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-sm w-full shadow-2xl text-center relative",children:[A.jsx("button",{onClick:e,className:"absolute right-4 top-4 text-stone-400 hover:text-stone-600",children:A.jsx(de.X,{size:20})}),A.jsx("div",{className:"w-16 h-16 bg-rose-100 text-rose-600 rounded-full flex items-center justify-center mb-6 mx-auto",children:A.jsx(de.Heart,{size:32})}),A.jsx("h3",{className:"text-2xl font-serif font-bold text-stone-900 mb-3",children:"Show Your Love"}),A.jsx("p",{className:"text-stone-500 mb-8",children:"You have to login to shower your love."}),A.jsx("button",{onClick:t,className:"w-full py-3 bg-stone-900 text-white rounded-xl font-bold hover:bg-stone-800 transition-colors shadow-lg",children:"Login"})]})}):null,G6=({postId:n,initialCount:e,initialLiked:t,userId:s,onRestricted:r})=>{const[l,c]=me.useState(t),[d,g]=me.useState(e),[p,v]=me.useState(!1);me.useEffect(()=>{c(t),g(e)},[t,e]);const T=async()=>{if(!s){r();return}const S=!l;c(S),g(I=>S?I+1:Math.max(0,I-1)),S&&v(!0);try{const I=await a6(n,s);g(I.count),c(I.liked)}catch{c(!S),g(L=>S?Math.max(0,L-1):L+1)}};return me.useEffect(()=>{if(p){const S=setTimeout(()=>v(!1),500);return()=>clearTimeout(S)}},[p]),A.jsxs("button",{onClick:T,className:`flex items-center gap-2 px-4 py-2 rounded-full transition-all duration-300 ${l?"bg-rose-50 text-rose-600":"bg-stone-50 text-stone-500 hover:bg-stone-100"}`,children:[A.jsx(de.Sparkles,{size:18,className:`transition-transform duration-300 ${p?"scale-150 rotate-12":""} ${l?"fill-rose-600":""}`}),A.jsx("span",{className:"font-bold text-sm",children:d})]})},Y6=({postId:n,currentUser:e,onRestricted:t})=>{const[s,r]=me.useState([]),[l,c]=me.useState(""),[d,g]=me.useState(null),[p,v]=me.useState({}),[T,S]=me.useState(!1),[I,L]=me.useState({}),[z,H]=me.useState(new Set),$=async()=>{try{const R=await Al(n,e==null?void 0:e.id);r(R)}catch(R){console.error("Error loading comments:",R)}};me.useEffect(()=>{$()},[n,e==null?void 0:e.id]),me.useEffect(()=>{const R=b=>{const M=b.target;!M.closest(".emoji-picker-container")&&!M.closest(".emoji-picker-trigger")&&L({})};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]);const te=async R=>{if(R.preventDefault(),!e){t();return}if(l.trim()){S(!0);try{await PT(n,e,l),await new Promise(M=>setTimeout(M,100));const b=await Al(n,e.id);r(b),c("")}catch(b){console.error("Error adding comment:",b),alert("Failed to post comment. Please try again.")}finally{S(!1)}}},j=async(R,b)=>{if(!e){t();return}if(b.trim()){S(!0);try{await PT(n,e,b,R),await new Promise(D=>setTimeout(D,100));const M=await Al(n,e.id);r(M),v({...p,[R]:""}),g(null)}catch(M){console.error("Error adding reply:",M),alert("Failed to post reply. Please try again.")}finally{S(!1)}}},le=async(R,b)=>{var M;if(!e){t();return}r(D=>D.map(U=>{const V=ne=>{const _e={...ne.reactions||{}},B=[...ne.userReactions||[]],Z=_e[b]||0;return B.includes(b)?(_e[b]=Math.max(0,Z-1),{...ne,reactions:_e,userReactions:B.filter(Re=>Re!==b)}):(_e[b]=Z+1,{...ne,reactions:_e,userReactions:[...B,b]})};return U.id===R?V(U):U.replies&&U.replies.length>0?{...U,replies:U.replies.map(ne=>ne.id===R?V(ne):ne)}:U}));try{console.log("Calling toggleReaction:",{postId:n,commentId:R,userId:e.id,reactionType:b});const D=await r6(n,R,e.id,b);console.log("Toggle reaction result:",D),await new Promise(V=>setTimeout(V,500));const U=await Al(n,e.id);console.log("Reloaded comments:",U.length),console.log("First comment reactions:",(M=U[0])==null?void 0:M.reactions),r(U)}catch(D){console.error("Error toggling reaction:",D),alert(`Failed to save reaction: ${D instanceof Error?D.message:String(D)}`);try{const U=await Al(n,e.id);r(U)}catch(U){console.error("Error reloading comments after reaction error:",U)}}},fe=[{emoji:"",name:"joy"},{emoji:"",name:"heart_eyes"},{emoji:"",name:"open_mouth"},{emoji:"",name:"thumbsup"},{emoji:"",name:"thumbsdown"},{emoji:"",name:"clap"},{emoji:"",name:"fire"},{emoji:"",name:"red_heart"},{emoji:"",name:"sparkles"},{emoji:"",name:"party"},{emoji:"",name:"hundred"}],ae=(R,b=!1)=>{var _e;const M=R.reactions||{},D=R.userReactions||[],U=d===R.id,V=I[R.id]||!1,ne=Object.entries(M).filter(([B,Z])=>typeof Z=="number"&&Z>0).map(([B,Z])=>({emoji:B,count:Z})).sort((B,Z)=>Z.count-B.count);return A.jsx("div",{className:`${b?"ml-12 mt-4 border-l-2 border-stone-100 pl-4":""} animate-fade-in`,children:A.jsxs("div",{className:"flex gap-4",children:[A.jsx("div",{className:"w-10 h-10 rounded-full bg-stone-200 flex items-center justify-center text-stone-500 font-bold overflow-hidden flex-shrink-0 relative",children:R.userAvatar&&!z.has(R.id)?A.jsx("img",{src:R.userAvatar,alt:R.userName,className:"w-full h-full object-cover",loading:"lazy",onError:()=>{H(B=>new Set(B).add(R.id))}}):A.jsx("span",{className:"w-full h-full flex items-center justify-center",children:R.userName.charAt(0)})}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx("span",{className:"font-bold text-stone-900 text-sm",children:R.userName}),A.jsxs("span",{className:"text-xs text-stone-400",children:[" ",new Date(R.createdAt).toLocaleDateString()]})]}),A.jsx("p",{className:"text-stone-600 text-sm leading-relaxed mb-3",children:R.content}),A.jsxs("div",{className:"flex items-center gap-3 mb-3 flex-wrap",children:[A.jsxs("button",{type:"button",onClick:B=>{B.preventDefault(),B.stopPropagation(),le(R.id,"")},className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs transition-colors ${D.includes("")?"bg-rose-100 text-rose-600":"bg-stone-100 text-stone-500 hover:bg-stone-200"}`,children:[A.jsx("span",{className:"text-sm",children:""}),A.jsx("span",{className:"font-medium",children:M[""]||0})]}),A.jsxs("div",{className:"relative emoji-picker-container",children:[A.jsxs("button",{type:"button",className:"emoji-picker-trigger flex items-center gap-1 px-2 py-1 rounded-full text-xs bg-stone-100 text-stone-500 hover:bg-stone-200 transition-colors",onClick:B=>{B.preventDefault(),B.stopPropagation(),L({...I,[R.id]:!V})},children:[A.jsx("span",{className:"text-sm",children:""}),A.jsx("span",{className:"text-xs",children:"React"})]}),V&&A.jsx("div",{className:"absolute bottom-full left-0 mb-2 bg-white border border-stone-200 rounded-xl shadow-xl p-3 z-50 animate-fade-in emoji-picker-container min-w-[200px]",children:A.jsx("div",{className:"grid grid-cols-4 gap-2",children:fe.map(({emoji:B,name:Z})=>A.jsx("button",{type:"button",onClick:ce=>{ce.preventDefault(),ce.stopPropagation(),le(R.id,B),L({...I,[R.id]:!1})},className:`w-10 h-10 flex items-center justify-center rounded-lg text-xl hover:bg-stone-100 transition-colors ${D.includes(B)?"bg-blue-50 ring-2 ring-blue-200":""}`,title:Z,children:B},Z))})})]}),ne.length>0&&A.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:ne.map(({emoji:B,count:Z})=>{const ce=typeof Z=="number"?Z:0;return A.jsxs("button",{type:"button",onClick:Re=>{Re.preventDefault(),Re.stopPropagation(),le(R.id,B)},className:`flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs transition-colors ${D.includes(B)?"bg-blue-100 text-blue-600 border border-blue-200":"bg-stone-50 text-stone-600 hover:bg-stone-100 border border-stone-200"}`,children:[A.jsx("span",{className:"text-sm",children:B}),A.jsx("span",{className:"font-semibold text-xs",children:ce})]},B)})}),!b&&A.jsxs("button",{type:"button",onClick:()=>g(U?null:R.id),className:"flex items-center gap-1 text-xs text-stone-500 hover:text-stone-900 transition-colors",children:[A.jsx(de.MessageCircle,{size:14}),"Reply"]})]}),U&&A.jsxs("div",{className:"mb-4",children:[A.jsx("textarea",{value:p[R.id]||"",onChange:B=>v({...p,[R.id]:B.target.value}),placeholder:"Write a reply...",className:"w-full bg-stone-50 rounded-xl p-3 text-sm outline-none border border-stone-200 focus:border-stone-400 focus:bg-white transition-all resize-none",rows:2}),A.jsxs("div",{className:"flex gap-2 mt-2",children:[A.jsx("button",{onClick:()=>j(R.id,p[R.id]||""),disabled:!((_e=p[R.id])!=null&&_e.trim())||T,className:"bg-stone-900 text-white px-3 py-1.5 rounded-lg text-xs font-bold hover:bg-stone-800 disabled:opacity-50 transition-colors",children:T?"Posting...":"Post Reply"}),A.jsx("button",{onClick:()=>{g(null),v({...p,[R.id]:""})},className:"px-3 py-1.5 text-xs text-stone-500 hover:text-stone-900",children:"Cancel"})]})]}),R.replies&&R.replies.length>0&&A.jsx("div",{className:"mt-4",children:R.replies.map(B=>ae(B,!0))})]})]})},R.id)},P=s.reduce((R,b)=>{var M;return R+1+(((M=b.replies)==null?void 0:M.length)||0)},0);return A.jsxs("div",{className:"mt-16 border-t border-stone-100 pt-12",children:[A.jsxs("h3",{className:"text-2xl font-serif font-bold text-stone-900 mb-8",children:["Discussion (",P,")"]}),A.jsxs("form",{onSubmit:te,className:"mb-12 relative",children:[A.jsx("textarea",{value:l,onChange:R=>c(R.target.value),placeholder:e?"Share your thoughts...":"Please login to comment...",className:"w-full bg-stone-50 rounded-xl p-4 min-h-[120px] outline-none border border-transparent focus:border-stone-200 focus:bg-white transition-all resize-none",disabled:T}),A.jsx("div",{className:"absolute bottom-4 right-4",children:A.jsx("button",{type:"submit",onClick:e?void 0:R=>{R.preventDefault(),t()},disabled:!l.trim()&&!!e||T,className:"bg-stone-900 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-stone-800 disabled:opacity-50 transition-colors",children:T?"Posting...":"Post Comment"})})]}),A.jsx("div",{className:"space-y-8",children:s.map(R=>ae(R))})]})},lA=({post:n,onBack:e,currentUser:t,onRestricted:s,onEdit:r})=>{const[l,c]=me.useState({liked:!1,count:n.likesCount||0});return me.useEffect(()=>{u6(n.id,t==null?void 0:t.id).then(d=>{c({liked:d.liked,count:Math.max(d.count,n.likesCount||0)})}),window.scrollTo(0,0)},[n.id,t]),A.jsxs("article",{className:"min-h-screen bg-white animate-fade-in",children:[A.jsxs("div",{className:"h-[50vh] md:h-[60vh] relative overflow-hidden",children:[A.jsx("img",{src:n.coverImage,alt:n.title,className:"w-full h-full object-cover"}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),A.jsxs("div",{className:"absolute top-6 left-6 z-20 flex gap-2",children:[A.jsx("button",{onClick:e,className:"bg-white/20 backdrop-blur-md text-white p-3 rounded-full hover:bg-white/30 transition-colors",children:A.jsx(de.ChevronLeft,{size:24})}),(t==null?void 0:t.isAdmin)&&r&&A.jsxs("button",{onClick:r,className:"bg-white/20 backdrop-blur-md text-white p-3 rounded-full hover:bg-white/30 transition-colors flex items-center gap-2",children:[A.jsx(de.PenTool,{size:20}),A.jsx("span",{className:"text-sm font-medium hidden md:inline",children:"Edit"})]})]}),A.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 md:p-12 text-white max-w-4xl mx-auto",children:[A.jsx("span",{className:"inline-block px-3 py-1 rounded-md bg-white/20 backdrop-blur text-xs font-bold uppercase tracking-widest mb-4",children:n.category}),A.jsx("h1",{className:"text-4xl md:text-6xl font-serif font-bold mb-6 leading-tight",children:n.title}),A.jsxs("div",{className:"flex items-center gap-6 text-sm font-medium text-white/80",children:[A.jsx("span",{children:n.author}),A.jsx("span",{children:new Date(n.publishedAt).toLocaleDateString()}),A.jsxs("span",{children:[n.views," reads"]})]})]})]}),A.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-12",children:[A.jsx("p",{className:"text-xl md:text-2xl text-stone-600 font-serif leading-relaxed mb-12 italic border-l-4 border-stone-200 pl-6",children:n.excerpt}),A.jsx("div",{className:"max-w-none",children:A.jsx(hE,{blocks:n.blocks,onChange:()=>{},readOnly:!0})}),A.jsxs("div",{className:"mt-16 pt-8 border-t border-stone-100 flex flex-col md:flex-row justify-between items-center gap-6",children:[A.jsx("div",{className:"flex flex-wrap gap-2",children:n.tags.map(d=>A.jsxs("span",{className:"text-xs font-bold text-stone-500 bg-stone-100 px-3 py-1 rounded-full uppercase tracking-wider",children:["#",d]},d))}),A.jsx(G6,{postId:n.id,initialCount:l.count,initialLiked:l.liked,userId:t==null?void 0:t.id,onRestricted:s})]}),A.jsx(Y6,{postId:n.id,currentUser:t,onRestricted:s})]})]})},xl=({posts:n,onPostClick:e,searchQuery:t,heroImage:s})=>{const[r,l]=me.useState("All"),c=me.useMemo(()=>{const d=new Date;let g=n.filter(p=>p.status==="published"&&(!p.scheduledAt||new Date(p.scheduledAt)<=d));if(r!=="All"&&(g=g.filter(p=>p.category===r)),t.trim()){const p=t.toLowerCase();g=g.filter(v=>v.title.toLowerCase().includes(p)||v.excerpt.toLowerCase().includes(p)||v.tags.some(T=>T.toLowerCase().includes(p)))}return g},[n,r,t]);return A.jsxs("main",{className:"min-h-screen",children:[!t&&A.jsxs("section",{className:"relative h-[60vh] flex items-center justify-center overflow-hidden",children:[A.jsx("div",{className:"absolute inset-0 bg-stone-200",children:A.jsx("img",{src:s,className:"w-full h-full object-cover opacity-50 transition-opacity duration-1000",alt:"Hero"})}),A.jsxs("div",{className:"relative z-10 text-center px-4 animate-slide-up",children:[A.jsx("span",{className:"inline-block py-1 px-3 rounded-full bg-white/20 backdrop-blur-sm text-stone-900 text-xs font-semibold uppercase tracking-widest mb-4 border border-white/30",children:"Welcome to Ro-shines"}),A.jsx("h1",{className:"text-5xl md:text-7xl font-serif font-bold text-stone-900 mb-6 drop-shadow-sm",children:"Stories by Roshni"}),A.jsx("p",{className:"text-lg md:text-xl text-stone-700 max-w-2xl mx-auto font-light",children:"Exploring the intersection of design, culture, and conscious living."})]})]}),A.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-16",children:[t&&A.jsx("div",{className:"mb-8 pb-4 border-b border-stone-200",children:A.jsxs("h2",{className:"text-2xl font-serif text-stone-800",children:['Search results for "',A.jsx("span",{className:"italic",children:t}),'"']})}),!t&&A.jsxs("div",{className:"flex flex-wrap gap-4 justify-center mb-16",children:[A.jsx("button",{onClick:()=>l("All"),className:`px-5 py-2 rounded-full text-sm font-medium transition-all duration-300 ${r==="All"?"bg-stone-800 text-white shadow-lg":"bg-white text-stone-500 hover:bg-stone-100"}`,children:"All Stories"}),Object.values(Hn).map(d=>{const g=M6[d].icon;return A.jsxs("button",{onClick:()=>l(d),className:`px-5 py-2 rounded-full text-sm font-medium transition-all duration-300 flex items-center gap-2 ${r===d?"bg-stone-800 text-white shadow-lg":"bg-white text-stone-500 hover:bg-stone-100"}`,children:[A.jsx(g,{size:14})," ",d]},d)})]}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 md:gap-12",children:c.map(d=>A.jsxs("article",{onClick:()=>e(d.id),className:"group cursor-pointer flex flex-col gap-4 animate-fade-in",children:[A.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden rounded-xl bg-stone-100",children:[A.jsx("img",{src:d.coverImage,alt:d.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}),A.jsx("div",{className:"absolute top-4 left-4 bg-white/90 backdrop-blur px-3 py-1 text-xs font-bold uppercase tracking-wider rounded-md shadow-sm",children:d.category})]}),A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-serif font-bold text-stone-900 group-hover:text-rose-900 transition-colors mb-2 leading-tight",children:d.title}),A.jsx("p",{className:"text-stone-500 line-clamp-2 text-sm leading-relaxed mb-3",children:d.excerpt}),A.jsxs("div",{className:"flex items-center gap-2 text-xs text-stone-400 font-medium",children:[A.jsx("span",{children:new Date(d.publishedAt).toLocaleDateString()}),A.jsx("span",{children:""}),A.jsxs("span",{children:[d.views," views"]})]})]})]},d.id))}),c.length===0&&A.jsxs("div",{className:"text-center py-20 text-stone-400",children:[A.jsx(de.Coffee,{size:48,className:"mx-auto mb-4 opacity-50"}),A.jsx("p",{children:"No stories found."}),t&&A.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 text-stone-800 underline",children:"Clear Search"})]})]})]})},J6=({isOpen:n,onClose:e,onConfirm:t})=>n?A.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-fade-in",children:A.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl",children:[A.jsx("div",{className:"w-12 h-12 bg-red-100 text-red-600 rounded-full flex items-center justify-center mb-4 mx-auto",children:A.jsx(de.Trash2,{size:24})}),A.jsx("h3",{className:"text-xl font-bold text-center text-stone-900 mb-2",children:"Delete Story?"}),A.jsx("p",{className:"text-center text-stone-500 text-sm mb-6",children:"Are you sure you want to delete this story? This action cannot be undone."}),A.jsxs("div",{className:"flex gap-3",children:[A.jsx("button",{onClick:e,className:"flex-1 py-2.5 rounded-xl border border-stone-200 text-stone-600 font-medium hover:bg-stone-50",children:"Cancel"}),A.jsx("button",{onClick:t,className:"flex-1 py-2.5 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700",children:"Delete"})]})]})}):null,K6=({posts:n,onEdit:e,onNew:t,onDelete:s,onToggleStatus:r,onOpenSettings:l})=>{const[c,d]=me.useState(null),[g,p]=me.useState("stories"),[v,T]=me.useState([]);me.useEffect(()=>{g==="subscribers"&&o6().then(T)},[g]);const S=()=>{const I=v.join(","),L=encodeURIComponent("Latest Updates from Ro-shines"),z=encodeURIComponent(`Hello,

I just published a new story on the blog! 

Check it out here: `+window.location.origin+`

Warmly,
Roshni`);window.location.href=`mailto:?bcc=${I}&subject=${L}&body=${z}`};return A.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12 animate-fade-in",children:[A.jsx(J6,{isOpen:!!c,onClose:()=>d(null),onConfirm:()=>{c&&s(c),d(null)}}),A.jsxs("div",{className:"flex justify-between items-center mb-10",children:[A.jsxs("div",{children:[A.jsx("h1",{className:"text-3xl font-serif font-bold text-stone-900 mb-1",children:"Dashboard"}),A.jsx("p",{className:"text-stone-500",children:"Manage your stories and site settings."})]}),A.jsxs("div",{className:"flex gap-3",children:[A.jsxs("button",{onClick:l,className:"bg-white border border-stone-200 text-stone-700 px-4 py-2.5 rounded-xl font-bold hover:bg-stone-50 transition-colors flex items-center gap-2",children:[A.jsx(de.Type,{size:18})," Site Settings"]}),A.jsxs("button",{onClick:t,className:"bg-stone-900 text-white px-6 py-2.5 rounded-xl font-bold hover:bg-stone-800 transition-colors flex items-center gap-2 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[A.jsx(de.Plus,{size:18})," New Story"]})]})]}),A.jsxs("div",{className:"flex gap-6 mb-8 border-b border-stone-100",children:[A.jsx("button",{onClick:()=>p("stories"),className:`pb-4 text-sm font-bold transition-colors border-b-2 ${g==="stories"?"text-stone-900 border-stone-900":"text-stone-400 border-transparent hover:text-stone-600"}`,children:"Stories"}),A.jsx("button",{onClick:()=>p("subscribers"),className:`pb-4 text-sm font-bold transition-colors border-b-2 ${g==="subscribers"?"text-stone-900 border-stone-900":"text-stone-400 border-transparent hover:text-stone-600"}`,children:"Subscribers"})]}),g==="stories"?A.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-stone-100 overflow-hidden",children:[A.jsxs("table",{className:"w-full",children:[A.jsx("thead",{className:"bg-stone-50 border-b border-stone-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"text-left py-4 px-6 text-xs font-bold text-stone-500 uppercase tracking-wider",children:"Title"}),A.jsx("th",{className:"text-left py-4 px-6 text-xs font-bold text-stone-500 uppercase tracking-wider",children:"Status"}),A.jsx("th",{className:"text-left py-4 px-6 text-xs font-bold text-stone-500 uppercase tracking-wider",children:"Views"}),A.jsx("th",{className:"text-left py-4 px-6 text-xs font-bold text-stone-500 uppercase tracking-wider",children:"Date"}),A.jsx("th",{className:"text-right py-4 px-6 text-xs font-bold text-stone-500 uppercase tracking-wider",children:"Actions"})]})}),A.jsx("tbody",{className:"divide-y divide-stone-50",children:n.map(I=>A.jsxs("tr",{className:"hover:bg-stone-50/50 transition-colors",children:[A.jsxs("td",{className:"py-4 px-6",children:[A.jsx("div",{className:"font-bold text-stone-900",children:I.title}),A.jsx("div",{className:"text-xs text-stone-400 mt-1",children:I.category})]}),A.jsx("td",{className:"py-4 px-6",children:A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${I.status==="published"?"bg-emerald-500":"bg-amber-500"}`}),A.jsx("span",{className:"text-sm font-medium text-stone-600 capitalize",children:I.status}),A.jsx("button",{onClick:()=>r(I.id),className:`ml-2 text-xs font-bold px-2 py-1 rounded border transition-colors ${I.status==="published"?"border-stone-200 text-stone-500 hover:bg-stone-100":"bg-stone-900 text-white border-transparent hover:bg-stone-800"}`,children:I.status==="published"?"Unpublish":"Publish"})]})}),A.jsx("td",{className:"py-4 px-6 text-sm text-stone-600",children:I.views}),A.jsx("td",{className:"py-4 px-6 text-sm text-stone-600",children:new Date(I.publishedAt).toLocaleDateString()}),A.jsxs("td",{className:"py-4 px-6 text-right space-x-2",children:[A.jsx("button",{onClick:()=>e(I.id),className:"text-stone-400 hover:text-indigo-600 transition-colors p-2 hover:bg-indigo-50 rounded-lg",children:A.jsx(de.PenTool,{size:18})}),A.jsx("button",{onClick:()=>d(I.id),className:"text-stone-400 hover:text-red-600 transition-colors p-2 hover:bg-red-50 rounded-lg",children:A.jsx(de.Trash2,{size:18})})]})]},I.id))})]}),n.length===0&&A.jsx("div",{className:"p-12 text-center text-stone-400",children:A.jsx("p",{children:"No stories yet. Start writing your first one!"})})]}):A.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-stone-100 overflow-hidden p-8",children:[A.jsxs("div",{className:"flex justify-between items-center mb-8",children:[A.jsxs("div",{children:[A.jsxs("h2",{className:"text-xl font-bold text-stone-900",children:["Subscriber List (",v.length,")"]}),A.jsx("p",{className:"text-stone-500 text-sm mt-1",children:"People who have joined your newsletter."})]}),A.jsxs("button",{onClick:S,disabled:v.length===0,className:"bg-stone-900 text-white px-6 py-2.5 rounded-xl font-bold hover:bg-stone-800 transition-colors flex items-center gap-2 disabled:opacity-50",children:[A.jsx(de.Send,{size:16})," Send Update"]})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[v.map((I,L)=>A.jsxs("div",{className:"p-4 border border-stone-100 rounded-xl bg-stone-50 flex items-center gap-3",children:[A.jsx("div",{className:"w-8 h-8 rounded-full bg-stone-200 flex items-center justify-center text-stone-500 font-bold text-xs",children:I.charAt(0).toUpperCase()}),A.jsx("span",{className:"text-stone-600 font-medium text-sm",children:I})]},L)),v.length===0&&A.jsx("div",{className:"col-span-3 text-center text-stone-400 py-10",children:"No subscribers yet."})]})]})]})},Q6=({post:n,onSave:e,onCancel:t})=>{var H;const[s,r]=me.useState(n),[l,c]=me.useState(!1),[d,g]=me.useState(!1),[p,v]=me.useState(""),T=$=>{r({...s,blocks:$})},S=async()=>{if(!s.blocks.length)return;const $=s.blocks.slice(0,3).map(j=>j.content).join(" "),te=await sM($);te&&r({...s,title:te})},I=$=>{$.key==="Enter"&&p.trim()&&($.preventDefault(),s.tags.includes(p.trim())||r({...s,tags:[...s.tags,p.trim()]}),v(""))},L=$=>{r({...s,tags:s.tags.filter(te=>te!==$)})},z=$=>{var j;const te=(j=$.target.files)==null?void 0:j[0];if(te){if(te.size>5*1024*1024){alert("Image is too large. Please use an image under 5MB or provide a URL instead.");return}const le=new Image,fe=new FileReader;fe.onload=ae=>{var P;le.onload=()=>{const R=document.createElement("canvas"),b=R.getContext("2d"),M=1200;let{width:D,height:U}=le;D>U&&D>M?(U=U*M/D,D=M):U>M&&(D=D*M/U,U=M),R.width=D,R.height=U,b==null||b.drawImage(le,0,0,D,U);const V=R.toDataURL("image/jpeg",.7);if(V.length*3/4>800*1024){alert("Image is still too large after compression. Please use a smaller image or provide a URL instead.");return}r({...s,coverImage:V})},le.src=(P=ae.target)==null?void 0:P.result},fe.readAsDataURL(te)}};return d?A.jsxs("div",{className:"fixed inset-0 bg-stone-50 z-50 overflow-y-auto",children:[A.jsxs("div",{className:"sticky top-0 bg-white border-b border-stone-200 px-6 py-4 flex justify-between items-center z-40",children:[A.jsx("h2",{className:"font-bold text-stone-500",children:"Preview Mode"}),A.jsx("button",{onClick:()=>g(!1),className:"bg-stone-900 text-white px-4 py-2 rounded-lg font-bold text-sm",children:"Close Preview"})]}),A.jsx(lA,{post:s,onBack:()=>g(!1),currentUser:null,onRestricted:()=>{}})]}):A.jsxs("div",{className:"flex h-screen overflow-hidden bg-white",children:[A.jsxs("div",{className:`fixed inset-y-0 right-0 w-80 bg-white border-l border-stone-200 transform transition-transform duration-300 z-30 shadow-2xl p-6 overflow-y-auto ${l?"translate-x-0":"translate-x-full"}`,children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h3",{className:"font-serif font-bold text-xl",children:"Post Settings"}),A.jsx("button",{onClick:()=>c(!1),className:"text-stone-400 hover:text-stone-600",children:A.jsx(de.X,{size:20})})]}),A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-2",children:"Publish Date"}),A.jsxs("div",{className:"relative",children:[A.jsx(de.Calendar,{className:"absolute left-3 top-3 text-stone-400",size:16}),A.jsx("input",{type:"datetime-local",value:s.scheduledAt||"",onChange:$=>r({...s,scheduledAt:$.target.value}),className:"w-full pl-10 pr-3 py-2 bg-stone-50 rounded-lg text-sm border border-stone-200 outline-none focus:border-stone-800"})]}),A.jsx("p",{className:"text-xs text-stone-400 mt-1",children:"Leave empty to publish immediately."})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-2",children:"Category"}),A.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.keys(Hn).map($=>A.jsx("button",{onClick:()=>r({...s,category:$}),className:`text-xs font-bold py-2 px-3 rounded-lg border transition-colors ${s.category===$?"bg-stone-900 text-white border-stone-900":"bg-white text-stone-500 border-stone-200 hover:border-stone-400"}`,children:$},$))})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-2",children:"Tags"}),A.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:s.tags.map($=>A.jsxs("span",{className:"inline-flex items-center gap-1 bg-stone-100 px-2 py-1 rounded text-xs font-bold text-stone-600",children:["#",$," ",A.jsx("button",{onClick:()=>L($),children:A.jsx(de.X,{size:10})})]},$))}),A.jsxs("div",{className:"relative",children:[A.jsx(de.Hash,{className:"absolute left-3 top-2.5 text-stone-400",size:14}),A.jsx("input",{type:"text",placeholder:"Add tag + Enter",value:p,onChange:$=>v($.target.value),onKeyDown:I,className:"w-full pl-8 pr-3 py-2 bg-stone-50 rounded-lg text-sm border border-stone-200 outline-none focus:border-stone-800"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-2",children:"Cover Image"}),A.jsxs("div",{className:"flex flex-col gap-3",children:[A.jsxs("div",{className:"flex gap-2",children:[A.jsxs("label",{className:"cursor-pointer bg-white border border-stone-300 text-stone-600 px-3 py-2 rounded-lg hover:bg-stone-50 transition-colors text-xs font-medium flex items-center gap-1",children:[A.jsx(de.Camera,{size:14})," Upload",A.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:z})]}),A.jsx("span",{className:"text-xs text-stone-400 self-center",children:"or"})]}),A.jsx("input",{type:"url",placeholder:"Paste image URL...",value:(H=s.coverImage)!=null&&H.startsWith("data:")?"":s.coverImage||"",onChange:$=>r({...s,coverImage:$.target.value}),className:"w-full px-3 py-2 bg-stone-50 rounded-lg text-xs border border-stone-200 outline-none focus:border-stone-800"}),A.jsx("p",{className:"text-[10px] text-stone-400",children:"Tip: Use image URLs from Unsplash, Imgur, or any public link"}),s.coverImage&&A.jsx("img",{src:s.coverImage,className:"w-full h-32 object-cover rounded-lg bg-stone-100 border border-stone-200"})]})]})]})]}),A.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative transition-all duration-300",style:{marginRight:l?"320px":"0"},children:[A.jsxs("header",{className:"bg-white border-b border-stone-100 px-6 py-4 flex items-center justify-between z-20",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("button",{onClick:t,className:"p-2 hover:bg-stone-100 rounded-full text-stone-500 transition-colors",children:A.jsx(de.ChevronLeft,{size:20})}),A.jsxs("div",{className:"text-sm font-medium text-stone-400",children:[s.status==="draft"?"Draft":"Published",s.scheduledAt&&`  Scheduled: ${new Date(s.scheduledAt).toLocaleDateString()}`]})]}),A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsxs("button",{onClick:()=>g(!0),className:"p-2 text-stone-400 hover:text-stone-900 font-bold text-sm flex items-center gap-1",children:[A.jsx(de.Eye,{size:16})," ",A.jsx("span",{className:"hidden md:inline",children:"Preview"})]}),A.jsxs("button",{onClick:()=>c(!l),className:`p-2 font-bold text-sm flex items-center gap-1 transition-colors ${l?"text-stone-900 bg-stone-100 rounded-lg":"text-stone-400 hover:text-stone-900"}`,children:[A.jsx(de.Layout,{size:16})," ",A.jsx("span",{className:"hidden md:inline",children:"Settings"})]}),A.jsx("div",{className:"h-6 w-px bg-stone-200 mx-2"}),A.jsx("button",{onClick:()=>e({...s,status:"draft"}),className:"px-4 py-2 text-stone-600 font-bold text-sm hover:bg-stone-50 rounded-lg transition-colors",children:"Save Draft"}),A.jsx("button",{onClick:()=>e({...s,status:"published"}),className:"px-5 py-2 bg-stone-900 text-white font-bold text-sm rounded-lg hover:bg-stone-800 transition-colors shadow-lg hover:shadow-xl",children:"Publish"})]})]}),A.jsx("div",{className:"flex-1 overflow-y-auto bg-white scroll-smooth",children:A.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-12",children:[A.jsxs("div",{className:"mb-8 group relative",children:[A.jsx("textarea",{value:s.title,onChange:$=>r({...s,title:$.target.value}),placeholder:"Story Title",className:"w-full text-4xl md:text-5xl font-serif font-bold text-stone-900 placeholder:text-stone-300 outline-none resize-none bg-transparent overflow-hidden",rows:1,onInput:$=>{const te=$.target;te.style.height="auto",te.style.height=te.scrollHeight+"px"}}),A.jsxs("button",{onClick:S,className:"absolute right-0 top-2 opacity-0 group-hover:opacity-100 transition-opacity text-xs font-bold text-purple-600 bg-purple-50 px-2 py-1 rounded-full flex items-center gap-1 hover:bg-purple-100",children:[A.jsx(de.Sparkles,{size:12})," Suggest Title"]})]}),A.jsx("div",{className:"mb-12",children:A.jsx("textarea",{value:s.excerpt,onChange:$=>r({...s,excerpt:$.target.value}),placeholder:"Write a short excerpt...",className:"w-full text-xl text-stone-500 font-serif italic outline-none resize-none bg-transparent",rows:2})}),A.jsx(hE,{blocks:s.blocks,onChange:T})]})})]})]})},$6=()=>{const[n,e]=me.useState({type:"home"}),[t,s]=me.useState([]),[r,l]=me.useState(null),[c,d]=me.useState(""),[g,p]=me.useState(!1),[v,T]=me.useState(!1),[S,I]=me.useState(null),[L,z]=me.useState({siteName:"Ro-shines",heroImage:aA,aboutImage:D6,signatureImage:P6}),H=me.useRef(null);me.useEffect(()=>{(async()=>{try{const D=await f6();if(D&&D.length>0)s(D),localStorage.setItem("roshines_posts",JSON.stringify(D));else{const U=localStorage.getItem("roshines_posts");U?s(JSON.parse(U)):(s(Cl),localStorage.setItem("roshines_posts",JSON.stringify(Cl)),await c6(Cl))}}catch(D){console.error("Error loading posts from Firestore:",D);const U=localStorage.getItem("roshines_posts");U?s(JSON.parse(U)):(s(Cl),localStorage.setItem("roshines_posts",JSON.stringify(Cl)))}})();const b=localStorage.getItem("roshines_settings");b&&z(JSON.parse(b));const M=localStorage.getItem("roshines_user");if(M)try{l(JSON.parse(M))}catch{console.error("Failed to restore user session"),localStorage.removeItem("roshines_user")}},[]),me.useEffect(()=>{t.length>0&&localStorage.setItem("roshines_posts",JSON.stringify(t))},[t]),me.useEffect(()=>{if(n.type==="post"){const R=n.postId;H.current!==R&&(s(b=>b.map(M=>M.id===R?{...M,views:(M.views||0)+1}:M)),H.current=R,h6(R).catch(b=>console.error("Failed to save view count:",b)))}else H.current=null},[n]);const $=R=>{l(R),localStorage.setItem("roshines_user",JSON.stringify(R)),e({type:"home"})},te=()=>{l(null),localStorage.removeItem("roshines_user"),e({type:"home"})},j=R=>{z(R),localStorage.setItem("roshines_settings",JSON.stringify(R)),e({type:"admin-dashboard"})},le=async R=>{const b=t.find(D=>D.id===R.id),M=(b==null?void 0:b.status)!=="published"&&R.status==="published";s(b?t.map(D=>D.id===R.id?R:D):[R,...t]);try{await VT(R)}catch(D){console.error("Error saving post to Firestore:",D)}if(e({type:"admin-dashboard"}),M){const D=await DT();I(`Newsletter sent to ${D} subscribers!`)}},fe=async R=>{s(t.filter(b=>b.id!==R));try{await d6(R)}catch(b){console.error("Error deleting post from Firestore:",b)}},ae=async R=>{const b=t.find(M=>M.id===R);if(b){const M=b.status==="published"?"draft":"published",D={...b,status:M};s(t.map(U=>U.id===R?D:U));try{await VT(D)}catch(U){console.error("Error updating post status in Firestore:",U)}if(M==="published"){const U=await DT();I(`Newsletter sent to ${U} subscribers!`)}}},P=()=>{switch(n.type){case"home":return A.jsx(xl,{posts:t,onPostClick:M=>e({type:"post",postId:M}),searchQuery:c,heroImage:L.heroImage});case"post":const R=t.find(M=>M.id===n.postId);return R?A.jsx(lA,{post:R,onBack:()=>e({type:"home"}),currentUser:r,onRestricted:()=>T(!0),onEdit:()=>e({type:"admin-editor",postId:R.id})}):A.jsx("div",{children:"Post not found"});case"about":return A.jsx(B6,{aboutImage:L.aboutImage,signatureImage:L.signatureImage});case"login":case"register":return A.jsx(z6,{onLogin:$});case"admin-dashboard":return r!=null&&r.isAdmin?A.jsx(K6,{posts:t,onEdit:M=>e({type:"admin-editor",postId:M}),onNew:()=>e({type:"admin-editor"}),onDelete:fe,onToggleStatus:ae,onOpenSettings:()=>e({type:"admin-settings"})}):A.jsx(xl,{posts:t,onPostClick:M=>e({type:"post",postId:M}),searchQuery:c,heroImage:L.heroImage});case"admin-editor":if(!(r!=null&&r.isAdmin))return A.jsx(xl,{posts:t,onPostClick:M=>e({type:"post",postId:M}),searchQuery:c,heroImage:L.heroImage});const b=n.postId?t.find(M=>M.id===n.postId):{id:Math.random().toString(36).substr(2,9),title:"",excerpt:"",coverImage:"https://images.unsplash.com/photo-1507646227500-4d389b0012be?auto=format&fit=crop&q=80&w=1200",category:Hn.Lifestyle,tags:[],blocks:[{id:"1",type:Je.Paragraph,content:"",width:100}],author:r.name,publishedAt:new Date().toISOString(),status:"draft",views:0};return A.jsx(Q6,{post:b,onSave:le,onCancel:()=>e({type:"admin-dashboard"})});case"admin-settings":return r!=null&&r.isAdmin?A.jsx(F6,{settings:L,onSave:j,onCancel:()=>e({type:"admin-dashboard"})}):A.jsx(xl,{posts:t,onPostClick:M=>e({type:"post",postId:M}),searchQuery:c,heroImage:L.heroImage});default:return A.jsx(xl,{posts:t,onPostClick:M=>e({type:"post",postId:M}),searchQuery:c,heroImage:L.heroImage})}};return A.jsxs("div",{className:"min-h-screen bg-stone-50 text-stone-800 font-sans selection:bg-rose-100 selection:text-rose-900",children:[A.jsx(V6,{message:S,onClose:()=>I(null)}),n.type!=="admin-editor"&&A.jsx(U6,{view:n,setView:e,searchQuery:c,setSearchQuery:d,onOpenNewsletter:()=>p(!0),user:r,onLogout:te}),P(),n.type!=="admin-editor"&&A.jsx(k6,{onOpenNewsletter:()=>p(!0),onNavigate:e}),A.jsx(L6,{isOpen:g,onClose:()=>p(!1),onSubscribe:R=>console.log("Subscribed:",R),currentUser:r}),A.jsx(H6,{isOpen:v,onClose:()=>T(!1),onLogin:()=>{T(!1),e({type:"login"})}})]})},uA=document.getElementById("root");if(!uA)throw new Error("Could not find root element to mount to");const X6=XC.createRoot(uA);X6.render(A.jsx(kT.StrictMode,{children:A.jsx($6,{})}));
